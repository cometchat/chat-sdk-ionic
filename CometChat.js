!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,function(){return function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=34)}([function(t,f,T){"use strict";(function(n){var t=this&&this.__awaiter||function(t,i,a,c){return new(a||(a=Promise))(function(n,e){function r(t){try{s(c.next(t))}catch(t){e(t)}}function o(t){try{s(c.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof a?e:new a(function(t){t(e)})).then(r,o)}s((c=c.apply(t,i||[])).next())})},r=this&&this.__generator||function(n,r){var o,s,i,t,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(i=2&e[0]?s.return:e[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,e[1])).done)return i;switch(s=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){a.label=e[1];break}if(6===e[0]&&a.label<i[1]){a.label=i[1],i=e;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(e);break}i[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],s=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(f,"__esModule",{value:!0}),f.validateQuestion=f.updatePropertiesWithDynamicValue=f.getCallingComponentVersion=f.isCallingComponentInstalled=f.validateConversationType=f.validateUpdateUser=f.validateCreateUser=f.validateMessage=f.validateChatType=f.validateMsgId=f.validateArray=f.validateHideMessagesFromBlockedUsers=f.validateId=f.validateCreateGroup=f.validateJoinGroup=f.validateUpdateGroup=f.validateScope=f.isAudio=f.isVideo=f.isImage=f.getUpdatedSettings=f.getAppSettings=f.getCurrentTime=f.Logger=f.createUidFromJid=f.format=f.getOrdinalSuffix=f.isFalsy=f.isTruthy=f.isObject=f.getJidHost=f.getChatHost=void 0;var o=T(16),i=T(1),s=T(6),a=T(2),c=T(18),E=T(19),u=T(21),p=T(4),e=T(14),l=(T(33).Plugins.Calling,T(22));function d(t){return null!=t&&("string"==typeof t&&(t=t.trim()),"object"==typeof t&&0===Object.keys(t).length&&(t=void 0)),["",0,"0",!1,null,"null",void 0,"undefined"].includes(t)}function S(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return t.split("%s").reduce(function(t,e,n){return t+e+(r[n]||"")},"")}f.getChatHost=function(t){return t[i.APP_SETTINGS.KEYS.CHAT_HOST_OVERRIDE]?t[i.APP_SETTINGS.KEYS.CHAT_HOST_OVERRIDE]:t[i.APP_SETTINGS.KEYS.CHAT_HOST_APP_SPECIFIC]?t[i.APP_SETTINGS.KEYS.CHAT_HOST_APP_SPECIFIC]:t[i.APP_SETTINGS.KEYS.CHAT_HOST]},f.getJidHost=function(t){return t[i.APP_SETTINGS.KEYS.JID_HOST_OVERRIDE]?t[i.APP_SETTINGS.KEYS.JID_HOST_OVERRIDE]:t[i.APP_SETTINGS.KEYS.CHAT_HOST]},f.isObject=function(t){return t instanceof Object&&t.constructor===Object},f.isTruthy=function(t){return[!0,1,"1","true","TRUE"].includes(t)},f.isFalsy=d,f.getOrdinalSuffix=function(t){var e=t%10,n=t%100;return 1==e&&11!=n?t+"st":2==e&&12!=n?t+"nd":3==e&&13!=n?t+"rd":t+"th"},f.format=S,f.createUidFromJid=function(t){return t.substring(t.lastIndexOf("]")+1,t.lastIndexOf("@"))};var h=function(){function t(){}return t.log=function(t,e){},t.error=function(t,e){},t.info=function(t,e){},t}();function C(){return new Promise(function(e,n){s.makeApiCall("appSettings").then(function(t){o.LocalStorage.getInstance().set(i.LOCAL_STORE.KEY_APP_SETTINGS,t.data),t.data.MODE&&p.CometChat.setMode(t.data.MODE),e(t.data)},function(t){n(new a.CometChatException(t.error))})})}f.Logger=h,f.getCurrentTime=function(){return(new Date).getTime()},f.getAppSettings=function(){return new Promise(function(e,n){o.LocalStorage.getInstance().get(i.LOCAL_STORE.KEY_APP_SETTINGS).then(function(t){d(t)?C().then(function(t){e(t)},function(t){n(t)}):e(t)},function(t){n(t)})})},f.getUpdatedSettings=C,f.isImage=function(t){var e;return t.type&&t.type.toLowerCase().includes("image")&&(e=!0),e},f.isVideo=function(t){var e;return t.type&&t.type.toLowerCase().includes("video")&&(e=!0),e},f.isAudio=function(t){var e;return t.type&&t.type.toLowerCase().includes("audio")&&(e=!0),e},f.validateScope=function(t){return typeof t!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"SCOPE","SCOPE","Scope"))):d(t)?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID),"SCOPE","SCOPE","scope","scope"))):t!=p.CometChat.GROUP_MEMBER_SCOPE.ADMIN&&t!=p.CometChat.GROUP_MEMBER_SCOPE.MODERATOR&&t!=p.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT?new a.CometChatException(i.GroupErrors.INVALID_SCOPE):void 0},f.validateUpdateGroup=function(t){return t.hasOwnProperty(i.GroupConstants.KEYS.GUID)?typeof t[i.GroupConstants.KEYS.GUID]!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","GUID"))):d(t[i.GroupConstants.KEYS.GUID])?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GUID","GUID","GUID","GUID"))):t.hasOwnProperty(i.GroupConstants.KEYS.NAME)&&""===t[i.GroupConstants.KEYS.NAME]?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING),"GROUP_NAME","GROUP_NAME","Group name"))):void 0:new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY),"GUID","GUID","GUID","GUID")))},f.validateJoinGroup=function(t,e,n){if(typeof t==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.OBJECT){if(!t.hasOwnProperty(i.GroupConstants.KEYS.GUID))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY),"GUID","GUID","GUID","GUID")));if(typeof t[i.GroupConstants.KEYS.GUID]!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","GUID")));if(d(t[i.GroupConstants.KEYS.GUID]))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GUID","GUID","GUID","GUID")));if(!t.hasOwnProperty(i.GroupConstants.KEYS.TYPE))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY),"GROUP_TYPE","GROUP_TYPE","Group type","Group type")));if(typeof t[i.GroupConstants.KEYS.TYPE]!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"GROUP_TYPE","GROUP_TYPE","Group type")));if(d(t[i.GroupConstants.KEYS.TYPE]))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GROUP_TYPE","GROUP_TYPE","type","type")));if(t[i.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PUBLIC&&t[i.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PASSWORD&&t[i.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PROTECTED&&t[i.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PRIVATE)return new a.CometChatException(i.GroupErrors.INVALID_GROUP_TYPE);if(t[i.GroupConstants.KEYS.TYPE].toLowerCase()==p.CometChat.GROUP_TYPE.PASSWORD){if(!t.hasOwnProperty(i.GroupConstants.KEYS.PASSWORD))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.PASSWORD_COMPULSORY),"PASSWORD","PASSWORD")));if(typeof t[i.GroupConstants.KEYS.PASSWORD]!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"PASSWORD","PASSWORD","Password")));if(d(t[i.GroupConstants.KEYS.PASSWORD]))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"PASSWORD","PASSWORD","password","password")))}}else{if(void 0!==t){if(typeof t!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","GUID")));if(d(t))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GUID","GUID","GUID","GUID")))}if(void 0!==e){if(typeof e!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"GROUP_TYPE","GROUP_TYPE","Group type")));if(d(e))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GROUP_TYPE","GROUP_TYPE","type","type")));if(e.toLowerCase()!=p.CometChat.GROUP_TYPE.PUBLIC&&e.toLowerCase()!=p.CometChat.GROUP_TYPE.PASSWORD&&e.toLowerCase()!=p.CometChat.GROUP_TYPE.PROTECTED&&e.toLowerCase()!=p.CometChat.GROUP_TYPE.PRIVATE)return new a.CometChatException(i.GroupErrors.INVALID_GROUP_TYPE);if(e.toLowerCase()==p.CometChat.GROUP_TYPE.PASSWORD){if(typeof n!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"PASSWORD","PASSWORD","Password")));if(d(n))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"PASSWORD","PASSWORD","password","password")))}}}},f.validateCreateGroup=function(t){if(!t.hasOwnProperty(i.GroupConstants.KEYS.GUID))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY),"GUID","GUID","GUID","GUID")));if(typeof t[i.GroupConstants.KEYS.GUID]!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","GUID")));if(d(t[i.GroupConstants.KEYS.GUID]))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GUID","GUID","GUID","GUID")));if(!t.hasOwnProperty(i.GroupConstants.KEYS.NAME))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY),"GROUP_NAME","GROUP_NAME","Group name","Group name")));if(typeof t[i.GroupConstants.KEYS.NAME]!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"GROUP_NAME","GROUP_NAME","Group name")));if(d(t[i.GroupConstants.KEYS.NAME]))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GROUP_NAME","GROUP_NAME","name","name")));if(!t.hasOwnProperty(i.GroupConstants.KEYS.TYPE))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY),"GROUP_TYPE","GROUP_TYPE","Group type","Group type")));if(typeof t[i.GroupConstants.KEYS.TYPE]!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"GROUP_TYPE","GROUP_TYPE","Group type")));if(d(t[i.GroupConstants.KEYS.TYPE]))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GROUP_TYPE","GROUP_TYPE","type","type")));if(t[i.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PUBLIC&&t[i.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PASSWORD&&t[i.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PROTECTED&&t[i.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PRIVATE)return new a.CometChatException(i.GroupErrors.INVALID_GROUP_TYPE);if(t[i.GroupConstants.KEYS.TYPE].toLowerCase()==p.CometChat.GROUP_TYPE.PASSWORD){if(!t.hasOwnProperty(i.GroupConstants.KEYS.PASSWORD))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.PASSWORD_COMPULSORY),"PASSWORD","PASSWORD")));if(typeof t[i.GroupConstants.KEYS.PASSWORD]!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"PASSWORD","PASSWORD","Password")));if(d(t[i.GroupConstants.KEYS.PASSWORD]))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"PASSWORD","PASSWORD","password","password")))}if(t.hasOwnProperty(i.GroupConstants.KEYS.TAGS)){if(!Array.isArray(t[i.GroupConstants.KEYS.TAGS]))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_AN_ARRAY),"GROUP_TAGS","GROUP_TAGS","Group tags")));if(0===t[i.GroupConstants.KEYS.TAGS].length)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.EMPTY_ARRAY),"GROUP_TAGS","GROUP_TAGS","Group tags")))}},f.validateId=function(t,e){if("user"===e){if(typeof t!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"UID","UID","UID")));if(d(t))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID),"UID","UID","UID","UID")))}if("group"===e){if(typeof t!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","GUID")));if(d(t))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID),"GUID","GUID","GUID","GUID")))}if("bot"===e){if(typeof t!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"BOT_ID","BOT_ID","BOT_ID")));if(d(t))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID),"BOT_ID","BOT_ID","BOT_ID","BOT_ID")))}},f.validateHideMessagesFromBlockedUsers=function(t){if(typeof t!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_BOOLEAN),"HIDE_MESSAGES_FROM_BLOCKED_USERS","HIDE_MESSAGES_FROM_BLOCKED_USERS","hideMessagesFromBlockedUsers")))},f.validateArray=function(t,e){var n="List should be an array.";return n="blockUsers"===e?"blockUsers() method accepts an array of users.":"unblockUsers"===e?"unblockUsers() method accepts an array of users.":"groupMembers"===e?"addMembersToGroup() method accepts members list as an array of users.":"addMembersToGroup() method accepts bannedMembers list as an array of users.",typeof t!=i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.OBJECT?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_ARRAY),"USER_LIST","USER_LIST",n))):Array.isArray(t)?void 0:new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_ARRAY),"USER_LIST","USER_LIST",n)))},f.validateMsgId=function(t){return isNaN(t)?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_NUMBER),"MESSAGE_ID","MESSAGE_ID","Message Id"))):d(t)?new a.CometChatException(e.ERRORS.PARAMETER_MISSING):void 0},f.validateChatType=function(t){return typeof t!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"RECEIVER_TYPE","RECEIVER_TYPE","Receiver type"))):d(t)?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID),"RECEIVER_TYPE","RECEIVER_TYPE","receiver type","receiver type"))):t!=i.MessageConstatnts.RECEIVER_TYPE.GROUP&&t!=i.MessageConstatnts.RECEIVER_TYPE.USER?new a.CometChatException(i.MessageErrors.INVALID_RECEIVER_TYPE):void 0},f.validateMessage=function(t){var e=t;if(typeof e.getReceiverId()!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"RECEIVER_ID","RECEIVER_ID","Receiver Id")));if(d(e.getReceiverId()))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID),"RECEIVER_ID","RECEIVER_ID","receiver id","receiver id")));if(typeof e.getReceiverType()!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"RECEIVER_TYPE","RECEIVER_TYPE","Receiver Type")));if(d(e.getReceiverType()))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID),"RECEIVER_TYPE","RECEIVER_TYPE","receiver type","receiver type")));if(e.getReceiverType()!=i.MessageConstatnts.RECEIVER_TYPE.GROUP&&e.getReceiverType()!=i.MessageConstatnts.RECEIVER_TYPE.USER)return new a.CometChatException(i.MessageErrors.INVALID_RECEIVER_TYPE);if(t instanceof c.TextMessage){var n=t;if(typeof n.getText()!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"MESSAGE_TEXT","MESSAGE_TEXT","Message text")));if(""===n.getText().trim())return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING),"MESSAGE_TEXT","MESSAGE_TEXT","Message text")))}if(t instanceof E.MediaMessage){var r=t;if(r.getData()&&r.getData().hasOwnProperty("attachments"))for(var o=r.getAttachments(),s=0;s<o.length;s++){if(!o[s].getExtension())return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MISSING_KEY),"extension","Attachment")));if(!o[s].getMimeType())return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MISSING_KEY),"mimeType","Attachment")));if(!o[s].getName())return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MISSING_KEY),"name","Attachment")));if(!o[s].getUrl())return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MISSING_KEY),"url","Attachment")))}if(r.hasOwnProperty("files"))for(s=0;s<r.files.length;s++)if(r.files[s].hasOwnProperty("file")){if(!(r.files[s].file instanceof Blob))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_BLOB),"MEDIA_OBJECT","MEDIA_OBJECT","Media object")))}else if(!(r.files[s]instanceof Blob))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_BLOB),"MEDIA_OBJECT","MEDIA_OBJECT","Media object")))}if(t instanceof u.CustomMessage&&d(t.getCustomData()))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID),"CUSTOM_DATA","CUSTOM_DATA","custom data","custom data")));if(t instanceof l.InteractiveMessage&&d(t.getInteractiveData()))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID),"INTERACTIVE_DATA","INTERACTIVE_DATA","interactive data","interactive data")))},f.validateCreateUser=function(t){if(!t.hasOwnProperty(i.UserConstants.UID))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY),"UID","UID","UID","UID")));if(typeof t[i.UserConstants.UID]!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"UID","UID","UID")));if(d(t[i.UserConstants.UID]))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_USER_PROPERTY),"UID","UID","UID","UID")));if(!t.hasOwnProperty(i.UserConstants.NAME))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY),"USER_NAME","USER_NAME","User name","User name")));if(typeof t[i.UserConstants.NAME]!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"USER_NAME","USER_NAME","User name")));if(d(t[i.UserConstants.NAME]))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_USER_PROPERTY),"USER_NAME","USER_NAME","name","name")));if(t.hasOwnProperty(i.UserConstants.AVATAR)&&""===t[i.UserConstants.AVATAR])return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING),"USER_AVATAR","USER_AVATAR","User avatar")));if(t.hasOwnProperty(i.UserConstants.META_DATA)&&""===t[i.UserConstants.META_DATA])return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING),"USER_METADATA","USER_METADATA","User metadata")));if(t.hasOwnProperty(i.UserConstants.LINK)&&""===t[i.UserConstants.LINK])return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING),"USER_LINK","USER_LINK","User link")));if(t.hasOwnProperty(i.UserConstants.STATUS_MESSAGE)&&""===t[i.UserConstants.STATUS_MESSAGE])return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING),"USER_STATUS_MESSAGE","USER_STATUS_MESSAGE","User status message")));if(t.hasOwnProperty(i.UserConstants.ROLE)&&""===t[i.UserConstants.ROLE])return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING),"USER_ROLE","USER_ROLE","User role")));if(t.hasOwnProperty(i.UserConstants.TAGS)){if(!Array.isArray(t[i.UserConstants.TAGS]))return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_AN_ARRAY),"USER_TAGS","USER_TAGS","User tags")));if(0===t[i.UserConstants.TAGS].length)return new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.EMPTY_ARRAY),"USER_TAGS","USER_TAGS","User tags")))}},f.validateUpdateUser=function(t){return t.hasOwnProperty(i.UserConstants.UID)?typeof t[i.UserConstants.UID]!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"UID","UID","UID"))):d(t[i.UserConstants.UID])?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID_USER_PROPERTY),"UID","UID","UID","UID"))):t.hasOwnProperty(i.UserConstants.NAME)&&""===t[i.UserConstants.NAME]?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING),"USER_NAME","USER_NAME","User name"))):void 0:new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY),"UID","UID","UID","UID")))},f.validateConversationType=function(t){return typeof t!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"CONVERSATION_TYPE","CONVERSATION_TYPE","Conversation type"))):d(t)?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID),"CONVERSATION_TYPE","CONVERSATION_TYPE","conversation type","conversation type"))):(t=t.toLowerCase())!=p.CometChat.RECEIVER_TYPE.USER&&t!=p.CometChat.RECEIVER_TYPE.GROUP?new a.CometChatException(i.ConversationErrors.INVALID_CONVERSATION_TYPE):void 0},f.isCallingComponentInstalled=function(){return!!(n.hasOwnProperty("CometChatCalling")&&n.CometChatCalling&&n.CometChatCalling.hasOwnProperty("isCallingComponentInstalled")&&n.CometChatCalling.isCallingComponentInstalled)},f.getCallingComponentVersion=function(){return t(void 0,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:if(!f.isCallingComponentInstalled())return[3,7];e=n.CometChatCalling.Calling,t.label=1;case 1:return t.trys.push([1,5,,6]),e.getPluginVersion()?[4,e.getPluginVersion()]:[3,3];case 2:return 3==t.sent().version?[2,3]:[2,2];case 3:return[2,2];case 4:return[3,6];case 5:return t.sent(),[2,2];case 6:return[3,8];case 7:return[2,0];case 8:return[2]}})})},f.updatePropertiesWithDynamicValue=function(n,r,o){return new Promise(function(t,e){!function t(e){for(var n in e)e.hasOwnProperty(n)&&("object"==typeof e[n]?t(e[n]):"string"==typeof e[n]&&e[n].includes(r)&&!e[n].includes(i.ADDITIONAL_CONSTANTS.SECURE_URL_PROPERTY)&&(e[n]+=o))}(n),t(n)})},f.validateQuestion=function(t){return typeof t!==i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING),"QUESTION","QUESTION","Question"))):d(t)?new a.CometChatException(JSON.parse(S(JSON.stringify(i.GENERAL_ERROR.INVALID),"QUESTION","QUESTION","question","question"))):void 0}}).call(this,T(10))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AI_SLUG_ENABLED=e.AI_SLUG_ACCESSIBLE=e.AI_FEATURE_ENABLED=e.AI_FEATURE_ACCESSIBLE=e.ADDITIONAL_CONSTANTS=e.ONLINE_MEMBER_COUNT_API=e.JWT_API=e.ProsodyApiErrors=e.PROSODY_API=e.API_ERROR_CODES=e.CONNECTION_STATUS=e.COMMON_UTILITY_CONSTANTS=e.APP_SETTINGS=e.PresenceConstatnts=e.FeatureRestrictionErrors=e.MessageErrors=e.AIFeatureError=e.ExtensionErrors=e.AIErrors=e.ConversationErrors=e.GroupErrors=e.UserErrors=e.ReceiptErrors=e.GENERAL_ERROR=e.PARAMETER_ERROR=e.CALL_ERROR=e.Errors=e.UserConstants=e.GroupMemersConstans=e.GroupConstants=e.CallConstants=e.BlockedUsersConstants=e.ActionConstatnts=e.TYPING_NOTIFICATION=e.GoalType=e.MessageCategory=e.ATTACHMENTS_CONSTANTS=e.MessageConstatnts=e.READ_RECEIPTS=e.DELIVERY_RECEIPTS=e.ResponseConstants=e.LOCAL_STORE=e.ANALYTICS=e.WS=e.SDKHeader=e.APPINFO=e.GROUP_MEMBER_SCOPE=e.GroupMemberScope=e.GROUP_TYPE=e.GroupType=e.DEFAULT_VALUES=e.constants=void 0;var r,o,s,i,a=n(2);e.constants={DEFAULT_STORE:"cometchat",MSG_VER_PRE:"store-ver-pre",MSG_VER_POST:"store-ver-post"},e.DEFAULT_VALUES={ZERO:0,MSGS_LIMIT:30,MSGS_MAX_LIMIT:100,USERS_LIMIT:30,USERS_MAX_LIMIT:100,GROUPS_LIMIT:30,GROUPS_MAX_LIMIT:100,CONVERSATION_MAX_LIMIT:50,CALL_TIMEOUT:45,DEFAULT_MSG_ID:0,DEFAULT_MAX_TYPING_INDICATOR_LIMIT:5,REGION_DEFAULT:"eu",REGION_DEFAULT_EU:"eu",REGION_DEFAULT_US:"us",REGION_DEFAULT_IN:"in",REGION_DEFAULT_PRIVATE:"private"},(r=e.GroupType||(e.GroupType={})).Public="public",r.Private="private",r.Protected="protected",r.Password="password",e.GROUP_TYPE={PUBLIC:"public",PRIVATE:"private",PROTECTED:"password",PASSWORD:"password"},(o=e.GroupMemberScope||(e.GroupMemberScope={})).Admin="admin",o.Moderator="moderator",o.Member="member",e.GROUP_MEMBER_SCOPE={ADMIN:"admin",MODERATOR:"moderator",PARTICIPANT:"participant"},e.APPINFO={platform:"IONIC_CORDOVA",sdkVersion:"v4.0.2",apiVersion:"v3.0",sdkVersionWithUnderScore:"4_0_2"},e.SDKHeader={platform:"ionic",sdkVersion:"4.0.2",sdk:"%s@%s"},e.WS={CONVERSATION:{TYPE:{CHAT:"chat",GROUP_CHAT:"groupchat"}}},e.ANALYTICS={analyticsHost:"metrics-%s.cometchat.io",analyticsVersion:"v1"},e.LOCAL_STORE={COMMON_STORE:"common_store",MESSAGE_LISTENERS_LIST:"message_listeners_list",USERS_STORE:"users_store",MESSAGES_STORE:"messages_store",KEYS_STORE:"keys_store",STORE_STRING:"%s:%s",KEY_STRING:"%s/%s",KEY_USER:"user",KEY_APP_SETTINGS:"app_settings",KEY_APP_ID:"appId",KEY_DEVICE_ID:"deviceId",KEY_SESSION_ID:"sessionId",KEY_MESSAGE_LISTENER_LIST:"all"},e.ResponseConstants={RESPONSE_KEYS:{KEY_DATA:"data",KEY_META:"meta",KEY_CURSOR:"cursor",KEY_ACTION:"action",KEY_MESSAGE:"message",KEY_ERROR:"error",KEY_ERROR_DETAILS:"details",KEY_ERROR_CODE:"code",KEY_ERROR_MESSAGE:"message",KEY_AUTH_TOKEN:"authToken",KEY_WS_CHANNEL:"wsChannel",KEY_IDENTITY:"identity",KEY_SERVICE:"identity",KEY_ENTITIES:"entities",KEY_ENTITITY:"entity",KEY_ENTITYTYPE:"entityType",KEY_ATTACHMENTS:"attachments",CODE_REQUEST_OK:200,CODE_BAD_REQUEST:401,UNREAD_UNDELIVERED_KEYS:{ENTITY:"entity",ENTITY_TYPE:"entityType",ENTITY_Id:"entityId",COUNT:"count"},GROUP_MEMBERS_RESPONSE:{SUCCESS:"success",ERROR:"error",MESSAGE:"message"},KEY_ENTITY_TYPE:{USER:"user",GROUP:"group"},KEY_CONVERSATION_STARTER:"conversation-starter",KEY_SMART_REPLIES:"smart-replies",KEY_CONVERSATION_SUMMARY:"conversation-summary",KEY_BOT_REPLY:"bot-reply"}},e.DELIVERY_RECEIPTS={RECEIVER_ID:"receiverId",RECEIVER_TYPE:"type",RECIPIENT:"recipient",MESSAGE_ID:"messageId",RECEIVED:"delivered",DELIVERED_AT:"deliveredAt",ID:"id",TIME:"time",DELIVERED_TO_ME_AT:"deliveredToMeAt"},e.READ_RECEIPTS={RECEIVER_ID:"receiverId",RECEIVER_TYPE:"type",RECIPIENT:"recipient",MESSAGE_ID:"messageId",READ:"read",READ_AT:"readAt",ID:"id",TIME:"time",READ_BY_ME_AT:"readByMeAt"},e.MessageConstatnts={TYPE:{TEXT:"text",MEDIA:"media",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",CUSTOM:"custom"},CATEGORY:{MESSAGE:"message",ACTION:"action",CALL:"call",CUSTOM:"custom",INTERACTIVE:"interactive"},RECEIVER_TYPE:{USER:"user",GROUP:"group"},KEYS:{ATTATCHMENT:"attatchment",ATTATCHMENTS:"attachments",ACTION:"action",TYPE:"type",DATA:"data",ID:"id",MUID:"muid",SENDER:"sender",RECEIVER:"receiver",RECEIVER_ID:"receiverId",CATEGORY:"category",RECEIVER_TYPE:"receiverType",SENT_AT:"sentAt",STATUS:"status",TEXT:"text",URL:"url",METADATA:"metadata",RECEIPTS:"receipts",MY_RECEIPTS:"myReceipt",CUSTOM_DATA:"customData",CUSTOM_SUB_TYPE:"subType",RESOURCE:"resource",MENTIONS:"mentions",INTERACTIVE_DATA:"interactiveData",INTERACTION_GOAL:"interactionGoal",INTERACTIONS:"interactions",ALLOW_SENDER_INTERACTION:"allowSenderInteraction",ELEMENT_ID:"elementId",INTERACTED_AT:"interactedAt",ELEMENT_IDS:"elementIds"},KNOWN_MEDIA_TYPE:{IMAGE:[],VIDEO:[],AUDIO:[],FILE:[]},PAGINATION:{AFFIX:{APPEND:"append",PREPEND:"prepend"},CURSOR_FILEDS:{ID:"id",SENT_AT:"sentAt"},CURSOR_AFFIX_DEFAULT:"prepend",CURSOR_FIELD_DEFAULT:"sentAt",KEYS:{PER_PAGE:"per_page",CURSOR_AFFIX:"cursorAffix",AFFIX:"affix",CURSOR_FIELD:"cursorField",CURSOR_VALUE:"cursorValue",UID:"uid",SENT_AT:"sentAt",ID:"id",CURRENT_PAGE:"page",UNREAD:"unread",HIDE_MESSAGES_FROM_BLOCKED_USER:"hideMessagesFromBlockedUsers",SEARCH_KEY:"searchKey",ONLY_UPDATES:"onlyUpdates",UPDATED_AT:"updatedAt",CATEGORY:"category",CATEGORIES:"categories",TYPE:"type",TYPES:"types",HIDE_REPLIES:"hideReplies",HIDE_DELETED_MESSAGES:"hideDeleted",WITH_TAGS:"withTags",TAGS:"tags",MY_MENTIONS_ONLY:"myMentionsOnly",MENTIONS_WITH_TAG_INFO:"mentionsWithTagInfo",MENTIONS_WITH_BLOCKED_INFO:"mentionsWithBlockedInfo",ONLY_INTERACTION_GOAL_COMPLETED:"onlyInteractionGoalCompleted"}}},e.ATTACHMENTS_CONSTANTS={KEYS:{EXTENSION:"extension",MIME_TYPE:"mimeType",NAME:"name",SIZE:"size",URL:"url"}},(s=e.MessageCategory||(e.MessageCategory={})).ACTION="action",s.MESSAGE="message",s.CALL="call",s.CUSTOM="custom",s.INTERACTIVE="interactive",(i=e.GoalType||(e.GoalType={})).ANY_ACTION="anyAction",i.ANY_OF="anyOf",i.ALL_OF="allOf",i.NONE="none",e.TYPING_NOTIFICATION={RECEIVER_ID:"receiverId",RECEIVER_TYPE:"receiverType",META:"metadata",KEYS:{TYPING_NOTIFICATION:"typingNotification",TIMESTAMP:"timestamp"},ACTIONS:{STARTED:"started",ENDED:"ended"}},e.ActionConstatnts={ACTION_SUBJECTS:{ACTION_ON:"on",ACTION_BY:"by",ACTION_FOR:"for"},ACTION_ENTITY_TYPE:{GROUP_USER:"groupuser",USER:"user",GROUP:"group",MESSAGE:"message"},ACTION_KEYS:{ACTION_CREATED:"created",ACTION_UPDATED:"updated",ACTION_DELETED:"deleted",ENTITIES:"entities",ENTITY:"entity",ENTITY_TYPE:"entityType",TYPE_MEMBER_JOINED:"joined",TYPE_MEMBER_LEFT:"left",TYPE_MEMBER_KICKED:"kicked",TYPE_MEMBER_BANNED:"banned",TYPE_MEMBER_UNBANNED:"unbanned",TYPE_MEMBER_INVITED:"invited",TYPE_MEMBER_ADDED:"added",ACTION_SCOPE_CHANGED:"scopeChanged",ACTION_TYPE_USER:"user",ACTION_TYPE_GROUP:"group",ACTION_TYPE_GROUP_MEMBER:"groupMember",TYPE_MESSAGE_EDITED:"edited",TYPE_MESSAGE_DELETED:"deleted",ACTION_TYPE_CALL:"call",EXTRAS:"extras",SCOPE:"scope",NEW:"new",OLD:"old"},ActionMessages:{ACTION_GROUP_JOINED_MESSAGE:"%s joined",ACTION_GROUP_LEFT_MESSAGE:"%s left",ACTION_MEMBER_KICKED_MESSAGE:"%s kicked %s",ACTION_MEMBER_BANNED_MESSAGE:"%s banned %s",ACTION_MEMBER_UNBANNED_MESSAGE:"%s unbanned %s",ACTION_MEMBER_INVITED_MESSAGE:"%s banned %s",ACTION_MESSAGE_EDITED_MESSAGE:" Message Edited",ACTION_MESSAGE_DELETED_MESSAGE:"Message Deleted",ACTION_MEMBER_SCOPE_CHANGED:"%s made %s %s",ACTION_MEMBER_ADDED_TO_GROUP:"%s added %s"},ACTION_TYPE:{TYPE_MEMBER_JOINED:"joined",TYPE_MEMBER_LEFT:"left",TYPE_MEMBER_KICKED:"kicked",TYPE_MEMBER_BANNED:"banned",TYPE_MEMBER_UNBANNED:"unbanned",TYPE_MEMBER_INVITED:"invited",TYPE_MEMBER_SCOPE_CHANGED:"scopeChanged",TYPE_MESSAGE:"message",TYPE_MESSAGE_EDITED:"edited",TYPE_MESSAGE_DELETED:"deleted",TYPE_MEMBER_ADDED:"added"},ACTIONS:{MEMBER_ADDED:"added",MEMBER_JOINED:"joined",MEMBER_LEFT:"left",MEMBER_KICKED:"kicked",MEMBER_BANNED:"banned",MEMBER_UNBANNED:"unbanned",MEMBER_INVITED:"invited",MEMBER_SCOPE_CHANGED:"scopeChanged",MESSAGE_EDITED:"edited",MESSSAGE_DELETED:"deleted",TYPE_USER:"user",TYPE_GROUP:"group",TYPE_GROUP_MEMBER:"groupMember"}},e.BlockedUsersConstants={REQUEST_KEYS:{DIRECTIONS:{BOTH:"both",HAS_BLOCKED_ME:"hasBlockedMe",BLOCKED_BY_ME:"blockedByMe"}}},e.CallConstants={CALL_MODE:{DEFAULT:"DEFAULT",SPOTLIGHT:"SPOTLIGHT",SINGLE:"SINGLE"},AUDIO_MODE:{SPEAKER:"SPEAKER",EARPIECE:"EARPIECE",BLUETOOTH:"BLUETOOTH",HEADPHONES:"HEADPHONES"},CALL_TYPE:{AUDIO:"audio",VIDEO:"video"},RECEIVER_TYPE_GROUP:"group",RECEIVER_TYPE_USER:"user",CALL_KEYS:{CALL_DATA:"data",CALL_ID:"id",CALL_SESSION_ID:"sessionid",CALL_RECEIVER:"receiver",CALL_SENDER:"sender",CALL_RECEIVER_TYPE:"receiverType",CALL_STATUS:"status",CALL_TYPE:"type",CALL_INITIATED_AT:"initiatedAt",CALL_JOINED_AT:"joinedAt",CALL_LEFT_AT:"leftAt",CALL_METADATA:"metadata",CALL_ENTITIES:"entities",CALL_ENTITY_TYPE:"entityType",CALL_ENTITY:"entity",CALL_ENTITY_USER:"user",CALL_ENTITY_GROUP:"group"},CALL_STATUS:{INITIATED:"initiated",ONGOING:"ongoing",UNANSWERED:"unanswered",REJECTED:"rejected",BUSY:"busy",CANCELLED:"cancelled",ENDED:"ended"},ZOOM_BUTTON_DEFAULT_PARAMS:{position:"bottom-right",visibility:!0},FULL_SCREEN_BUTTON_DEFAULT_PARAMS:{position:"bottom-right",visibility:!0},USER_LIST_BUTTON_DEFAULT_PARAMS:{position:"bottom-right",visibility:!0},NAME_LABEL_DEFAULT_PARAMS:{position:"bottom-left",visibility:!0,color:"#333333"},MAIN_VIDEO_CONTAINER_SETTINGS:{KEYS:{POSITION:"position",VISIBILITY:"visibility",COLOR:"color"}}},e.GroupConstants={KEYS:{NAME:"name",GUID:"guid",TYPE:"type",PASSWORD:"password",ICON:"icon",DESCRIPTION:"description",OWNER:"owner",METADATA:"metadata",CREATED_AT:"createdAt",UPDATED_AT:"updatedAt",HAS_JOINED:"hasJoined",WS_CHANNEL:"wsChannel",TAGS:"tags"}},e.GroupMemersConstans={KEYS:{SCOPE:"scope",UID:"uid",GUID:"guid",USER:"user",NAME:"name"}},e.UserConstants={UID:"uid",NAME:"name",AUTH_TOKEN:"authToken",AVATAR:"avatar",LAST_ACTIVE_AT:"lastActiveAt",LINK:"link",META_DATA:"metadata",ROLE:"role",STATUS:"status",STATUS_MESSAGE:"statusMessage",USER_NAME:"user_name",TAGS:"tags",SORT_BY:{NAME:"name",STATUS:"status"},SORT_ORDER:{ASCENDING:"asc",DESCENDING:"desc"}},e.Errors={ERROR_IO_EXCEPTION:"ERROR_IO_EXCEPTION",ERROR_JSON_EXCEPTION:"ERROR_JSON_EXCEPTION",ERROR_PASSWORD_MISSING:"ERROR_PASSWORD_MISSING",ERROR_LIMIT_EXCEEDED:"ERROR_LIMIT_EXCEEDED",ERROR_USER_NOT_LOGGED_IN:"ERROR_USER_NOT_LOGGED_IN",ERROR_INVALID_GUID:"ERROR_INVALID_GUID",ERROR_PASSWORD_MISSING_MESSAGE:"Password is mandatory for a password group",ERROR_LIMIT_EXCEEDED_MESSAGE:"Limit Exceeded Max limit of %s",ERROR_USER_NOT_LOGGED_IN_MESSAGE:"Please log in to CometChat before calling this method",ERROR_INVALID_GUID_MESSAGE:"Please provide a valid GUID",ERROR_DEFAULT_MESSAGE:"Something went wrong",ERR_SETTINGS_HASH_OUTDATED:"ERR_SETTINGS_HASH_OUTDATED",ERR_NO_AUTH:"ERR_NO_AUTH"},e.CALL_ERROR={CALL_ALREADY_INITIATED:{code:"CALL_ALREADY_INITIATED",name:"CALL_ALREADY_INITIATED",message:"There is already call in progress",details:{}},ERROR_IN_CALLING:{code:"CALL_IN_PROGRESS",name:"CALL_ALREADY_INITIATED",message:"There is already call in progress",details:{}},CANNOT_ACCEPT_CALL:{code:"CALL_IN_PROGRESS",name:"CALL_IN_PROGRESS",message:"There is already a call in progress",details:{}},NOT_INITIALIZED:{code:"NOT_INITIALIZED",name:"NOT_INITIALIZED",message:"Please call the CometChat.init() method before calling any other methods related to CometChat.",details:{}},NOT_LOGGED_IN:{code:"NOT_LOGGED_IN",name:"NOT_LOGGED_IN",message:"Please login before starting a call.",details:{}},SESSION_ID_REQUIRED:{code:"SESSION_ID_REQUIRED",name:"SESSION_ID_REQUIRED",message:"Please make sure you are passing correct session id.",details:{}},CALL_SETTINGS_REQUIRED:{code:"CALL_SETTINGS_REQUIRED",name:"CALL_SETTINGS_REQUIRED",message:"Please make sure you are passing the call settings object.",details:{}},JWT_NOT_FOUND:{code:"JWT_NOT_FOUND",name:"JWT_NOT_FOUND",message:"There was some issue while fetching JWT from API.",details:{}},MODULE_NOT_INSTALLED:{code:"ERROR_CALL_MODULE_NOT_FOUND",name:"ERROR_CALL_MODULE_NOT_FOUND",message:"CometChat Calling module not found. Please add the CometChat Calling dependency and try again.",details:{}}},e.PARAMETER_ERROR={PARAMETER_REQUIRED:{code:"%s_NOT_PROVIDED",name:"%s_NOT_PROVIDED",message:"please provide the %s.",details:{}}},e.GENERAL_ERROR={MUST_BE_A_STRING:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a string.",details:{}},MUST_BE_A_NUMBER:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a number.",details:{}},MUST_BE_A_OBJECT:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a object.",details:{}},MUST_BE_AN_ARRAY:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be an array.",details:{}},MUST_BE_A_BOOLEAN:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a boolean.",details:{}},MUST_BE_A_BLOB:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a blob.",details:{}},INVALID:{code:"INVALID_%s",name:"INVALID_%s",message:"Invalid %s. Please provide a valid %s.",details:{}},METHOD_COMPULSORY:{code:"%s_IS_COMPULSORY",name:"%s_IS_COMPULSORY",message:"%s is required.",details:{}},LIMIT_EXCEEDED:{code:"ERROR_%s_EXCEEDED",name:"ERROR_%s_EXCEEDED",message:"Limit exceeded max limit of %s.",details:{}},MUST_BE_A_POSITIVE_NUMBER:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a postive integer greater than 0.",details:{}},INVALID_MEDIA_FILE:{code:"INVALID_%s",name:"INVALID_%s",message:"The message type does not match the file's mime type.",details:{}},EMPTY_STRING:{code:"INVALID_%s",name:"INVALID_%s",message:"%s cannot be empty.",details:{}},MISSING_KEY:{code:"MISSING_KEY",name:"MISSING_KEY",message:"The key %s is missing from the %s object.",details:{}},EMPTY_ARRAY:{code:"INVALID_%s",name:"INVALID_%s",message:"The parameter %s should be an array and it cannot be empty.",details:{}},INVALID_SEARCH_KEYWORD:{code:"INVALID_SEARCH_KEYWORD",name:"INVALID_SEARCH_KEYWORD",message:"Invalid search keyword. Please provide a valid search keyword.",details:{}},INVALID_GROUP_PROPERTY:{code:"INVALID_%s",name:"INVALID_%s",message:"Invalid %s provided for the group. Please provide a valid %s.",details:{}},INVALID_USER_PROPERTY:{code:"INVALID_%s",name:"INVALID_%s",message:"Invalid %s provided for a user. Please provide a valid %s.",details:{}},PARAMETER_MUST_BE_A_NUMBER:{code:"INVALID_%s",name:"INVALID_%s",message:"%s method accepts parameter as a number.",details:{}},PARAMETER_MUST_BE_AN_ARRAY:{code:"INVALID_%s",name:"INVALID_%s",message:"%s method accepts parameter as an array.",details:{}},PARAMETER_MUST_BE_A_BOOLEAN:{code:"INVALID_%s",name:"INVALID_%s",message:"%s method accepts parameter as a boolean.",details:{}},PARAMETER_MUST_BE_A_POSITIVE_NUMBER:{code:"INVALID_%s",name:"INVALID_%s",message:"%s method accepts parameter to be a positive number greater than 0.",details:{}},PARAMETER_MUST_BE_A_STRING:{code:"INVALID_%s",name:"INVALID_%s",message:"%s method accepts parameter as a string.",details:{}},PARAMETER_COMPULSORY:{code:"%s_IS_COMPULSORY",name:"%s_IS_COMPULSORY",message:"%s cannot be blank. Please provide a valid %s.",details:{}},PASSWORD_COMPULSORY:{code:"%s_IS_COMPULSORY",name:"%s_IS_COMPULSORY",message:"Password is mandatory for a password group.",details:{}},INVALID_ARRAY:{code:"INVALID_%s",name:"INVALID_%s",message:"%s",details:{}}},e.ReceiptErrors={MISSING_PARAMETERS:{code:"MISSING_PARAMETERS",name:"MISSING_PARAMETERS",message:"Expected 4 parameters received 3",details:{}},INVALID_PARAMETER:{code:"INVALID_%s",name:"INVALID_%s",message:"%s",details:{}},NO_WEBSOCKET_CONNECTION:{code:"NO_WEBSOCKET_CONNECTION",name:"NO_WEBSOCKET_CONNECTION",message:"Connection to our Websockets server is broken. Please retry after some time.",details:{}},RECEIPTS_TEMPORARILY_BLOCKED:{code:"RECEIPTS_TEMPORARILY_BLOCKED",name:"RECEIPTS_TEMPORARILY_BLOCKED",message:"Due to high load. Receipts have been blocked for your app.",details:{}},UNKNOWN_ERROR_OCCURRED:{code:"UNKNOWN_ERROR_OCCURRED",name:"UNKNOWN_ERROR_OCCURRED",message:"Unknown error occurred while marking a message as read.",details:{}}},e.UserErrors={INVALID_STATUS:new a.CometChatException({code:"INVALID_STATUS_VALUE",name:"INVALID_STATUS_VALUE",message:"The `status` parameter accepts only `online` or `offline`.",details:""}),INVALID_DIRECTION:new a.CometChatException({code:"INVALID_DIRECTION_VALUE",name:"INVALID_DIRECTION_VALUE",message:"The `direction` parameter accepts only `both`, `blockeyByMe` or `hasBlockedMe`.",details:""}),USER_NOT_LOGGED_IN:new a.CometChatException({code:"USER_NOT_LOGGED_IN",name:"USER_NOT_LOGGED_IN",message:"Please log in to CometChat before calling this method.",details:""})},e.GroupErrors={NOT_A_GROUP:new a.CometChatException({code:"NOT_A_GROUP",message:"Please use group class to construct a new group."}),INVALID_SCOPE:new a.CometChatException({code:"INVALID_SCOPE_VALUE",name:"INVALID_SCOPE_VALUE",message:"Scope can be `admin`, `moderator` or `participant`.",details:""}),INVALID_GROUP_TYPE:new a.CometChatException({code:"INVALID_GROUP_TYPE",name:"INVALID_GROUP_TYPE",message:"Group type can be `public`, `private`, `protected` or `password`.",details:""})},e.ConversationErrors={INVALID_CONVERSATION_TYPE:{code:"INVALID_CONVERSATION_TYPE",name:"INVALID_CONVERSATION_TYPE",message:"Conversation type can be `user` or `group`.",details:"Please check the value of conversationType."},CONVERSATION_NOT_FOUND:{code:"CONVERSATION_NOT_FOUND",name:"CONVERSATION_NOT_FOUND",message:"Conversation for %s %s not found.",details:"Please check the value of conversationWith and conversationType."}},e.AIErrors={NO_CONVERSATION_STARTER:{code:"NO_CONVERSATION_STARTER",name:"NO_CONVERSATION_STARTER",message:"Unable to get conversation starter for this conversation.",details:""},NO_SMART_REPLY:{code:"NO_SMART_REPLY",name:"NO_SMART_REPLY",message:"Unable to get smart reply for this conversation.",details:""},NO_CONVERSATION_SUMMARY:{code:"NO_CONVERSATION_SUMMARY",name:"NO_CONVERSATION_SUMMARY",message:"Unable to get summary of the conversation.",details:""},NO_ASSISTANCE:{code:"EMPTY_RESPONSE",name:"EMPTY_RESPONSE",message:"Unable to get a suggestion.",details:""}},e.ExtensionErrors={INVALID_EXTENSION:{code:"ERROR_INVALID_EXTENSION",name:"ERROR_INVALID_EXTENSION",message:"The provided extension cannot be null or empty. Please provide a valid extension.",details:{}},EXTENSION_NOT_FOUND:{code:"ERROR_EXTENSION_NOT_FOUND",name:"ERROR_EXTENSION_NOT_FOUND",message:"The provided extension could not be found.",details:{}}},e.AIFeatureError={INVALID_AI_FEATURE:{code:"ERROR_INVALID_AI_FEATURE",name:"ERROR_INVALID_AI_FEATURE",message:"The provided AI Feature cannot be null or empty. Please provide a valid AI Feature.",details:{}}},e.MessageErrors={INVALID_RECEIVER_TYPE:{code:"INVALID_RECEIVER_TYPE",name:"INVALID_RECEIVER_TYPE",message:"Receiver type can be `user` or `group`.",details:"Please check the value of receiverType."}},e.FeatureRestrictionErrors={INVALID_FEATURE:{code:"ERROR_INVALID_FEATURE",name:"ERROR_INVALID_FEATURE",message:"The provided feature cannot be null or empty. Please provide a valid feature.",details:{}},FEATURE_NOT_FOUND:{code:"ERROR_FEATURE_NOT_FOUND",name:"ERROR_FEATURE_NOT_FOUND",message:"The provided feature could not be found.",details:{}}},e.PresenceConstatnts={STATUS:{ONLINE:"online",AVAILABLE:"available",OFFLINE:"offline",JOINED:"JOINED",LEFT:"LEFT"}},e.APP_SETTINGS={APP_SETTINGS:"app_settings",KEYS:{CHAT_HOST:"CHAT_HOST",CHAT_USE_SSL:"CHAT_USE_SSL",GROUP_SERVICE:"GROUP_SERVICE",CALL_SERVICE:"CALL_SERVICE",CHAT_WS_PORT:"CHAT_WS_PORT",CHAT_WSS_PORT:"CHAT_WSS_PORT",CHAT_HTTP_BIND_PORT:"CHAT_HTTP_BIND_PORT",CHAT_HTTPS_BIND_PORT:"CHAT_HTTPS_BIND_PORT",ADMIN_API_HOST:"ADMIN_API_HOST",CLIENT_API_HOST:"CLIENT_API_HOST",WEBRTC_HOST:"WEBRTC_HOST",WEBRTC_USE_SSL:"WEBRTC_USE_SSL",WEBRTC_WS_PORT:"WEBRTC_WS_PORT",WEBRTC_WSS_PORT:"WEBRTC_WSS_PORT",WEBRTC_HTTP_BIND_PORT:"WEBRTC_HTTP_BIND_PORT",WEBRTC_HTTPS_BIND_PORT:"WEBRTC_HTTPS_BIND_PORT",EXTENSION_LIST:"extensions",EXTENSION_KEYS:{ID:"id",NAME:"name"},JID_HOST_OVERRIDE:"JID_HOST_OVERRIDE",CHAT_HOST_OVERRIDE:"CHAT_HOST_OVERRIDE",CHAT_HOST_APP_SPECIFIC:"CHAT_HOST_APP_SPECIFIC",MODE:"MODE",CONNECTION_TYPE:"connection_type",DEFAULT_MODE:"DEFAULT",LIMITED_TRANSIENT:"LIMITED_TRANSIENT",NO_TRANSIENT:"NO_TRANSIENT",POLLING_ENABLED:"POLLING_ENABLED",POLLING_INTERVAL:"POLLING_INTERVAL",ANALYTICS_PING_DISABLED:"ANALYTICS_PING_DISABLED",ANALYTICS_HOST:"ANALYTICS_HOST",ANALYTICS_VERSION:"ANALYTICS_VERSION",ANALYTICS_USE_SSL:"ANALYTICS_USE_SSL",SETTINGS_HASH:"settingsHash",SETTINGS_HASH_RECEIVED_AT:"settingsHashReceivedAt",DENY_FALLBACK_TO_POLLING:"DENY_FALLBACK_TO_POLLING",APP_VERSION:"APP_VERSION",MAIN_DOMAIN:"MAIN_DOMAIN",CHAT_API_VERSION:"CHAT_API_VERSION",WS_API_VERSION:"WS_API_VERSION",REGION:"REGION",EXTENSION_DOMAIN:"EXTENSION_DOMAIN",WEBRTC_API_SUBDOMAIN:"WEBRTC_API_SUBDOMAIN",SECURED_MEDIA_HOST:"SECURED_MEDIA_HOST"}},e.COMMON_UTILITY_CONSTANTS={TYPE_CONSTANTS:{BOOLEAN:"boolean",STRING:"string",OBJECT:"object",NUMBER:"number"}},e.CONNECTION_STATUS={CONNECTED:"connected",CONNECTING:"connecting",DISCONNECTED:"disconnected",FEATURE_THROTTLED:"featureThrottled"},e.API_ERROR_CODES={AUTH_ERR_AUTH_TOKEN_NOT_FOUND:"AUTH_ERR_AUTH_TOKEN_NOT_FOUND"},e.PROSODY_API={DOMAIN_PREFIX:"xmpp",PATH:{ROOM:"room",ROOM_SIZE:"room-size",SESSIONS:"sessions"},RESPONSE:{PARTICIPANTS:"participants"},QUERY_PARAMETERS:{DOMAIN:"domain",ROOM:"room"}},e.ProsodyApiErrors={INVALID_SESSIONID:{code:"ERROR_INVALID_SESSIONID",name:"ERROR_INVALID_SESSIONID",message:"The provided sessionId cannot be null or empty. Please provide a valid sessionId.",details:""},INVALID_TYPE:{code:"ERROR_INVALID_TYPE",name:"ERROR_INVALID_TYPE",message:"The provided type cannot be null or empty. Please provide a valid type.",details:""}},e.JWT_API={KEYS:{PASSTHROUGH:"passthrough",EXPAND:"expand"}},e.ONLINE_MEMBER_COUNT_API={ENDPOINTS:{GET_ONLINE_MEMBER_COUNT:"api/%s/online-members"},RESPONSE:{ONLINE_USERS_COUNT:"onlineUsersCount",GROUPS:"groups"},ERRORS:{INVALID_GROUPLIST:{code:"ERROR_INVALID_GROUPLIST",name:"ERROR_INVALID_GROUPLIST",message:"Grouplist cannot be null or empty.",details:""}}},e.ADDITIONAL_CONSTANTS={SECURE_URL_PROPERTY:"fat"},e.AI_FEATURE_ACCESSIBLE="features.ai.accessible",e.AI_FEATURE_ENABLED="features.ai.enabled",e.AI_SLUG_ACCESSIBLE="features.ai.%s.accessible",e.AI_SLUG_ENABLED="features.ai.%s.enabled"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CometChatException=void 0;var r=function(t){null!==t.code&&void 0!==t.code&&""!==t.code&&(this.code=t.code),null!==t.name&&void 0!==t.name&&""!==t.name&&(this.name=t.name),null!==t.message&&void 0!==t.message&&""!==t.message&&(this.message=t.message),null!==t.details&&void 0!==t.details&&""!==t.details&&(this.details=t.details)};e.CometChatException=r},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Me=e.User=void 0;var s=n(2),i=n(14),a=n(1),c=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.hasBlockedMe=!1,this.blockedByMe=!1,this.deactivatedAt=0,1===t.length)typeof t[0]===a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?this.uid=t[0]:(this.uid=t[0].uid,this.name=t[0].name,t[0].authToken&&(this.authToken=t[0].authToken),t[0].avatar&&(this.avatar=t[0].avatar),t[0].lastActiveAt&&(this.lastActiveAt=t[0].lastActiveAt),t[0].link&&(this.link=t[0].link),t[0].metadata&&(this.metadata=t[0].metadata),t[0].role&&(this.role=t[0].role),t[0].statusMessage&&(this.statusMessage=t[0].statusMessage),t[0].status&&"offline"!==t[0].status?this.status="online":this.status="offline",t[0].tags&&(this.tags=t[0].tags),t[0].deactivatedAt&&(this.deactivatedAt=t[0].deactivatedAt));else{if(2!==t.length)throw new s.CometChatException(i.ERRORS.PARAMETER_MISSING);this.uid=t[0],this.name=t[1]}}return t.prototype.getUid=function(){return this.uid.toString()},t.prototype.setUid=function(t){this.uid=t},t.prototype.getName=function(){return this.name.toString()},t.prototype.setName=function(t){t&&(this.name=t)},t.prototype.getAuthToken=function(){return this.authToken},t.prototype.setAuthToken=function(t){this.authToken=t},t.prototype.getAvatar=function(){return this.avatar},t.prototype.setAvatar=function(t){this.avatar=t},t.prototype.getLastActiveAt=function(){return this.lastActiveAt},t.prototype.setLastActiveAt=function(t){this.lastActiveAt=t},t.prototype.getLink=function(){return this.link},t.prototype.setLink=function(t){return this.link=t},t.prototype.getMetadata=function(){return this.metadata},t.prototype.setMetadata=function(t){this.metadata=t},t.prototype.getRole=function(){return this.role},t.prototype.setRole=function(t){this.role=t},t.prototype.getStatus=function(){return this.status},t.prototype.setStatus=function(t){this.status=t},t.prototype.getStatusMessage=function(){return this.statusMessage},t.prototype.setStatusMessage=function(t){this.statusMessage=t},t.prototype.setBlockedByMe=function(t){this.blockedByMe=t},t.prototype.getBlockedByMe=function(){return this.blockedByMe},t.prototype.setHasBlockedMe=function(t){this.hasBlockedMe=t},t.prototype.getHasBlockedMe=function(){return this.hasBlockedMe},t.prototype.setTags=function(t){this.tags=t},t.prototype.getTags=function(){return this.tags},t.prototype.setDeactivatedAt=function(t){this.deactivatedAt=t},t.prototype.getDeactivatedAt=function(){return this.deactivatedAt},t}(),E=function(n){function t(t){var e=n.call(this,t)||this;return e.wsChannel=t.wsChannel,t.jwt&&(e.jwt=t.jwt),t.fat&&(e.fat=t.fat),e}return o(t,n),t.prototype.getWsChannel=function(){return this.wsChannel},t.prototype.getJWT=function(){return this.jwt},t.prototype.getFat=function(){return this.fat},t}(e.User=c);e.Me=E},function(t,ct,Et){"use strict";(function(w){var d=this&&this.__assign||function(){return(d=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},c=this&&this.__awaiter||function(t,i,a,c){return new(a||(a=Promise))(function(n,e){function r(t){try{s(c.next(t))}catch(t){e(t)}}function o(t){try{s(c.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof a?e:new a(function(t){t(e)})).then(r,o)}s((c=c.apply(t,i||[])).next())})},Y=this&&this.__generator||function(n,r){var o,s,i,t,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(i=2&e[0]?s.return:e[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,e[1])).done)return i;switch(s=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){a.label=e[1];break}if(6===e[0]&&a.label<i[1]){a.label=i[1],i=e;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(e);break}i[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],s=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(ct,"__esModule",{value:!0}),ct.CometChat=void 0;var u=Et(35),G=Et(0),b=Et(2),K=Et(6),B=Et(3),S=Et(16),E=Et(19),p=Et(7),l=Et(18),h=Et(11),C=Et(12),F=Et(1),a=Et(8),f=Et(17),s=Et(27),t=Et(28),e=Et(25),x=Et(38),T=Et(14),n=Et(24),r=Et(47),o=Et(48),i=Et(49),g=Et(50),_=Et(52),A=Et(53),R=Et(30),I=Et(31),O=Et(42),N=Et(21),y=Et(40),m=Et(55),v=Et(56),P=Et(57),L=Et(41),M=Et(29),D=Et(20),V=Et(58),U=Et(33),k=Et(59),J=Et(60),H=Et(44),W=Et(5),j=Et(32),q=Et(69),X=Et(36),z=Et(70),Q=Et(45),Z=Et(23),$=Et(37),tt=Et(43),et=Et(22),nt=Et(71),rt=U.Plugins.Calling,ot=Et(76),st=J.WSConnectionHelper.getInstance(),it=H.ListenerHandlers.getInstance(),at=function(){function U(t){var e,n,r=this;try{U.appId=t,U.localStorage=S.LocalStorage.getInstance(),U.keyStore=s.KeyStore.getInstance(),w.CapacitorApp&&(U.App=w.CapacitorApp.App,null===(n=null===(e=null==U?void 0:U.App)||void 0===e?void 0:e.App)||void 0===n||n.addListener("appStateChange",function(t){var e,n=t.isActive;n?st.onAppActive():st.onAppInactive(),U.appSettings.shouldAutoEstablishSocketConnection()?n?(U.isAppInactive=!1,U.connect(),U.callWaitTimer&&r.clearCallWaitTimer()):(U.isAppInactive=!0,(null===(e=null==U?void 0:U.getActiveCall())||void 0===e?void 0:e.getStatus())===F.CallConstants.CALL_STATUS.INITIATED?r.startCallWaitTimer():U.disconnectInternally()):n?(U.isAppInactive=!1,!Q.checkConnection(st.connection)&&U.disconnectedByUser||U.startAnalyticsPingTimer()):(U.isAppInactive=!0,U.clearAnalyticsPingTimer())}))}catch(t){G.Logger.error("CometChat: constructor",t)}}return U.ping=function(t){var e=t||{},n=e.onError,r=e.onSuccess;this.currentConnectionStatus===F.CONNECTION_STATUS.CONNECTED?U.user?st.pingWS({onError:n,onSuccess:r}):n&&n(new b.CometChatException({code:F.Errors.ERROR_USER_NOT_LOGGED_IN,message:F.Errors.ERROR_USER_NOT_LOGGED_IN_MESSAGE})):n&&n(new b.CometChatException(F.ReceiptErrors.NO_WEBSOCKET_CONNECTION))},U.prototype.startCallWaitTimer=function(){var t=this;U.callWaitTimer=setInterval(function(){try{1<U.callWaitTime?U.callWaitTime=U.callWaitTime-1:1===U.callWaitTime&&(U.disconnectInternally(),t.clearCallWaitTimer())}catch(t){G.Logger.error("CometChat: startCallWaitTimer",t)}},1e3)},U.prototype.clearCallWaitTimer=function(){try{clearInterval(U.callWaitTimer),U.callWaitTime=30}catch(t){G.Logger.error("CometChat: clearCallWaitTimer",t)}},U.clearActiveCall=function(){x.CallController.getInstance().endCall()},U.setAuthToken=function(t){try{U.authToken=t}catch(t){G.Logger.error("CometChat: setAuthToken",t)}},U.prototype.getAuthToken=function(){try{return U.authToken}catch(t){G.Logger.error("CometChat: getAuthToken",t)}},U.getAppId=function(){try{return U.appId}catch(t){G.Logger.error("CometChat: getAppId",t)}},U.prototype.getApiKey=function(){try{return U.apiKey}catch(t){G.Logger.error("CometChat: getApiKey",t)}},U.getMode=function(){try{return U.mode}catch(t){G.Logger.error("CometChat: getMode",t)}},U.setMode=function(t){try{U.mode=t}catch(t){G.Logger.error("CometChat: getMode",t)}},U.getSessionId=function(){try{return U.sessionId}catch(t){G.Logger.error("CometChat: getAppId",t)}},U.didAnalyticsPingStart=function(){try{return U.isAnalyticsPingStarted}catch(t){G.Logger.error("CometChat: didAnalyticsPingStart",t)}},U.init=function(o,t){var r=this;return void 0===o&&(o=""),new Promise(function(n,e){try{"object"==typeof o&&(o.hasOwnProperty("appId")&&(o=o.appId),o.hasOwnProperty("appSettings")&&(t=o.appSettings)),G.isFalsy(t)?t=(new v.AppSettingsBuilder).setRegion(v.AppSettings.REGION_EU).build():t.getRegion()==v.AppSettings.REGION_PRIVATE&&(t.region=o),r.appSettings=t,G.isFalsy(o)?e(new b.CometChatException(T.INIT_ERROR.NO_APP_ID)):(r.initialzed=!0,U.appId=o,U.getInstance(o),U.sessionId=F.APPINFO.platform+"-"+F.APPINFO.sdkVersionWithUnderScore+"-"+ot()+"-"+(new Date).getTime(),S.LocalStorage.getInstance().get(F.LOCAL_STORE.KEY_APP_ID).then(function(t){if(null==t||null==t)U.appId=o,U.getInstance(o),S.LocalStorage.getInstance().set(F.LOCAL_STORE.KEY_APP_ID,o),n(!0);else{var e=t.toLocaleString();e===o?(U.appId=e,U.getInstance(e),S.LocalStorage.getInstance().get(F.LOCAL_STORE.KEY_USER).then(function(t){t?(U.isLoggedOut=!1,U.user=new B.Me(t),U.setAuthToken(U.user.getAuthToken()),t.jwt&&(U.jwt=t.jwt),new nt.PostDetails,n(!0),S.LocalStorage.getInstance().get(F.LOCAL_STORE.KEY_APP_SETTINGS).then(function(t){if(t){if(t.hasOwnProperty(F.APP_SETTINGS.KEYS.APP_VERSION)){var e=parseInt(F.APPINFO.sdkVersion.charAt(1));t[F.APP_SETTINGS.KEYS.APP_VERSION]<e&&4!==t[F.APP_SETTINGS.KEYS.APP_VERSION]&&(r.appSettings.shouldAutoEstablishSocketConnection()||(U.shouldConnectToWS=!1),U.getInstance().internalRestart(U.user.getAuthToken()))}else r.appSettings.shouldAutoEstablishSocketConnection()||(U.shouldConnectToWS=!1),U.getInstance().internalRestart(U.user.getAuthToken());t[F.APP_SETTINGS.KEYS.SECURED_MEDIA_HOST]&&(U.SECURED_MEDIA_HOST=t[F.APP_SETTINGS.KEYS.SECURED_MEDIA_HOST]),t[F.APP_SETTINGS.KEYS.MODE]&&(U.mode=t[F.APP_SETTINGS.KEYS.MODE]),t[F.APP_SETTINGS.KEYS.SETTINGS_HASH]&&(U.settingsHash=t[F.APP_SETTINGS.KEYS.SETTINGS_HASH]),t[F.APP_SETTINGS.KEYS.SETTINGS_HASH_RECEIVED_AT]&&(U.settingsHashReceivedAt=t[F.APP_SETTINGS.KEYS.SETTINGS_HASH_RECEIVED_AT]),U.isAnalyticsDisabled=!!t[F.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED],U.didAnalyticsPingStart()||U.isAnalyticsDisabled||!r.appSettings.shouldAutoEstablishSocketConnection()||(U.pingAnalytics(),U.startAnalyticsPingTimer()),st&&!st.connection&&r.appSettings.shouldAutoEstablishSocketConnection()&&(U.isConnectingFromInit=!0,U.WSLogin(U.user))}})):n(!0)})):r.clearCache().then(function(){U.apiKey=void 0,U.user=void 0,U.authToken=void 0,U.cometChat=void 0,U.mode=void 0,st.WSLogout(),U.appId=o,S.LocalStorage.getInstance().set(F.LOCAL_STORE.KEY_APP_ID,o),U.getInstance(o),n(!0)})}s.KeyStore.getInstance().get(F.LOCAL_STORE.KEY_DEVICE_ID).then(function(t){if(null==t){var e=ot(),n=(new Date).getTime(),r=o+"_"+e+"_"+n;s.KeyStore.getInstance().set(F.LOCAL_STORE.KEY_DEVICE_ID,r)}})}))}catch(t){e(new b.CometChatException(t))}})},U.isInitialized=function(){try{return this.initialzed}catch(t){G.Logger.error("CometChat: isInitialized",t)}},U.getInstance=function(t){try{return this.cometChat||(this.cometChat=new U(t)),this.cometChat}catch(t){G.Logger.error("CometChat: getInstance",t)}},U.registerTokenForPushNotification=function(l,d){var S=this;return new Promise(function(u,p){try{U.keyStore.get(F.LOCAL_STORE.KEY_DEVICE_ID).then(function(E){G.getAppSettings().then(function(t){var e="",n=E,r=F.APPINFO.platform,o=F.APPINFO.sdkVersion,s=t[F.APP_SETTINGS.KEYS.CHAT_API_VERSION];if(navigator&&(e=navigator.userAgent),null==n){var i=ot(),a=(new Date).getTime();n=S.appId+"_"+i+"_"+a,U.keyStore.set(F.LOCAL_STORE.KEY_DEVICE_ID,n)}var c={platform:r,deviceId:n,appInfo:{version:o,apiVersion:s,userAgent:e,pushNotification:{fcmDeviceToken:l,settings:d}}};K.makeApiCall("updateMyDetails",{},c,!1).then(function(t){u("Token Registration successful")},function(t){p(new b.CometChatException(t.error))}).catch(function(t){p(new b.CometChatException(t))})},function(t){return p(new b.CometChatException(t))})})}catch(t){p(new b.CometChatException(t))}})},U.pushToLoginListener=function(e,n){it.loginHandlers.map(function(t){try{if(t._eventListener)switch(n){case"Login_Success":G.isFalsy(t._eventListener.loginSuccess)||t._eventListener.loginSuccess(e);break;case"Login_Failure":G.isFalsy(t._eventListener.loginFailure)||t._eventListener.loginFailure(e);break;case"Logout_Success":G.isFalsy(t._eventListener.logoutSuccess)||t._eventListener.logoutSuccess()}}catch(t){G.Logger.error("ConnectionHandlers: onConnected Status",t)}})},U.login=function(){for(var c=this,E=[],t=0;t<arguments.length;t++)E[t]=arguments[t];return new Promise(function(i,a){try{if(U.loginInProgress){U.isLoggedOut=!0;var e=new b.CometChatException(T.LOGIN_ERROR.REQUEST_IN_PROGRESS);return a(e)}U.loginInProgress=!0,U.isConnectingFromInit=!1,U.localStorage.get(F.LOCAL_STORE.KEY_APP_ID).then(function(t){if(null==t||null==t){var e=new b.CometChatException(T.LOGIN_ERROR.NOT_INITIALIZED);return U.internalRestart||U.pushToLoginListener(e,"Login_Failure"),U.loginInProgress=!1,U.isLoggedOut=!0,a(e)}var n=t.toLocaleString();if(c.getInstance(n),U.appId=n,S.LocalStorage.getInstance().set(F.LOCAL_STORE.KEY_APP_ID,n),"object"==typeof E[0]){var r=E[0];E[0].hasOwnProperty("authToken")?E[0]=r.authToken:E[0].hasOwnProperty("username")&&E[0].hasOwnProperty("apiKey")&&(E[0]=r.username,E[1]=r.apiKey)}if(2==E.length){if(G.isFalsy(E[0])||G.isFalsy(E[1])){e=new b.CometChatException(T.ERRORS.PARAMETER_MISSING);return U.internalRestart||U.pushToLoginListener(e,"Login_Failure"),U.loginInProgress=!1,U.isLoggedOut=!0,a(e)}}else{if(1!=E.length){e=new b.CometChatException(T.ERRORS.PARAMETER_MISSING);return U.internalRestart||U.pushToLoginListener(e,"Login_Failure"),U.loginInProgress=!1,U.isLoggedOut=!0,a(e)}if(G.isFalsy(E[0])){var e=new b.CometChatException(T.ERRORS.PARAMETER_MISSING);return U.internalRestart||U.pushToLoginListener(e,"Login_Failure"),U.loginInProgress=!1,U.isLoggedOut=!0,a(e)}}if(G.isFalsy(c.getAppId())){e=new b.CometChatException(T.LOGIN_ERROR.NOT_INITIALIZED);return U.internalRestart||U.pushToLoginListener(e,"Login_Failure"),U.loginInProgress=!1,U.isLoggedOut=!0,a(e)}return U.localStorage.get(F.LOCAL_STORE.KEY_USER).then(function(s){if(2==E.length){U.apiKey=E[1];var t=E[0];if(null!=s&&s.uid!==E[0])U.localStorage.clearStore().then(function(){st.WSLogout(),U.generateAuthToken(t).then(function(t){U.user=new B.Me(t),U.setAuthToken(U.user.getAuthToken()),U.getLoggedInUser().then(function(t){(U.user=new B.Me(t)).setAuthToken(U.authToken),U.setAuthToken(U.user.getAuthToken());var e=U.user;e.setStatus(F.PresenceConstatnts.STATUS.ONLINE),U.localStorage.set("user",e);var n=new B.User(e);i(n),U.isConnectingFromInit||U.internalRestart||(U.pushToLoginListener(n,"Login_Success"),new nt.PostDetails),U.loginInProgress=!1,U.didAnalyticsPingStart()||U.isAnalyticsDisabled||!U.appSettings.shouldAutoEstablishSocketConnection()||(U.pingAnalytics(),U.startAnalyticsPingTimer()),U.isLoggedOut=!1,(U.appSettings.shouldAutoEstablishSocketConnection()||U.internalRestart)&&U.shouldConnectToWS&&U.WSLogin(U.user)},function(t){return U.internalRestart||U.pushToLoginListener(t,"Login_Failure"),U.loginInProgress=!1,U.isLoggedOut=!0,a(t)})},function(t){return U.internalRestart||U.pushToLoginListener(t,"Login_Failure"),U.loginInProgress=!1,U.isLoggedOut=!0,a(t)})});else{if(!G.isFalsy(U.authToken)){var e=new B.User(c.user);return U.internalRestart||(U.pushToLoginListener(e,"Login_Success"),new nt.PostDetails),U.loginInProgress=!1,U.isLoggedOut=!1,i(e)}if(!G.isFalsy(t)){if(G.isFalsy(U.apiKey)){var n=new b.CometChatException(T.LOGIN_ERROR.UNAUTHORISED);return U.internalRestart||U.pushToLoginListener(n,"Login_Failure"),U.loginInProgress=!1,U.isLoggedOut=!0,a(n)}c.generateAuthToken(t).then(function(t){c.user=new B.Me(t),c.setAuthToken(U.user.getAuthToken()),c.getLoggedInUser().then(function(t){c.user=new B.Me(t),c.user.setAuthToken(U.authToken),c.setAuthToken(c.user.getAuthToken()),st.WSLogout();var e=c.user;e.setStatus(F.PresenceConstatnts.STATUS.ONLINE),c.localStorage.set("user",e);var n=new B.User(e);i(n),U.isConnectingFromInit||U.internalRestart||(U.pushToLoginListener(n,"Login_Success"),new nt.PostDetails),U.loginInProgress=!1,U.didAnalyticsPingStart()||U.isAnalyticsDisabled||!U.appSettings.shouldAutoEstablishSocketConnection()||(U.pingAnalytics(),U.startAnalyticsPingTimer()),U.isLoggedOut=!1,(U.appSettings.shouldAutoEstablishSocketConnection()||U.internalRestart)&&U.shouldConnectToWS&&c.WSLogin(c.user)},function(t){return U.internalRestart||U.pushToLoginListener(t,"Login_Failure"),U.loginInProgress=!1,U.isLoggedOut=!0,a(t)})},function(t){return U.internalRestart||U.pushToLoginListener(t,"Login_Failure"),U.loginInProgress=!1,U.isLoggedOut=!0,a(t)})}}}else U.authToken=E[0],c.getLoggedInUser().then(function(t){if(t.authToken!=E[0]){var r=c;r.localStorage.clearStore().then(function(){st.WSLogout(),r.getLoggedInUser().then(function(t){(U.user=new B.Me(t)).setAuthToken(U.authToken),U.setAuthToken(U.user.getAuthToken());var e=U.user;e.setStatus(F.PresenceConstatnts.STATUS.ONLINE),r.localStorage.set("user",e);var n=new B.User(e);i(n),U.isConnectingFromInit||U.internalRestart||(U.pushToLoginListener(n,"Login_Success"),new nt.PostDetails),U.loginInProgress=!1,U.didAnalyticsPingStart()||U.isAnalyticsDisabled||!U.appSettings.shouldAutoEstablishSocketConnection()||(U.pingAnalytics(),U.startAnalyticsPingTimer()),U.isLoggedOut=!1,(U.appSettings.shouldAutoEstablishSocketConnection()||U.internalRestart)&&U.shouldConnectToWS&&U.WSLogin(new B.Me(t))},function(t){return U.internalRestart||U.pushToLoginListener(t,"Login_Failure"),U.loginInProgress=!1,U.isLoggedOut=!0,a(t)})})}else{if(s){var e=new B.User(t);return U.internalRestart||(U.pushToLoginListener(e,"Login_Success"),new nt.PostDetails),U.loginInProgress=!1,U.isLoggedOut=!1,i(e)}(U.user=new B.Me(t)).setAuthToken(U.authToken),U.setAuthToken(U.user.getAuthToken());var n=U.user;n.setStatus(F.PresenceConstatnts.STATUS.ONLINE),U.localStorage.set("user",n);var o=new B.User(n);i(o),U.isConnectingFromInit||U.internalRestart||(U.pushToLoginListener(o,"Login_Success"),new nt.PostDetails),U.loginInProgress=!1,U.didAnalyticsPingStart()||U.isAnalyticsDisabled||!U.appSettings.shouldAutoEstablishSocketConnection()||(U.pingAnalytics(),U.startAnalyticsPingTimer()),U.isLoggedOut=!1,(U.appSettings.shouldAutoEstablishSocketConnection()||U.internalRestart)&&U.shouldConnectToWS&&U.WSLogin(new B.Me(t))}},function(t){return U.internalRestart||U.pushToLoginListener(t,"Login_Failure"),U.loginInProgress=!1,U.isLoggedOut=!0,a(t)})})})}catch(t){e=new b.CometChatException(t);return U.internalRestart||U.pushToLoginListener(e,"Login_Failure"),U.loginInProgress=!1,U.isLoggedOut=!0,a(e)}})},U.sendMessage=function(a){var t=this;return new Promise(function(s,i){return c(t,void 0,void 0,function(){var e,n,r,o=this;return Y(this,function(t){try{return a instanceof l.TextMessage||a instanceof E.MediaMessage||a instanceof N.CustomMessage||a instanceof et.InteractiveMessage||(a=a[F.MessageConstatnts.KEYS.ATTATCHMENT]?(e=F.MessageConstatnts.TYPE.FILE,G.isImage(a[F.MessageConstatnts.KEYS.ATTATCHMENT])?e=F.MessageConstatnts.TYPE.IMAGE:G.isAudio(a[F.MessageConstatnts.KEYS.ATTATCHMENT])?e=F.MessageConstatnts.TYPE.AUDIO:G.isVideo(a[F.MessageConstatnts.KEYS.ATTATCHMENT])&&(e=F.MessageConstatnts.TYPE.VIDEO),new E.MediaMessage(a[F.MessageConstatnts.KEYS.RECEIVER_ID],a[F.MessageConstatnts.KEYS.ATTATCHMENT],e,a[F.MessageConstatnts.KEYS.RECEIVER_TYPE])):new l.TextMessage(a[F.MessageConstatnts.KEYS.RECEIVER_ID],a[F.MessageConstatnts.KEYS.TEXT],a[F.MessageConstatnts.KEYS.RECEIVER_TYPE])),(n=G.validateMessage(a))instanceof b.CometChatException?(i(n),[2]):(a.receiver=a.receiverId,delete a.receiverId,r=a.parentMessageId,[2,K.makeApiCall(r?"sendMessageInThread":"sendMessage",r?{parentId:r}:{},a,a instanceof E.MediaMessage).then(function(n){return c(o,void 0,void 0,function(){var e;return Y(this,function(t){return e=h.MessageController.trasformJSONMessge(n.data),R.MessageListnerMaping.getInstance().set("all",parseInt(e.id)),s(e),[2]})})},function(t){i(new b.CometChatException(t.error))})])}catch(t){i(new b.CometChatException(t))}return[2]})})})},U.sendDirectMessage=function(t){try{return Object.assign(t,{receiverType:F.MessageConstatnts.RECEIVER_TYPE.USER}),this.sendMessage(t)}catch(t){G.Logger.error("CometChat: sendDirectMessage",t)}},U.sendGroupMessage=function(t){try{return Object.assign(t,{receiverType:F.MessageConstatnts.RECEIVER_TYPE.GROUP}),this.sendMessage(t)}catch(t){G.Logger.error("CometChat: sendGroupMessage",t)}},U.sendMediaMessage=function(t){try{return this.sendMessage(t)}catch(t){G.Logger.error("CometChat: sendMediaMessage",t)}},U.sendCustomMessage=function(t){try{return this.sendMessage(t)}catch(t){G.Logger.error("CometChat: sendCustomMessage",t)}},U.sendInteractiveMessage=function(t){try{return this.sendMessage(t)}catch(t){G.Logger.error("CometChat: sendInteractiveMessage",t)}},U.getLastDeliveredMessageId=function(){return c(this,void 0,void 0,function(){var e;return Y(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,R.MessageListnerMaping.getInstance().get(F.LOCAL_STORE.KEY_MESSAGE_LISTENER_LIST)];case 1:return[2,t.sent()];case 2:return e=t.sent(),G.Logger.error("CometChat: getLastDeliveredMessageId",e),[3,3];case 3:return[2]}})})},U.startTyping=function(t){try{if(G.isFalsy(t))return;var e=void 0,n=this.RECEIVER_TYPE.USER,r={};if(t instanceof I.TypingIndicator)e=t.getReceiverId(),n=t.getReceiverType(),r=t.getMetadata();else{if(!t.hasOwnProperty(F.TYPING_NOTIFICATION.RECEIVER_ID))return;e=t[F.TYPING_NOTIFICATION.RECEIVER_ID],t.hasOwnProperty(F.TYPING_NOTIFICATION.RECEIVER_TYPE)&&(n=t[F.TYPING_NOTIFICATION.RECEIVER_TYPE]),t.hasOwnProperty(F.TYPING_NOTIFICATION.META)&&(r=t[F.TYPING_NOTIFICATION.META])}if(G.isFalsy(e))return;if(null==O.TypingNotificationController.getTypingStartedMap(e)){var o=U.getMode();return G.isFalsy(o)||o&&o!==F.APP_SETTINGS.KEYS.NO_TRANSIENT&&o!==F.APP_SETTINGS.KEYS.LIMITED_TRANSIENT?(st.startTypingIndicator(e,n,r),O.TypingNotificationController.addTypingStarted(e),void O.TypingNotificationController.removeTypingEnded(e)):void 0}}catch(t){G.Logger.error("CometChat: startTyping",t)}},U.endTyping=function(t){try{if(G.isFalsy(t))return;var e=void 0,n=this.RECEIVER_TYPE.USER,r={};if(t instanceof I.TypingIndicator)e=t.getReceiverId(),n=t.getReceiverType(),r=t.getMetadata();else{if(!t.hasOwnProperty(F.TYPING_NOTIFICATION.RECEIVER_ID))return;e=t[F.TYPING_NOTIFICATION.RECEIVER_ID],t.hasOwnProperty(F.TYPING_NOTIFICATION.RECEIVER_TYPE)&&(n=t[F.TYPING_NOTIFICATION.RECEIVER_TYPE]),n=n==this.RECEIVER_TYPE.USER?F.WS.CONVERSATION.TYPE.CHAT:F.WS.CONVERSATION.TYPE.GROUP_CHAT,t.hasOwnProperty(F.TYPING_NOTIFICATION.META)&&(r=t[F.TYPING_NOTIFICATION.META])}if(G.isFalsy(e))return;if(null==O.TypingNotificationController.getTypingEndedMap(e)){var o=U.getMode();return G.isFalsy(o)||o&&o!==F.APP_SETTINGS.KEYS.NO_TRANSIENT&&o!==F.APP_SETTINGS.KEYS.LIMITED_TRANSIENT?(st.pauseTypingIndicator(e,n,r),O.TypingNotificationController.addTypingEnded(e),void O.TypingNotificationController.removeTypingStarted(e)):void 0}}catch(t){G.Logger.error("CometChat: endTyping",t)}},U.markAsRead=function(){for(var c=[],t=0;t<arguments.length;t++)c[t]=arguments[t];return new Promise(function(e,n){try{var t=void 0,r=void 0,o=void 0,s=void 0;if(3===c.length)return n(new b.CometChatException(F.ReceiptErrors.MISSING_PARAMETERS));if(4===c.length){if(G.isFalsy(c[0])||"string"!=typeof c[0])return n(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ReceiptErrors.INVALID_PARAMETER),"MESSAGE_ID","MESSAGE_ID","Message ID should be a string."))));if(t=c[0],G.isFalsy(c[1])||"string"!=typeof c[1])return n(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ReceiptErrors.INVALID_PARAMETER),"RECEIVER_ID","RECEIVER_ID","Receiver ID should be a string."))));if(r=c[1],G.isFalsy(c[2])||"string"!=typeof c[2])return n(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ReceiptErrors.INVALID_PARAMETER),"RECEIVER_TYPE","RECEIVER_TYPE","Receiver type should be a string."))));if(o=c[2],G.isFalsy(c[3])||"string"!=typeof c[3])return n(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ReceiptErrors.INVALID_PARAMETER),"SENDER_ID","SENDER_ID","Sender ID should be a string."))));s=c[3]}else{if(1!==c.length)return n(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ReceiptErrors.INVALID_PARAMETER),"ARGUMENTS","ARGUMENTS","markAsRead() expects either 1 or 4 arguments."))));if(G.isFalsy(c[0])||!(c[0]instanceof p.BaseMessage))return n(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ReceiptErrors.INVALID_PARAMETER),"MESSAGE","MESSAGE","Invalid message object received."))));var i=c[0];t=i.getId().toString(),r=(o=i.getReceiverType())===F.MessageConstatnts.RECEIVER_TYPE.USER?i.getSender().getUid()===U.user.getUid()?i.getReceiverId():i.getSender().getUid():i.getReceiverId(),s=i.getSender().getUid()}var a=U.getMode();if(!(G.isFalsy(a)||a&&a!==F.APP_SETTINGS.KEYS.NO_TRANSIENT&&a!==F.APP_SETTINGS.KEYS.LIMITED_TRANSIENT))return n(new b.CometChatException(F.ReceiptErrors.RECEIPTS_TEMPORARILY_BLOCKED));if(U.getConnectionStatus()===F.CONNECTION_STATUS.CONNECTED)return st.markAsRead(r,o,t,s),e();K.makeApiCall(o===F.MessageConstatnts.RECEIVER_TYPE.USER?"markAsReadForUser":"markAsReadForGroup",o===F.MessageConstatnts.RECEIVER_TYPE.USER?{uid:r}:{guid:r},{messageId:t}).then(function(t){return e()},function(t){return n(new b.CometChatException(t.error))})}catch(t){return G.Logger.error("CometChat: markAsRead",t),n(new b.CometChatException(F.ReceiptErrors.UNKNOWN_ERROR_OCCURRED))}})},U.markAsDelivered=function(){for(var c=[],t=0;t<arguments.length;t++)c[t]=arguments[t];return new Promise(function(e,n){try{var t=void 0,r=void 0,o=void 0,s=void 0;if(3===c.length)return n(new b.CometChatException(F.ReceiptErrors.MISSING_PARAMETERS));if(4===c.length){if(G.isFalsy(c[0])||"string"!=typeof c[0])return n(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ReceiptErrors.INVALID_PARAMETER),"MESSAGE_ID","MESSAGE_ID","Message ID should be a string."))));if(t=c[0],G.isFalsy(c[1])||"string"!=typeof c[1])return n(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ReceiptErrors.INVALID_PARAMETER),"RECEIVER_ID","RECEIVER_ID","Receiver ID should be a string."))));if(r=c[1],G.isFalsy(c[2])||"string"!=typeof c[2])return n(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ReceiptErrors.INVALID_PARAMETER),"RECEIVER_TYPE","RECEIVER_TYPE","Receiver type should be a string."))));if(o=c[2],G.isFalsy(c[3])||"string"!=typeof c[3])return n(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ReceiptErrors.INVALID_PARAMETER),"SENDER_ID","SENDER_ID","Sender ID should be a string."))));s=c[3]}else{if(1!==c.length)return n(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ReceiptErrors.INVALID_PARAMETER),"ARGUMENTS","ARGUMENTS","markAsDelivered() expects either 1 or 4 arguments."))));if(G.isFalsy(c[0])||!(c[0]instanceof p.BaseMessage))return n(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ReceiptErrors.INVALID_PARAMETER),"MESSAGE","MESSAGE","Invalid message object received."))));var i=c[0];t=i.getId().toString(),r=(o=i.getReceiverType())===F.MessageConstatnts.RECEIVER_TYPE.USER?i.getSender().getUid()===U.user.getUid()?i.getReceiverId():i.getSender().getUid():i.getReceiverId(),s=i.getSender().getUid()}var a=U.getMode();if(!(G.isFalsy(a)||a&&a!==F.APP_SETTINGS.KEYS.NO_TRANSIENT&&a!==F.APP_SETTINGS.KEYS.LIMITED_TRANSIENT))return n(new b.CometChatException(F.ReceiptErrors.RECEIPTS_TEMPORARILY_BLOCKED));if(U.getConnectionStatus()===F.CONNECTION_STATUS.CONNECTED)return st.markAsDelivered(r,o,t,s),e();K.makeApiCall(o===F.MessageConstatnts.RECEIVER_TYPE.USER?"markAsDeliveredForUser":"markAsDeliveredForGroup",o===F.MessageConstatnts.RECEIVER_TYPE.USER?{uid:r}:{guid:r},{messageId:t}).then(function(t){return e(t)},function(t){return n(new b.CometChatException(t.error))})}catch(t){return G.Logger.error("CometChat: markAsDelivered",t),n(new b.CometChatException(F.ReceiptErrors.UNKNOWN_ERROR_OCCURRED))}})},U.sendTransientMessage=function(t){try{if(G.isFalsy(t))return;var e=void 0,n=void 0,r={};if(!(t instanceof j.TransientMessage))return;if(e=t.getReceiverId(),n=t.getReceiverType(),r=t.getData(),G.isFalsy(e)||G.isFalsy(n))return;var o=U.getMode();return G.isFalsy(o)||o&&o!==F.APP_SETTINGS.KEYS.NO_TRANSIENT?void st.sendTransientMessage(e,n,r):void 0}catch(t){G.Logger.error("CometChat: startTyping",t)}},U.getMessageDetails=function(t){return new Promise(function(e,n){try{G.isFalsy(t)?n(new b.CometChatException(T.ERRORS.PARAMETER_MISSING)):K.makeApiCall("getMessageDetails",{messageId:t}).then(function(t){e(h.MessageController.trasformJSONMessge(t.data))},function(t){G.Logger.error("CometChat:GetMessageDetails:",t),n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.getMessageReceipts=function(r){return new Promise(function(e,n){try{var t=G.validateMsgId(r);if(t instanceof b.CometChatException)return void n(t);G.isFalsy(r)?n(new b.CometChatException(T.ERRORS.PARAMETER_MISSING)):K.makeApiCall("getMessageDetails",{messageId:r}).then(function(t){h.MessageController.getReceiptsFromJSON(t.data).then(function(t){e(t)},function(t){n(new b.CometChatException(t))})},function(t){G.Logger.error("CometChat:GetMessageDetails:",t),n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.getUnreadMessageCount=function(n){void 0===n&&(n=!1);var o=0;return new Promise(function(r,e){try{var t=G.validateHideMessagesFromBlockedUsers(n);if(t instanceof b.CometChatException)return void e(t);n&&(o=1),K.makeApiCall("getMessages",{},{unread:1,count:1,hideMessagesFromBlockedUsers:o}).then(function(t){var e={},n={};t.data.map(function(t){t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE]==F.MessageConstatnts.RECEIVER_TYPE.GROUP?n[t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]:e[t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]}),r({users:e,groups:n})},function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}})},U.getUnreadMessageCountForAllUsers=function(r){void 0===r&&(r=!1);var o=0;return new Promise(function(n,e){try{var t=G.validateHideMessagesFromBlockedUsers(r);if(t instanceof b.CometChatException)return void e(t);r&&(o=1),K.makeApiCall("getMessages",{},{hideMessagesFromBlockedUsers:o,receiverType:F.MessageConstatnts.RECEIVER_TYPE.USER,unread:1,count:1}).then(function(t){var e={};t.data.map(function(t){e[t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]}),n(d({},e))},function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}})},U.getUnreadMessageCountForAllGroups=function(r){void 0===r&&(r=!1);var o=0;return new Promise(function(n,e){try{var t=G.validateHideMessagesFromBlockedUsers(r);if(t instanceof b.CometChatException)return void e(t);r&&(o=1),K.makeApiCall("getMessages",{},{hideMessagesFromBlockedUsers:o,receiverType:F.MessageConstatnts.RECEIVER_TYPE.GROUP,unread:1,count:1}).then(function(t){var e={};t.data.map(function(t){t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE]==F.MessageConstatnts.RECEIVER_TYPE.GROUP&&(e[t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT])}),n(d({},e))},function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}})},U.getUnreadMessageCountForUser=function(o,s){void 0===s&&(s=!1);var i=0;return new Promise(function(n,e){try{var t=G.validateId(o,"user");if(t instanceof b.CometChatException)return void e(t);var r=G.validateHideMessagesFromBlockedUsers(s);if(r instanceof b.CometChatException)return void e(r);s&&(i=1),K.makeApiCall("getUserMessages",{listId:o},{hideMessagesFromBlockedUsers:i,unread:1,count:1,uid:o}).then(function(t){var e={};t.data.map(function(t){e[t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]}),n(d({},e))},function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}})},U.getUnreadMessageCountForGroup=function(o,s){void 0===s&&(s=!1);var i=0;return new Promise(function(n,e){try{var t=G.validateId(o,"group");if(t instanceof b.CometChatException)return void e(t);var r=G.validateHideMessagesFromBlockedUsers(s);if(r instanceof b.CometChatException)return void e(r);s&&(i=1),K.makeApiCall("getGroupMessages",{listId:o},{hideMessagesFromBlockedUsers:i,unread:1,count:1,guid:o}).then(function(t){var e={};t.data.map(function(t){t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE]==F.MessageConstatnts.RECEIVER_TYPE.GROUP&&(e[t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=t[F.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT])}),n(d({},e))},function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}})},U.editMessage=function(r){return new Promise(function(e,n){try{var t=G.validateMsgId(r.getId());if(t instanceof b.CometChatException)return void n(t);K.makeApiCall("updateMessage",{messageId:r.getId()},r).then(function(t){e(h.MessageController.trasformJSONMessge(t.data).getActionOn())},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.deleteMessage=function(r){return new Promise(function(e,n){try{var t=G.validateMsgId(r);if(t instanceof b.CometChatException)return void n(t);K.makeApiCall("deleteMessage",{messageId:r},{id:r}).then(function(t){e(h.MessageController.trasformJSONMessge(t.data).getActionOn())},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.getOnlineUserCount=function(){return new Promise(function(r,o){try{G.getAppSettings().then(function(t){var e=G.format((new u.EndpointFactory).wsApi,G.getChatHost(t),G.format(F.ONLINE_MEMBER_COUNT_API.ENDPOINTS.GET_ONLINE_MEMBER_COUNT,t[F.APP_SETTINGS.KEYS.WS_API_VERSION])),n={appId:U.appId,Authorization:U.jwt,Accept:"application/json","Content-Type":"application/json"};K.postData(e,"POST",{},n,!1).then(function(t){return t.json()}).then(function(t){return t.hasOwnProperty(F.ResponseConstants.RESPONSE_KEYS.KEY_DATA)?r(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA][F.ONLINE_MEMBER_COUNT_API.RESPONSE.ONLINE_USERS_COUNT]):o(new b.CometChatException(t.error))}).catch(function(){var t={error:T.FETCH_ERROR.ERROR_IN_API_CALL};return o(t)})},function(t){return o(new b.CometChatException(t))})}catch(t){return o(new b.CometChatException(t))}})},U.getOnlineGroupMemberCount=function(i){return new Promise(function(o,s){try{if(!i||0==i.length)return s(new b.CometChatException(F.ONLINE_MEMBER_COUNT_API.ERRORS.INVALID_GROUPLIST));G.getAppSettings().then(function(t){var e=G.format((new u.EndpointFactory).wsApi,G.getChatHost(t),G.format(F.ONLINE_MEMBER_COUNT_API.ENDPOINTS.GET_ONLINE_MEMBER_COUNT,t[F.APP_SETTINGS.KEYS.WS_API_VERSION])),n={groups:i},r={appId:U.appId,Authorization:U.jwt,Accept:"application/json","Content-Type":"application/json"};K.postData(e,"POST",n,r,!1).then(function(t){return t.json()}).then(function(t){return t.hasOwnProperty(F.ResponseConstants.RESPONSE_KEYS.KEY_DATA)?o(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA][F.ONLINE_MEMBER_COUNT_API.RESPONSE.GROUPS]):s(new b.CometChatException(t.error))}).catch(function(){var t={error:T.FETCH_ERROR.ERROR_IN_API_CALL};return s(t)})},function(t){return s(new b.CometChatException(t))})}catch(t){return s(new b.CometChatException(t))}})},U.createUser=function(o,s){return new Promise(function(n,e){try{if(G.isFalsy(s))return void e(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.GENERAL_ERROR.INVALID),"AUTH_KEY","AUTH_KEY","AUTH_KEY","AUTH_KEY"))));U.apiKey=s;var t=G.validateCreateUser(o);if(t instanceof b.CometChatException)return void e(t);if(!(o instanceof B.User)){var r=void 0;if(!o.hasOwnProperty(F.UserConstants.UID))return void e(new b.CometChatException(T.ERRORS.PARAMETER_MISSING));if(!o.hasOwnProperty(F.UserConstants.NAME))return void e(new b.CometChatException(T.ERRORS.PARAMETER_MISSING));r=new B.User(o[F.UserConstants.UID],o[F.UserConstants.NAME]),o.hasOwnProperty(F.UserConstants.AVATAR)&&r.setAvatar(o[F.UserConstants.AVATAR]),o.hasOwnProperty(F.UserConstants.ROLE)&&r.setRole(o[F.UserConstants.ROLE]),o.hasOwnProperty(F.UserConstants.META_DATA)&&r.setMetadata(o[F.UserConstants.META_DATA]),o.hasOwnProperty(F.UserConstants.LINK)&&r.setLink(o[F.UserConstants.LINK]),o.hasOwnProperty(F.UserConstants.STATUS_MESSAGE)&&r.setStatusMessage(o[F.UserConstants.STATUS_MESSAGE]),o.hasOwnProperty(F.UserConstants.TAGS)&&r.setTags(o[F.UserConstants.TAGS]),o=r}K.makeApiCall("createUser",{},o).then(function(t){var e=C.UsersController.trasformJSONUser(t.data);n(e)},function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}})},U.updateUser=function(r,i){var a=this;return new Promise(function(o,e){try{if(G.isFalsy(i))return void e(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.GENERAL_ERROR.INVALID),"AUTH_KEY","AUTH_KEY","AUTH_KEY","AUTH_KEY"))));U.apiKey=i;var t=G.validateUpdateUser(r);if(t instanceof b.CometChatException)return void e(t);if(!(r instanceof B.User)){var n=void 0;if(!r.hasOwnProperty(F.UserConstants.UID))return void e(new b.CometChatException(T.ERRORS.PARAMETER_MISSING));n=new B.User(r[F.UserConstants.UID]),r.hasOwnProperty(F.UserConstants.NAME)&&n.setName(r[F.UserConstants.NAME]),r.hasOwnProperty(F.UserConstants.AVATAR)&&n.setAvatar(r[F.UserConstants.AVATAR]),r.hasOwnProperty(F.UserConstants.ROLE)&&n.setRole(r[F.UserConstants.ROLE]),r.hasOwnProperty(F.UserConstants.META_DATA)&&n.setMetadata(r[F.UserConstants.META_DATA]),r.hasOwnProperty(F.UserConstants.LINK)&&n.setLink(r[F.UserConstants.LINK]),r.hasOwnProperty(F.UserConstants.STATUS_MESSAGE)&&n.setStatusMessage(r[F.UserConstants.STATUS_MESSAGE]),r.hasOwnProperty(F.UserConstants.TAGS)&&n.setTags(r[F.UserConstants.TAGS]),r=n}var s=r.uid;K.makeApiCall("updateUser",{uid:s},r).then(function(r){if(a.user&&s.toLocaleLowerCase()===a.user.getUid().toLocaleLowerCase())S.LocalStorage.getInstance().get("user").then(function(t){if(t){var e=C.UsersController.trasformJSONUser(r.data),n=r.data;n.wsChannel=t.wsChannel,n.authToken=U.authToken,n.status=F.PresenceConstatnts.STATUS.ONLINE,t.jwt&&(n.jwt=t.jwt),U.user=new B.Me(n),a.localStorage.set("user",U.user),o(e)}});else{var t=C.UsersController.trasformJSONUser(r.data);o(t)}},function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}})},U.updateCurrentUserDetails=function(o){var s=this;return new Promise(function(r,e){try{o.uid=s.user.uid;var t=G.validateUpdateUser(o);if(t instanceof b.CometChatException)return void e(t);if(!(o instanceof B.User)){var n=void 0;o.hasOwnProperty(F.UserConstants.UID)&&(n=new B.User(o[F.UserConstants.UID])),o.hasOwnProperty(F.UserConstants.NAME)&&n.setName(o[F.UserConstants.NAME]),o.hasOwnProperty(F.UserConstants.AVATAR)&&n.setAvatar(o[F.UserConstants.AVATAR]),o.hasOwnProperty(F.UserConstants.ROLE)&&n.setRole(o[F.UserConstants.ROLE]),o.hasOwnProperty(F.UserConstants.META_DATA)&&n.setMetadata(o[F.UserConstants.META_DATA]),o.hasOwnProperty(F.UserConstants.LINK)&&n.setLink(o[F.UserConstants.LINK]),o.hasOwnProperty(F.UserConstants.STATUS_MESSAGE)&&n.setStatusMessage(o[F.UserConstants.STATUS_MESSAGE]),o.hasOwnProperty(F.UserConstants.TAGS)&&n.setTags(o[F.UserConstants.TAGS]),o=n}K.makeApiCall("updateMyDetails",{},o).then(function(t){var e=C.UsersController.trasformJSONUser(t.data),n=U.user=new B.Me(t.data);n.setStatus(F.PresenceConstatnts.STATUS.ONLINE),U.localStorage.set("user",n),r(e)},function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}})},U.getUser=function(r){return new Promise(function(n,e){try{"object"==typeof r&&r.hasOwnProperty("uid")&&(r=r.uid);var t=G.validateId(r,"user");if(t instanceof b.CometChatException)return void e(t);K.makeApiCall("user",{uid:r}).then(function(t){var e=C.UsersController.trasformJSONUser(t.data);n(e)}).catch(function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}})},U.getLoggedInUser=function(){var l=this;return new Promise(function(u,p){try{U.localStorage.get(F.LOCAL_STORE.KEY_USER).then(function(t){if(t)U.user=new B.Me(t),u(U.user);else{var s="",i="",a=F.APPINFO.platform,c=F.APPINFO.sdkVersion,E=F.APPINFO.apiVersion;U.keyStore.get(F.LOCAL_STORE.KEY_DEVICE_ID).then(function(t){if(i=t,navigator&&(s=navigator.userAgent),null==i){var e=ot(),n=(new Date).getTime();i=l.appId+"_"+e+"_"+n,U.keyStore.set(F.LOCAL_STORE.KEY_DEVICE_ID,i)}var r={version:c,apiVersion:E,userAgent:s};G.isFalsy(l.platform)||(r.platform=l.platform),G.isFalsy(l.language)||(r.language=l.language),G.isFalsy(l.resource)||(r.resource=l.resource);var o={platform:a,deviceId:i,appInfo:r};K.makeApiCall("updateMyDetails",{},o,!1).then(function(t){t.data.jwt&&(U.jwt=t.data.jwt);var e=t.data.settings;e&&(S.LocalStorage.getInstance().set("app_settings",e),e[F.APP_SETTINGS.KEYS.MODE]&&U.setMode(e[F.APP_SETTINGS.KEYS.MODE]),e[F.APP_SETTINGS.KEYS.SETTINGS_HASH]&&(U.settingsHash=e[F.APP_SETTINGS.KEYS.SETTINGS_HASH]),e[F.APP_SETTINGS.KEYS.SETTINGS_HASH_RECEIVED_AT]&&(U.settingsHashReceivedAt=e[F.APP_SETTINGS.KEYS.SETTINGS_HASH_RECEIVED_AT]),U.isAnalyticsDisabled=!!e[F.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED],e[F.APP_SETTINGS.KEYS.SECURED_MEDIA_HOST]&&(U.SECURED_MEDIA_HOST=e[F.APP_SETTINGS.KEYS.SECURED_MEDIA_HOST])),u(new B.Me(t.data))},function(t){p(new b.CometChatException(t.error))}).catch(function(t){p(new b.CometChatException(t))})})}})}catch(t){p(new b.CometChatException(t))}})},U.getLoggedinUser=function(){return new Promise(function(e,n){try{U.localStorage.get(F.LOCAL_STORE.KEY_USER).then(function(t){e(t?new B.User(t):null)},function(t){e(null)})}catch(t){n(new b.CometChatException(t))}})},U.blockUsers=function(r){return new Promise(function(e,n){try{var t=G.validateArray(r,"blockUsers");if(t instanceof b.CometChatException)return void n(t);G.isFalsy(r)?n(new b.CometChatException(T.USERS_REQUEST_ERRORS.EMPTY_USERS_LIST)):K.makeApiCall("blockUsers",{},{blockedUids:r}).then(function(t){e(t.data)},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.unblockUsers=function(r){return new Promise(function(e,n){try{var t=G.validateArray(r,"unblockUsers");if(t instanceof b.CometChatException)return void n(t);G.isFalsy(r)?n(new b.CometChatException(T.USERS_REQUEST_ERRORS.EMPTY_USERS_LIST)):K.makeApiCall("unblockUsers",{},{blockedUids:r}).then(function(t){e(t.data)},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.getConversation=function(i,a){return new Promise(function(n,r){try{var t=G.validateConversationType(a);if(t instanceof b.CometChatException)return void r(t);var e=G.validateId(i,a);if(e instanceof b.CometChatException)return void r(e);a=a.toLowerCase(),i=i.toLowerCase();var o={},s="";a===F.MessageConstatnts.RECEIVER_TYPE.GROUP?(s="getGroupConversation",o.guid=i):(s="getUserConversation",o.uid=i),K.makeApiCall(s,o).then(function(t){if(t.data){var e=t.data;n(M.ConversationController.trasformJSONConversation(e.conversationId,e.conversationType,e.lastMessage,e.conversationWith,parseInt(e.unreadMessageCount),e.tags?e.tags:[]))}else r(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ConversationErrors.CONVERSATION_NOT_FOUND),a,i))))},function(t){r(new b.CometChatException(t.error))})}catch(t){r(new b.CometChatException(t))}})},U.tagConversation=function(i,a,c){return void 0===c&&(c=[]),new Promise(function(n,r){try{var t=G.validateConversationType(a);if(t instanceof b.CometChatException)return void r(t);var e=G.validateId(i,a);if(e instanceof b.CometChatException)return void r(e);a=a.toLowerCase(),i=i.toLowerCase();var o={},s="";a===F.MessageConstatnts.RECEIVER_TYPE.GROUP?(s="updateGroupConversation",o.guid=i):(s="updateUserConversation",o.uid=i),K.makeApiCall(s,o,{tags:c}).then(function(t){if(t.data){var e=t.data;n(M.ConversationController.trasformJSONConversation(e.conversationId,e.conversationType,e.lastMessage,e.conversationWith,parseInt(e.unreadMessageCount),e.tags?e.tags:[]))}else r(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ConversationErrors.CONVERSATION_NOT_FOUND),a,i))))},function(t){r(new b.CometChatException(t.error))})}catch(t){r(new b.CometChatException(t))}})},U.deleteConversation=function(i,a){return new Promise(function(e,n){try{var t=G.validateConversationType(a);if(t instanceof b.CometChatException)return void n(t);var r=G.validateId(i,a);if(r instanceof b.CometChatException)return void n(r);var o={},s="";a=a.toLowerCase(),i=i.toLowerCase(),a===F.MessageConstatnts.RECEIVER_TYPE.GROUP?(s="deleteGroupConversation",o.guid=i):(s="deleteUserConversation",o.uid=i),K.makeApiCall(s,o).then(function(t){e("Conversation deleted successfully.")},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.createGroup=function(o){return new Promise(function(e,n){try{var t=G.validateCreateGroup(o);if(t instanceof b.CometChatException)return void n(t);if(!(o instanceof a.Group)){var r=void 0;if(!o.hasOwnProperty(F.GroupConstants.KEYS.GUID))return void n(new b.CometChatException(T.ERRORS.PARAMETER_MISSING));if(!o.hasOwnProperty(F.GroupConstants.KEYS.NAME))return void n(new b.CometChatException(T.ERRORS.PARAMETER_MISSING));if(r=new a.Group(o[F.GroupConstants.KEYS.GUID],o[F.GroupConstants.KEYS.NAME],""),o.hasOwnProperty(F.GroupConstants.KEYS.TYPE))if(o[F.GroupConstants.KEYS.TYPE].toLocaleLowerCase()==F.GroupType.Password){if(!o.hasOwnProperty(F.GroupConstants.KEYS.PASSWORD))return void n(new b.CometChatException(T.GROUP_CREATION_ERRORS.EMPTY_PASSWORD));r.setType(F.GROUP_TYPE.PASSWORD),r.setPassword(o[F.GroupConstants.KEYS.PASSWORD])}else r.setType(o[F.GroupConstants.KEYS.TYPE]);else r.setType(F.GROUP_TYPE.PUBLIC);o.hasOwnProperty(F.GroupConstants.KEYS.ICON)&&r.setIcon(o[F.GroupConstants.KEYS.ICON]),o.hasOwnProperty(F.GroupConstants.KEYS.DESCRIPTION)&&r.setDescription(o[F.GroupConstants.KEYS.DESCRIPTION]),o.hasOwnProperty(F.GroupConstants.KEYS.TAGS)&&r.setTags(o[F.GroupConstants.KEYS.TAGS]),o=r}K.makeApiCall("createGroup",{},o).then(function(t){f.GroupsController.trasformJSONGroup(t.data).setHasJoined(!0),e(f.GroupsController.trasformJSONGroup(t.data))},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.getGroup=function(r){return new Promise(function(e,n){try{"object"==typeof r&&r.hasOwnProperty("guid")&&(r=r.guid);var t=G.validateId(r,"group");if(t instanceof b.CometChatException)return void n(t);K.makeApiCall("getGroup",{guid:r}).then(function(t){e(f.GroupsController.trasformJSONGroup(t.data))},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.joinGroup=function(o,s,i){return void 0===s&&(s=F.GroupType.Public),void 0===i&&(i=""),new Promise(function(n,e){try{var t=G.validateJoinGroup(o,s,i);if(t instanceof b.CometChatException)return void e(t);var r=void 0;"object"==typeof o&&(o.hasOwnProperty(F.GroupConstants.KEYS.GUID)?(o.hasOwnProperty(F.GroupConstants.KEYS.TYPE)&&(s=o[F.GroupConstants.KEYS.TYPE],o[F.GroupConstants.KEYS.TYPE].toLocaleLowerCase()===F.GroupType.Password&&o.hasOwnProperty(F.GroupConstants.KEYS.PASSWORD)&&(i=o[F.GroupConstants.KEYS.PASSWORD])),o=o[F.GroupConstants.KEYS.GUID]):e(new b.CometChatException(T.ERRORS.PARAMETER_MISSING))),r=G.isFalsy(i)?new a.Group(o,"name",s):new a.Group(o,"name",s,i),K.makeApiCall("joinGroup",r,r).then(function(t){var e=f.GroupsController.trasformJSONGroup(t.data[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA][F.ActionConstatnts.ACTION_KEYS.ENTITIES][F.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][F.ActionConstatnts.ACTION_KEYS.ENTITY]);e.setHasJoined(!0),n(e)},function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}})},U.updateGroup=function(o){return new Promise(function(e,n){try{var t=G.validateUpdateGroup(o);if(t instanceof b.CometChatException)return void n(t);if(!(o instanceof a.Group)){var r=void 0;if(!o.hasOwnProperty(F.GroupConstants.KEYS.GUID))return void n(new b.CometChatException(T.ERRORS.PARAMETER_MISSING));r=new a.Group(F.GroupConstants.KEYS.GUID,"",""),o.hasOwnProperty(F.GroupConstants.KEYS.TYPE)?r.setType(o[F.GroupConstants.KEYS.TYPE]):(o[F.GroupConstants.KEYS.TYPE]=F.GROUP_TYPE.PUBLIC,r.setType[F.GROUP_TYPE.PUBLIC]),o.hasOwnProperty(F.GroupConstants.KEYS.NAME)&&r.setName(o[F.GroupConstants.KEYS.NAME]),o.hasOwnProperty(F.GroupConstants.KEYS.ICON)&&r.setIcon(o[F.GroupConstants.KEYS.ICON]),o.hasOwnProperty(F.GroupConstants.KEYS.DESCRIPTION)&&r.setDescription(o[F.GroupConstants.KEYS.DESCRIPTION]),o.hasOwnProperty(F.GroupConstants.KEYS.TAGS)&&r.setTags(o[F.GroupConstants.KEYS.TAGS]),o=r}K.makeApiCall("updateGroup",o,o).then(function(t){e(f.GroupsController.trasformJSONGroup(t.data))},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.deleteGroup=function(r){return new Promise(function(e,n){try{var t=G.validateId(r,"group");if(t instanceof b.CometChatException)return void n(t);K.makeApiCall("deleteGroup",{guid:r}).then(function(t){e(!0)},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.leaveGroup=function(r){return new Promise(function(e,n){try{var t=G.validateId(r,"group");if(t instanceof b.CometChatException)return void n(t);K.makeApiCall("leaveGroup",{guid:r}).then(function(t){e(!0)},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.kickGroupMember=function(o,s){return new Promise(function(e,n){try{var t=G.validateId(o,"group");if(t instanceof b.CometChatException)return void n(t);var r=G.validateId(s,"user");if(r instanceof b.CometChatException)return void n(r);K.makeApiCall("kickGroupMembers",{guid:o,uid:s}).then(function(t){e(!0)},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.updateGroupMemberScope=function(s,i,a){return new Promise(function(e,n){try{var t=G.validateId(s,"group");if(t instanceof b.CometChatException)return void n(t);var r=G.validateId(i,"user");if(r instanceof b.CometChatException)return void n(r);var o=G.validateScope(a);if(o instanceof b.CometChatException)return void n(o);K.makeApiCall("changeScopeOfMember",{guid:s,uid:i},{scope:a}).then(function(t){e(!0)},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.banGroupMember=function(o,s){return new Promise(function(e,n){try{var t=G.validateId(o,"group");if(t instanceof b.CometChatException)return void n(t);var r=G.validateId(s,"user");if(r instanceof b.CometChatException)return void n(r);K.makeApiCall("banGroupMember",{guid:o,uid:s}).then(function(t){e(!0)},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.unbanGroupMember=function(o,s){return new Promise(function(e,n){try{var t=G.validateId(o,"group");if(t instanceof b.CometChatException)return void n(t);var r=G.validateId(s,"user");if(r instanceof b.CometChatException)return void n(r);K.makeApiCall("unbanGroupMember",{guid:o,uid:s}).then(function(t){e(!0)},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.addMembersToGroup=function(i,a,c){var E=[],u=[],p=[],l=[];return new Promise(function(t,e){try{var n=G.validateId(i,"group");if(n instanceof b.CometChatException)return void e(n);var r=G.validateArray(a,"groupMembers");if(r instanceof b.CometChatException)return void e(r);if(c){var o=G.validateArray(c,"bannedMembers");if(o instanceof b.CometChatException)return void e(o)}G.isFalsy(a)&&G.isFalsy(c)?e(new b.CometChatException({})):G.isFalsy(a)||G.isFalsy(c)?G.isFalsy(a)?c.map(function(t){l.push(t)}):(a.filter(function(t){if(t.getScope()==F.GROUP_MEMBER_SCOPE.ADMIN)return!0}).map(function(t){E.push(t.getUid())}),a.filter(function(t){if(t.getScope()==F.GROUP_MEMBER_SCOPE.MODERATOR)return!0}).map(function(t){u.push(t.getUid())}),a.filter(function(t){if(t.getScope()==F.GROUP_MEMBER_SCOPE.PARTICIPANT)return!0}).map(function(t){p.push(t.getUid())})):(a.filter(function(t){if(t.getScope()==F.GROUP_MEMBER_SCOPE.ADMIN)return!0}).map(function(t){E.push(t.getUid())}),a.filter(function(t){if(t.getScope()==F.GROUP_MEMBER_SCOPE.MODERATOR)return!0}).map(function(t){u.push(t.getUid())}),a.filter(function(t){if(t.getScope()==F.GROUP_MEMBER_SCOPE.PARTICIPANT)return!0}).map(function(t){p.push(t.getUid())}),c.map(function(t){l.push(t)}));var s={};G.isFalsy(E)||(s=d(d({},s),{admins:E})),G.isFalsy(p)||(s=d(d({},s),{participants:p})),G.isFalsy(u)||(s=d(d({},s),{moderators:u})),G.isFalsy(l)||(s=d(d({},s),{usersToBan:l})),K.makeApiCall("addMemebersToGroup",{guid:i},s).then(function(e){var n={};Object.keys(e.data.admins).map(function(t){e.data.admins[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?n[t]=F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:n[t]=e.data.admins[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(e.data.participants).map(function(t){e.data.participants[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?n[t]=F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:n[t]=e.data.participants[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(e.data.moderators).map(function(t){e.data.moderators[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?n[t]=F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:n[t]=e.data.moderators[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(e.data.usersToBan).map(function(t){e.data.usersToBan[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?n[t]=F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:n[t]=e.data.usersToBan[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),t(n)},function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}})},U.transferGroupOwnership=function(o,s){return new Promise(function(n,e){try{var t=G.validateId(o,"group");if(t instanceof b.CometChatException)return void e(t);var r=G.validateId(s,"user");if(r instanceof b.CometChatException)return void e(r);K.makeApiCall("transferOwnership",{guid:o},{owner:s}).then(function(t){var e;e=t&&t.data&&t.data.message?t.data.message:"Ownership transferred to user "+s+" for the group with guid "+o+".",n(e)},function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}})},U.createGroupWithMembers=function(i,a,c){var E=[],u=[],p=[],l=[];return new Promise(function(s,e){try{var t=G.validateCreateGroup(i);if(t instanceof b.CometChatException)return void e(t);if(a&&0<a.length){var n=G.validateArray(a,"groupMembers");if(n instanceof b.CometChatException)return void e(n);a.map(function(t){t.getScope()===F.GROUP_MEMBER_SCOPE.ADMIN&&E.push(t.getUid()),t.getScope()===F.GROUP_MEMBER_SCOPE.MODERATOR&&u.push(t.getUid()),t.getScope()===F.GROUP_MEMBER_SCOPE.PARTICIPANT&&p.push(t.getUid())})}if(c&&0<c.length){var r=G.validateArray(c,"bannedMembers");if(r instanceof b.CometChatException)return void e(r);c.map(function(t){l.push(t)})}var o={};o=d({},i),G.isFalsy(E)||(o.members=d(d({},o.members),{admins:E})),G.isFalsy(p)||(o.members=d(d({},o.members),{participants:p})),G.isFalsy(u)||(o.members=d(d({},o.members),{moderators:u})),G.isFalsy(l)||(o.members=d(d({},o.members),{usersToBan:l})),K.makeApiCall("createGroup",{},o).then(function(t){var e={members:{}},n=t.data.members.data?t.data.members.data:{admins:{},moderators:{},participants:{},usersToBan:{}};Object.keys(n.admins).map(function(t){n.admins[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?e.members[t]=F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:e.members[t]=n.admins[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(n.participants).map(function(t){n.participants[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?e.members[t]=F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:e.members[t]=n.participants[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(n.moderators).map(function(t){n.moderators[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?e.members[t]=F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:e.members[t]=n.moderators[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(n.usersToBan).map(function(t){n.usersToBan[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?e.members[t]=F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:e.members[t]=n.usersToBan[t][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][F.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),delete t.data.members;var r=t.data,o=f.GroupsController.trasformJSONGroup(r);o.setHasJoined(!0),e=d(d({},e),{group:o}),s(e)},function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}})},U.initiateCall=function(e){var o=this;return new Promise(function(n,r){if(G.isCallingComponentInstalled()){var t=o.getActiveCall();if(null===t)try{G.isFalsy(JSON.parse(JSON.stringify(e)).sender)?G.isFalsy(t)?(e.setStatus(F.CallConstants.CALL_STATUS.INITIATED),e.receiver=e.receiverId.toString(),delete e.receiverId,K.makeApiCall("createCallSession",{},e).then(function(t){var e=h.MessageController.trasformJSONMessge(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);x.CallController.getInstance().initiateCall(e).then(function(t){n(e)}).catch(function(t){r(new b.CometChatException(t))})},function(t){r(new b.CometChatException(t.error))})):r(new b.CometChatException(F.CALL_ERROR.ERROR_IN_CALLING)):x.CallController.getInstance().initiateCall(e).then(function(t){n(Object.assign(e))}).catch(function(t){r(new b.CometChatException(t))})}catch(t){r(new b.CometChatException(t))}else r(new b.CometChatException(F.CALL_ERROR.CALL_ALREADY_INITIATED))}else r(new b.CometChatException(F.CALL_ERROR.MODULE_NOT_INSTALLED))})},U.acceptCall=function(r){var o=this;return new Promise(function(n,e){if(G.isCallingComponentInstalled())if(null===o.getActiveCall())try{var t={};t[F.CallConstants.CALL_KEYS.CALL_STATUS]=F.CallConstants.CALL_STATUS.ONGOING,K.makeApiCall("updateCallSession",{sessionid:r},t).then(function(t){var e=h.MessageController.trasformJSONMessge(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);x.CallController.getInstance().onCallStarted(e),n(e)},function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}else e(new b.CometChatException(F.CALL_ERROR.CANNOT_ACCEPT_CALL));else e(new b.CometChatException(F.CALL_ERROR.MODULE_NOT_INSTALLED))})},U.rejectCall=function(t,e){try{switch(e){case F.CallConstants.CALL_STATUS.REJECTED:return this.rejectIncomingCall(t);case F.CallConstants.CALL_STATUS.CANCELLED:return this.cancelCall(t);case F.CallConstants.CALL_STATUS.BUSY:return this.sendBusyResponse(t);default:return this.endCall(t)}}catch(t){G.Logger.error("CometChat: rejectCall",t)}},U.endCall=function(o){var s=this;return new Promise(function(n,e){if(G.isCallingComponentInstalled()){var r=s.getActiveCall();if(null!==r){if(r.getSessionId()===o)try{var t={};t[F.CallConstants.CALL_KEYS.CALL_STATUS]=F.CallConstants.CALL_STATUS.ENDED,r.getJoinedAt()&&(t[F.CallConstants.CALL_KEYS.CALL_JOINED_AT]=r.getJoinedAt()),K.makeApiCall("updateCallSession",{sessionid:o},t).then(function(t){x.CallController.getInstance().endSession();var e=h.MessageController.trasformJSONMessge(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);n(e),x.CallController.getInstance().getCallListner()&&x.CallController.getInstance().getCallListner()._eventListener.onCallEnded(e),x.CallController.getInstance().endCall()},function(t){G.Logger.log("calling Log",{error:t}),x.CallController.getInstance().endSession(),r.setStatus(F.CallConstants.CALL_STATUS.ENDED),n(r),x.CallController.getInstance().getCallListner()&&x.CallController.getInstance().getCallListner()._eventListener.onCallEnded(r),x.CallController.getInstance().endCall()})}catch(t){e(new b.CometChatException(t))}}else x.CallController.getInstance().endSession(),x.CallController.getInstance().getCallListner()&&x.CallController.getInstance().getCallListner()._eventListener.onCallEnded(null),x.CallController.getInstance().endCall(),n(null)}else e(new b.CometChatException(F.CALL_ERROR.MODULE_NOT_INSTALLED))})},U.getActiveCall=function(){try{return x.CallController.getInstance().getActiveCall()}catch(t){G.Logger.error("CometChat: getActiveCall",t)}},U.startCall=function(D){return c(this,void 0,void 0,function(){var r,o,s,i,a,c,E,u,p,l,d,S,h,C,f,T,g,_,A,R,I,O,N,y,m,v,P,L,e,n,M=this;return Y(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),o=this.getActiveCall(),d=l=!(p=u=E=c=a=!(i=!1)),S=F.CallConstants.CALL_MODE.DEFAULT,g={},A=_=!0,O=I=!(R="circle"),v=this.user,[4,G.getCallingComponentVersion()];case 1:return e=t.sent(),L=3===e?w.CometChatCalling.Calling:2===e?rt:null,G.getAppSettings().then(function(t){if(T=t[F.APP_SETTINGS.KEYS.WEBRTC_HOST],g[F.APP_SETTINGS.KEYS.ANALYTICS_HOST]=t[F.APP_SETTINGS.KEYS.ANALYTICS_HOST],g[F.APP_SETTINGS.KEYS.ANALYTICS_VERSION]=t[F.APP_SETTINGS.KEYS.ANALYTICS_VERSION],g[F.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED]=t[F.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED],g[F.APP_SETTINGS.KEYS.ANALYTICS_USE_SSL]=t[F.APP_SETTINGS.KEYS.ANALYTICS_USE_SSL],C=t[F.APP_SETTINGS.KEYS.REGION],D.getCallEventListener()&&x.CallController.getInstance().setCallListner(D.getCallEventListener()),L)if(G.isFalsy(M.appSettings))x.CallController.getInstance().getCallListner()&&x.CallController.getInstance().getCallListner()._eventListener.onError(new b.CometChatException(F.CALL_ERROR.NOT_INITIALIZED));else if(C)if(v)if((P=new k.RTCUser(v.getUid())).setName(v.getName()),P.setAvatar(v.getAvatar()),P.setResource(U.getSessionId()),U.appId)if(f=U.appId,G.isFalsy(D))x.CallController.getInstance().getCallListner()&&x.CallController.getInstance().getCallListner()._eventListener.onError(new b.CometChatException(F.CALL_ERROR.CALL_SETTINGS_REQUIRED));else{if(o){var e=o.getType();i=e===F.CallConstants.CALL_TYPE.AUDIO,s=o.getSessionId()}else{if(i=D.isAudioOnlyCall(),G.isFalsy(D.getSessionId()))return void(x.CallController.getInstance().getCallListner()&&x.CallController.getInstance().getCallListner()._eventListener.onError(new b.CometChatException(F.CALL_ERROR.SESSION_ID_REQUIRED)));s=("v1."+C+"."+U.getAppId()+"."+D.getSessionId()).toLowerCase()}if(s){a=D.isDefaultLayoutEnabled(),c=D.isPauseVideoButtonEnabled(),E=D.isMuteAudioButtonEnabled(),u=D.isEndCallButtonEnabled(),p=D.isAudioModeButtonEnabled(),S=D.getMode(),l=D.getStartWithAudioMuted(),d=D.getStartWithVideoMuted(),h=D.getDefaultAudioMode(),A=i?(_=D.isAudioToVideoButtonEnabled(),!1):(_=!1,D.isSwitchCameraButtonEnabled()),R=D.getAvatarMode(),I=D.isRecordingButtonEnabled(),O=D.shouldStartRecordingOnCallStart(),N=D.getMainVideoContainerSetting(),y=D.isVideoTileClickEnabled(),m=D.isVideoTileDragEnabled();var n={uid:v.getUid(),sessionId:s};U.getJWT(n).then(function(t){t.hasOwnProperty("token")?(P.setJWT(t.token),r=(new V.CallSettingsBuilder).setSessionID(s).enableDefaultLayout(a).setIsAudioOnlyCall(i).setUser(P).setRegion(C).setAppId(f).setDomain(T).showEndCallButton(u).showMuteAudioButton(E).showPauseVideoButton(c).showAudioModeButton(p).setMode(S).startWithAudioMuted(l).startWithVideoMuted(d).setAnalyticsSettings(g).setDefaultAudioMode(h).showSwitchToVideoCallButton(_).showSwitchCameraButton(A).setAvatarMode(R).showRecordingButton(I).startRecordingOnCallStart(O).setMainVideoContainerSetting(N).enableVideoTileClick(y).enableVideoTileDrag(m).build(),L.startCall({callsettings:JSON.stringify(r)}),L.addListener("ON_CALL_END_BUTTON_PRESSED",function(t){G.Logger.log("CALLING_EVENT","ON_CALL_END_BUTTON_PRESSED"),o?U.endCall(r.getSessionId()):x.CallController.getInstance().getCallListner()&&x.CallController.getInstance().getCallListner()._eventListener.onCallEnded(null),L.endCallSession()}),L.addListener("ON_CALL_ENDED",function(t){G.Logger.log("CALLING_EVENT","ON_CALL_ENDED"),o&&(U.endCall(r.getSessionId()),L.endCallSession())}),L.addListener("ON_USER_JOINED",function(t){if(G.Logger.log("CALLING_EVENT","ON_USER_JOINED"),t){var e=void 0,n=t;G.isFalsy(n.uid)||G.isFalsy(n.name)||((e=new B.User(n)).setStatus("online"),U.user.getUid().toLowerCase()!=e.getUid().toLowerCase()&&x.CallController.getInstance().getCallListner()&&(G.isFalsy(x.CallController.getInstance().getCallListner()._eventListener.onUserJoined)||x.CallController.getInstance().getCallListner()._eventListener.onUserJoined(e)))}}),L.addListener("ON_USER_LEFT",function(t){if(G.Logger.log("CALLING_EVENT","ON_USER_LEFT"),t){var e=void 0,n=t;G.isFalsy(n.uid)||G.isFalsy(n.name)||((e=new B.User(n)).setStatus("online"),U.user.getUid().toLowerCase()!=e.getUid().toLowerCase()&&x.CallController.getInstance().getCallListner()&&(G.isFalsy(x.CallController.getInstance().getCallListner()._eventListener.onUserLeft)||x.CallController.getInstance().getCallListner()._eventListener.onUserLeft(e)))}}),L.addListener("ON_USER_LIST_CHANGED",function(t){G.Logger.log("CALLING_EVENT","ON_USER_LIST_CHANGED");var n=[];t&&t.userList&&0<t.userList.length&&(t.userList.map(function(t){if(!G.isFalsy(t.uid)&&!G.isFalsy(t.name)){var e=new B.User(t);e.setStatus("online"),n.push(e)}}),x.CallController.getInstance().getCallListner()&&(G.isFalsy(x.CallController.getInstance().getCallListner()._eventListener.onUserListUpdated)||x.CallController.getInstance().getCallListner()._eventListener.onUserListUpdated(n)))}),L.addListener("ON_AUDIO_MODE_CHANGED",function(t){var r=[];t&&t.modes&&0<t.modes.length&&(t.modes.map(function(t){var e="",n=!1;t.hasOwnProperty("mode")&&(e=t.mode),t.hasOwnProperty("isSelected")&&(n=t.isSelected),t.hasOwnProperty("type")&&(e=t.type),t.hasOwnProperty("selected")&&(n=t.selected),r.push(new z.AudioMode(e,n))}),x.CallController.getInstance().getCallListner()&&(G.isFalsy(x.CallController.getInstance().getCallListner()._eventListener.onAudioModesUpdated)||x.CallController.getInstance().getCallListner()._eventListener.onAudioModesUpdated(r)))}),rt.addListener("ON_SWITCHED_TO_VIDEO",function(t){if(G.Logger.info("onCallSwitchedToVideo received in SDK = ",t),t.hasOwnProperty("initiator")&&t.hasOwnProperty("sessionId")&&!G.isFalsy(t.initiator.uid)&&!G.isFalsy(t.sessionId)&&t.hasOwnProperty("accepted")&&!G.isFalsy(t.accepted.uid)){var e=t.sessionId,n=new B.User(t.initiator);n.setStatus("online");var r=new B.User(t.accepted);if(r.setStatus("online"),x.CallController.getInstance().getCallListner()&&(G.isFalsy(x.CallController.getInstance().getCallListner()._eventListener.onCallSwitchedToVideo)||x.CallController.getInstance().getCallListner()._eventListener.onCallSwitchedToVideo(e,n,r)),t.initiator.uid.toLowerCase()===U.user.getUid().toLowerCase()&&!t.sessionId.includes("v1."))try{K.makeApiCall("updateCallType",{sessionid:e},{type:"video"}).then(function(t){G.Logger.log("API :: response",t)},function(t){G.Logger.error("CallController :: onSwitchedToVideo",t)})}catch(t){G.Logger.error("CallController :: onSwitchedToVideo",t)}}}),rt.addListener("ON_RECORDING_TOGGLED",function(t){if(t&&t.hasOwnProperty("user")&&t.hasOwnProperty("recordingStarted")&&!G.isFalsy(t.user.uid)&&!G.isFalsy(t.user.name)){var e=new B.User(t.user);e.setStatus("online");var n=t.recordingStarted;x.CallController.getInstance().getCallListner()&&(n?G.isFalsy(x.CallController.getInstance().getCallListner()._eventListener.onRecordingStarted)||x.CallController.getInstance().getCallListner()._eventListener.onRecordingStarted(e):G.isFalsy(x.CallController.getInstance().getCallListner()._eventListener.onRecordingStopped)||x.CallController.getInstance().getCallListner()._eventListener.onRecordingStopped(e))}}),rt.addListener("ON_USER_MUTED",function(t){if(t&&t.hasOwnProperty("muted")&&t.hasOwnProperty("mutedBy")&&!G.isFalsy(t.muted.uid)&&!G.isFalsy(t.muted.name)&&!G.isFalsy(t.mutedBy.uid)&&!G.isFalsy(t.mutedBy.name)){var e=new B.User(t.muted);e.setStatus("online");var n=new B.User(t.mutedBy);n.setStatus("online"),x.CallController.getInstance().getCallListner()&&(G.isFalsy(x.CallController.getInstance().getCallListner()._eventListener.onUserMuted)||x.CallController.getInstance().getCallListner()._eventListener.onUserMuted(e,n))}})):x.CallController.getInstance().getCallListner()&&x.CallController.getInstance().getCallListner()._eventListener.onError(new b.CometChatException(F.CALL_ERROR.JWT_NOT_FOUND))},function(t){x.CallController.getInstance().getCallListner()&&x.CallController.getInstance().getCallListner()._eventListener.onError(new b.CometChatException(t))})}else x.CallController.getInstance().getCallListner()&&x.CallController.getInstance().getCallListner()._eventListener.onError(new b.CometChatException(F.CALL_ERROR.SESSION_ID_REQUIRED))}else x.CallController.getInstance().getCallListner()&&x.CallController.getInstance().getCallListner()._eventListener.onError(new b.CometChatException(F.CALL_ERROR.NOT_INITIALIZED));else x.CallController.getInstance().getCallListner()&&x.CallController.getInstance().getCallListner()._eventListener.onError(new b.CometChatException(F.CALL_ERROR.NOT_LOGGED_IN));else x.CallController.getInstance().getCallListner()&&x.CallController.getInstance().getCallListner()._eventListener.onError(new b.CometChatException(F.CALL_ERROR.NOT_INITIALIZED));else x.CallController.getInstance().getCallListner()&&x.CallController.getInstance().getCallListner()._eventListener.onError(new b.CometChatException(F.CALL_ERROR.MODULE_NOT_INSTALLED))}),[3,3];case 2:return n=t.sent(),G.Logger.error("CometChat: startCall",n),[3,3];case 3:return[2]}})})},U.getCallParticipantCount=function(c,E){return new Promise(function(i,a){try{G.getAppSettings().then(function(t){if(G.isFalsy(c))return a(new b.CometChatException(F.ProsodyApiErrors.INVALID_SESSIONID));if(G.isFalsy(E))return a(new b.CometChatException(F.ProsodyApiErrors.INVALID_TYPE));var e=t[F.APP_SETTINGS.KEYS.REGION],n={},r=t[F.APP_SETTINGS.KEYS.WEBRTC_HOST],o=t[F.APP_SETTINGS.KEYS.WEBRTC_API_SUBDOMAIN],s=G.format((new u.EndpointFactory).prosodyApi,o,r,F.PROSODY_API.PATH.ROOM_SIZE);"direct"===E.toLowerCase()&&(c=("v1."+e+"."+U.getAppId()+"."+c).toLowerCase()),n[F.PROSODY_API.QUERY_PARAMETERS.DOMAIN]=r,n[F.PROSODY_API.QUERY_PARAMETERS.ROOM]=c,K.postData(s,"GET",n,{},!1).then(function(t){return t.text()}).then(function(t){var e=t?JSON.parse(t):{};return e.hasOwnProperty(F.PROSODY_API.RESPONSE.PARTICIPANTS)?i(e[F.PROSODY_API.RESPONSE.PARTICIPANTS]):i(0)}).catch(function(){var t={error:T.FETCH_ERROR.ERROR_IN_API_CALL};return a(t)})},function(t){return a(new b.CometChatException(t))})}catch(t){return a(new b.CometChatException(t))}})},U.rejectIncomingCall=function(r){return new Promise(function(n,e){try{if(G.isCallingComponentInstalled()){var t={};t[F.CallConstants.CALL_KEYS.CALL_STATUS]=F.CallConstants.CALL_STATUS.REJECTED,K.makeApiCall("updateCallSession",{sessionid:r},t).then(function(t){var e=h.MessageController.trasformJSONMessge(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);n(e)},function(t){e(new b.CometChatException(t.error))})}else e(new b.CometChatException(F.CALL_ERROR.MODULE_NOT_INSTALLED))}catch(t){e(new b.CometChatException(t))}})},U.cancelCall=function(o){var s=this;return new Promise(function(n,e){var t=s.getActiveCall();if(null!==t&&t.getSessionId()===o&&t.getCallInitiator().getUid().toLocaleLowerCase()===U.user.getUid().toLocaleLowerCase())try{if(G.isCallingComponentInstalled()){var r={};r[F.CallConstants.CALL_KEYS.CALL_STATUS]=F.CallConstants.CALL_STATUS.CANCELLED,K.makeApiCall("updateCallSession",{sessionid:o},r).then(function(t){var e=h.MessageController.trasformJSONMessge(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);x.CallController.getInstance().endCallSession(),n(e)},function(t){e(new b.CometChatException(t.error))})}else e(new b.CometChatException(F.CALL_ERROR.MODULE_NOT_INSTALLED))}catch(t){e(new b.CometChatException(t))}})},U.sendBusyResponse=function(r){return new Promise(function(n,e){try{if(G.isCallingComponentInstalled()){var t={};t[F.CallConstants.CALL_KEYS.CALL_STATUS]=F.CallConstants.CALL_STATUS.BUSY,K.makeApiCall("updateCallSession",{sessionid:r},t).then(function(t){var e=h.MessageController.trasformJSONMessge(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);n(e)},function(t){e(new b.CometChatException(t.error))})}else e(new b.CometChatException(F.CALL_ERROR.MODULE_NOT_INSTALLED))}catch(t){e(new b.CometChatException(t))}})},U.sendUnansweredResponse=function(r){return new Promise(function(n,e){try{if(G.isCallingComponentInstalled()){var t={};t[F.CallConstants.CALL_KEYS.CALL_STATUS]=F.CallConstants.CALL_STATUS.UNANSWERED,K.makeApiCall("updateCallSession",{sessionid:r},t).then(function(t){var e=h.MessageController.trasformJSONMessge(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);st.publishCallMessage(e),n(e)},function(t){e(new b.CometChatException(t.error))})}else e(new b.CometChatException(F.CALL_ERROR.MODULE_NOT_INSTALLED))}catch(t){e(new b.CometChatException(t))}})},U.addConnectionListener=function(t,e){try{it.addConnectionEventListener(t,e)}catch(t){G.Logger.error("CometChat: addConnectionListener",t)}},U.removeConnectionListener=function(t){try{it.removeConnectionEventListener(t)}catch(t){G.Logger.error("CometChat: removeConnectionListener",t)}},U.addMessageListener=function(t,e){try{it.addMessageEventListener(t,e)}catch(t){G.Logger.error("CometChat: addMessageListener",t)}},U.removeMessageListener=function(t){try{it.removeMessageEventListener(t)}catch(t){G.Logger.error("CometChat: removeMessageListener",t)}},U.addCallListener=function(t,e){try{it.addCallEventListener(t,e)}catch(t){G.Logger.error("CometChat: addCallListener",t)}},U.removeCallListener=function(t){try{it.removeCallEventListener(t)}catch(t){G.Logger.error("CometChat: removeCallListener",t)}},U.addUserListener=function(t,e){try{it.addUserEventListener(t,e)}catch(t){G.Logger.error("CometChat: addUserListener",t)}},U.removeUserListener=function(t){try{it.removeUserEventListener(t)}catch(t){G.Logger.error("CometChat: removeUserListener",t)}},U.addGroupListener=function(t,e){try{it.addGroupEventListener(t,e)}catch(t){G.Logger.error("CometChat: addGroupListener",t)}},U.removeGroupListener=function(t){try{it.removeGroupEventListener(t)}catch(t){G.Logger.error("CometChat: removeGroupListener",t)}},U.addLoginListener=function(t,e){try{it.addLoginEventListener(t,e)}catch(t){G.Logger.error("CometChat: addLoginListener",t)}},U.removeLoginListener=function(t){try{it.removeLoginEventListener(t)}catch(t){G.Logger.error("CometChat: removeLoginListener",t)}},U.generateAuthToken=function(p){var l=this;return new Promise(function(r,o){try{var s={},i="",a="",c=F.APPINFO.platform,E=F.APPINFO.sdkVersion,u=F.APPINFO.apiVersion;navigator&&(a=navigator.userAgent),U.keyStore.get(F.LOCAL_STORE.KEY_DEVICE_ID).then(function(t){if(null==(i=t)){var e=ot(),n=(new Date).getTime();i=l.appId+"_"+e+"_"+n,U.keyStore.set(F.LOCAL_STORE.KEY_DEVICE_ID,i)}s={platform:c,deviceId:i,appInfo:{version:E,apiVersion:u,userAgent:a}},K.makeApiCall("authToken",{uid:p},s).then(function(t){r(t.data)}).catch(function(t){o(new b.CometChatException(t.error))})},function(t){G.Logger.error("Got error while fetching data from key store",t)})}catch(t){o(new b.CometChatException(t))}})},U.tryReconnectingToWS=function(){U.WSReconnectionInProgress||U.startWSReconnectionTimer()},U.prototype.makeWSConnection=function(){U.WSLogin(U.user)},U.prototype.accidentallyDisconnected=function(){U.currentConnectionStatus=F.CONNECTION_STATUS.CONNECTING,it.connectionHandlers.map(function(t){try{t._eventListener&&(G.isFalsy(t._eventListener.inConnecting)||t._eventListener.inConnecting())}catch(t){G.Logger.error("ConnectionHandlers: inConnecting Status",t)}}),U.tryReconnectingToWS()},U.WSLogin=function(t){var r=this;st.connection||st.WSLogin(t.getJWT(),function(t,e){switch(t){case W.READY_STATE.CONNECTING:(n=U.getConnectionStatus())==F.CONNECTION_STATUS.DISCONNECTED&&(r.currentConnectionStatus=F.CONNECTION_STATUS.CONNECTING,it.connectionHandlers.map(function(t){try{t._eventListener&&(G.isFalsy(t._eventListener.inConnecting)||t._eventListener.inConnecting())}catch(t){G.Logger.error("connectionHandlers: Connecting Status",t)}}));break;case W.READY_STATE.OPEN:(n=U.getConnectionStatus())==F.CONNECTION_STATUS.CONNECTING&&(r.currentConnectionStatus=F.CONNECTION_STATUS.CONNECTED,it.connectionHandlers.map(function(t){try{t._eventListener&&(G.isFalsy(t._eventListener.onConnected)||t._eventListener.onConnected()),r.onConnectionSuccess&&(r.onConnectionSuccess(),r.onConnectionSuccess=null)}catch(t){G.Logger.error("connectionHandlers: Connected Status",t)}})),U.WSReconnectionInProgress&&U.clearWSReconnectionTimer();break;case W.READY_STATE.CLOSING:break;case W.READY_STATE.CLOSED:var n=U.getConnectionStatus();1e3!==e.code&&(r.onConnectionError&&(r.onConnectionError(new b.CometChatException(F.ReceiptErrors.NO_WEBSOCKET_CONNECTION)),r.onConnectionError=null),it.connectionHandlers.map(function(t){try{t._eventListener&&(G.isFalsy(t._eventListener.onConnectionError)||t._eventListener.onConnectionError())}catch(t){G.Logger.error("connectionHandlers: ConnectionError Status",t)}})),n!==F.CONNECTION_STATUS.DISCONNECTED&&n!==F.CONNECTION_STATUS.CONNECTING&&(r.currentConnectionStatus=F.CONNECTION_STATUS.DISCONNECTED,it.connectionHandlers.map(function(t){try{t._eventListener&&(G.isFalsy(t._eventListener.onDisconnected)||t._eventListener.onDisconnected()),U.onDisconnectSuccess&&(U.onDisconnectSuccess(),U.onDisconnectSuccess=null)}catch(t){G.Logger.error("connectionHandlers: Disconnected Status",t)}})),st.connection&&(st.connection=null),U.isLoggedOut||U.disconnectedByUser||U.isAppInactive||r.tryReconnectingToWS()}})},U.pingAnalytics=function(){var E=this;try{U.keyStore.get("deviceId").then(function(c){G.getAppSettings().then(function(t){var e=null;window&&window.location&&window.location.origin&&(e=window.location.origin);var n="",r=c,o={version:F.SDKHeader.sdkVersion,apiVersion:t[F.APP_SETTINGS.KEYS.CHAT_API_VERSION],origin:e,uts:(new Date).getTime()};G.isFalsy(E.resource)||(o.resource=E.resource),G.isFalsy(E.platform)||(o.platform=E.platform),G.isFalsy(E.language)||(o.language=E.language),navigator&&(n=navigator.userAgent);var s={appInfo:o,uid:U.user.getUid(),userAgent:n,deviceId:r,platform:F.SDKHeader.platform};G.isFalsy(U.getSessionId())||(s.wsId=U.getSessionId());var i="https://"+t[F.APP_SETTINGS.KEYS.ANALYTICS_HOST]+"/"+t[F.APP_SETTINGS.KEYS.ANALYTICS_VERSION]+"/ping",a={appId:U.appId,sdk:G.format(F.SDKHeader.sdk,F.SDKHeader.platform,F.SDKHeader.sdkVersion),"Content-Type":"application/json"};U.settingsHash&&(a.settingsHash=U.settingsHash),U.settingsHashReceivedAt&&(a.settingsHashReceivedAt=U.settingsHashReceivedAt),U.jwt&&(a.Authorization="Bearer "+U.jwt),U.authToken&&(a.authToken=U.authToken),K.postData(i,"POST",s,a,!1).then(function(t){return t.json()}).then(function(t){if(t.hasOwnProperty(F.ResponseConstants.RESPONSE_KEYS.KEY_DATA))G.Logger.log("Analytics Ping Request Data",t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);else if(t.hasOwnProperty(F.ResponseConstants.RESPONSE_KEYS.KEY_ERROR)){var e=t[F.ResponseConstants.RESPONSE_KEYS.KEY_ERROR];G.Logger.log("Analytics Ping Request Error",new b.CometChatException(e));var n=e.code;if(n===F.Errors.ERR_SETTINGS_HASH_OUTDATED){var r=U.authToken;U.getInstance().internalRestart(r)}n===F.Errors.ERR_NO_AUTH&&E.updateJWT()}}).catch(function(t){G.Logger.error("CometChat: pingAnalytics Fetch Error",t)})},function(t){G.Logger.error("CometChat: pingAnalytics getSettings Error",t)})},function(t){G.Logger.error("CometChat: pingAnalytics getDeviceId Error",t)})}catch(t){G.Logger.error("CometChat: pingAnalytics",t)}},U.updateJWT=function(){K.makeApiCall("getMyDetails",{},{},!1).then(function(t){var e=t.data,n=e.settings,r=new B.Me(e);if(U.user=r,e.hasOwnProperty("jwt")&&e.jwt&&(U.jwt=e.jwt),S.LocalStorage.getInstance().set("user",r),n&&n[F.APP_SETTINGS.KEYS.SETTINGS_HASH]&&U.settingsHash!==n[F.APP_SETTINGS.KEYS.SETTINGS_HASH]){var o=U.getInstance().getAuthToken();U.getInstance().internalRestart(o)}G.Logger.log("CometChat: updateJWT response",t)},function(t){G.Logger.error("CometChat: updateJWT Fetch Error",t)}).catch(function(t){G.Logger.error("CometChat: updateJWT",t)})},U.startAnalyticsPingTimer=function(){var t=this;U.isAnalyticsPingStarted=!0,U.analyticsPingTimer=setInterval(function(){try{t.pingAnalytics()}catch(t){G.Logger.error("CometChat: startAnalyticsPingTimer",t)}},U.settingsInterval)},U.clearAnalyticsPingTimer=function(){try{U.isAnalyticsPingStarted=!1,clearInterval(U.analyticsPingTimer)}catch(t){G.Logger.error("CometChat: clearAnalyticsPingTimer",t)}},U.startWSReconnectionTimer=function(){U.WSReconnectionInProgress=!0,U.WSReconnectionTimer=setInterval(function(){try{U.WSLogin(U.user)}catch(t){G.Logger.error("CometChat: startWSReconnectionTimer",t)}},U.WSReconnectionTimerInterval)},U.clearWSReconnectionTimer=function(){U.WSReconnectionInProgress=!1,clearInterval(U.WSReconnectionTimer)},U.getJWT=function(s){return new Promise(function(r,o){try{X.getEndPoint("getJWT").then(function(t){var e={appId:U.appId,Accept:"application/json",authToken:U.authToken,resource:U.getSessionId(),sdk:G.format(F.SDKHeader.sdk,F.SDKHeader.platform,F.SDKHeader.sdkVersion),"Content-Type":"application/json"},n={};n[F.JWT_API.KEYS.PASSTHROUGH]=s,K.postData(t.endpoint,t.method,n,e,!1).then(function(t){return t.json()}).then(function(t){t.hasOwnProperty(F.ResponseConstants.RESPONSE_KEYS.KEY_DATA)?r(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA]):o(new b.CometChatException(t.error))}).catch(function(t){var e={error:T.FETCH_ERROR.ERROR_IN_API_CALL};o(new b.CometChatException(e))})},function(t){o(new b.CometChatException(t))})}catch(t){o(new b.CometChatException(t))}})},U.getConnectionStatus=function(){return this.currentConnectionStatus},U.prototype.setConnectionStatus=function(t){U.currentConnectionStatus=t},U.isExtensionEnabled=function(s){return new Promise(function(r,o){try{if(G.isFalsy(s))return o(new b.CometChatException(F.ExtensionErrors.INVALID_EXTENSION));G.getAppSettings().then(function(t){if(t.extensions){var e=t.extensions;if(0<e.length){var n=e.some(function(t){return t.id===s});return r(n)}return r(!1)}return o(new b.CometChatException(F.ExtensionErrors.EXTENSION_NOT_FOUND))},function(t){return o(new b.CometChatException(t))})}catch(t){return o(new b.CometChatException(t))}})},U.isAIFeatureEnabled=function(t){return new Promise(function(n,e){try{if(G.isFalsy(t))return e(new b.CometChatException(F.AIFeatureError.INVALID_AI_FEATURE));var r=F.AI_FEATURE_ACCESSIBLE,o=F.AI_FEATURE_ENABLED,s=G.format(F.AI_SLUG_ACCESSIBLE,t),i=G.format(F.AI_SLUG_ENABLED,t);G.getAppSettings().then(function(t){if(null==t?void 0:t.parameters){var e=null==t?void 0:t.parameters;return e[r]&&e[o]&&e[s]&&e[i]?n(!0):n(!1)}return n(!1)},function(t){return e(new b.CometChatException(t))})}catch(t){return e(new b.CometChatException(t))}})},U.getExtensionDetails=function(i){return new Promise(function(o,s){try{if(G.isFalsy(i))return s(new b.CometChatException(F.ExtensionErrors.INVALID_EXTENSION));G.getAppSettings().then(function(t){if(t.extensions){var e=t.extensions;if(0<e.length){var n=e.filter(function(t){return t.id===i});if(0<n.length){var r=new q.CCExtension(n[0]);return o(r)}return s(new b.CometChatException(F.ExtensionErrors.EXTENSION_NOT_FOUND))}return s(new b.CometChatException(F.ExtensionErrors.EXTENSION_NOT_FOUND))}return s(new b.CometChatException(F.ExtensionErrors.EXTENSION_NOT_FOUND))},function(t){return s(new b.CometChatException(t))})}catch(t){return s(new b.CometChatException(t))}})},U.getAppSettings=function(){return new Promise(function(e,n){try{K.makeApiCall("appSettings").then(function(t){S.LocalStorage.getInstance().set(F.LOCAL_STORE.KEY_APP_SETTINGS,t.data),e(t.data)},function(t){n(new b.CometChatException(t.error))})}catch(t){n(new b.CometChatException(t))}})},U.isFeatureEnabled=function(o){return new Promise(function(n,r){try{if(G.isFalsy(o))return r(new b.CometChatException(F.FeatureRestrictionErrors.INVALID_FEATURE));G.getAppSettings().then(function(t){if(t.parameters){var e=t.parameters;return e.hasOwnProperty(o)?n(e[o]):n(!1)}return r(new b.CometChatException(F.FeatureRestrictionErrors.FEATURE_NOT_FOUND))},function(t){return r(new b.CometChatException(t))})}catch(t){return r(new b.CometChatException(t))}})},U.logout=function(){var r=this;return new Promise(function(e,n){try{U.didAnalyticsPingStart()&&U.clearAnalyticsPingTimer(),U.WSReconnectionInProgress&&U.clearWSReconnectionTimer(),U.isLoggedOut=!0,U.WSReconnectionInProgress=!1,U.isAnalyticsDisabled=!1,K.makeApiCall("userLogout").then(function(t){r.clearCache().then(function(){U.apiKey=void 0,U.user=void 0,U.authToken=void 0,U.cometChat=void 0,U.mode=void 0,st.WSLogout(),U.pushToLoginListener("","Logout_Success"),e(t.data)})},function(t){r.clearCache().then(function(){U.apiKey=void 0,U.user=void 0,U.authToken=void 0,U.cometChat=void 0,U.mode=void 0,st.WSLogout(),U.pushToLoginListener("","Logout_Success"),new b.CometChatException(t.error).code==T.SERVER_ERRORS.AUTH_ERR.code?e({}):n(new b.CometChatException(t.error))})})}catch(t){n(new b.CometChatException(t))}})},U.callExtension=function(s,i,a,c){return void 0===c&&(c={}),new Promise(function(r,o){try{G.getAppSettings().then(function(t){var e=G.format((new u.EndpointFactory).extensionApi,s,t[F.APP_SETTINGS.KEYS.REGION],t[F.APP_SETTINGS.KEYS.EXTENSION_DOMAIN],a),n={appId:U.appId,Accept:"application/json",authToken:U.authToken,resource:U.getSessionId(),sdk:G.format(F.SDKHeader.sdk,F.SDKHeader.platform,F.SDKHeader.sdkVersion),chatApiVersion:t[F.APP_SETTINGS.KEYS.CHAT_API_VERSION],"Content-Type":"application/json"};K.postData(e,i,c,n,!1).then(function(t){return t.json()}).then(function(t){t.hasOwnProperty(F.ResponseConstants.RESPONSE_KEYS.KEY_DATA)?r(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA]):o(new b.CometChatException(t.error))}).catch(function(t){var e={error:T.FETCH_ERROR.ERROR_IN_API_CALL};o(e)})},function(t){return o(new b.CometChatException(t))})}catch(t){return o(new b.CometChatException(t))}})},U.getConversationStarter=function(a,c,E){return new Promise(function(e,n){try{a=a.toLowerCase(),c=c.toLowerCase();var t=G.validateChatType(c);if(t instanceof b.CometChatException)return void n(t);var r=G.validateId(a,c);if(r instanceof b.CometChatException)return void n(r);var o={},s="";c===F.MessageConstatnts.RECEIVER_TYPE.GROUP?(s="getGroupConversationStarter",o.guid=a):(s="getUserConversationStarter",o.uid=a);var i={uid:U.user.uid,name:U.user.name};o.onbehalfofuser=btoa(JSON.stringify(i)),K.makeApiCall(s,o,E||{}).then(function(t){return t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA]&&t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA][F.ResponseConstants.RESPONSE_KEYS.KEY_CONVERSATION_STARTER]?e(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA][F.ResponseConstants.RESPONSE_KEYS.KEY_CONVERSATION_STARTER]):n(new b.CometChatException(F.AIErrors.NO_CONVERSATION_STARTER))},function(t){return n(new b.CometChatException(t.error))})}catch(t){return n(new b.CometChatException(t))}})},U.getSmartReplies=function(a,c,E){return new Promise(function(e,n){try{a=a.toLowerCase(),c=c.toLowerCase();var t=G.validateChatType(c);if(t instanceof b.CometChatException)return void n(t);var r=G.validateId(a,c);if(r instanceof b.CometChatException)return void n(r);var o={},s="";c===F.MessageConstatnts.RECEIVER_TYPE.GROUP?(s="getGroupSmartReply",o.guid=a):(s="getUserSmartReply",o.uid=a);var i={uid:U.user.uid,name:U.user.name};o.onbehalfofuser=btoa(JSON.stringify(i)),K.makeApiCall(s,o,E||{}).then(function(t){return t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA]&&t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA][F.ResponseConstants.RESPONSE_KEYS.KEY_SMART_REPLIES]?e(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA][F.ResponseConstants.RESPONSE_KEYS.KEY_SMART_REPLIES]):n(new b.CometChatException(F.AIErrors.NO_SMART_REPLY))},function(t){return n(new b.CometChatException(t.error))})}catch(t){return n(new b.CometChatException(t))}})},U.askBot=function(E,u,p,l,d){return new Promise(function(n,r){try{var t={},e="";E=E.toLowerCase(),u=u.toLowerCase();var o=G.validateChatType(u);if(o instanceof b.CometChatException)return void r(o);var s=G.validateId(E,u);if(s instanceof b.CometChatException)return void r(s);var i=G.validateId(p,"bot");if(i instanceof b.CometChatException)return void r(i);t.botId=p,G.isFalsy(d)&&(d={});var a=G.validateQuestion(l);if(a instanceof b.CometChatException)return void r(a);d.question=l,u===F.MessageConstatnts.RECEIVER_TYPE.GROUP?(e="getBotAssistanceInGroupConversation",t.guid=E):(e="getBotAssistanceInUserConversation",t.uid=E);var c={uid:U.user.uid,name:U.user.name};t.onbehalfofuser=btoa(JSON.stringify(c)),K.makeApiCall(e,t,d).then(function(t){if(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA]&&t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA][F.ResponseConstants.RESPONSE_KEYS.KEY_BOT_REPLY]){var e=t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA][F.ResponseConstants.RESPONSE_KEYS.KEY_BOT_REPLY];return n(e.toString())}return r(new b.CometChatException(F.AIErrors.NO_ASSISTANCE))},function(t){return r(new b.CometChatException(t.error))})}catch(t){return r(new b.CometChatException(t))}})},U.getConversationSummary=function(a,c,E){return new Promise(function(n,r){try{a=a.toLowerCase(),c=c.toLowerCase();var t=G.validateChatType(c);if(t instanceof b.CometChatException)return void r(t);var e=G.validateId(a,c);if(e instanceof b.CometChatException)return void r(e);var o={},s="";c===F.MessageConstatnts.RECEIVER_TYPE.GROUP?(s="getGroupConversationSummary",o.guid=a):(s="getUserConversationSummary",o.uid=a);var i={uid:U.user.uid,name:U.user.name};o.onbehalfofuser=btoa(JSON.stringify(i)),K.makeApiCall(s,o,E||{}).then(function(t){if(t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA]&&t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA][F.ResponseConstants.RESPONSE_KEYS.KEY_CONVERSATION_SUMMARY]){var e=t[F.ResponseConstants.RESPONSE_KEYS.KEY_DATA][F.ResponseConstants.RESPONSE_KEYS.KEY_CONVERSATION_SUMMARY];return n(e.toString())}return r(new b.CometChatException(F.AIErrors.NO_CONVERSATION_SUMMARY))},function(t){return r(new b.CometChatException(t.error))})}catch(t){return r(new b.CometChatException(t))}})},U.setSource=function(t,e,n){G.isFalsy(t)||(this.resource=t),G.isFalsy(e)||(this.platform=e),G.isFalsy(n)||(this.language=n)},U.setDemoMetaInfo=function(t){U.demoMetaInfo=t},U.clearCache=function(){return new Promise(function(t,e){try{S.LocalStorage.getInstance().clearStore().then(function(){G.Logger.info("CometChat: clearCache => All store cleared successfully","true"),t(!0)})}catch(t){G.Logger.error("CometChat: clearCache",t),e(t)}})},U.connect=function(t){var e=t||{},n=e.onSuccess,r=e.onError;U.user?(st.connection||(U.onConnectionSuccess=n,U.disconnectedByUser=!1,U.WSLogin(U.user)),U.didAnalyticsPingStart()||U.isAnalyticsDisabled||(U.pingAnalytics(),U.startAnalyticsPingTimer())):r&&r(new b.CometChatException({code:F.Errors.ERROR_USER_NOT_LOGGED_IN,message:F.Errors.ERROR_USER_NOT_LOGGED_IN_MESSAGE}))},U.disconnect=function(t){var e=t||{},n=e.onSuccess,r=e.onError;U.user?(U.disconnectedByUser=!0,U.disconnectInternally({onError:r}),st.clearWSResponseTimer(),U.onDisconnectSuccess=n):r&&r(new b.CometChatException({code:F.Errors.ERROR_USER_NOT_LOGGED_IN,message:F.Errors.ERROR_USER_NOT_LOGGED_IN_MESSAGE}))},U.disconnectInternally=function(t){var e=(t||{}).onError;U.user?(U.disconnectedByUser=!0,st.connection&&st.WSLogout(),U.didAnalyticsPingStart()&&U.clearAnalyticsPingTimer(),U.clearWSReconnectionTimer()):e&&e(new b.CometChatException({code:F.Errors.ERROR_USER_NOT_LOGGED_IN,message:F.Errors.ERROR_USER_NOT_LOGGED_IN_MESSAGE}))},U.prototype.internalRestart=function(t){U.internalRestart||U.getInstance().internalLogout(!1).then(function(){U.internalRestart=!0,U.login(t).then(function(t){U.shouldConnectToWS=!0,U.internalRestart=!1},function(t){G.Logger.error("CometChat: internalRestart :: login",t),U.internalRestart=!1})},function(t){G.Logger.error("CometChat: internalRestart :: internalLogout",t)})},U.prototype.internalLogout=function(n){return void 0===n&&(n=!0),new Promise(function(t,e){try{U.didAnalyticsPingStart()&&U.clearAnalyticsPingTimer(),U.WSReconnectionInProgress&&U.clearWSReconnectionTimer(),U.isLoggedOut=!0,U.WSReconnectionInProgress=!1,U.isAnalyticsDisabled=!1,U.clearCache().then(function(){U.apiKey=void 0,U.user=void 0,U.authToken=void 0,U.cometChat=void 0,U.mode=void 0,st.WSLogout(),n&&U.pushToLoginListener("","Logout_Success"),t(!0)})}catch(t){G.Logger.error("CometChat: internalLogout",t),e(t)}})},U.markAsUnread=function(s){return new Promise(function(e,n){try{var t=void 0;if(G.isFalsy(s)||!(s instanceof p.BaseMessage))return n(new b.CometChatException(JSON.parse(G.format(JSON.stringify(F.ReceiptErrors.INVALID_PARAMETER),"MESSAGE","MESSAGE","Invalid message object received."))));t=s.getId().toString();var r={},o="";s.getReceiverType()===F.MessageConstatnts.RECEIVER_TYPE.GROUP?(o="markGroupMessagesAsUnread",r.guid=s.getReceiverId()):(o="markUserMessagesAsUnread",r.uid=s.getReceiverId()),K.makeApiCall(o,r,{messageId:t}).then(function(t){return e("Messages marked as unread successfully.")},function(t){return n(new b.CometChatException(t.error))})}catch(t){return G.Logger.error("CometChat: markAsUnread",t),n(new b.CometChatException(t))}})},U.markAsInteracted=function(t,r,e){return new Promise(function(n,e){try{G.isFalsy(t)?e(new b.CometChatException(T.ERRORS.PARAMETER_MISSING)):K.makeApiCall("markInteracted",{messageId:t},{interactions:[r]}).then(function(t){var e;e=t&&t.data&&t.data.message?t.data.message:"Marked interacted",n(e)},function(t){e(new b.CometChatException(t.error))})}catch(t){e(new b.CometChatException(t))}})},U.initialzed=!1,U.CometChatException=b.CometChatException,U.TextMessage=l.TextMessage,U.MediaMessage=E.MediaMessage,U.CustomMessage=N.CustomMessage,U.Action=n.Action,U.Call=e.Call,U.TypingIndicator=I.TypingIndicator,U.TransientMessage=j.TransientMessage,U.InteractiveMessage=et.InteractiveMessage,U.InteractionGoal=$.InteractionGoal,U.Interaction=Z.Interaction,U.InteractionReceipt=tt.InteractionReceipt,U.Group=a.Group,U.User=B.User,U.GroupMember=y.GroupMember,U.Conversation=L.Conversation,U.USER_STATUS={ONLINE:F.PresenceConstatnts.STATUS.ONLINE,OFFLINE:F.PresenceConstatnts.STATUS.OFFLINE},U.MessagesRequest=A.MessagesRequest,U.MessagesRequestBuilder=A.MessagesRequestBuilder,U.UsersRequest=g.UsersRequest,U.UsersRequestBuilder=g.UsersRequestBuilder,U.ConversationsRequest=_.ConversationsRequest,U.ConversationsRequestBuilder=_.ConversationsRequestBuilder,U.BlockedUsersRequest=m.BlockedUsersRequest,U.BlockedUsersRequestBuilder=m.BlockedUsersRequestBuilder,U.GroupsRequest=r.GroupsRequest,U.GroupsRequestBuilder=r.GroupsRequestBuilder,U.GroupMembersRequest=o.GroupMembersRequest,U.GroupMembersRequestBuilder=o.GroupMembersRequestBuilder,U.BannedMembersRequest=i.BannedMembersRequest,U.BannedMembersRequestBuilder=i.BannedMembersRequestBuilder,U.CallSettings=V.CallSettings,U.CallSettingsBuilder=V.CallSettingsBuilder,U.MainVideoContainerSetting=V.MainVideoContainerSetting,U.AppSettings=v.AppSettings,U.AppSettingsBuilder=v.AppSettingsBuilder,U.MessageListener=t.MessageListener,U.UserListener=t.UserListener,U.GroupListener=t.GroupListener,U.OngoingCallListener=t.OngoingCallListener,U.CallListener=t.CallListener,U.ConnectionListener=t.ConnectionListener,U.LoginListener=t.LoginListener,U.CallController=x.CallController,U.CometChatHelper=P.CometChatHelper,U.Attachment=D.Attachment,U.GoalType=F.GoalType,U.MESSAGE_TYPE=F.MessageConstatnts.TYPE,U.CATEGORY_MESSAGE=F.MessageConstatnts.CATEGORY.MESSAGE,U.CATEGORY_ACTION=F.MessageConstatnts.CATEGORY.ACTION,U.CATEGORY_CALL=F.MessageConstatnts.CATEGORY.CALL,U.CATEGORY_CUSTOM=F.MessageConstatnts.CATEGORY.CUSTOM,U.ACTION_TYPE=F.ActionConstatnts.ACTIONS,U.CALL_TYPE=F.CallConstants.CALL_TYPE,U.RECEIVER_TYPE=F.MessageConstatnts.RECEIVER_TYPE,U.CATEGORY_INTERACTIVE=F.MessageConstatnts.CATEGORY.INTERACTIVE,U.CALL_STATUS=F.CallConstants.CALL_STATUS,U.GROUP_MEMBER_SCOPE=F.GROUP_MEMBER_SCOPE,U.GROUP_TYPE=F.GROUP_TYPE,U.MESSAGE_REQUEST=F.MessageConstatnts.PAGINATION.CURSOR_FILEDS,U.CONNECTION_STATUS=F.CONNECTION_STATUS,U.CALL_MODE=F.CallConstants.CALL_MODE,U.AUDIO_MODE=F.CallConstants.AUDIO_MODE,U.SORT_BY=F.UserConstants.SORT_BY,U.SORT_ORDER=F.UserConstants.SORT_ORDER,U.WSReconnectionInProgress=!1,U.WSReconnectionTimerInterval=5e3,U.currentConnectionStatus=F.CONNECTION_STATUS.DISCONNECTED,U.isConnectingFromInit=!1,U.loginInProgress=!1,U.internalRestart=!1,U.settingsInterval=6e4,U.isAnalyticsPingStarted=!1,U.isLoggedOut=!0,U.isAnalyticsDisabled=!1,U.disconnectedByUser=!1,U.shouldConnectToWS=!0,U.isAppInactive=!1,U.onConnectionSuccess=null,U.onDisconnectSuccess=null,U.onConnectionError=null,U.callWaitTimer=null,U.callWaitTime=30,U}();ct.CometChat=at}).call(this,Et(10))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KEYS=e.AUTH=e.MESSAGE=e.PRESENCE=e.INTERACTION_RECEIPT=e.RECEIPTS=e.TRANSIENT_MESSAGE=e.TYPING_INDICATOR=e.LOGOUT_REASON=e.LOGOUT_CODE=e.READY_STATE=e.WS=void 0,e.WS={protocol:"wss://"},e.READY_STATE={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3,INVALID_JWT:4},e.LOGOUT_CODE=1e3,e.LOGOUT_REASON="User logged out",e.TYPING_INDICATOR={TYPE:"typing_indicator",ACTION:{STARTED:"started",ENDED:"ended"}},e.TRANSIENT_MESSAGE={TYPE:"transient_message"},e.RECEIPTS={TYPE:"receipts",ACTION:{READ:"read",DELIVERED:"delivered"},RECEIPT_TYPE:{READ_RECEIPT:"read",DELIVERY_RECEIPT:"delivery"}},e.INTERACTION_RECEIPT={TYPE:"interaction_completed"},e.PRESENCE={TYPE:"presence",ACTION:{ONLINE:"online",AVAILABLE:"available",OFFLINE:"offline"}},e.MESSAGE={TYPE:"message"},e.AUTH={TYPE:"auth"},e.KEYS={TYPE:"type",ACTION:"action",APP_ID:"appId",RECEIVER:"receiver",RECEIVER_TYPE:"receiverType",DEVICE_ID:"deviceId",BODY:"body",USER:"user",METADATA:"metadata",MESSAGE_ID:"messageId",TIMESTAMP:"timestamp",STATUS:"status",CODE:"code",SENDER:"sender",MESSAGE_SENDER:"messageSender",PRESENCE_SUBSCRIPTION:"presenceSubscription",AUTH:"auth",PING:"ping",DATA:"data",PARAMS:"params",ACK:"ack",PONG:"pong",INTERACTIONS:"interactions"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postData=e.makeAdminApiCall=e.makeApiCall=void 0;var E=n(36),u=n(4),p=n(0),l=n(2),d=n(14),S=n(1);function h(n,t,r,e,o){var s;return void 0===n&&(n=""),void 0===t&&(t="GET"),void 0===r&&(r={}),void 0===e&&(e={}),r=p.isFalsy(r)?void 0:("GET"==t&&(n+="?",Object.keys(r).map(function(t,e){n=e===Object.keys(r).length-1?n+t+"="+r[t]:n+t+"="+r[t]+"&"}),r=void 0),o&&(s=new FormData,Object.keys(r).map(function(t){if("data"!=t){if("tags"==t)s.append(t+"[]",r[t]);else if("metadata"!=t)if("files"===t)for(var e=0;e<r[t].length;e++)r[t][e].hasOwnProperty("file")?s.append(t+"[]",r[t][e].file,r[t][e].name?r[t][e].name:null):s.append(t+"[]",r[t][e]);else s.append(t,r[t])}else s.append(t,JSON.stringify(r[t]))})),JSON.stringify(r)),fetch(n,{method:t,mode:"cors",cache:"no-cache",headers:e,redirect:"follow",referrer:"no-referrer",body:o?s:r})}e.makeApiCall=function(o,s,i,a){void 0===o&&(o=""),void 0===s&&(s={}),void 0===i&&(i={});var c=u.CometChat.getInstance(u.CometChat.getAppId());return new Promise(function(n,r){try{E.getEndPoint(o,s).then(function(t){var e={resource:u.CometChat.getSessionId(),appId:u.CometChat.getAppId(),Accept:"application/json",sdk:p.format(S.SDKHeader.sdk,S.SDKHeader.platform,S.SDKHeader.sdkVersion)};a||(e["Content-Type"]="application/json"),t.hasOwnProperty("isAIApi")&&t.isAIApi&&(e.onbehalfofuser=s.onbehalfofuser),t.hasOwnProperty("isAdminApi")&&t.isAdminApi?c.getApiKey()?e.apiKey=c.getApiKey():r({error:{code:"API_KEY_NOT_SET",message:"An apiKey is needed to use the "+o+" api.",name:"API_KEY_NOT_SET"}}):c.getAuthToken()?e.authToken=c.getAuthToken():r({error:{code:"USER_NOT_LOGED_IN",message:"An authToken is need to use the "+o+" end-point. PS- We are aware of the spelling mistake, but in order to maintain backward compatibility we cannot change it :(",name:"User not logged-in"}}),h(t.endpoint,t.method,i,e,a).then(function(t){return t.json()}).then(function(t){if(t.hasOwnProperty("data"))t.data.hasOwnProperty("authToken")&&u.CometChat.setAuthToken(t.data.authToken),n(t);else{if(t.hasOwnProperty("error")){var e=t.error;e.hasOwnProperty("code")&&e.code===S.API_ERROR_CODES.AUTH_ERR_AUTH_TOKEN_NOT_FOUND&&u.CometChat.getInstance().internalLogout().then(function(){p.Logger.log("CometChat: makeApiCall","User logged out")})}r(t)}}).catch(function(t){var e={error:d.FETCH_ERROR.ERROR_IN_API_CALL};r(e)})}).catch(function(t){return r})}catch(t){r(new l.CometChatException(t))}})},e.makeAdminApiCall=function(o,t,s,i){void 0===o&&(o=""),void 0===t&&(t={}),void 0===s&&(s={});var a=u.CometChat.getInstance(u.CometChat.getAppId());return new Promise(function(n,r){E.getEndPoint(o,t).then(function(t){var e={appId:u.CometChat.getAppId(),Accept:"application/json",sdk:p.format(S.SDKHeader.sdk,S.SDKHeader.platform,S.SDKHeader.sdkVersion)};i||(e["Content-Type"]="application/json"),t.hasOwnProperty("isAdminApi")&&t.isAdminApi?a.getApiKey()?e.apiKey=a.getApiKey():r({error:"An apiKey is need to use the "+o+" api."}):a.getAuthToken()?e.authToken=a.getAuthToken():r({error:"An authToken is need to use the "+o+" api."}),h(t.endpoint,t.method,s,e,i).then(function(t){return t.json()}).then(function(t){t.hasOwnProperty("data")?(t.data.hasOwnProperty("authToken")&&u.CometChat.setAuthToken(t.data.authToken),n(t)):r(t)}).catch(function(t){var e={error:d.FETCH_ERROR.ERROR_IN_API_CALL};r(e)})}).catch(function(t){return r})})},e.postData=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseMessage=void 0;var r=function(){function t(t,e,n,r){this.mentionedUsers=[],this.mentionedMe=!1,this.receiverId=t,this.type=e,this.receiverType=n,this.category=r}return t.prototype.getId=function(){return this.id},t.prototype.setId=function(t){this.id=t},t.prototype.getConversationId=function(){return this.conversationId},t.prototype.setConversationId=function(t){this.conversationId=t},t.prototype.getParentMessageId=function(){return this.parentMessageId},t.prototype.setParentMessageId=function(t){this.parentMessageId=t},t.prototype.getMuid=function(){return this.muid},t.prototype.setMuid=function(t){this.muid=t},t.prototype.getSender=function(){return this.sender},t.prototype.setSender=function(t){this.sender=t},t.prototype.getReceiver=function(){return this.receiver},t.prototype.setReceiver=function(t){this.receiver=t},t.prototype.getReceiverId=function(){return this.receiverId},t.prototype.setReceiverId=function(t){this.receiverId=t},t.prototype.getType=function(){return this.type},t.prototype.setType=function(t){this.type=t},t.prototype.getReceiverType=function(){return this.receiverType},t.prototype.setReceiverType=function(t){this.receiverType=t},t.prototype.getSentAt=function(){return this.sentAt},t.prototype.setSentAt=function(t){this.sentAt=t},t.prototype.getStatus=function(){return this.status},t.prototype.setStatus=function(t){this.status=t},t.prototype.getDeliveredAt=function(){return this.deliveredAt},t.prototype.setDeliveredAt=function(t){this.deliveredAt=t},t.prototype.getDeliveredToMeAt=function(){return this.deliveredToMeAt},t.prototype.setDeliveredToMeAt=function(t){this.deliveredToMeAt=t},t.prototype.getReadAt=function(){return this.readAt},t.prototype.setReadAt=function(t){this.readAt=t},t.prototype.getReadByMeAt=function(){return this.readByMeAt},t.prototype.setReadByMeAt=function(t){this.readByMeAt=t},t.prototype.getCategory=function(){return this.category},t.prototype.setCategory=function(t){this.category=t},t.prototype.getEditedAt=function(){return this.editedAt},t.prototype.setEditedAt=function(t){this.editedAt=t},t.prototype.getEditedBy=function(){return this.editedBy},t.prototype.setEditedBy=function(t){this.editedBy=t},t.prototype.getDeletedAt=function(){return this.deletedAt},t.prototype.setDeletedAt=function(t){this.deletedAt=t},t.prototype.getDeletedBy=function(){return this.deletedBy},t.prototype.setDeletedBy=function(t){this.deletedBy=t},t.prototype.getReplyCount=function(){return this.replyCount},t.prototype.setReplyCount=function(t){this.replyCount=t},t.prototype.getRawMessage=function(){return this.rawMessage},t.prototype.setRawMessage=function(t){this.rawMessage=t},t.prototype.setMentionedUsers=function(t){this.mentionedUsers=t},t.prototype.getMentionedUsers=function(){return this.mentionedUsers},t.prototype.setHasMentionedMe=function(t){this.mentionedMe=t},t.prototype.hasMentionedMe=function(){return this.mentionedMe},t}();e.BaseMessage=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;var r=n(1),o=function(){function t(t,e,n,r,o,s,i){this.hasJoined=!1,this.membersCount=0,this.guid=t,e&&(this.name=e),n&&(this.type=n),!r&&""!==r||"password"!=n||(this.password=r),(o||""===o)&&(this.icon=o),(s||""===s)&&(this.description=s),i&&(this.hasJoined=i)}return t.prototype.getGuid=function(){return this.guid},t.prototype.setGuid=function(t){this.guid=t},t.prototype.getName=function(){return this.name},t.prototype.setName=function(t){t&&(this.name=t)},t.prototype.getType=function(){return this.type},t.prototype.setType=function(t){this.type=t},t.prototype.getPassword=function(){return this.password},t.prototype.setPassword=function(t){this.password=t},t.prototype.getIcon=function(){return this.icon},t.prototype.setIcon=function(t){this.icon=t},t.prototype.getDescription=function(){return this.description},t.prototype.setDescription=function(t){this.description=t},t.prototype.getOwner=function(){return this.owner},t.prototype.setOwner=function(t){this.owner=t},t.prototype.getMetadata=function(){return this.metadata},t.prototype.setMetadata=function(t){this.metadata=t},t.prototype.getCreatedAt=function(){return this.createdAt},t.prototype.setCreatedAt=function(t){this.createdAt=t},t.prototype.getUpdatedAt=function(){return this.updatedAt},t.prototype.setUpdatedAt=function(t){this.updatedAt=t},t.prototype.getHasJoined=function(){return this.hasJoined},t.prototype.setHasJoined=function(t){this.hasJoined=t},t.prototype.getWsChannel=function(){return this.wsChannel},t.prototype.setWsChannel=function(t){this.wsChannel=t},t.prototype.setScope=function(t){this.scope=t},t.prototype.getScope=function(){return this.scope},t.prototype.getJoinedAt=function(){return this.joinedAt},t.prototype.setJoinedAt=function(t){this.joinedAt=t},t.prototype.getMembersCount=function(){return this.membersCount},t.prototype.setMembersCount=function(t){this.membersCount=t},t.prototype.setTags=function(t){this.tags=t},t.prototype.getTags=function(){return this.tags},t.TYPE=r.GroupType,t.Type=t.TYPE,t}();e.Group=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CometChatEvent=void 0;var i=n(0),r=n(5),o=function(){function t(t,e,n,r,o,s){i.isFalsy(t)||(this.appId=t),i.isFalsy(e)||(this.receiver=e),i.isFalsy(n)||(this.receiverType=n),i.isFalsy(o)||(this.deviceId=o),i.isFalsy(r)||(this.sender=r),i.isFalsy(s)||(this.messageSender=s)}return t.prototype.getAppId=function(){return this.appId},t.prototype.setAppId=function(t){this.appId=t},t.prototype.getReceiver=function(){return this.receiver},t.prototype.setReceiver=function(t){this.receiver=t},t.prototype.getSender=function(){return this.sender},t.prototype.setSender=function(t){this.sender=t},t.prototype.getReceiverType=function(){return this.receiverType},t.prototype.setReceiverType=function(t){this.receiverType=t},t.prototype.getType=function(){return this.type},t.prototype.setType=function(t){this.type=t},t.prototype.getDeviceId=function(){return this.deviceId},t.prototype.setDeviceId=function(t){this.deviceId=t},t.prototype.getMessageSender=function(){return this.messageSender},t.prototype.setMessageSender=function(t){this.messageSender=t},t.prototype.getCometChatEventJSON=function(){var t={};return t[r.KEYS.APP_ID]=this.getAppId(),t[r.KEYS.RECEIVER]=this.getReceiver(),t[r.KEYS.RECEIVER_TYPE]=this.getReceiverType(),t[r.KEYS.DEVICE_ID]=this.getDeviceId(),t[r.KEYS.TYPE]=this.getType(),t[r.KEYS.SENDER]=this.getSender(),i.isFalsy(this.getMessageSender())||(t[r.KEYS.MESSAGE_SENDER]=this.getMessageSender()),t},t}();e.CometChatEvent=o},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageController=void 0;var a=n(7),c=n(18),E=n(19),u=n(0),p=n(1),l=n(24),d=n(25),S=n(26),s=n(2),h=n(20),C=n(21),f=n(4),T=n(12),g=n(3),_=n(22),r=function(){function i(){}return i.trasformJSONMessge=function(n){try{var t=null;n.hasOwnProperty("rawMessage")||(t=JSON.parse(JSON.stringify(n)));var e=void 0;switch(n[p.MessageConstatnts.KEYS.CATEGORY]){case p.MessageConstatnts.CATEGORY.ACTION:e=l.Action.actionFromJSON(n);break;case p.MessageConstatnts.CATEGORY.CALL:e=d.Call.callFromJSON(n);break;case p.MessageConstatnts.CATEGORY.MESSAGE:switch(n[p.MessageConstatnts.KEYS.TYPE]){case p.MessageConstatnts.TYPE.TEXT:e=new c.TextMessage(n[p.MessageConstatnts.KEYS.RECEIVER],n[p.MessageConstatnts.KEYS.DATA][p.MessageConstatnts.KEYS.TEXT],n[p.MessageConstatnts.KEYS.RECEIVER_TYPE]);break;case p.MessageConstatnts.TYPE.CUSTOM:e=new C.CustomMessage(n[p.MessageConstatnts.KEYS.RECEIVER],n[p.MessageConstatnts.KEYS.DATA][p.MessageConstatnts.KEYS.CUSTOM_DATA],n[p.MessageConstatnts.KEYS.RECEIVER_TYPE]);break;default:if(e=new E.MediaMessage(n[p.MessageConstatnts.KEYS.RECEIVER],n[p.MessageConstatnts.KEYS.DATA][p.MessageConstatnts.KEYS.URL],n[p.MessageConstatnts.KEYS.TYPE],n[p.MessageConstatnts.KEYS.RECEIVER_TYPE]),n.hasOwnProperty(p.MessageConstatnts.KEYS.DATA)){var r=n[p.MessageConstatnts.KEYS.DATA];if(r.hasOwnProperty(p.MessageConstatnts.KEYS.ATTATCHMENTS)){var o,s=r[p.MessageConstatnts.KEYS.ATTATCHMENTS];new Array;s.map(function(t){o=new h.Attachment(t)}),e.setAttachment(o)}r.hasOwnProperty(p.MessageConstatnts.KEYS.TEXT)&&e.setCaption(r[p.MessageConstatnts.KEYS.TEXT])}e.hasOwnProperty("file")&&delete e.file}break;case p.MessageConstatnts.CATEGORY.CUSTOM:e=new C.CustomMessage(n[p.MessageConstatnts.KEYS.RECEIVER],n[p.MessageConstatnts.KEYS.DATA][p.MessageConstatnts.KEYS.CUSTOM_DATA],n[p.MessageConstatnts.KEYS.RECEIVER_TYPE],n.type);break;case p.MessageConstatnts.CATEGORY.INTERACTIVE:e=new _.InteractiveMessage(n[p.MessageConstatnts.KEYS.RECEIVER],n[p.MessageConstatnts.KEYS.RECEIVER_TYPE],n.type,n[p.MessageConstatnts.KEYS.DATA][p.MessageConstatnts.KEYS.INTERACTIVE_DATA],n[p.MessageConstatnts.KEYS.DATA][p.MessageConstatnts.KEYS.INTERACTION_GOAL])}n[p.MessageConstatnts.KEYS.MY_RECEIPTS]&&(n[p.MessageConstatnts.KEYS.MY_RECEIPTS]=n[p.MessageConstatnts.KEYS.MY_RECEIPTS],Object.keys(n[p.MessageConstatnts.KEYS.MY_RECEIPTS]).map(function(t){var e=new S.MessageReceipt;t==p.DELIVERY_RECEIPTS.DELIVERED_AT&&(e.setReceiptType(e.RECEIPT_TYPE.DELIVERY_RECEIPT),e.setDeliveredAt(n[p.MessageConstatnts.KEYS.MY_RECEIPTS][p.DELIVERY_RECEIPTS.DELIVERED_AT]),u.isFalsy(n[p.MessageConstatnts.KEYS.MY_RECEIPTS][p.DELIVERY_RECEIPTS.RECIPIENT])?n[p.DELIVERY_RECEIPTS.DELIVERED_TO_ME_AT]=n[p.MessageConstatnts.KEYS.MY_RECEIPTS][p.DELIVERY_RECEIPTS.DELIVERED_AT]:e.setSender(n[p.MessageConstatnts.KEYS.MY_RECEIPTS][p.DELIVERY_RECEIPTS.RECIPIENT]),e.setReceiverType(n[p.MessageConstatnts.KEYS.RECEIVER_TYPE]),e.setReceiver(n[p.MessageConstatnts.KEYS.RECEIVER])),n[p.MessageConstatnts.KEYS.MY_RECEIPTS][p.READ_RECEIPTS.READ_AT]&&(e.setReceiptType(e.RECEIPT_TYPE.READ_RECEIPT),e.setReadAt(n[p.MessageConstatnts.KEYS.MY_RECEIPTS][p.READ_RECEIPTS.READ_AT]),u.isFalsy(n[p.MessageConstatnts.KEYS.MY_RECEIPTS][p.READ_RECEIPTS.RECIPIENT])?n[p.READ_RECEIPTS.READ_BY_ME_AT]=n[p.MessageConstatnts.KEYS.MY_RECEIPTS][p.READ_RECEIPTS.READ_AT]:e.setSender(n[p.MessageConstatnts.KEYS.MY_RECEIPTS][p.READ_RECEIPTS.RECIPIENT]),e.setReceiverType(n[p.MessageConstatnts.KEYS.RECEIVER_TYPE]),e.setReceiver(n[p.MessageConstatnts.KEYS.RECEIVER]))}));try{if(Object.assign(e,n),(n=e).parentId&&(n.parentMessageId=n.parentId,delete n.parentId),n instanceof a.BaseMessage&&(u.isFalsy(t)||n.setRawMessage(t)),n instanceof c.TextMessage)i.extractDetailsFromMentions(n),n.setSender(n.getSender()),n.setReceiver(n.getReceiver()),n.getData()[p.MessageConstatnts.KEYS.METADATA]&&n.setMetadata(n.getData()[p.MessageConstatnts.KEYS.METADATA]);else if(n instanceof E.MediaMessage)i.extractDetailsFromMentions(n),n.getData()[p.MessageConstatnts.KEYS.METADATA]&&n.setMetadata(n.getData()[p.MessageConstatnts.KEYS.METADATA]),n.setSender(n.getSender()),n.setReceiver(n.getReceiver());else if(n instanceof l.Action)n.setSender(n.getSender()),n.setReceiver(n.getActionFor()),n.setActionBy(n.getActionBy()),n.setActionOn(n.getActionOn()),n.setActionFor(n.getActionFor()),n.setMessage(n.getMessage());else if(n instanceof d.Call){try{n.setSender(n.getSender())}catch(t){u.Logger.error("MessageController: trasformJSONMessge: setSender",t)}try{n.setCallInitiator(n.getCallInitiator())}catch(t){u.Logger.error("MessageController: trasformJSONMessge: setCallInitiator",t)}try{n.setReceiver(n.getCallReceiver()),n.setCallReceiver(n.getCallReceiver())}catch(t){u.Logger.error("MessageController: trasformJSONMessge: setCallreceiver",t)}}else n instanceof C.CustomMessage?(n.getData()[p.MessageConstatnts.KEYS.METADATA]&&n.setMetadata(n.getData()[p.MessageConstatnts.KEYS.METADATA]),n.setCustomData(n.getData()[p.MessageConstatnts.KEYS.CUSTOM_DATA]),n.setSubType(n.getData()[p.MessageConstatnts.KEYS.CUSTOM_SUB_TYPE]),n.setSender(n.getSender()),n.setReceiver(n.getReceiver())):n instanceof _.InteractiveMessage&&(n.setMetadata(n.getData()[p.MessageConstatnts.KEYS.METADATA]),n.setInteractiveData(n.getData()[p.MessageConstatnts.KEYS.INTERACTIVE_DATA]),n.setInteractionGoal(n.getInteractionGoal()),n.setInteractions(n.getInteractions()),n.setSender(n.getSender()),n.setReceiver(n.getReceiver()),n.setIsSenderInteractionAllowed(n.getData()[p.MessageConstatnts.KEYS.ALLOW_SENDER_INTERACTION]))}catch(t){u.Logger.error("MessageController: trasformJSONMessge: Main",t),n=null}return n}catch(t){u.Logger.error("MessageController: trasformJSONMessge",t)}},i.extractDetailsFromMentions=function(t){if(t.getData()[p.MessageConstatnts.KEYS.MENTIONS]){var e=[],n=!1,r=f.CometChat.user,o=t.getData()[p.MessageConstatnts.KEYS.MENTIONS];for(var s in o)s.toString()==(null==r?void 0:r.getUid())&&(n=!0),e.push(new g.User(o[s]));t.setMentionedUsers(e),t.setHasMentionedMe(n)}},i.getReceiptsFromJSON=function(o){return new Promise(function(t,e){try{var r=[];f.CometChat.getLoggedInUser().then(function(n){u.isFalsy(o.receipts)?t([]):(o.receipts.data.map(function(t){var e=new S.MessageReceipt;t[p.DELIVERY_RECEIPTS.DELIVERED_AT]&&(e.setReceiptType(e.RECEIPT_TYPE.DELIVERY_RECEIPT),e.setDeliveredAt(t[p.DELIVERY_RECEIPTS.DELIVERED_AT]),e.setTimestamp(t[p.DELIVERY_RECEIPTS.DELIVERED_AT]),u.isFalsy(t[p.DELIVERY_RECEIPTS.RECIPIENT])?e.setSender(n):e.setSender(T.UsersController.trasformJSONUser(t[p.DELIVERY_RECEIPTS.RECIPIENT])),e.setReceiverType(o[p.MessageConstatnts.KEYS.RECEIVER_TYPE]),e.setReceiver(o[p.MessageConstatnts.KEYS.RECEIVER])),t[p.READ_RECEIPTS.READ_AT]&&(e.setReceiptType(e.RECEIPT_TYPE.READ_RECEIPT),e.setReadAt(t[p.READ_RECEIPTS.READ_AT]),e.setTimestamp(t[t[p.READ_RECEIPTS.READ_AT]]),u.isFalsy(t[p.READ_RECEIPTS.RECIPIENT])?e.setSender(n):e.setSender(T.UsersController.trasformJSONUser(t[p.READ_RECEIPTS.RECIPIENT])),e.setReceiverType(o[p.MessageConstatnts.KEYS.RECEIVER_TYPE]),e.setReceiver(o[p.MessageConstatnts.KEYS.RECEIVER])),r.push(e)}),t(r))})}catch(t){e(new s.CometChatException(t))}})},i}();e.MessageController=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UsersController=void 0;var r=n(3),o=n(0),s=function(){function t(){}return t.trasformJSONUser=function(t){var e;try{t.uid=t.uid.toString(),t.name=t.name.toString(),t.status&&"offline"!==t.status?t.status="online":t.status="offline",e=new r.User(t),Object.assign(e,t),t=e}catch(t){o.Logger.error("UsersController:transformJSONUser",t)}return t},t}();e.UsersController=s},function(t,e,n){(function(r){t.exports=function o(s,i,a){function c(n,t){if(!i[n]){if(!s[n]){if(E)return E(n,!0);var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}var r=i[n]={exports:{}};s[n][0].call(r.exports,function(t){var e=s[n][1][t];return c(e||t)},r,r.exports,o,s,i,a)}return i[n].exports}for(var E=!1,t=0;t<a.length;t++)c(a[t]);return c}({1:[function(t,u,e){(function(e){"use strict";var n,r,t=e.MutationObserver||e.WebKitMutationObserver;if(t){var o=0,s=new t(E),i=e.document.createTextNode("");s.observe(i,{characterData:!0}),n=function(){i.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){E(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(E,0)};else{var a=new e.MessageChannel;a.port1.onmessage=E,n=function(){a.port2.postMessage(0)}}var c=[];function E(){var t,e;r=!0;for(var n=c.length;n;){for(e=c,c=[],t=-1;++t<n;)e[t]();n=c.length}r=!1}u.exports=function(t){1!==c.push(t)||r||n()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var o=t(1);function E(){}var u={},s=["REJECTED"],i=["FULFILLED"],a=["PENDING"];function r(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,t!==E&&d(this,t)}function c(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function p(e,n,r){o(function(){var t;try{t=n(r)}catch(t){return u.reject(e,t)}t===e?u.reject(e,new TypeError("Cannot resolve promise with itself")):u.resolve(e,t)})}function l(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(e,t){var n=!1;function r(t){n||(n=!0,u.reject(e,t))}function o(t){n||(n=!0,u.resolve(e,t))}var s=S(function(){t(o,r)});"error"===s.status&&r(s.value)}function S(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=r).prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){if("function"!=typeof t&&this.state===i||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(E);if(this.state!==a){var r=this.state===i?t:e;p(n,r,this.outcome)}else this.queue.push(new c(n,t,e));return n},c.prototype.callFulfilled=function(t){u.resolve(this.promise,t)},c.prototype.otherCallFulfilled=function(t){p(this.promise,this.onFulfilled,t)},c.prototype.callRejected=function(t){u.reject(this.promise,t)},c.prototype.otherCallRejected=function(t){p(this.promise,this.onRejected,t)},u.resolve=function(t,e){var n=S(l,e);if("error"===n.status)return u.reject(t,n.value);var r=n.value;if(r)d(t,r);else{t.state=i,t.outcome=e;for(var o=-1,s=t.queue.length;++o<s;)t.queue[o].callFulfilled(e)}return t},u.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},r.resolve=function(t){return t instanceof this?t:u.resolve(new this(E),t)},r.reject=function(t){var e=new this(E);return u.reject(e,t)},r.all=function(t){var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,o=!1;if(!r)return this.resolve([]);for(var s=new Array(r),i=0,e=-1,a=new this(E);++e<r;)c(t[e],e);return a;function c(t,e){n.resolve(t).then(function(t){s[e]=t,++i!==r||o||(o=!0,u.resolve(a,s))},function(t){o||(o=!0,u.reject(a,t))})}},r.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var o,s=-1,i=new this(E);++s<n;)o=t[s],e.resolve(o).then(function(t){r||(r=!0,u.resolve(i,t))},function(t){r||(r=!0,u.reject(i,t))});return i}},{1:1}],3:[function(e,t,n){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(t){return}}();function i(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(t){if("TypeError"!==t.name)throw t;for(var r="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,o=new r,s=0;s<e.length;s+=1)o.append(e[s]);return o.getBlob(n.type)}}"undefined"==typeof Promise&&t(3);var p=Promise;function l(t,e){e&&t.then(function(t){e(null,t)},function(t){e(t)})}function E(t,e,n){"function"==typeof e&&t.then(e),"function"==typeof n&&t.catch(n)}function u(t){return"string"!=typeof t&&(t=String(t)),t}function s(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var a="local-forage-detect-blob-support",o=void 0,d={},S=Object.prototype.toString,h="readonly",C="readwrite";function f(t){return"boolean"==typeof o?p.resolve(o):(r=t,new p(function(n){var t=r.transaction(a,C),e=i([""]);t.objectStore(a).put(e,"key"),t.onabort=function(t){t.preventDefault(),t.stopPropagation(),n(!1)},t.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),e=navigator.userAgent.match(/Edge\//);n(e||!t||43<=parseInt(t[1],10))}}).catch(function(){return!1})).then(function(t){return o=t});var r}function T(t){var e=d[t.name],n={};n.promise=new p(function(t,e){n.resolve=t,n.reject=e}),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then(function(){return n.promise}):e.dbReady=n.promise}function g(t){var e=d[t.name],n=e.deferredOperations.pop();if(n)return n.resolve(),n.promise}function _(t,e){var n=d[t.name],r=n.deferredOperations.pop();if(r)return r.reject(e),r.promise}function A(o,s){return new p(function(t,e){if(d[o.name]=d[o.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},o.db){if(!s)return t(o.db);T(o),o.db.close()}var n=[o.name];s&&n.push(o.version);var r=c.open.apply(c,n);s&&(r.onupgradeneeded=function(t){var e=r.result;try{e.createObjectStore(o.storeName),t.oldVersion<=1&&e.createObjectStore(a)}catch(t){if("ConstraintError"!==t.name)throw t}}),r.onerror=function(t){t.preventDefault(),e(r.error)},r.onsuccess=function(){t(r.result),g(o)}})}function R(t){return A(t,!1)}function I(t){return A(t,!0)}function O(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,o=t.version>t.db.version;if(r&&(t.version,t.version=t.db.version),o||n){if(n){var s=t.db.version+1;s>t.version&&(t.version=s)}return!0}return!1}function N(t){var e=function(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),o=0;o<e;o++)r[o]=t.charCodeAt(o);return n}(atob(t.data));return i([e],{type:t.type})}function y(t){return t&&t.__local_forage_encoded_blob}function m(t){var e=this,n=e._initReady().then(function(){var t=d[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady});return E(n,t,t),n}function v(e,n,r,o){void 0===o&&(o=1);try{var t=e.db.transaction(e.storeName,n);r(null,t)}catch(t){if(0<o&&(!e.db||"InvalidStateError"===t.name||"NotFoundError"===t.name))return p.resolve().then(function(){if(!e.db||"NotFoundError"===t.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),I(e)}).then(function(){return function(n){T(n);for(var r=d[n.name],o=r.forages,t=0;t<o.length;t++){var e=o[t];e._dbInfo.db&&(e._dbInfo.db.close(),e._dbInfo.db=null)}return n.db=null,R(n).then(function(t){return n.db=t,O(n)?I(n):t}).then(function(t){n.db=r.db=t;for(var e=0;e<o.length;e++)o[e]._dbInfo.db=t}).catch(function(t){throw _(n,t),t})}(e).then(function(){v(e,n,r,o-1)})}).catch(r);r(t)}}var P={_driver:"asyncStorage",_initStorage:function(t){var r=this,o={db:null};if(t)for(var e in t)o[e]=t[e];var s=d[o.name];s||(s={forages:[],db:null,dbReady:null,deferredOperations:[]},d[o.name]=s),s.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=m);var n=[];function i(){return p.resolve()}for(var a=0;a<s.forages.length;a++){var c=s.forages[a];c!==r&&n.push(c._initReady().catch(i))}var E=s.forages.slice(0);return p.all(n).then(function(){return o.db=s.db,R(o)}).then(function(t){return o.db=t,O(o,r._defaultConfig.version)?I(o):t}).then(function(t){o.db=s.db=t,r._dbInfo=o;for(var e=0;e<E.length;e++){var n=E[e];n!==r&&(n._dbInfo.db=o.db,n._dbInfo.version=o.version)}})},_support:function(){try{if(!c)return!1;var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(t){return!1}}(),iterate:function(a,t){var c=this,e=new p(function(s,i){c.ready().then(function(){v(c._dbInfo,h,function(t,e){if(t)return i(t);try{var n=e.objectStore(c._dbInfo.storeName),r=n.openCursor(),o=1;r.onsuccess=function(){var t=r.result;if(t){var e=t.value;y(e)&&(e=N(e));var n=a(e,t.key,o++);void 0!==n?s(n):t.continue()}else s()},r.onerror=function(){i(r.error)}}catch(t){i(t)}})}).catch(i)});return l(e,t),e},getItem:function(i,t){var a=this;i=u(i);var e=new p(function(o,s){a.ready().then(function(){v(a._dbInfo,h,function(t,e){if(t)return s(t);try{var n=e.objectStore(a._dbInfo.storeName),r=n.get(i);r.onsuccess=function(){var t=r.result;void 0===t&&(t=null),y(t)&&(t=N(t)),o(t)},r.onerror=function(){s(r.error)}}catch(t){s(t)}})}).catch(s)});return l(e,t),e},setItem:function(a,e,t){var c=this;a=u(a);var n=new p(function(s,i){var t;c.ready().then(function(){return t=c._dbInfo,"[object Blob]"===S.call(e)?f(t.db).then(function(t){return t?e:(r=e,new p(function(n,t){var e=new FileReader;e.onerror=t,e.onloadend=function(t){var e=btoa(t.target.result||"");n({__local_forage_encoded_blob:!0,data:e,type:r.type})},e.readAsBinaryString(r)}));var r}):e}).then(function(o){v(c._dbInfo,C,function(t,e){if(t)return i(t);try{var n=e.objectStore(c._dbInfo.storeName);null===o&&(o=void 0);var r=n.put(o,a);e.oncomplete=function(){void 0===o&&(o=null),s(o)},e.onabort=e.onerror=function(){var t=r.error?r.error:r.transaction.error;i(t)}}catch(t){i(t)}})}).catch(i)});return l(n,t),n},removeItem:function(i,t){var a=this;i=u(i);var e=new p(function(o,s){a.ready().then(function(){v(a._dbInfo,C,function(t,e){if(t)return s(t);try{var n=e.objectStore(a._dbInfo.storeName),r=n.delete(i);e.oncomplete=function(){o()},e.onerror=function(){s(r.error)},e.onabort=function(){var t=r.error?r.error:r.transaction.error;s(t)}}catch(t){s(t)}})}).catch(s)});return l(e,t),e},clear:function(t){var i=this,e=new p(function(o,s){i.ready().then(function(){v(i._dbInfo,C,function(t,e){if(t)return s(t);try{var n=e.objectStore(i._dbInfo.storeName),r=n.clear();e.oncomplete=function(){o()},e.onabort=e.onerror=function(){var t=r.error?r.error:r.transaction.error;s(t)}}catch(t){s(t)}})}).catch(s)});return l(e,t),e},length:function(t){var i=this,e=new p(function(o,s){i.ready().then(function(){v(i._dbInfo,h,function(t,e){if(t)return s(t);try{var n=e.objectStore(i._dbInfo.storeName),r=n.count();r.onsuccess=function(){o(r.result)},r.onerror=function(){s(r.error)}}catch(t){s(t)}})}).catch(s)});return l(e,t),e},key:function(a,t){var c=this,e=new p(function(s,i){a<0?s(null):c.ready().then(function(){v(c._dbInfo,h,function(t,e){if(t)return i(t);try{var n=e.objectStore(c._dbInfo.storeName),r=!1,o=n.openCursor();o.onsuccess=function(){var t=o.result;t?0===a?s(t.key):r?s(t.key):(r=!0,t.advance(a)):s(null)},o.onerror=function(){i(o.error)}}catch(t){i(t)}})}).catch(i)});return l(e,t),e},keys:function(t){var a=this,e=new p(function(s,i){a.ready().then(function(){v(a._dbInfo,h,function(t,e){if(t)return i(t);try{var n=e.objectStore(a._dbInfo.storeName),r=n.openCursor(),o=[];r.onsuccess=function(){var t=r.result;t?(o.push(t.key),t.continue()):s(o)},r.onerror=function(){i(r.error)}}catch(t){i(t)}})}).catch(i)});return l(e,t),e},dropInstance:function(a,t){t=s.apply(this,arguments);var e,n=this.config();if((a="function"!=typeof a&&a||{}).name||(a.name=a.name||n.name,a.storeName=a.storeName||n.storeName),a.name){var r=a.name===n.name&&this._dbInfo.db,o=r?p.resolve(this._dbInfo.db):R(a).then(function(t){var e=d[a.name],n=e.forages;e.db=t;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=t;return t});e=a.storeName?o.then(function(t){if(t.objectStoreNames.contains(a.storeName)){var o=t.version+1;T(a);var r=d[a.name],s=r.forages;t.close();for(var e=0;e<s.length;e++){var n=s[e];n._dbInfo.db=null,n._dbInfo.version=o}var i=new p(function(e,n){var r=c.open(a.name,o);r.onerror=function(t){var e=r.result;e.close(),n(t)},r.onupgradeneeded=function(){var t=r.result;t.deleteObjectStore(a.storeName)},r.onsuccess=function(){var t=r.result;t.close(),e(t)}});return i.then(function(t){r.db=t;for(var e=0;e<s.length;e++){var n=s[e];n._dbInfo.db=t,g(n._dbInfo)}}).catch(function(t){throw(_(a,t)||p.resolve()).catch(function(){}),t})}}):o.then(function(t){T(a);var r=d[a.name],o=r.forages;t.close();for(var e=0;e<o.length;e++){var n=o[e];n._dbInfo.db=null}var s=new p(function(e,n){var r=c.deleteDatabase(a.name);r.onerror=r.onblocked=function(t){var e=r.result;e&&e.close(),n(t)},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}});return s.then(function(t){r.db=t;for(var e=0;e<o.length;e++){var n=o[e];g(n._dbInfo)}}).catch(function(t){throw(_(a,t)||p.resolve()).catch(function(){}),t})})}else e=p.reject("Invalid arguments");return l(e,t),e}},L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M=/^~~local_forage_type~([^~]+)~/,D="__lfsc__:",U=D.length,w="arbf",Y="blob",G=U+w.length,b=Object.prototype.toString;function K(t){var e,n,r,o,s,i=.75*t.length,a=t.length,c=0;"="===t[t.length-1]&&(i--,"="===t[t.length-2]&&i--);var E=new ArrayBuffer(i),u=new Uint8Array(E);for(e=0;e<a;e+=4)n=L.indexOf(t[e]),r=L.indexOf(t[e+1]),o=L.indexOf(t[e+2]),s=L.indexOf(t[e+3]),u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&s;return E}function B(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=L[n[e]>>2],r+=L[(3&n[e])<<4|n[e+1]>>4],r+=L[(15&n[e+1])<<2|n[e+2]>>6],r+=L[63&n[e+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var F={serialize:function(e,n){var t="";if(e&&(t=b.call(e)),e&&("[object ArrayBuffer]"===t||e.buffer&&"[object ArrayBuffer]"===b.call(e.buffer))){var r,o=D;e instanceof ArrayBuffer?(r=e,o+=w):(r=e.buffer,"[object Int8Array]"===t?o+="si08":"[object Uint8Array]"===t?o+="ui08":"[object Uint8ClampedArray]"===t?o+="uic8":"[object Int16Array]"===t?o+="si16":"[object Uint16Array]"===t?o+="ur16":"[object Int32Array]"===t?o+="si32":"[object Uint32Array]"===t?o+="ui32":"[object Float32Array]"===t?o+="fl32":"[object Float64Array]"===t?o+="fl64":n(new Error("Failed to get type for BinaryArray"))),n(o+B(r))}else if("[object Blob]"===t){var s=new FileReader;s.onload=function(){var t="~~local_forage_type~"+e.type+"~"+B(this.result);n(D+Y+t)},s.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(t){n(null,t)}},deserialize:function(t){if(t.substring(0,U)!==D)return JSON.parse(t);var e,n=t.substring(G),r=t.substring(U,G);if(r===Y&&M.test(n)){var o=n.match(M);e=o[1],n=n.substring(o[0].length)}var s=K(n);switch(r){case w:return s;case Y:return i([s],{type:e});case"si08":return new Int8Array(s);case"ui08":return new Uint8Array(s);case"uic8":return new Uint8ClampedArray(s);case"si16":return new Int16Array(s);case"ur16":return new Uint16Array(s);case"si32":return new Int32Array(s);case"ui32":return new Uint32Array(s);case"fl32":return new Float32Array(s);case"fl64":return new Float64Array(s);default:throw new Error("Unkown type: "+r)}},stringToBuffer:K,bufferToString:B};function x(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function V(t,r,o,s,i,a){t.executeSql(o,s,i,function(t,n){n.code===n.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(t,e){e.rows.length?a(t,n):x(t,r,function(){t.executeSql(o,s,i,a)},a)},a):a(t,n)},a)}function k(i,t,a,c){var E=this;i=u(i);var e=new p(function(o,s){E.ready().then(function(){void 0===t&&(t=null);var n=t,r=E._dbInfo;r.serializer.serialize(t,function(e,t){t?s(t):r.db.transaction(function(t){V(t,r,"INSERT OR REPLACE INTO "+r.storeName+" (key, value) VALUES (?, ?)",[i,e],function(){o(n)},function(t,e){s(e)})},function(t){if(t.code===t.QUOTA_ERR){if(0<c)return void o(k.apply(E,[i,n,a,c-1]));s(t)}})})}).catch(s)});return l(e,a),e}var J={_driver:"webSQLStorage",_initStorage:function(t){var r=this,o={db:null};if(t)for(var e in t)o[e]="string"!=typeof t[e]?t[e].toString():t[e];var n=new p(function(e,n){try{o.db=openDatabase(o.name,String(o.version),o.description,o.size)}catch(t){return n(t)}o.db.transaction(function(t){x(t,o,function(){r._dbInfo=o,e()},function(t,e){n(e)})},n)});return o.serializer=F,n},_support:"function"==typeof openDatabase,iterate:function(E,t){var e=this,n=new p(function(c,n){e.ready().then(function(){var a=e._dbInfo;a.db.transaction(function(t){V(t,a,"SELECT * FROM "+a.storeName,[],function(t,e){for(var n=e.rows,r=n.length,o=0;o<r;o++){var s=n.item(o),i=s.value;if(i&&(i=a.serializer.deserialize(i)),void 0!==(i=E(i,s.key,o+1)))return void c(i)}c()},function(t,e){n(e)})})}).catch(n)});return l(n,t),n},getItem:function(e,t){var s=this;e=u(e);var n=new p(function(o,n){s.ready().then(function(){var r=s._dbInfo;r.db.transaction(function(t){V(t,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[e],function(t,e){var n=e.rows.length?e.rows.item(0).value:null;n&&(n=r.serializer.deserialize(n)),o(n)},function(t,e){n(e)})})}).catch(n)});return l(n,t),n},setItem:function(t,e,n){return k.apply(this,[t,e,n,1])},removeItem:function(o,t){var s=this;o=u(o);var e=new p(function(n,r){s.ready().then(function(){var e=s._dbInfo;e.db.transaction(function(t){V(t,e,"DELETE FROM "+e.storeName+" WHERE key = ?",[o],function(){n()},function(t,e){r(e)})})}).catch(r)});return l(e,t),e},clear:function(t){var o=this,e=new p(function(n,r){o.ready().then(function(){var e=o._dbInfo;e.db.transaction(function(t){V(t,e,"DELETE FROM "+e.storeName,[],function(){n()},function(t,e){r(e)})})}).catch(r)});return l(e,t),e},length:function(t){var o=this,e=new p(function(r,n){o.ready().then(function(){var e=o._dbInfo;e.db.transaction(function(t){V(t,e,"SELECT COUNT(key) as c FROM "+e.storeName,[],function(t,e){var n=e.rows.item(0).c;r(n)},function(t,e){n(e)})})}).catch(n)});return l(e,t),e},key:function(o,t){var s=this,e=new p(function(r,n){s.ready().then(function(){var e=s._dbInfo;e.db.transaction(function(t){V(t,e,"SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[o+1],function(t,e){var n=e.rows.length?e.rows.item(0).key:null;r(n)},function(t,e){n(e)})})}).catch(n)});return l(e,t),e},keys:function(t){var r=this,e=new p(function(o,n){r.ready().then(function(){var e=r._dbInfo;e.db.transaction(function(t){V(t,e,"SELECT key FROM "+e.storeName,[],function(t,e){for(var n=[],r=0;r<e.rows.length;r++)n.push(e.rows.item(r).key);o(n)},function(t,e){n(e)})})}).catch(n)});return l(e,t),e},dropInstance:function(n,t){t=s.apply(this,arguments);var r=this.config();(n="function"!=typeof n&&n||{}).name||(n.name=n.name||r.name,n.storeName=n.storeName||r.storeName);var e,o=this;return l(e=n.name?new p(function(t){var e,s;e=n.name===r.name?o._dbInfo.db:openDatabase(n.name,"","",0),n.storeName?t({db:e,storeNames:[n.storeName]}):t((s=e,new p(function(o,n){s.transaction(function(t){t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(t,e){for(var n=[],r=0;r<e.rows.length;r++)n.push(e.rows.item(r).name);o({db:s,storeNames:n})},function(t,e){n(e)})},function(t){n(t)})})))}).then(function(a){return new p(function(s,i){a.db.transaction(function(r){function t(e){return new p(function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],function(){t()},function(t,e){n(e)})})}for(var e=[],n=0,o=a.storeNames.length;n<o;n++)e.push(t(a.storeNames[n]));p.all(e).then(function(){s()}).catch(function(t){i(t)})},function(t){i(t)})})}):p.reject("Invalid arguments"),t),e}};function H(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function W(){return!function(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(t){return!0}}()||0<localStorage.length}var j={_driver:"localStorageWrapper",_initStorage:function(t){var e={};if(t)for(var n in t)e[n]=t[n];return e.keyPrefix=H(t,this._defaultConfig),W()?((this._dbInfo=e).serializer=F,p.resolve()):p.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}(),iterate:function(c,t){var E=this,e=E.ready().then(function(){for(var t=E._dbInfo,e=t.keyPrefix,n=e.length,r=localStorage.length,o=1,s=0;s<r;s++){var i=localStorage.key(s);if(0===i.indexOf(e)){var a=localStorage.getItem(i);if(a&&(a=t.serializer.deserialize(a)),void 0!==(a=c(a,i.substring(n),o++)))return a}}});return l(e,t),e},getItem:function(n,t){var r=this;n=u(n);var e=r.ready().then(function(){var t=r._dbInfo,e=localStorage.getItem(t.keyPrefix+n);return e&&(e=t.serializer.deserialize(e)),e});return l(e,t),e},setItem:function(i,t,e){var a=this;i=u(i);var n=a.ready().then(function(){void 0===t&&(t=null);var s=t;return new p(function(n,r){var o=a._dbInfo;o.serializer.serialize(t,function(t,e){if(e)r(e);else try{localStorage.setItem(o.keyPrefix+i,t),n(s)}catch(t){"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||r(t),r(t)}})})});return l(n,e),n},removeItem:function(e,t){var n=this;e=u(e);var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return l(r,t),r},clear:function(t){var r=this,e=r.ready().then(function(){for(var t=r._dbInfo.keyPrefix,e=localStorage.length-1;0<=e;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}});return l(e,t),e},length:function(t){var e=this.keys().then(function(t){return t.length});return l(e,t),e},key:function(n,t){var r=this,e=r.ready().then(function(){var e,t=r._dbInfo;try{e=localStorage.key(n)}catch(t){e=null}return e&&(e=e.substring(t.keyPrefix.length)),e});return l(e,t),e},keys:function(t){var s=this,e=s.ready().then(function(){for(var t=s._dbInfo,e=localStorage.length,n=[],r=0;r<e;r++){var o=localStorage.key(r);0===o.indexOf(t.keyPrefix)&&n.push(o.substring(t.keyPrefix.length))}return n});return l(e,t),e},dropInstance:function(e,t){if(t=s.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return l(r=e.name?new p(function(t){e.storeName?t(H(e,o._defaultConfig)):t(e.name+"/")}).then(function(t){for(var e=localStorage.length-1;0<=e;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}}):p.reject("Invalid arguments"),t),r}},q=function(t,e){for(var n=t.length,r=0;r<n;){if((o=t[r])===(s=e)||"number"==typeof o&&"number"==typeof s&&isNaN(o)&&isNaN(s))return!0;r++}var o,s;return!1},X=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},z={},Q={},Z={INDEXEDDB:P,WEBSQL:J,LOCALSTORAGE:j},$=[Z.INDEXEDDB._driver,Z.WEBSQL._driver,Z.LOCALSTORAGE._driver],tt=["dropInstance"],et=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),nt={description:"",driver:$.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function rt(e,n){e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})}}function ot(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(X(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var st=function(){function o(t){for(var e in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),Z)if(Z.hasOwnProperty(e)){var n=Z[e],r=n._driver;this[e]=r,z[r]||this.defineDriver(n)}this._defaultConfig=ot({},nt),this._config=ot({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return o.prototype.config=function(t){if("object"!==(void 0===t?"undefined":r(t)))return"string"==typeof t?this._config[t]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!=typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t&&t.driver)||this.setDriver(this._config.driver)},o.prototype.defineDriver=function(u,t,e){var n=new p(function(e,n){try{var r=u._driver,t=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!u._driver)return void n(t);for(var o=et.concat("_initStorage"),s=0,i=o.length;s<i;s++){var a=o[s],c=!q(tt,a);if((c||u[a])&&"function"!=typeof u[a])return void n(t)}!function(){for(var t=function(n){return function(){var t=new Error("Method "+n+" is not implemented by the current driver"),e=p.reject(t);return l(e,arguments[arguments.length-1]),e}},e=0,n=tt.length;e<n;e++){var r=tt[e];u[r]||(u[r]=t(r))}}();var E=function(t){z[r],z[r]=u,Q[r]=t,e()};"_support"in u?u._support&&"function"==typeof u._support?u._support().then(E,n):E(!!u._support):E(!0)}catch(t){n(t)}});return E(n,t,e),n},o.prototype.driver=function(){return this._driver||null},o.prototype.getDriver=function(t,e,n){var r=z[t]?p.resolve(z[t]):p.reject(new Error("Driver not found."));return E(r,e,n),r},o.prototype.getSerializer=function(t){var e=p.resolve(F);return E(e,t),e},o.prototype.ready=function(t){var e=this,n=e._driverSet.then(function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready});return E(n,t,t),n},o.prototype.setDriver=function(t,e,n){var s=this;X(t)||(t=[t]);var r=this._getSupportedDrivers(t);function i(){s._config.driver=s.driver()}function a(t){return s._extend(t),i(),s._ready=s._initStorage(s._config),s._ready}var o=null!==this._driverSet?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=o.then(function(){var t=r[0];return s._dbInfo=null,s._ready=null,s.getDriver(t).then(function(t){var o;s._driver=t._driver,i(),s._wrapLibraryMethodsWithReady(),s._initDriver=(o=r,function(){var n=0;function r(){for(;n<o.length;){var t=o[n];return n++,s._dbInfo=null,s._ready=null,s.getDriver(t).then(a).catch(r)}i();var e=new Error("No available storage method found.");return s._driverSet=p.reject(e),s._driverSet}return r()})})}).catch(function(){i();var t=new Error("No available storage method found.");return s._driverSet=p.reject(t),s._driverSet}),E(this._driverSet,e,n),this._driverSet},o.prototype.supports=function(t){return!!Q[t]},o.prototype._extend=function(t){ot(this,t)},o.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];this.supports(o)&&e.push(o)}return e},o.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=et.length;t<e;t++)rt(this,et[t])},o.prototype.createInstance=function(t){return new o(t)},o}(),it=new st;e.exports=it},{3:3}]},{},[4])(4)}).call(this,n(10))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FETCH_ERROR=e.TYPINGNOTIFICATION_CONSTANTS=e.LOGIN_ERROR=e.MESSAGE_ERRORS=e.MESSAGES_REQUEST_ERRORS=e.USERS_REQUEST_ERRORS=e.GROUP_CREATION_ERRORS=e.INIT_ERROR=e.ERRORS=e.SERVER_ERRORS=void 0,e.SERVER_ERRORS={AUTH_ERR:{code:"AUTH_ERR_AUTH_TOKEN_NOT_FOUND",message:"The auth token %s% does not exist. Please make sure you are logged in and have a valid auth token or try login again."}},e.ERRORS={PARAMETER_MISSING:{code:"MISSING_PARAMETERS",name:"Invalid or no parameter passed to the method."}},e.INIT_ERROR={NO_APP_ID:{code:e.ERRORS.PARAMETER_MISSING.code,name:e.ERRORS.PARAMETER_MISSING.name,message:"AppID cannot be empty. Please specify a valid appID.",details:{}}},e.GROUP_CREATION_ERRORS={EMPTY_PASSWORD:{code:"ERR_EMPTY_GROUP_PASS",details:void 0,message:"Password is mandatory to join a group.",name:void 0}},e.USERS_REQUEST_ERRORS={EMPTY_USERS_LIST:{code:"EMPTY_USERS_LIST",name:"EMPTY_USERS_LIST",message:"The users list needs to have atleast one UID.",details:{}}},e.MESSAGES_REQUEST_ERRORS={REQUEST_IN_PROGRESS_ERROR:{code:"REQUEST_IN_PROGRESS",name:"REQUEST_IN_PROGRESS",message:"Request in progress.",details:{}},NOT_ENOUGH_PARAMS:{code:"NOT_ENOUGH_PARAMETERS",name:"NOT_ENOUGH_PARAMETERS",message:"`Timestamp`, `MessageId` or `updatedAfter` is required to use the 'fetchNext()' method.",details:{}}},e.MESSAGE_ERRORS={INVALID_CUSTOM_DATA:{code:"-1",name:"%s_CUSTOM_DATA",message:"",details:{}}},e.LOGIN_ERROR={NOT_INITIALIZED:{code:"-1",name:"COMETCHAT_INITIALIZATION_NOT_DONE",message:"please initialize the cometchat before using login method.",details:{}},UNAUTHORISED:{code:401,name:"USER_NOT_AUTHORISED",message:"The `authToken` of the user is not authorised. Please verify again.",details:{}},WS_CONNECTION_FAIL:{code:-1,name:"WS_CONNECTION_FAIL",message:"WS Connection failed. %s",details:{}},WS_CONNECTION_FAIL_PORT_ERROR:{code:-1,name:"WS_CONNECTION_FAIL",message:"WS Connection failed. Trying to connect with port: %s",details:{}},WS_CONNECTION_FALLBACK_FAIL_PORT_ERROR:{code:-1,name:"WS_CONNECTION_FALLBACK_FAIL",message:"WS Connection fallback failed. Trying to connect with port: %s",details:{}},WS_AUTH_FAIL:{code:-1,name:"WS_AUTH_FAIL",message:"WS username/password not correct.",details:{}},NO_INTERNET:{code:-1,name:"NO_INTERNET_CONNECTION",message:"You do not have internet connection.",details:{}},REQUEST_IN_PROGRESS:{code:-1,name:"LOGIN_IN_PROGRESS",message:"Please wait until the previous login request ends.",details:{}}},e.TYPINGNOTIFICATION_CONSTANTS={TOO_MANY_REQUEST:{code:"TOO_MANY_REQUEST",name:"TOO MANY REQUEST",message:"too many request, wait for `%s` seconds before sending next request.",details:{}}},e.FETCH_ERROR={ERROR_IN_API_CALL:{code:"FAILED_TO_FETCH",name:"FAILED_TO_FETCH",message:"There is an unknown issue with the API request. Please check your internet connection and verify the api call.",details:{}}}},function(t,s,i){"use strict";(function(t){i.d(s,"a",function(){return r}),i.d(s,"b",function(){return o});var e,n=i(46),r=(e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{}).Capacitor=e.Capacitor||new n.a,o=r.Plugins}).call(this,i(10))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalStorage=void 0;var r=n(0),o=n(1),s=n(13),i=n(4),a=n(2),c=function(){function t(t){this.store=o.constants.DEFAULT_STORE,r.isFalsy(t)||(this.store=t),this.localStore=s.createInstance({name:r.format(o.LOCAL_STORE.STORE_STRING,i.CometChat.getAppId(),o.LOCAL_STORE.COMMON_STORE)}),this.localStore.setDriver([s.LOCALSTORAGE,s.INDEXEDDB,s.WEBSQL])}return t.getInstance=function(){return null==t.localStorage&&(t.localStorage=new t),t.localStorage},t.prototype.set=function(t,e){return this.localStore.setItem(t,JSON.stringify(e))},t.prototype.remove=function(t){this.localStore.removeItem(t)},t.prototype.update=function(t,e){this.remove(t),this.set(t,e)},t.prototype.get=function(t){var r=this;return new Promise(function(n,e){try{r.localStore.getItem(t).then(function(e){try{n(JSON.parse(e))}catch(t){n(e)}},function(t){e(t)})}catch(t){e(new a.CometChatException(t))}})},t.prototype.clearStore=function(){var r=this;return new Promise(function(n,e){try{r.localStore.keys().then(function(t){if(0<t.length)for(var e=0;e<t.length;e++)"appId"!==t[e]&&r.localStore.removeItem(t[e]),e===t.length-1&&n(!0)})}catch(t){e(t)}})},t.prototype.clear=function(t){},t.prototype.selectStore=function(t){this.store=t},t.localStorage=null,t}();e.LocalStorage=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GroupsController=void 0;var r=n(8),o=n(1),s=n(0),i=function(){function t(){}return t.trasformJSONGroup=function(t){var e;try{e=new r.Group(t[o.GroupConstants.KEYS.GUID],t[o.GroupConstants.KEYS.NAME],t[o.GroupConstants.KEYS.TYPE]),t.wsChannel&&delete t.wsChannel,Object.assign(e,t),t=e}catch(t){s.Logger.error("GroupsController:transformJSONGroup",t)}return t},t}();e.GroupsController=i},function(t,e,n){"use strict";var r,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.TextMessage=void 0;var o=n(7),a=n(1),c=n(3),E=n(8),u=n(0),p=function(o){function t(t,e,n){var r=o.call(this,t,"text",n,a.MessageCategory.MESSAGE)||this;return r.type="text",r.data={text:e},r.text=e,r}return s(t,o),t.prototype.getSender=function(){try{return this.getSenderFromData()}catch(t){return this.sender}},t.prototype.getReceiver=function(){try{return this.getReceiverFromData()}catch(t){return this.receiver}},t.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},t.prototype.setMetadata=function(t){this.metadata=t,this.data=i(i({},this.data),{metadata:t})},t.prototype.getData=function(){return this.data},t.prototype.setData=function(t){this.data=t},t.prototype.getText=function(){return this.text},t.prototype.setText=function(t){this.text=t,this.data.text=t},t.prototype.setProcessedText=function(t){this.processedText=t},t.prototype.getProcessedText=function(){return this.processedText},t.prototype.getTags=function(){return this.tags},t.prototype.setTags=function(t){this.tags=t},t.prototype.getSenderFromData=function(){try{var t=this.getData();if(t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])return new c.User(t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])}catch(t){u.Logger.error("TextMessageModel: getSenderFromData",t)}},t.prototype.getReceiverFromData=function(){try{var t=this.getData(),e=t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY];if(t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITYTYPE]==[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITY_TYPE.USER])return new c.User(e);var n=new E.Group(e[a.GroupConstants.KEYS.GUID],e[a.GroupConstants.KEYS.NAME],e[a.MessageConstatnts.KEYS.TYPE]);return Object.assign(n,e)}catch(t){u.Logger.error("TextMessageModel: getReceiverFromData",t)}},t.TYPE=a.MessageConstatnts.TYPE.TEXT,t.RECEIVER_TYPE=a.MessageConstatnts.RECEIVER_TYPE,t.CATEGORY=a.MessageConstatnts.CATEGORY.MESSAGE,t}(o.BaseMessage);e.TextMessage=p},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MediaMessage=void 0;var s=n(7),a=n(1),c=n(3),E=n(20),u=n(8),p=n(0),l=function(s){function t(t,e,n,r){var o=s.call(this,t,n,r,a.MessageCategory.MESSAGE)||this;return o.data={},"object"!=typeof e?o.data={url:e}:e&&(0<e.length?o.files=e:o.files=[e]),o}return o(t,s),t.prototype.setCaption=function(t){this.caption=t,this.data[a.MessageConstatnts.KEYS.TEXT]=t},t.prototype.getCaption=function(){return this.data[a.MessageConstatnts.KEYS.TEXT]},t.prototype.getSender=function(){try{return this.getSenderFromData()}catch(t){return this.sender}},t.prototype.getReceiver=function(){try{return this.getReceiverFromData()}catch(t){return this.receiver}},t.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},t.prototype.setMetadata=function(t){this.metadata=t,this.data=i(i({},this.data),{metadata:t})},t.prototype.getData=function(){return this.data},t.prototype.setData=function(t){this.data=t},t.prototype.getAttachment=function(){return new E.Attachment(this.data.attachments[0])},t.prototype.setAttachment=function(t){this.data.attachments=[E.Attachment.toJSON(t)]},t.prototype.getAttachments=function(){var t=[];if(this.data.attachments&&0<this.data.attachments.length)for(var e=0;e<this.data.attachments.length;e++)t.push(new E.Attachment(this.data.attachments[e]));return t},t.prototype.setAttachments=function(t){var e=[];if(t&&0<t.length)for(var n=0;n<t.length;n++)e.push(E.Attachment.toJSON(t[n]));this.data.attachments=e},t.prototype.getURL=function(){try{var t=this.getData();if(t[a.MessageConstatnts.KEYS.URL])return t[a.MessageConstatnts.KEYS.URL]}catch(t){p.Logger.error("MediaMessageModel: getURL",t)}},t.prototype.getTags=function(){return this.tags},t.prototype.setTags=function(t){this.tags=t},t.prototype.getSenderFromData=function(){try{var t=this.getData();if(t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])return new c.User(t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])}catch(t){p.Logger.error("MediaMessageModel: getSenderFromData",t)}},t.prototype.getReceiverFromData=function(){try{var t=this.getData(),e=t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY];if(t[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITYTYPE]==[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITY_TYPE.USER])return new c.User(e);var n=new u.Group(e[a.GroupConstants.KEYS.GUID],e[a.GroupConstants.KEYS.NAME],e[a.MessageConstatnts.KEYS.TYPE]);return Object.assign(n,e)}catch(t){p.Logger.error("MediaMessageModel: getReceiverFromData",t)}},t.TYPE=a.MessageConstatnts.TYPE,t.RECEIVER_TYPE=a.MessageConstatnts.RECEIVER_TYPE,t.CATEGORY=a.MessageConstatnts.CATEGORY,t}(s.BaseMessage);e.MediaMessage=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Attachment=void 0;var r=n(1),o=function(){function e(t){t.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.EXTENSION)&&(this.extension=t[r.ATTACHMENTS_CONSTANTS.KEYS.EXTENSION]),t.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.MIME_TYPE)&&(this.mimeType=t[r.ATTACHMENTS_CONSTANTS.KEYS.MIME_TYPE]),t.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.NAME)&&(this.name=t[r.ATTACHMENTS_CONSTANTS.KEYS.NAME]),t.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.SIZE)&&(this.size=t[r.ATTACHMENTS_CONSTANTS.KEYS.SIZE]),t.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.URL)&&(this.url=t[r.ATTACHMENTS_CONSTANTS.KEYS.URL])}return e.prototype.createFileFromJSON=function(t){return new e(t)},e.toJSON=function(t){return{extension:t.getExtension(),mimeType:t.getMimeType(),name:t.getName(),url:t.getUrl(),size:t.getSize()}},e.prototype.getExtension=function(){return this.extension},e.prototype.setExtension=function(t){this.extension=t},e.prototype.getMimeType=function(){return this.mimeType},e.prototype.setMimeType=function(t){this.mimeType=t},e.prototype.getName=function(){return this.name},e.prototype.setName=function(t){this.name=t},e.prototype.getSize=function(){return this.size},e.prototype.setSize=function(t){this.size=t},e.prototype.getUrl=function(){return this.url},e.prototype.setUrl=function(t){this.url=t},e}();e.Attachment=o},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.CustomMessage=void 0;var i=n(7),c=n(1),E=n(3),u=n(0),p=n(8),a=function(a){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this;if(3==t.length){var r=t[0],o=t[1],s=t[2];n=a.call(this,r,c.MessageConstatnts.TYPE.CUSTOM,o,c.MessageCategory.MESSAGE)||this,("object"!=typeof s||Array.isArray(s))&&(s={}),n.customData=s,u.isFalsy(n.data)&&(n.data={}),n.data[c.MessageConstatnts.KEYS.CUSTOM_DATA]=s}if(4==t.length){r=t[0],o=t[1];var i=t[2];s=t[3];n=a.call(this,r,i,o,c.MessageCategory.CUSTOM)||this,("object"!=typeof s||Array.isArray(s))&&(s={}),n.customData=s,u.isFalsy(n.data)&&(n.data={}),n.data[c.MessageConstatnts.KEYS.CUSTOM_DATA]=s}return n}return o(t,a),t.prototype.getCustomData=function(){return this.customData},t.prototype.setCustomData=function(t){this.customData=t,this.data[c.MessageConstatnts.KEYS.CUSTOM_DATA]=t},t.prototype.getSender=function(){try{return this.getSenderFromData()}catch(t){return this.sender}},t.prototype.getReceiver=function(){try{return this.getReceiverFromData()}catch(t){return this.receiver}},t.prototype.getSubType=function(){return this.subType},t.prototype.setSubType=function(t){this.subType=t,this.data=s(s({},this.data),{subType:t})},t.prototype.getMetadata=function(){return this.metadata},t.prototype.setMetadata=function(t){this.metadata=t,this.data=s(s({},this.data),{metadata:t})},t.prototype.getData=function(){return this.data},t.prototype.getTags=function(){return this.tags},t.prototype.setTags=function(t){this.tags=t},t.prototype.getSenderFromData=function(){try{var t=this.getData();if(t[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.MessageConstatnts.KEYS.SENDER][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])return new E.User(t[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.MessageConstatnts.KEYS.SENDER][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])}catch(t){u.Logger.error("CustomMessageModel: getSenderFromData",t)}},t.prototype.getReceiverFromData=function(){try{var t=this.getData(),e=t[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.MessageConstatnts.KEYS.RECEIVER][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY];if(t[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.MessageConstatnts.KEYS.RECEIVER][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITYTYPE]==[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITY_TYPE.USER])return new E.User(e);var n=new p.Group(e[c.GroupConstants.KEYS.GUID],e[c.GroupConstants.KEYS.NAME],e[c.MessageConstatnts.KEYS.TYPE]);return Object.assign(n,e)}catch(t){u.Logger.error("CustomMessageModel: getReceiverFromData",t)}},t}(i.BaseMessage);e.CustomMessage=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.InteractiveMessage=void 0;var i=n(7),E=n(1),a=n(3),u=n(0),p=n(8),l=n(37),d=n(23),c=function(c){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this;if(4==t.length){var r=t[0],o=t[1],s=t[2],i=t[3];(n=c.call(this,r,s,o,E.MessageCategory.INTERACTIVE)||this).interactionGoal=new l.InteractionGoal(E.GoalType.NONE,[]),("object"!=typeof i||Array.isArray(i))&&(i={}),n.interactiveData=i,n.interactions=[],u.isFalsy(n.data)&&(n.data={}),n.data[E.MessageConstatnts.KEYS.INTERACTIVE_DATA]=i,n.data[E.MessageConstatnts.KEYS.INTERACTION_GOAL]=new l.InteractionGoal(E.GoalType.NONE,[])}else if(5==t.length){r=t[0],o=t[1],s=t[2],i=t[3];var a=t[4];n=c.call(this,r,s,o,E.MessageCategory.INTERACTIVE)||this,("object"!=typeof i||Array.isArray(i))&&(i={}),("object"!=typeof a||Array.isArray(a))&&(a={}),n.interactiveData=i,n.interactionGoal=a,u.isFalsy(n.data)&&(n.data={}),n.data[E.MessageConstatnts.KEYS.INTERACTIVE_DATA]=i,n.data[E.MessageConstatnts.KEYS.INTERACTION_GOAL]=a,n.interactions=[]}return n}return o(t,c),t.prototype.getSender=function(){try{return this.getSenderFromData()}catch(t){return this.sender}},t.prototype.getInteractiveData=function(){return this.interactiveData},t.prototype.setInteractiveData=function(t){this.interactiveData=t,this.data[E.MessageConstatnts.KEYS.INTERACTIVE_DATA]=t},t.prototype.getReceiver=function(){try{return this.getReceiverFromData()}catch(t){return this.receiver}},t.prototype.getInteractionGoal=function(){try{return this.getInteractionGoalFromdata()}catch(t){return this.interactionGoal}},t.prototype.setInteractionGoal=function(t){this.interactionGoal=t,this.data=s(s({},this.data),{interactionGoal:t})},t.prototype.getInteractions=function(){try{return this.getInteractionsFromData()}catch(t){return this.interactions}},t.prototype.setInteractions=function(t){this.interactions=t;var e=E.MessageConstatnts.KEYS.INTERACTIONS;this.data[e]=t},t.prototype.getMetadata=function(){return this.metadata},t.prototype.setMetadata=function(t){this.metadata=t,this.data=s(s({},this.data),{metadata:t})},t.prototype.getData=function(){return this.data},t.prototype.getTags=function(){return this.tags},t.prototype.setTags=function(t){this.tags=t},t.prototype.setIsSenderInteractionAllowed=function(t){this.allowSenderInteraction=this.allowSenderInteraction},t.prototype.getIsSenderInteractionAllowed=function(){return this.allowSenderInteraction},t.prototype.getInteractionGoalFromdata=function(){try{var t=this.getData();if(t[E.MessageConstatnts.KEYS.INTERACTION_GOAL])return new l.InteractionGoal(t[E.MessageConstatnts.KEYS.INTERACTION_GOAL][E.MessageConstatnts.KEYS.TYPE],t[E.MessageConstatnts.KEYS.INTERACTION_GOAL][E.MessageConstatnts.KEYS.ELEMENT_IDS])}catch(t){u.Logger.error("InteractiveMessageModel: getFromData",t)}},t.prototype.getInteractionsFromData=function(){try{var t=this.getData();if(t[E.MessageConstatnts.KEYS.INTERACTIONS])return(t[E.MessageConstatnts.KEYS.INTERACTIONS]||[]).map(function(t){return new d.Interaction(t[E.MessageConstatnts.KEYS.ELEMENT_ID],t[E.MessageConstatnts.KEYS.INTERACTED_AT])})}catch(t){u.Logger.error("InteractiveMessageModel: getFromData",t)}},t.prototype.getSenderFromData=function(){try{var t=this.getData();if(t[E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][E.MessageConstatnts.KEYS.SENDER][E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])return new a.User(t[E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][E.MessageConstatnts.KEYS.SENDER][E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])}catch(t){u.Logger.error("CustomMessageModel: getSenderFromData",t)}},t.prototype.getReceiverFromData=function(){try{var t=this.getData(),e=t[E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][E.MessageConstatnts.KEYS.RECEIVER][E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY];if(t[E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][E.MessageConstatnts.KEYS.RECEIVER][E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITYTYPE]==[E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITY_TYPE.USER])return new a.User(e);var n=new p.Group(e[E.GroupConstants.KEYS.GUID],e[E.GroupConstants.KEYS.NAME],e[E.MessageConstatnts.KEYS.TYPE]);return Object.assign(n,e)}catch(t){u.Logger.error("InteractiveMessageModel: getReceiverFromData",t)}},t}(i.BaseMessage);e.InteractiveMessage=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Interaction=void 0;var r=n(1),o=function(){function n(t,e){this.elementId=t,this.interactedAt=e}return n.prototype.getElementId=function(){return this.elementId},n.prototype.getInteractedAt=function(){return this.interactedAt},n.prototype.setElementId=function(t){this.elementId=t},n.prototype.setInteractedAt=function(t){this.interactedAt=this.interactedAt},n.getInteractionFromJSON=function(t){var e=t[r.MessageConstatnts.KEYS.INTERACTED_AT];return new n(t[r.MessageConstatnts.KEYS.ELEMENT_ID],e)},n}();e.Interaction=o},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Action=void 0;var i=n(7),E=n(8),u=n(3),p=n(1),a=n(0),l=n(11),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.actionFromJSON=function(t){var e=new this(t[p.MessageConstatnts.KEYS.RECEIVER],t[p.MessageConstatnts.KEYS.TYPE],t[p.MessageConstatnts.KEYS.RECEIVER_TYPE],p.MessageCategory.ACTION),n=t[p.MessageConstatnts.KEYS.DATA];if(e.data=n,e.setAction(n[p.MessageConstatnts.KEYS.ACTION]),n[p.ActionConstatnts.ACTION_KEYS.EXTRAS]){var r=n[p.ActionConstatnts.ACTION_KEYS.EXTRAS];if(r[p.ActionConstatnts.ACTION_KEYS.SCOPE]){var o=r[p.ActionConstatnts.ACTION_KEYS.SCOPE];o[p.ActionConstatnts.ACTION_KEYS.NEW]&&o[p.ActionConstatnts.ACTION_KEYS.OLD]&&(e.setOldScope(o[p.ActionConstatnts.ACTION_KEYS.OLD]),e.setNewScope(o[p.ActionConstatnts.ACTION_KEYS.NEW]))}}n[p.MessageConstatnts.KEYS.METADATA]&&e.setMetadata(n[p.MessageConstatnts.KEYS.METADATA]);var s=n[p.ActionConstatnts.ACTION_KEYS.ENTITIES];if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY])if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][p.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==p.ActionConstatnts.ACTION_ENTITY_TYPE.USER){var i=new u.User(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][p.ActionConstatnts.ACTION_KEYS.ENTITY]);Object.assign(i,s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][p.ActionConstatnts.ACTION_KEYS.ENTITY]),e.actionBy=i,e.setSender(i)}else{var a=new E.Group("","","");Object.assign(a,s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][p.ActionConstatnts.ACTION_KEYS.ENTITY]),e.actionBy=a}if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR])if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][p.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==p.ActionConstatnts.ACTION_ENTITY_TYPE.USER){i=new u.User(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][p.ActionConstatnts.ACTION_KEYS.ENTITY]);Object.assign(i,s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][p.ActionConstatnts.ACTION_KEYS.ENTITY]),e.actionFor=i}else{a=new E.Group("","","");Object.assign(a,s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][p.ActionConstatnts.ACTION_KEYS.ENTITY]),e.actionFor=a}if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON])if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][p.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==p.ActionConstatnts.ACTION_ENTITY_TYPE.USER){i=new u.User(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][p.ActionConstatnts.ACTION_KEYS.ENTITY]);Object.assign(i,s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][p.ActionConstatnts.ACTION_KEYS.ENTITY]),e.actionOn=i}else if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][p.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==p.ActionConstatnts.ACTION_ENTITY_TYPE.GROUP){a=new E.Group("","","");Object.assign(a,s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][p.ActionConstatnts.ACTION_KEYS.ENTITY]),e.actionOn=a}else if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][p.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==p.ActionConstatnts.ACTION_ENTITY_TYPE.MESSAGE){var c=l.MessageController.trasformJSONMessge(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][p.ActionConstatnts.ACTION_KEYS.ENTITY]);e.actionOn=c}return e.setMessage(e.getActionMessage(e)),e},e.prototype.getOldScope=function(){return this.oldScope},e.prototype.setOldScope=function(t){this.oldScope=t},e.prototype.getNewScope=function(){return this.newScope},e.prototype.setNewScope=function(t){this.newScope=t},e.prototype.getRawData=function(){return this.rawData},e.prototype.setRawData=function(t){this.rawData=t},e.prototype.getMessage=function(){return this.message},e.prototype.setMessage=function(t){this.message=t},e.prototype.getAction=function(){return this.action},e.prototype.setAction=function(t){this.action=t},e.prototype.getSender=function(){try{return this.getSenderFromData()}catch(t){return this.sender}},e.prototype.getActionBy=function(){return this.actionBy},e.prototype.setActionBy=function(t){this.actionBy=t},e.prototype.getActionOn=function(){return this.actionOn},e.prototype.setActionOn=function(t){this.actionOn=t},e.prototype.getActionFor=function(){return this.actionFor},e.prototype.setActionFor=function(t){this.actionFor=t},e.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},e.prototype.setMetadata=function(t){this.metadata=t,this.data=s(s({},this.data),{metadata:t})},e.prototype.getActionMessage=function(t){var e="";switch(t.getType()){case p.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_USER:case p.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_GROUP:switch(t.getAction()){case p.ActionConstatnts.ACTION_KEYS.ACTION_CREATED:case p.ActionConstatnts.ACTION_KEYS.ACTION_UPDATED:case p.ActionConstatnts.ACTION_KEYS.ACTION_DELETED:}break;case p.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_GROUP_MEMBER:switch(t.getAction()){case p.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_JOINED:var n=t.getActionBy();e=a.format(p.ActionConstatnts.ActionMessages.ACTION_GROUP_JOINED_MESSAGE,n.getName());break;case p.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_LEFT:n=t.getActionBy();e=a.format(p.ActionConstatnts.ActionMessages.ACTION_GROUP_LEFT_MESSAGE,n.getName());break;case p.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_KICKED:n=t.getActionBy();var r=t.getActionOn();e=a.format(p.ActionConstatnts.ActionMessages.ACTION_MEMBER_KICKED_MESSAGE,n.getName(),r.getName());break;case p.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_BANNED:n=t.getActionBy(),r=t.getActionOn();e=a.format(p.ActionConstatnts.ActionMessages.ACTION_MEMBER_BANNED_MESSAGE,n.getName(),r.getName());break;case p.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_UNBANNED:n=t.getActionBy(),r=t.getActionOn();e=a.format(p.ActionConstatnts.ActionMessages.ACTION_MEMBER_UNBANNED_MESSAGE,n.getName(),r.getName());break;case p.ActionConstatnts.ACTION_KEYS.ACTION_SCOPE_CHANGED:n=t.getActionBy(),r=t.getActionOn();var o=t.getNewScope();e=a.format(p.ActionConstatnts.ActionMessages.ACTION_MEMBER_SCOPE_CHANGED,n.getName(),r.getName(),o);break;case p.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_ADDED:n=t.getActionBy(),r=t.getActionOn();e=a.format(p.ActionConstatnts.ActionMessages.ACTION_MEMBER_ADDED_TO_GROUP,n.getName(),r.getName());break;case p.ActionConstatnts.ACTION_KEYS.TYPE_MESSAGE_EDITED:e=a.format(p.ActionConstatnts.ActionMessages.ACTION_MESSAGE_EDITED_MESSAGE,"");break;case p.ActionConstatnts.ACTION_KEYS.TYPE_MESSAGE_DELETED:e=a.format(p.ActionConstatnts.ActionMessages.ACTION_MESSAGE_DELETED_MESSAGE,"")}}return e},e.prototype.getSenderFromData=function(){var t=this.data[p.ActionConstatnts.ACTION_KEYS.ENTITIES];if(t[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY]&&t[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][p.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==p.ActionConstatnts.ACTION_ENTITY_TYPE.USER){var e=new u.User(t[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][p.ActionConstatnts.ACTION_KEYS.ENTITY]);return Object.assign(e,t[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][p.ActionConstatnts.ACTION_KEYS.ENTITY]),e}},e.TYPE=p.MessageConstatnts.TYPE,e.RECEIVER_TYPE=p.MessageConstatnts.RECEIVER_TYPE,e.CATEGORY=p.MessageConstatnts.CATEGORY,e.ACTION_TYPE=p.ActionConstatnts.ACTION_TYPE,e}(i.BaseMessage);e.Action=c},function(t,e,n){"use strict";var r,s=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Call=void 0;var o=n(7),a=n(8),c=n(1),E=n(0),u=n(3),p=function(o){function t(t,e,n,r){return E.isFalsy(r)?o.call(this,t,e,n,c.MessageCategory.CALL)||this:o.call(this,t,e,n,r)||this}return s(t,o),t.prototype.getCallInitiator=function(){return this.getCallInitiatedByFromData()},t.prototype.setCallInitiator=function(t){this.callInitiator=t},t.prototype.getCallReceiver=function(){return this.getCallReceivedByFromData()},t.prototype.setCallReceiver=function(t){this.callReceiver=t},t.prototype.getData=function(){return this.data},t.prototype.setData=function(t){this.data=t},t.prototype.getSessionId=function(){return this.sessionId},t.prototype.setSessionId=function(t){this.sessionId=t},t.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},t.prototype.setMetadata=function(t){this.metadata=t,this.data=i(i({},this.data),{metadata:t})},t.prototype.getSender=function(){try{return this.getSenderFromData()}catch(t){return this.sender}},t.prototype.getAction=function(){return this.action},t.prototype.setAction=function(t){this.action=t},t.prototype.getInitiatedAt=function(){return this.initiatedAt},t.prototype.setInitiatedAt=function(t){this.initiatedAt=t},t.prototype.getJoinedAt=function(){return this.joinedAt},t.prototype.setJoinedAt=function(t){this.joinedAt=t},t.prototype.getRawData=function(){return this.rawData},t.prototype.setRawData=function(t){this.rawData=t},t.callFromJSON=function(t){try{var e=new this(t[c.MessageConstatnts.KEYS.RECEIVER],t[c.MessageConstatnts.KEYS.TYPE],t[c.MessageConstatnts.KEYS.RECEIVER_TYPE],c.MessageCategory.CALL),n=t[c.MessageConstatnts.KEYS.DATA];e.setAction(n[c.MessageConstatnts.KEYS.ACTION]),n[c.MessageConstatnts.KEYS.METADATA]&&e.setMetadata(n[c.MessageConstatnts.KEYS.METADATA]);var r=n[c.ActionConstatnts.ACTION_KEYS.ENTITIES];if(r[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY])r[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY];if(r[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON]){var o=r[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON];if(o[c.CallConstants.CALL_KEYS.CALL_ENTITY]){var s=o[c.CallConstants.CALL_KEYS.CALL_ENTITY];if(s[c.CallConstants.CALL_KEYS.CALL_SESSION_ID]&&(e.sessionId=s[c.CallConstants.CALL_KEYS.CALL_SESSION_ID]),s[c.CallConstants.CALL_KEYS.CALL_STATUS]&&(e.status=s[c.CallConstants.CALL_KEYS.CALL_STATUS]),s[c.CallConstants.CALL_KEYS.CALL_DATA]){var i=s[c.CallConstants.CALL_KEYS.CALL_DATA];if(i[c.CallConstants.CALL_KEYS.CALL_METADATA]&&(e.metadata=i[c.CallConstants.CALL_KEYS.CALL_METADATA]),i[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES])i[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES]}s[c.CallConstants.CALL_KEYS.CALL_INITIATED_AT]&&(e.initiatedAt=s[c.CallConstants.CALL_KEYS.CALL_INITIATED_AT]),s[c.CallConstants.CALL_KEYS.CALL_JOINED_AT]&&(e.joinedAt=s[c.CallConstants.CALL_KEYS.CALL_JOINED_AT]),s[c.CallConstants.CALL_KEYS.CALL_LEFT_AT]&&(e.joinedAt=s[c.CallConstants.CALL_KEYS.CALL_LEFT_AT])}}return e}catch(t){E.Logger.error("CallModel: callFromJSON",t)}},t.prototype.getSenderFromData=function(){try{var t=this.getData();if((t=t[c.ActionConstatnts.ACTION_KEYS.ENTITIES])[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.CallConstants.CALL_KEYS.CALL_ENTITY])return new u.User(t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.CallConstants.CALL_KEYS.CALL_ENTITY])}catch(t){E.Logger.error("CallModel:getSenderFromData",t)}},t.prototype.getCallInitiatedByFromData=function(){try{var t=this.getData();if((t=t[c.ActionConstatnts.ACTION_KEYS.ENTITIES])[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.CallConstants.CALL_KEYS.CALL_DATA][c.ActionConstatnts.ACTION_KEYS.ENTITIES][c.CallConstants.CALL_KEYS.CALL_SENDER])return new u.User(t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.CallConstants.CALL_KEYS.CALL_DATA][c.ActionConstatnts.ACTION_KEYS.ENTITIES][c.CallConstants.CALL_KEYS.CALL_SENDER][c.CallConstants.CALL_KEYS.CALL_ENTITY])}catch(t){E.Logger.error("CallModel:getCallInitiatedByFromData",t)}},t.prototype.getCallReceivedByFromData=function(){try{var t=this.getData();if((t=t[c.ActionConstatnts.ACTION_KEYS.ENTITIES])[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY]){if(t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY_TYPE]==c.CallConstants.CALL_KEYS.CALL_ENTITY_USER)return new u.User(t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY]);var e=new a.Group(t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.GroupConstants.KEYS.GUID],t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.GroupConstants.KEYS.NAME],t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.GroupConstants.KEYS.TYPE]);return Object.assign(e,t[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY])}}catch(t){E.Logger.error("CallModel:getCallReceivedByFromData",t)}},t.TYPE=c.MessageConstatnts.TYPE,t.RECEIVER_TYPE=c.MessageConstatnts.RECEIVER_TYPE,t.CATEGORY=c.MessageConstatnts.CATEGORY,t.ACTION_TYPE=c.ActionConstatnts.ACTION_TYPE,t}(o.BaseMessage);e.Call=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageReceipt=void 0;var r=function(){function t(){this.RECEIPT_TYPE={READ_RECEIPT:"read",DELIVERY_RECEIPT:"delivery"},this.receiptType=this.RECEIPT_TYPE.DELIVERY_RECEIPT}return t.prototype.getReceiverType=function(){return this.receiverType},t.prototype.setReceiverType=function(t){this.receiverType=t},t.prototype.getSender=function(){return this.sender},t.prototype.setSender=function(t){this.sender=t},t.prototype.getReceiver=function(){return this.receiver},t.prototype.setReceiver=function(t){this.receiver=t},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(t){this.timestamp=t},t.prototype.setReadAt=function(t){this.readAt=t},t.prototype.getReadAt=function(){return this.readAt},t.prototype.setDeliveredAt=function(t){this.deliveredAt=t},t.prototype.getDeliveredAt=function(){return this.deliveredAt},t.prototype.getMessageId=function(){return this.messageId},t.prototype.setMessageId=function(t){this.messageId=t},t.prototype.getReceiptType=function(){return this.receiptType},t.prototype.setReceiptType=function(t){void 0===t&&(t=this.RECEIPT_TYPE.DELIVERY_RECEIPT),this.receiptType=t},t}();e.MessageReceipt=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyStore=void 0;var r=n(4),o=n(0),s=n(1),i=n(13),a=n(2),c=function(){function t(t){this.store=s.constants.DEFAULT_STORE,o.isFalsy(t)||(this.store=t),this.keyStore=i.createInstance({name:o.format(s.LOCAL_STORE.STORE_STRING,r.CometChat.getAppId(),s.LOCAL_STORE.KEYS_STORE)}),this.keyStore.setDriver([i.LOCALSTORAGE,i.INDEXEDDB,i.WEBSQL])}return t.getInstance=function(){return null==t.KeyStore&&(t.KeyStore=new t),t.KeyStore},t.prototype.set=function(t,e){return this.keyStore.setItem(t,e)},t.prototype.remove=function(t){this.keyStore.removeItem(t)},t.prototype.get=function(t){var r=this;return new Promise(function(n,e){try{r.keyStore.getItem(t).then(function(e){try{n(JSON.parse(e))}catch(t){n(e)}},function(t){e(t)})}catch(t){e(new a.CometChatException(t))}})},t.prototype.clearStore=function(){return this.keyStore.clear()},t}();e.KeyStore=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WSConnectionListener=e.UserLoginListener=e.CallsListener=e.UserCallListener=e.GroupsListener=e.UsersListener=e.MessagesListener=e.Listener=e.ConnectionListener=e.LoginListener=e.OngoingCallListener=e.GroupListener=e.UserListener=e.CallListener=e.MessageListener=void 0;var o=n(0),s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.onTextMessageReceived=void 0,this.onMediaMessageReceived=void 0,this.onCustomMessageReceived=void 0,this.onTypingStarted=void 0,this.onTypingEnded=void 0,this.onMessagesDelivered=void 0,this.onMessagesRead=void 0,this.onMessageEdited=void 0,this.onMessageDeleted=void 0,this.onTransientMessageReceived=void 0,this.onInteractiveMessageReceived=void 0,this.onInteractionGoalCompleted=void 0,o.isFalsy(t[0].onTextMessageReceived)||(this.onTextMessageReceived=t[0].onTextMessageReceived),o.isFalsy(t[0].onMediaMessageReceived)||(this.onMediaMessageReceived=t[0].onMediaMessageReceived),o.isFalsy(t[0].onTypingStarted)||(this.onTypingStarted=t[0].onTypingStarted),o.isFalsy(t[0].onTypingEnded)||(this.onTypingEnded=t[0].onTypingEnded),o.isFalsy(t[0].onMessagesDelivered)||(this.onMessagesDelivered=t[0].onMessagesDelivered),o.isFalsy(t[0].onMessagesRead)||(this.onMessagesRead=t[0].onMessagesRead),o.isFalsy(t[0].onCustomMessageReceived)||(this.onCustomMessageReceived=t[0].onCustomMessageReceived),o.isFalsy(t[0].onMessageEdited)||(this.onMessageEdited=t[0].onMessageEdited),o.isFalsy(t[0].onMessageDeleted)||(this.onMessageDeleted=t[0].onMessageDeleted),o.isFalsy(t[0].onTransientMessageReceived)||(this.onTransientMessageReceived=t[0].onTransientMessageReceived),o.isFalsy(t[0].onInteractiveMessageReceived)||(this.onInteractiveMessageReceived=t[0].onInteractiveMessageReceived),o.isFalsy(t[0].onInteractionGoalCompleted)||(this.onInteractionGoalCompleted=t[0].onInteractionGoalCompleted)};e.MessageListener=s;var a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.onIncomingCallReceived=void 0,this.onOutgoingCallAccepted=void 0,this.onOutgoingCallRejected=void 0,this.onIncomingCallCancelled=void 0,this.onCallEndedMessageReceived=void 0,o.isFalsy(t[0].onIncomingCallReceived)||(this.onIncomingCallReceived=t[0].onIncomingCallReceived),o.isFalsy(t[0].onOutgoingCallAccepted)||(this.onOutgoingCallAccepted=t[0].onOutgoingCallAccepted),o.isFalsy(t[0].onOutgoingCallRejected)||(this.onOutgoingCallRejected=t[0].onOutgoingCallRejected),o.isFalsy(t[0].onIncomingCallCancelled)||(this.onIncomingCallCancelled=t[0].onIncomingCallCancelled),o.isFalsy(t[0].onCallEndedMessageReceived)||(this.onCallEndedMessageReceived=t[0].onCallEndedMessageReceived)};e.CallListener=a;var c=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.isFalsy(t[0].onUserOnline)||(this.onUserOnline=t[0].onUserOnline),o.isFalsy(t[0].onUserOffline)||(this.onUserOffline=t[0].onUserOffline)};e.UserListener=c;var E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.isFalsy(t[0].onGroupMemberJoined)||(this.onGroupMemberJoined=t[0].onGroupMemberJoined),o.isFalsy(t[0].onGroupMemberLeft)||(this.onGroupMemberLeft=t[0].onGroupMemberLeft),o.isFalsy(t[0].onGroupMemberKicked)||(this.onGroupMemberKicked=t[0].onGroupMemberKicked),o.isFalsy(t[0].onGroupMemberBanned)||(this.onGroupMemberBanned=t[0].onGroupMemberBanned),o.isFalsy(t[0].onGroupMemberUnbanned)||(this.onGroupMemberUnbanned=t[0].onGroupMemberUnbanned),o.isFalsy(t[0].onGroupMemberScopeChanged)||(this.onGroupMemberScopeChanged=t[0].onGroupMemberScopeChanged),o.isFalsy(t[0].onMemberAddedToGroup)||(this.onGroupMemberAddedToGroup=t[0].onMemberAddedToGroup)};e.GroupListener=E;var u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.isFalsy(t[0].onYouLeft)||(this.onYouLeft=t[0].onYouLeft),o.isFalsy(t[0].onYouJoined)||(this.onYouJoined=t[0].onYouJoined),o.isFalsy(t[0].onUserJoined)||(this.onUserJoined=t[0].onUserJoined),o.isFalsy(t[0].onUserLeft)||(this.onUserLeft=t[0].onUserLeft),o.isFalsy(t[0].onUserListUpdated)||(this.onUserListUpdated=t[0].onUserListUpdated),o.isFalsy(t[0].onAudioModesUpdated)||(this.onAudioModesUpdated=t[0].onAudioModesUpdated),o.isFalsy(t[0].onCallEnded)||(this.onCallEnded=t[0].onCallEnded),o.isFalsy(t[0].onError)||(this.onError=t[0].onError),o.isFalsy(t[0].onRecordingStarted)||(this.onRecordingStarted=t[0].onRecordingStarted),o.isFalsy(t[0].onRecordingStopped)||(this.onRecordingStopped=t[0].onRecordingStopped),o.isFalsy(t[0].onUserMuted)||(this.onUserMuted=t[0].onUserMuted),o.isFalsy(t[0].onCallSwitchedToVideo)||(this.onCallSwitchedToVideo=t[0].onCallSwitchedToVideo)};e.OngoingCallListener=u;var p=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.isFalsy(t[0].loginSuccess)||(this.loginSuccess=t[0].loginSuccess),o.isFalsy(t[0].loginFailure)||(this.loginFailure=t[0].loginFailure),o.isFalsy(t[0].logoutSuccess)||(this.logoutSuccess=t[0].logoutSuccess),o.isFalsy(t[0].logoutFailure)||(this.logoutFailure=t[0].logoutFailure)};e.LoginListener=p;var l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.onConnected=void 0,this.inConnecting=void 0,this.onDisconnected=void 0,this.onConnectionError=void 0,this.onFeatureThrottled=void 0,o.isFalsy(t[0].onConnected)||(this.onConnected=t[0].onConnected),o.isFalsy(t[0].inConnecting)||(this.inConnecting=t[0].inConnecting),o.isFalsy(t[0].onDisconnected)||(this.onDisconnected=t[0].onDisconnected),o.isFalsy(t[0].onConnectionError)||(this.onConnectionError=t[0].onConnectionError),o.isFalsy(t[0].onFeatureThrottled)||(this.onFeatureThrottled=t[0].onFeatureThrottled)};e.ConnectionListener=l;var d=function(t,e){this._name=t,this._callback=e},S=function(s){function t(t,e,n,r){var o=s.call(this,t,r)||this;return o._eventListener=e,n&&(o._cursor=n),o}return i(t,s),t}(e.Listener=d);e.MessagesListener=S;var h=function(s){function t(t,e,n,r){var o=s.call(this,t,r)||this;return o._eventListener=e,n&&(o._cursor=n),o}return i(t,s),t}(d);e.UsersListener=h;var C=function(s){function t(t,e,n,r){var o=s.call(this,t,r)||this;return o._eventListener=e,n&&(o._cursor=n),o}return i(t,s),t}(d);e.GroupsListener=C;var f=function(o){function t(t,e,n){var r=o.call(this,"callListner",n)||this;return r._eventListener=t,r}return i(t,o),t}(d);e.UserCallListener=f;var T=function(s){function t(t,e,n,r){var o=s.call(this,t,r)||this;return o._eventListener=e,o}return i(t,s),t}(d);e.CallsListener=T;var g=function(s){function t(t,e,n,r){var o=s.call(this,t,r)||this;return o._eventListener=e,n&&(o._cursor=n),o}return i(t,s),t}(d);e.UserLoginListener=g;var _=function(s){function t(t,e,n,r){var o=s.call(this,t,r)||this;return o._eventListener=e,n&&(o._cursor=n),o}return i(t,s),t}(d);e.WSConnectionListener=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationController=void 0;var a=n(41),c=n(0),r=function(){function t(){}return t.trasformJSONConversation=function(t,e,n,r,o,s){var i;try{i=new a.Conversation(t,e,n,r,o,s)}catch(t){c.Logger.error("ConversationController:transformJSONConversation",t)}return i},t}();e.ConversationController=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageListnerMaping=void 0;var r=n(0),o=n(1),s=n(13),i=n(4),a=function(){function t(t){this.store=o.constants.DEFAULT_STORE,r.isFalsy(t)||(this.store=t),this.settingsStore=s.createInstance({name:r.format(o.LOCAL_STORE.STORE_STRING,i.CometChat.getAppId(),o.LOCAL_STORE.MESSAGE_LISTENERS_LIST)}),this.settingsStore.setDriver([s.LOCALSTORAGE,s.INDEXEDDB,s.WEBSQL])}return t.getInstance=function(){return null==t.settingsStore&&(t.settingsStore=new t),t.settingsStore},t.prototype.set=function(t,e){return this.settingsStore.setItem(t,e)},t.prototype.remove=function(t){this.settingsStore.removeItem(t)},t.prototype.get=function(t){return this.settingsStore.getItem(t)},t.prototype.clearStore=function(){return this.settingsStore.clear()},t.prototype.clear=function(t){},t.prototype.selectStore=function(t){this.store=t},t.settingsStore=null,t}();e.MessageListnerMaping=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypingIndicator=void 0;var r=function(){function t(t,e,n){this.receiverId=t,this.receiverType=e,this.metadata=n}return t.prototype.getReceiverType=function(){return this.receiverType},t.prototype.setReceiverType=function(t){this.receiverType=t},t.prototype.getReceiverId=function(){return this.receiverId},t.prototype.setReceiverId=function(t){this.receiverId=t},t.prototype.getMetadata=function(){return this.metadata},t.prototype.setMetadata=function(t){this.metadata=t},t.prototype.getSender=function(){return this.sender},t.prototype.setSender=function(t){this.sender=t},t}();e.TypingIndicator=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransientMessage=void 0;var r=function(){function t(t,e,n){this.receiverId=t,this.receiverType=e,this.data=n||{}}return t.prototype.getReceiverId=function(){return this.receiverId},t.prototype.setReceiverId=function(t){this.receiverId=t},t.prototype.getReceiverType=function(){return this.receiverType},t.prototype.setReceiverType=function(t){this.receiverType=t},t.prototype.getData=function(){return this.data},t.prototype.setData=function(t){this.data=t},t.prototype.getSender=function(){return this.sender},t.prototype.setSender=function(t){this.sender=t},t}();e.TransientMessage=r},function(t,e,n){"use strict";var r,o,c,s,E,i,a,u,p,l,d,S,h,C,f,T,g,_,A,R,I,O,N,y,m,v,P,L;n.r(e),(o=r||(r={})).Prompt="PROMPT",o.Camera="CAMERA",o.Photos="PHOTOS",(s=c||(c={})).Rear="REAR",s.Front="FRONT",(i=E||(E={})).Uri="uri",i.Base64="base64",i.DataUrl="dataUrl",(u=a||(a={})).Documents="DOCUMENTS",u.Data="DATA",u.Cache="CACHE",u.External="EXTERNAL",u.ExternalStorage="EXTERNAL_STORAGE",(l=p||(p={})).UTF8="utf8",l.ASCII="ascii",l.UTF16="utf16",(S=d||(d={})).Heavy="HEAVY",S.Medium="MEDIUM",S.Light="LIGHT",(C=h||(h={})).SUCCESS="SUCCESS",C.WARNING="WARNING",C.ERROR="ERROR",(T=f||(f={})).Dark="DARK",T.Light="LIGHT",(_=g||(g={})).Body="body",_.Ionic="ionic",_.Native="native",_.None="none",(R=A||(A={})).Default="DEFAULT",R.Destructive="DESTRUCTIVE",R.Cancel="CANCEL",(O=I||(I={})).Camera="camera",O.Photos="photos",O.Geolocation="geolocation",O.Notifications="notifications",O.ClipboardRead="clipboard-read",O.ClipboardWrite="clipboard-write",O.Microphone="microphone",(y=N||(N={})).Smart="smart",y.Shared="shared",y.User="user",(v=m||(m={})).Dark="DARK",v.Light="LIGHT",(L=P||(P={})).None="NONE",L.Slide="SLIDE",L.Fade="FADE";var M=n(15),D=function(){function t(){this.plugins={},this.loadedPlugins={}}return t.prototype.addPlugin=function(t){this.plugins[t.config.name]=t},t.prototype.getPlugin=function(t){return this.plugins[t]},t.prototype.loadPlugin=function(t){var e=this.getPlugin(t);e&&e.load()},t.prototype.getPlugins=function(){var t=[];for(var e in this.plugins)t.push(this.plugins[e]);return t},t}(),U=new D,w=function(){function t(t,e){this.config=t,this.loaded=!1,this.listeners={},this.windowListeners={},e?e.addPlugin(this):U.addPlugin(this)}return t.prototype.addWindowListener=function(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0},t.prototype.removeWindowListener=function(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)},t.prototype.addListener=function(t,e){var n=this;this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e);var r=this.windowListeners[t];return r&&!r.registered&&this.addWindowListener(r),{remove:function(){n.removeListener(t,e)}}},t.prototype.removeListener=function(t,e){var n=this.listeners[t];if(n){var r=n.indexOf(e);this.listeners[t].splice(r,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}},t.prototype.removeAllListeners=function(){for(var t in this.listeners={},this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}},t.prototype.notifyListeners=function(t,e){var n=this.listeners[t];n&&n.forEach(function(t){return t(e)})},t.prototype.hasListeners=function(t){return!!this.listeners[t].length},t.prototype.registerWindowListener=function(t,e){var n=this;this.windowListeners[e]={registered:!1,windowEventName:t,pluginEventName:e,handler:function(t){n.notifyListeners(e,t)}}},t.prototype.requestPermissions=function(){return Capacitor.isNative?Capacitor.nativePromise(this.config.name,"requestPermissions",{}):Promise.resolve({results:[]})},t.prototype.load=function(){this.loaded=!0},t}(),Y=function(t){for(var e=0,n=U.getPlugins();e<n.length;e++){var r=n[e];G(t,r)}},G=function(t,e){var n;(!t.hasOwnProperty(e.config.name)||(n=e).config.platforms&&0<=n.config.platforms.indexOf(Capacitor.platform))&&(t[e.config.name]=e)},b=function(t,e){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function K(t,e){function n(){this.constructor=t}b(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function B(s,i,a,c){return new(a||(a=Promise))(function(t,e){function n(t){try{o(c.next(t))}catch(t){e(t)}}function r(t){try{o(c.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(n,r)}o((c=c.apply(s,i||[])).next())})}function F(n,r){var o,s,i,t,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(i=2&e[0]?s.return:e[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,e[1])).done)return i;switch(s=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){a.label=e[1];break}if(6===e[0]&&a.label<i[1]){a.label=i[1],i=e;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(e);break}i[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],s=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var x=function(t){function e(){return t.call(this,{name:"Accessibility",platforms:["web"]})||this}return K(e,t),e.prototype.isScreenReaderEnabled=function(){throw new Error("Feature not available in the browser")},e.prototype.speak=function(t){if(!("speechSynthesis"in window))return Promise.reject("Browser does not support the Speech Synthesis API");var e=new SpeechSynthesisUtterance(t.value);return t.language&&(e.lang=t.language),window.speechSynthesis.speak(e),Promise.resolve()},e}(w),V=new x,k=function(e){function t(){var t=e.call(this,{name:"App",platforms:["web"]})||this;return"undefined"!=typeof document&&document.addEventListener("visibilitychange",t.handleVisibilityChange.bind(t),!1),t}return K(t,e),t.prototype.exitApp=function(){throw new Error("Method not implemented.")},t.prototype.canOpenUrl=function(t){return Promise.resolve({value:!0})},t.prototype.openUrl=function(t){return Promise.resolve({completed:!0})},t.prototype.getLaunchUrl=function(){return Promise.resolve({url:""})},t.prototype.getState=function(){return Promise.resolve({isActive:!0!==document.hidden})},t.prototype.handleVisibilityChange=function(){var t={isActive:!0!==document.hidden};this.notifyListeners("appStateChange",t)},t}(w),J=new k,H=function(t){function e(){return t.call(this,{name:"Browser",platforms:["web"]})||this}return K(e,t),e.prototype.open=function(e){return B(this,void 0,void 0,function(){return F(this,function(t){return this._lastWindow=window.open(e.url,e.windowName||"_blank"),[2,Promise.resolve()]})})},e.prototype.prefetch=function(t){return B(this,void 0,void 0,function(){return F(this,function(t){return[2,Promise.resolve()]})})},e.prototype.close=function(){return B(this,void 0,void 0,function(){return F(this,function(t){return this._lastWindow&&this._lastWindow.close(),[2,Promise.resolve()]})})},e}(w),W=new H,j=function(t){function e(){return t.call(this,{name:"Camera",platforms:["web"]})||this}return K(e,t),e.prototype.getPhoto=function(a){return B(this,void 0,void 0,function(){var e=this;return F(this,function(t){return[2,new Promise(function(s,i){return B(e,void 0,void 0,function(){var o,e=this;return F(this,function(t){switch(t.label){case 0:return a.webUseInput?(this.fileInputExperience(a,s),[3,7]):[3,1];case 1:if(!customElements.get("pwa-camera-modal"))return[3,6];o=document.createElement("pwa-camera-modal"),document.body.appendChild(o),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,o.componentOnReady()];case 3:return t.sent(),o.addEventListener("onPhoto",function(r){return B(e,void 0,void 0,function(){var e,n;return F(this,function(t){switch(t.label){case 0:return null!==(e=r.detail)?[3,1]:(i("User cancelled photos app"),[3,4]);case 1:return e instanceof Error?(i(e.message),[3,4]):[3,2];case 2:return n=s,[4,this._getCameraPhoto(e,a)];case 3:n.apply(void 0,[t.sent()]),t.label=4;case 4:return o.dismiss(),document.body.removeChild(o),[2]}})})}),o.present(),[3,5];case 4:return t.sent(),this.fileInputExperience(a,s),[3,5];case 5:return[3,7];case 6:this.fileInputExperience(a,s),t.label=7;case 7:return[2]}})})})]})})},e.prototype.fileInputExperience=function(o,s){var i=document.querySelector("#_capacitor-camera-input"),a=function(){i.parentNode&&i.parentNode.removeChild(i)};i||((i=document.createElement("input")).id="_capacitor-camera-input",i.type="file",document.body.appendChild(i)),i.accept="image/*",i.capture=!0,o.source===r.Photos||o.source===r.Prompt?i.removeAttribute("capture"):o.direction===c.Front?i.capture="user":o.direction===c.Rear&&(i.capture="environment"),i.addEventListener("change",function(t){var e=i.files[0],n="jpeg";if("image/png"===e.type?n="png":"image/gif"===e.type&&(n="gif"),o.resultType===E.DataUrl||o.resultType===E.Base64){var r=new FileReader;r.addEventListener("load",function(){if(o.resultType===E.DataUrl)s({dataUrl:r.result,format:n});else if(o.resultType===E.Base64){var t=r.result.split(",")[1];s({base64String:t,format:n})}a()}),r.readAsDataURL(e)}else s({webPath:URL.createObjectURL(e),format:n}),a()}),i.click()},e.prototype._getCameraPhoto=function(t,s){return new Promise(function(e,n){var r=new FileReader,o=t.type.split("/")[1];s.resultType===E.Uri?e({webPath:URL.createObjectURL(t),format:o}):(r.readAsDataURL(t),r.onloadend=function(){var t=r.result;s.resultType===E.DataUrl?e({dataUrl:t,format:o}):e({base64String:t.split(",")[1],format:o})},r.onerror=function(t){n(t)})})},e}(w),q=new j,X=function(t){function e(){return t.call(this,{name:"Clipboard",platforms:["web"]})||this}return K(e,t),e.prototype.write=function(o){return B(this,void 0,void 0,function(){var e,n,r;return F(this,function(t){switch(t.label){case 0:return navigator.clipboard?void 0!==o.string||o.url?navigator.clipboard.writeText?[4,navigator.clipboard.writeText(void 0!==o.string?o.string:o.url)]:[2,Promise.reject("Writting to clipboard not supported in this browser")]:[3,2]:[2,Promise.reject("Clipboard API not available in this browser")];case 1:return t.sent(),[3,10];case 2:if(!o.image)return[3,9];if(!navigator.clipboard.write)return[2,Promise.reject("Setting images not supported in this browser")];t.label=3;case 3:return t.trys.push([3,7,,8]),[4,fetch(o.image)];case 4:return[4,t.sent().blob()];case 5:return e=t.sent(),n=new ClipboardItem(((r={})[e.type]=e,r)),[4,navigator.clipboard.write([n])];case 6:return t.sent(),[3,8];case 7:return t.sent(),[2,Promise.reject("Failed to write image")];case 8:return[3,10];case 9:return[2,Promise.reject("Nothing to write")];case 10:return[2,Promise.resolve()]}})})},e.prototype.read=function(){return B(this,void 0,void 0,function(){var e,n,r,o;return F(this,function(t){switch(t.label){case 0:return navigator.clipboard?navigator.clipboard.read?[3,1]:navigator.clipboard.readText?[2,this.readText()]:[2,Promise.reject("Reading from clipboard not supported in this browser")]:[2,Promise.reject("Clipboard API not available in this browser")];case 1:return t.trys.push([1,5,,6]),[4,navigator.clipboard.read()];case 2:return e=t.sent(),n=e[0].types[0],[4,e[0].getType(n)];case 3:return r=t.sent(),[4,this._getBlobData(r,n)];case 4:return o=t.sent(),[2,Promise.resolve({value:o,type:n})];case 5:return t.sent(),[2,this.readText()];case 6:return[2]}})})},e.prototype.readText=function(){return B(this,void 0,void 0,function(){var e;return F(this,function(t){switch(t.label){case 0:return[4,navigator.clipboard.readText()];case 1:return e=t.sent(),[2,Promise.resolve({value:e,type:"text/plain"})]}})})},e.prototype._getBlobData=function(t,o){return new Promise(function(e,n){var r=new FileReader;o.includes("image")?r.readAsDataURL(t):r.readAsText(t),r.onloadend=function(){var t=r.result;e(t)},r.onerror=function(t){n(t)}})},e}(w),z=new X,Q=function(e){function o(){var t=e.call(this,{name:"Filesystem",platforms:["web"]})||this;return t.DEFAULT_DIRECTORY=a.Data,t.DB_VERSION=1,t.DB_NAME="Disc",t._writeCmds=["add","put","delete"],t}return K(o,e),o.prototype.initDb=function(){return B(this,void 0,void 0,function(){var r=this;return F(this,function(t){if(void 0!==this._db)return[2,this._db];if(!("indexedDB"in window))throw new Error("This browser doesn't support IndexedDB");return[2,new Promise(function(t,e){var n=indexedDB.open(r.DB_NAME,r.DB_VERSION);n.onupgradeneeded=o.doUpgrade,n.onsuccess=function(){r._db=n.result,t(n.result)},n.onerror=function(){return e(n.error)},n.onblocked=function(){}})]})})},o.doUpgrade=function(t){var e=t.target.result;switch(t.oldVersion){case 0:case 1:default:e.objectStoreNames.contains("FileStorage")&&e.deleteObjectStore("FileStorage"),e.createObjectStore("FileStorage",{keyPath:"path"}).createIndex("by_folder","folder")}},o.prototype.dbRequest=function(i,a){return B(this,void 0,void 0,function(){var s;return F(this,function(t){return s=-1!==this._writeCmds.indexOf(i)?"readwrite":"readonly",[2,this.initDb().then(function(o){return new Promise(function(t,e){var n=o.transaction(["FileStorage"],s).objectStore("FileStorage"),r=n[i].apply(n,a);r.onsuccess=function(){return t(r.result)},r.onerror=function(){return e(r.error)}})})]})})},o.prototype.dbIndexRequest=function(i,a,c){return B(this,void 0,void 0,function(){var s;return F(this,function(t){return s=-1!==this._writeCmds.indexOf(a)?"readwrite":"readonly",[2,this.initDb().then(function(o){return new Promise(function(t,e){var n=o.transaction(["FileStorage"],s).objectStore("FileStorage").index(i),r=n[a].apply(n,c);r.onsuccess=function(){return t(r.result)},r.onerror=function(){return e(r.error)}})})]})})},o.prototype.getPath=function(t,e){t=t||this.DEFAULT_DIRECTORY;var n=void 0!==e?e.replace(/^[/]+|[/]+$/g,""):"",r="/"+t;return""!==e&&(r+="/"+n),r},o.prototype.clear=function(){return B(this,void 0,void 0,function(){var e,n;return F(this,function(t){switch(t.label){case 0:return[4,this.initDb()];case 1:return e=t.sent(),n=e.transaction(["FileStorage"],"readwrite"),n.objectStore("FileStorage").clear(),[2,{}]}})})},o.prototype.readFile=function(r){return B(this,void 0,void 0,function(){var e,n;return F(this,function(t){switch(t.label){case 0:return e=this.getPath(r.directory,r.path),[4,this.dbRequest("get",[e])];case 1:if(void 0===(n=t.sent()))throw Error("File does not exist.");return[2,{data:n.content}]}})})},o.prototype.writeFile=function(p){return B(this,void 0,void 0,function(){var e,n,r,o,s,i,a,c,E,u;return F(this,function(t){switch(t.label){case 0:return e=this.getPath(p.directory,p.path),n=p.data,r=p.recursive,[4,this.dbRequest("get",[e])];case 1:if((o=t.sent())&&"directory"===o.type)throw"The supplied path is a directory.";return s=p.encoding,i=e.substr(0,e.lastIndexOf("/")),[4,this.dbRequest("get",[i])];case 2:return void 0!==t.sent()?[3,4]:-1===(a=i.indexOf("/",1))?[3,4]:(c=i.substr(a),[4,this.mkdir({path:c,directory:p.directory,recursive:r})]);case 3:t.sent(),t.label=4;case 4:return E=Date.now(),u={path:e,folder:i,type:"file",size:n.length,ctime:E,mtime:E,content:!s&&0<=n.indexOf(",")?n.split(",")[1]:n},[4,this.dbRequest("put",[u])];case 5:return t.sent(),[2,{uri:u.path}]}})})},o.prototype.appendFile=function(u){return B(this,void 0,void 0,function(){var e,n,r,o,s,i,a,c,E;return F(this,function(t){switch(t.label){case 0:return e=this.getPath(u.directory,u.path),n=u.data,r=e.substr(0,e.lastIndexOf("/")),o=Date.now(),s=o,[4,this.dbRequest("get",[e])];case 1:if((i=t.sent())&&"directory"===i.type)throw"The supplied path is a directory.";return[4,this.dbRequest("get",[r])];case 2:return void 0!==t.sent()?[3,4]:(a=r.indexOf("/",1),c=-1!==a?r.substr(a):"/",[4,this.mkdir({path:c,directory:u.directory,recursive:!0})]);case 3:t.sent(),t.label=4;case 4:return void 0!==i&&(n=i.content+n,s=i.ctime),E={path:e,folder:r,type:"file",size:n.length,ctime:s,mtime:o,content:n},[4,this.dbRequest("put",[E])];case 5:return t.sent(),[2,{}]}})})},o.prototype.deleteFile=function(n){return B(this,void 0,void 0,function(){var e;return F(this,function(t){switch(t.label){case 0:return e=this.getPath(n.directory,n.path),[4,this.dbRequest("get",[e])];case 1:if(void 0===t.sent())throw Error("File does not exist.");return[4,this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(e)])];case 2:if(0!==t.sent().length)throw Error("Folder is not empty.");return[4,this.dbRequest("delete",[e])];case 3:return t.sent(),[2,{}]}})})},o.prototype.mkdir=function(u){return B(this,void 0,void 0,function(){var e,n,r,o,s,i,a,c,E;return F(this,function(t){switch(t.label){case 0:return e=this.getPath(u.directory,u.path),n=u.recursive,r=e.substr(0,e.lastIndexOf("/")),o=(e.match(/\//g)||[]).length,[4,this.dbRequest("get",[r])];case 1:return s=t.sent(),[4,this.dbRequest("get",[e])];case 2:if(i=t.sent(),1===o)throw Error("Cannot create Root directory");if(void 0!==i)throw Error("Current directory does already exist.");if(!n&&2!==o&&void 0===s)throw Error("Parent directory must exist");return n&&2!==o&&void 0===s?(a=r.substr(r.indexOf("/",1)),[4,this.mkdir({path:a,directory:u.directory,recursive:n})]):[3,4];case 3:t.sent(),t.label=4;case 4:return c=Date.now(),E={path:e,folder:r,type:"directory",size:0,ctime:c,mtime:c},[4,this.dbRequest("put",[E])];case 5:return t.sent(),[2,{}]}})})},o.prototype.rmdir=function(p){return B(this,void 0,void 0,function(){var e,n,r,o,s,i,a,c,E,u;return F(this,function(t){switch(t.label){case 0:return e=p.path,n=p.directory,r=p.recursive,o=this.getPath(n,e),[4,this.dbRequest("get",[o])];case 1:if(void 0===(s=t.sent()))throw Error("Folder does not exist.");if("directory"!==s.type)throw Error("Requested path is not a directory");return[4,this.readdir({path:e,directory:n})];case 2:if(0!==(i=t.sent()).files.length&&!r)throw Error("Folder is not empty");a=0,c=i.files,t.label=3;case 3:return a<c.length?(E=c[a],u=e+"/"+E,[4,this.stat({path:u,directory:n})]):[3,9];case 4:return"file"!==t.sent().type?[3,6]:[4,this.deleteFile({path:u,directory:n})];case 5:return t.sent(),[3,8];case 6:return[4,this.rmdir({path:u,directory:n,recursive:r})];case 7:t.sent(),t.label=8;case 8:return a++,[3,3];case 9:return[4,this.dbRequest("delete",[o])];case 10:return t.sent(),[2,{}]}})})},o.prototype.readdir=function(o){return B(this,void 0,void 0,function(){var e,n,r;return F(this,function(t){switch(t.label){case 0:return e=this.getPath(o.directory,o.path),[4,this.dbRequest("get",[e])];case 1:if(n=t.sent(),""!==o.path&&void 0===n)throw Error("Folder does not exist.");return[4,this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(e)])];case 2:return r=t.sent(),[2,{files:r.map(function(t){return t.substring(e.length+1)})}]}})})},o.prototype.getUri=function(r){return B(this,void 0,void 0,function(){var e,n;return F(this,function(t){switch(t.label){case 0:return e=this.getPath(r.directory,r.path),[4,this.dbRequest("get",[e])];case 1:return void 0!==(n=t.sent())?[3,3]:[4,this.dbRequest("get",[e+"/"])];case 2:n=t.sent(),t.label=3;case 3:if(void 0===n)throw Error("Entry does not exist.");return[2,{uri:n.path}]}})})},o.prototype.stat=function(r){return B(this,void 0,void 0,function(){var e,n;return F(this,function(t){switch(t.label){case 0:return e=this.getPath(r.directory,r.path),[4,this.dbRequest("get",[e])];case 1:return void 0!==(n=t.sent())?[3,3]:[4,this.dbRequest("get",[e+"/"])];case 2:n=t.sent(),t.label=3;case 3:if(void 0===n)throw Error("Entry does not exist.");return[2,{type:n.type,size:n.size,ctime:n.ctime,mtime:n.mtime,uri:n.path}]}})})},o.prototype.rename=function(e){return B(this,void 0,void 0,function(){return F(this,function(t){return[2,this._copy(e,!0)]})})},o.prototype.copy=function(e){return B(this,void 0,void 0,function(){return F(this,function(t){return[2,this._copy(e,!1)]})})},o.prototype._copy=function(T,g){return void 0===g&&(g=!1),B(this,void 0,void 0,function(){var e,n,r,i,o,s,a,c,E,u,p,l,d,S,h,C,f=this;return F(this,function(t){switch(t.label){case 0:if(e=T.to,n=T.from,r=T.directory,i=T.toDirectory,!e||!n)throw Error("Both to and from must be provided");if(i||(i=r),o=this.getPath(r,n),s=this.getPath(i,e),o===s)return[2,{}];if(s.startsWith(o))throw Error("To path cannot contain the from path");t.label=1;case 1:return t.trys.push([1,3,,6]),[4,this.stat({path:e,directory:i})];case 2:return a=t.sent(),[3,6];case 3:return t.sent(),(c=e.split("/")).pop(),E=c.join("/"),0<c.length?[4,this.stat({path:E,directory:i})]:[3,5];case 4:if("directory"!==t.sent().type)throw new Error("Parent directory of the to path is a file");t.label=5;case 5:return[3,6];case 6:if(a&&"directory"===a.type)throw new Error("Cannot overwrite a directory with a file");return[4,this.stat({path:n,directory:r})];case 7:switch(u=t.sent(),p=function(r,o,s){return B(f,void 0,void 0,function(){var e,n;return F(this,function(t){switch(t.label){case 0:return e=this.getPath(i,r),[4,this.dbRequest("get",[e])];case 1:return(n=t.sent()).ctime=o,n.mtime=s,[4,this.dbRequest("put",[n])];case 2:return t.sent(),[2]}})})},u.type){case"file":return[3,8];case"directory":return[3,15]}return[3,28];case 8:return[4,this.readFile({path:n,directory:r})];case 9:return l=t.sent(),g?[4,this.deleteFile({path:n,directory:r})]:[3,11];case 10:t.sent(),t.label=11;case 11:return[4,this.writeFile({path:e,directory:i,data:l.data})];case 12:return t.sent(),g?[4,p(e,u.ctime,u.mtime)]:[3,14];case 13:t.sent(),t.label=14;case 14:return[2,{}];case 15:if(a)throw Error("Cannot move a directory over an existing object");t.label=16;case 16:return t.trys.push([16,20,,21]),[4,this.mkdir({path:e,directory:i,recursive:!1})];case 17:return t.sent(),g?[4,p(e,u.ctime,u.mtime)]:[3,19];case 18:t.sent(),t.label=19;case 19:return[3,21];case 20:return t.sent(),[3,21];case 21:return[4,this.readdir({path:n,directory:r})];case 22:d=t.sent().files,S=0,h=d,t.label=23;case 23:return S<h.length?(C=h[S],[4,this._copy({from:n+"/"+C,to:e+"/"+C,directory:r,toDirectory:i},g)]):[3,26];case 24:t.sent(),t.label=25;case 25:return S++,[3,23];case 26:return g?[4,this.rmdir({path:n,directory:r})]:[3,28];case 27:t.sent(),t.label=28;case 28:return[2,{}]}})})},o._debug=!0,o}(w),Z=new Q,$=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.forEach(function(t){if(t&&"object"==typeof t)for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])}),n},tt=function(t){function e(){return t.call(this,{name:"Geolocation",platforms:["web"]})||this}return K(e,t),e.prototype.getCurrentPosition=function(r){var t=this;return new Promise(function(e,n){return t.requestPermissions().then(function(t){window.navigator.geolocation.getCurrentPosition(function(t){e(t)},function(t){n(t)},$({enableHighAccuracy:!0,timeout:1e4,maximumAge:0},r))})})},e.prototype.watchPosition=function(t,e){return""+window.navigator.geolocation.watchPosition(function(t){e(t)},function(t){e(null,t)},$({enableHighAccuracy:!0,timeout:1e4,maximumAge:0},t))},e.prototype.clearWatch=function(t){return window.navigator.geolocation.clearWatch(parseInt(t.id,10)),Promise.resolve()},e}(w),et=new tt,nt=function(t){function e(){return t.call(this,{name:"Device",platforms:["web"]})||this}return K(e,t),e.prototype.getInfo=function(){return B(this,void 0,void 0,function(){var e,n;return F(this,function(t){return e=navigator.userAgent,n=this.parseUa(e),[2,Promise.resolve({model:n.model,platform:"web",appVersion:"",appBuild:"",appId:"",appName:"",operatingSystem:n.operatingSystem,osVersion:n.osVersion,manufacturer:navigator.vendor,isVirtual:!1,uuid:this.getUid()})]})})},e.prototype.getBatteryInfo=function(){return B(this,void 0,void 0,function(){var e;return F(this,function(t){switch(t.label){case 0:e={},t.label=1;case 1:return t.trys.push([1,3,,4]),[4,navigator.getBattery()];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2,Promise.resolve({batteryLevel:e.level,isCharging:e.charging})]}})})},e.prototype.getLanguageCode=function(){return B(this,void 0,void 0,function(){return F(this,function(t){return[2,{value:navigator.language}]})})},e.prototype.parseUa=function(t){var e={},n=t.indexOf("(")+1,r=t.indexOf(") AppleWebKit");-1!==t.indexOf(") Gecko")&&(r=t.indexOf(") Gecko"));var o=t.substring(n,r);if(-1!==t.indexOf("Android"))e.model=o.replace("; wv","").split("; ").pop().split(" Build")[0],e.osVersion=o.split("; ")[1];else if(e.model=o.split("; ")[0],navigator.oscpu)e.osVersion=navigator.oscpu;else if(-1!==t.indexOf("Windows"))e.osVersion=o;else{var s=o.split("; ").pop().replace(" like Mac OS X","").split(" ");e.osVersion=s[s.length-1].replace(/_/g,".")}return/android/i.test(t)?e.operatingSystem="android":/iPad|iPhone|iPod/.test(t)&&!window.MSStream?e.operatingSystem="ios":/Win/.test(t)?e.operatingSystem="windows":/Mac/i.test(t)?e.operatingSystem="mac":e.operatingSystem="unknown",e},e.prototype.getUid=function(){var t=window.localStorage.getItem("_capuid");return t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}),window.localStorage.setItem("_capuid",t),t)},e}(w),rt=new nt,ot=function(e){function t(){var t=e.call(this,{name:"LocalNotifications",platforms:["web"]})||this;return t.pending=[],t}return K(t,e),t.prototype.createChannel=function(t){throw new Error("Feature not available in the browser. "+t.id)},t.prototype.deleteChannel=function(t){throw new Error("Feature not available in the browser. "+t.id)},t.prototype.listChannels=function(){throw new Error("Feature not available in the browser")},t.prototype.sendPending=function(){var e=this,n=[],r=+new Date;this.pending.forEach(function(t){t.schedule&&t.schedule.at&&+t.schedule.at<=r&&(e.buildNotification(t),n.push(t))}),this.pending=this.pending.filter(function(e){return!n.find(function(t){return t===e})})},t.prototype.sendNotification=function(t){var e=this,n=t;if(t.schedule&&t.schedule.at){var r=+t.schedule.at-+new Date;return this.pending.push(n),void setTimeout(function(){e.sendPending()},r)}this.buildNotification(t)},t.prototype.buildNotification=function(t){var e=t;return new Notification(e.title,{body:e.body})},t.prototype.schedule=function(t){var e=this,n=[];return t.notifications.forEach(function(t){n.push(e.sendNotification(t))}),Promise.resolve({notifications:t.notifications.map(function(t){return{id:""+t.id}})})},t.prototype.getPending=function(){return Promise.resolve({notifications:this.pending.map(function(t){return{id:""+t.id}})})},t.prototype.registerActionTypes=function(t){throw new Error("Method not implemented.")},t.prototype.cancel=function(t){return this.pending=this.pending.filter(function(e){return!t.notifications.find(function(t){return t.id===""+e.id})}),Promise.resolve()},t.prototype.areEnabled=function(){return Promise.resolve({value:"granted"===Notification.permission})},t.prototype.requestPermission=function(){return new Promise(function(n){Notification.requestPermission(function(t){var e=!0;"denied"!==t&&"default"!==t||(e=!1),n({granted:e})})})},t.prototype.requestPermissions=function(){return new Promise(function(e,n){Notification.requestPermission(function(t){"denied"!==t&&"default"!==t?e({results:[t]}):n(t)})})},t}(w),st=new ot,it=function(t){function e(){return t.call(this,{name:"Share",platforms:["web"]})||this}return K(e,t),e.prototype.share=function(t){return navigator.share?navigator.share({title:t.title,text:t.text,url:t.url}):Promise.reject("Web Share API not available")},e}(w),at=new it,ct=function(t){function e(){return t.call(this,{name:"Modals",platforms:["web"]})||this}return K(e,t),e.prototype.alert=function(e){return B(this,void 0,void 0,function(){return F(this,function(t){return window.alert(e.message),[2,Promise.resolve()]})})},e.prototype.prompt=function(n){return B(this,void 0,void 0,function(){var e;return F(this,function(t){return e=window.prompt(n.message,n.inputText||""),[2,Promise.resolve({value:e,cancelled:null===e})]})})},e.prototype.confirm=function(n){return B(this,void 0,void 0,function(){var e;return F(this,function(t){return e=window.confirm(n.message),[2,Promise.resolve({value:e})]})})},e.prototype.showActions=function(n){return B(this,void 0,void 0,function(){var e=this;return F(this,function(t){return[2,new Promise(function(o,t){return B(e,void 0,void 0,function(){var e,r=this;return F(this,function(t){return(e=document.querySelector("pwa-action-sheet"))||(e=document.createElement("pwa-action-sheet"),document.body.appendChild(e)),e.header=n.title,e.cancelable=!1,e.options=n.options,e.addEventListener("onSelection",function(n){return B(r,void 0,void 0,function(){var e;return F(this,function(t){return e=n.detail,o({index:e}),[2]})})}),[2]})})})]})})},e}(w),Et=new ct,ut=function(e){function t(){var t=e.call(this,{name:"Motion"})||this;return t.registerWindowListener("devicemotion","accel"),t.registerWindowListener("deviceorientation","orientation"),t}return K(t,e),t}(w),pt=new ut,lt=function(e){function t(){var t=e.call(this,{name:"Network",platforms:["web"]})||this;return t.listenerFunction=null,t}return K(t,e),t.prototype.getStatus=function(){return new Promise(function(t,e){if(window.navigator){var n=window.navigator.onLine,r=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection,o=r?r.type||r.effectiveType:"wifi";t({connected:n,connectionType:n?o:"none"})}else e("Network info not available")})},t.prototype.addListener=function(t,e){var n=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection,r=n?n.type||n.effectiveType:"wifi",o=e.bind(this,{connected:!0,connectionType:r}),s=e.bind(this,{connected:!1,connectionType:"none"});if(0===t.localeCompare("networkStatusChange"))return window.addEventListener("online",o),window.addEventListener("offline",s),{remove:function(){window.removeEventListener("online",o),window.removeEventListener("offline",s)}}},t}(w),dt=new lt,St=function(t){function e(){return t.call(this,{name:"Permissions"})||this}return K(e,t),e.prototype.query=function(r){return B(this,void 0,void 0,function(){var e,n;return F(this,function(t){switch(t.label){case 0:return(e=window.navigator).permissions?(n=r.name===I.Photos?"camera":r.name,[4,e.permissions.query({name:n})]):[2,Promise.reject("This browser does not support the Permissions API")];case 1:return[2,{state:t.sent().state}]}})})},e}(w),ht=new St,Ct=function(t){function e(){return t.call(this,{name:"SplashScreen",platforms:["web"]})||this}return K(e,t),e.prototype.show=function(t,e){return Promise.resolve()},e.prototype.hide=function(t,e){return Promise.resolve()},e}(w),ft=new Ct,Tt=function(e){function t(){var t=e.call(this,{name:"Storage",platforms:["web"]})||this;return t.KEY_PREFIX="_cap_",t}return K(t,e),t.prototype.get=function(n){var r=this;return new Promise(function(t,e){t({value:window.localStorage.getItem(r.makeKey(n.key))})})},t.prototype.set=function(n){var r=this;return new Promise(function(t,e){window.localStorage.setItem(r.makeKey(n.key),n.value),t()})},t.prototype.remove=function(n){var r=this;return new Promise(function(t,e){window.localStorage.removeItem(r.makeKey(n.key)),t()})},t.prototype.keys=function(){var n=this;return new Promise(function(t,e){t({keys:Object.keys(localStorage).filter(function(t){return n.isKey(t)}).map(function(t){return n.getKey(t)})})})},t.prototype.clear=function(){var n=this;return new Promise(function(t,e){Object.keys(localStorage).filter(function(t){return n.isKey(t)}).forEach(function(t){return window.localStorage.removeItem(t)}),t()})},t.prototype.makeKey=function(t){return this.KEY_PREFIX+t},t.prototype.isKey=function(t){return 0===t.indexOf(this.KEY_PREFIX)},t.prototype.getKey=function(t){return t.substr(this.KEY_PREFIX.length)},t}(w),gt=new Tt,_t=function(t){function e(){return t.call(this,{name:"Toast",platforms:["web"]})||this}return K(e,t),e.prototype.show=function(r){return B(this,void 0,void 0,function(){var e,n;return F(this,function(t){return e=2e3,r.duration&&(e="long"===r.duration?3500:2e3),(n=document.createElement("pwa-toast")).duration=e,n.message=r.text,document.body.appendChild(n),[2]})})},e}(w),At=new _t;Y(M.b);var Rt=function(t){G(M.b,t)};n.d(e,"CameraSource",function(){return r}),n.d(e,"CameraDirection",function(){return c}),n.d(e,"CameraResultType",function(){return E}),n.d(e,"FilesystemDirectory",function(){return a}),n.d(e,"FilesystemEncoding",function(){return p}),n.d(e,"HapticsImpactStyle",function(){return d}),n.d(e,"HapticsNotificationType",function(){return h}),n.d(e,"KeyboardStyle",function(){return f}),n.d(e,"KeyboardResize",function(){return g}),n.d(e,"ActionSheetOptionStyle",function(){return A}),n.d(e,"PermissionType",function(){return I}),n.d(e,"PhotosAlbumType",function(){return N}),n.d(e,"StatusBarStyle",function(){return m}),n.d(e,"StatusBarAnimation",function(){return P}),n.d(e,"Capacitor",function(){return M.a}),n.d(e,"Plugins",function(){return M.b}),n.d(e,"registerWebPlugin",function(){return Rt}),n.d(e,"AccessibilityPluginWeb",function(){return x}),n.d(e,"Accessibility",function(){return V}),n.d(e,"AppPluginWeb",function(){return k}),n.d(e,"App",function(){return J}),n.d(e,"BrowserPluginWeb",function(){return H}),n.d(e,"Browser",function(){return W}),n.d(e,"CameraPluginWeb",function(){return j}),n.d(e,"Camera",function(){return q}),n.d(e,"ClipboardPluginWeb",function(){return X}),n.d(e,"Clipboard",function(){return z}),n.d(e,"FilesystemPluginWeb",function(){return Q}),n.d(e,"Filesystem",function(){return Z}),n.d(e,"GeolocationPluginWeb",function(){return tt}),n.d(e,"Geolocation",function(){return et}),n.d(e,"DevicePluginWeb",function(){return nt}),n.d(e,"Device",function(){return rt}),n.d(e,"LocalNotificationsPluginWeb",function(){return ot}),n.d(e,"LocalNotifications",function(){return st}),n.d(e,"SharePluginWeb",function(){return it}),n.d(e,"Share",function(){return at}),n.d(e,"ModalsPluginWeb",function(){return ct}),n.d(e,"Modals",function(){return Et}),n.d(e,"MotionPluginWeb",function(){return ut}),n.d(e,"Motion",function(){return pt}),n.d(e,"NetworkPluginWeb",function(){return lt}),n.d(e,"Network",function(){return dt}),n.d(e,"PermissionsPluginWeb",function(){return St}),n.d(e,"Permissions",function(){return ht}),n.d(e,"SplashScreenPluginWeb",function(){return Ct}),n.d(e,"SplashScreen",function(){return ft}),n.d(e,"StoragePluginWeb",function(){return Tt}),n.d(e,"Storage",function(){return gt}),n.d(e,"ToastPluginWeb",function(){return _t}),n.d(e,"Toast",function(){return At}),n.d(e,"WebPluginRegistry",function(){return D}),n.d(e,"WebPlugins",function(){return U}),n.d(e,"WebPlugin",function(){return w}),n.d(e,"mergeWebPlugins",function(){return Y}),n.d(e,"mergeWebPlugin",function(){return G})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CometChat=e.init=void 0;var r=n(4);e.init=function(t){return r.CometChat.getInstance(t)},e.CometChat=r.CometChat},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EndpointFactory=void 0;var c=n(0),E=n(1),u=n(16),p=n(4),l=n(2),r=function(){function a(){this.baseUrl="https://%s.apiclient-%s.cometchat.io/",this.apiVersion=E.APPINFO.apiVersion,this.adminApiUrl="https://%s.api-%s.cometchat.io/",this.adminApiVersion=E.APPINFO.apiVersion,this.extensionApi="https://%s-%s.%s/%s",this.prosodyApi="https://%s.%s/%s",this.wsApi="https://%s/%s",this.uriEndpoints={authToken:{endpoint:"users/{{uid}}/auth_tokens",method:"POST",data:{uid:"string|max:100"},isAdminApi:!0},appSettings:{endpoint:"settings",method:"GET"},login:{endpoint:"admin/users/auth",method:"POST",data:{uid:"string|max:100"}},logout:{endpoint:"admin/users/auth/{{authToken}}",method:"DELETE"},getMyDetails:{endpoint:"me",method:"GET"},updateMyDetails:{endpoint:"me",method:"PUT"},getJWT:{endpoint:"me/jwt",method:"POST"},userSessions:{endpoint:"user_sessions",method:"POST"},users:{endpoint:"users",method:"GET"},user:{endpoint:"users/{{uid}}",method:"GET"},blockUsers:{endpoint:"blockedusers",method:"POST"},blockedUsersList:{endpoint:"blockedusers",method:"GET"},unblockUsers:{endpoint:"blockedusers",method:"DELETE"},userLogout:{endpoint:"me",method:"DELETE"},createUser:{endpoint:"users",method:"POST",isAdminApi:!0},updateUser:{endpoint:"users/{{uid}}",method:"PUT",isAdminApi:!0},sendFriendRequests:{endpoint:"user/friends",method:"POST",data:{uids:"array<string|max:100>"}},getFriends:{endpoint:"user/friends",method:"GET"},unfriend:{endpoint:"user/friends/{{uid}}/{{gid}}",method:"DELETE",data:{uids:"array<string|max:100>"}},acceptFriendRequest:{endpoint:"user/friends/{{uid}}/accept",method:"PUT",data:{uids:"array<string|max:100>"}},rejectFriendRequest:{endpoint:"user/friends/{{uid}}/reject",method:"DELETE",data:{uids:"array<string|max:100>"}},createGroup:{endpoint:"groups",method:"POST",data:{guid:"required|string|max:100",name:"required|string|max:100",type:"enum|public,protected,password",password:"filled|string|max:100"}},getGroups:{endpoint:"groups",method:"GET"},getGroup:{endpoint:"groups/{{guid}}",method:"GET"},updateGroup:{endpoint:"groups/{{guid}}",method:"PUT"},deleteGroup:{endpoint:"groups/{{guid}}",method:"DELETE"},addGroupMembers:{endpoint:"groups/{{guid}}/members",method:"POST",data:{uids:"array<string|max:100>"}},getGroupMembers:{endpoint:"groups/{{guid}}/members",method:"GET"},joinGroup:{endpoint:"groups/{{guid}}/members",method:"POST"},leaveGroup:{endpoint:"groups/{{guid}}/members",method:"DELETE"},kickGroupMembers:{endpoint:"groups/{{guid}}/members/{{uid}}",method:"DELETE",data:{uids:"array<string|max:100>"}},changeScopeOfMember:{endpoint:"groups/{{guid}}/members/{{uid}}",method:"PUT",data:{uids:"array<string|max:100>"}},banGroupMember:{endpoint:"groups/{{guid}}/bannedusers/{{uid}}",method:"POST",data:{uids:"array<string|max:100>"}},unbanGroupMember:{endpoint:"groups/{{guid}}/bannedusers/{{uid}}",method:"DELETE",data:{uids:"array<string|max:100>"}},addMemebersToGroup:{endpoint:"groups/{{guid}}/members",method:"PUT"},getBannedGroupMembers:{endpoint:"groups/{{guid}}/bannedusers",method:"GET"},promotemoteGroupMember:{endpoint:"groups/{{guid}}/promote",method:"PUT",data:{uids:"array<string|max:100>"}},demoteGroupMember:{endpoint:"groups/{{guid}}/demote",method:"DELETE",data:{uids:"array<string|max:100>"}},transferOwnership:{endpoint:"groups/{{guid}}/owner",method:"PATCH"},sendMessage:{endpoint:"messages",method:"POST",data:{sender:"array:string:max:100>",isGroupMember:"filled|boolean|bail",data:"required|json"}},sendMessageInThread:{endpoint:"messages/{{parentId}}/thread",method:"POST",data:{sender:"array:string:max:100>",isGroupMember:"filled|boolean|bail",data:"required|json"}},getMessages:{endpoint:"messages",method:"GET"},getMessageDetails:{endpoint:"messages/{{messageId}}",method:"GET"},getUserMessages:{endpoint:"users/{{listId}}/messages",method:"GET"},getGroupMessages:{endpoint:"groups/{{listId}}/messages",method:"GET"},getThreadMessages:{endpoint:"messages/{{listId}}/thread",method:"GET"},getMessage:{endpoint:"user/messages/{{muid}}",method:"GET"},updateMessage:{endpoint:"messages/{{messageId}}",method:"PUT"},deleteMessage:{endpoint:"messages/{{messageId}}",method:"DELETE"},markAsReadForUser:{endpoint:"users/{{uid}}/conversation/read",method:"POST"},markAsReadForGroup:{endpoint:"groups/{{guid}}/conversation/read",method:"POST"},markAsDeliveredForUser:{endpoint:"users/{{uid}}/conversation/delivered",method:"POST"},markAsDeliveredForGroup:{endpoint:"groups/{{guid}}/conversation/delivered",method:"POST"},markUserMessagesAsUnread:{endpoint:"users/{{uid}}/conversation/read",method:"DELETE"},markGroupMessagesAsUnread:{endpoint:"groups/{{guid}}/conversation/read",method:"DELETE"},createCallSession:{endpoint:"calls",method:"POST",data:{}},updateCallSession:{endpoint:"calls/{{sessionid}}",method:"put",data:{}},getConversations:{endpoint:"conversations",method:"GET"},getUserConversation:{endpoint:"users/{{uid}}/conversation",method:"GET"},getGroupConversation:{endpoint:"groups/{{guid}}/conversation",method:"GET"},deleteUserConversation:{endpoint:"users/{{uid}}/conversation",method:"DELETE"},deleteGroupConversation:{endpoint:"groups/{{guid}}/conversation",method:"DELETE"},updateUserConversation:{endpoint:"users/{{uid}}/conversation",method:"PUT"},updateGroupConversation:{endpoint:"groups/{{guid}}/conversation",method:"PUT"},updateCallType:{endpoint:"calls/{{sessionid}}/type",method:"PATCH"},getUserConversationStarter:{endpoint:"ai/conversation-starter/users/{{uid}}",method:"GET",isAIApi:!0},getGroupConversationStarter:{endpoint:"ai/conversation-starter/groups/{{guid}}",method:"GET",isAIApi:!0},getUserSmartReply:{endpoint:"ai/smart-replies/users/{{uid}}",method:"GET",isAIApi:!0},getGroupSmartReply:{endpoint:"ai/smart-replies/groups/{{guid}}",method:"GET",isAIApi:!0},markInteracted:{endpoint:"messages/{{messageId}}/interacted",method:"PATCH"},getUserConversationSummary:{endpoint:"ai/conversation-summary/users/{{uid}}",method:"GET",isAIApi:!0},getGroupConversationSummary:{endpoint:"ai/conversation-summary/groups/{{guid}}",method:"GET",isAIApi:!0},getBotAssistanceInUserConversation:{endpoint:"ai/bots/{{botId}}/assistance/users/{{uid}}",method:"GET",isAIApi:!0},getBotAssistanceInGroupConversation:{endpoint:"ai/bots/{{botId}}/assistance/groups/{{guid}}",method:"GET",isAIApi:!0}}}return a.prototype.getEndpointData=function(i){return new Promise(function(r,e){try{var o=p.CometChat.appSettings.getAdminHost(),s=p.CometChat.appSettings.getClientHost();u.LocalStorage.getInstance().get(E.LOCAL_STORE.KEY_APP_SETTINGS).then(function(t){var e;if(c.isFalsy(t)){if((new a).uriEndpoints.hasOwnProperty(i))if((e=(new a).uriEndpoints[i]).hasOwnProperty("isAdminApi"))if(c.isFalsy(o)){var n=c.format((new a).adminApiUrl,p.CometChat.getAppId(),p.CometChat.appSettings.getRegion())+(new a).adminApiVersion+"/"+e.endpoint;e.endpoint=n,r(e)}else{n="https://"+o+"/"+e.endpoint;e.endpoint=n,r(e)}else if(c.isFalsy(s)){n=c.format((new a).baseUrl,p.CometChat.getAppId(),p.CometChat.appSettings.getRegion())+(new a).apiVersion+"/"+e.endpoint;e.endpoint=n,r(e)}else{n="https://"+s+"/"+e.endpoint;e.endpoint=n,r(e)}}else if((new a).uriEndpoints.hasOwnProperty(i))if((e=(new a).uriEndpoints[i]).hasOwnProperty("isAdminApi")){n="https://"+t[E.APP_SETTINGS.KEYS.ADMIN_API_HOST]+"/"+t[E.APP_SETTINGS.KEYS.CHAT_API_VERSION]+"/"+e.endpoint;e.endpoint=n,r(e)}else{n="https://"+t[E.APP_SETTINGS.KEYS.CLIENT_API_HOST]+"/"+t[E.APP_SETTINGS.KEYS.CHAT_API_VERSION]+"/"+e.endpoint;e.endpoint=n,r(e)}},function(t){if((new a).uriEndpoints.hasOwnProperty(i)){var e=(new a).uriEndpoints[i];e.hasOwnProperty(["isAdminApi"])?c.isFalsy(o)?e.endpoint=c.format((new a).adminApiUrl,p.CometChat.getAppId(),p.CometChat.appSettings.getRegion())+(new a).adminApiVersion+"/"+e.endpoint:e.endpoint="https://"+o+"/"+e.endpoint:c.isFalsy(s)?e.endpoint=c.format((new a).baseUrl,p.CometChat.getAppId(),p.CometChat.appSettings.getRegion())+(new a).apiVersion+"/"+e.endpoint:e.endpoint="https://"+s+"/"+e.endpoint,r(e)}})}catch(t){e(new l.CometChatException(t))}})},a}();e.EndpointFactory=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEndPoint=void 0;var r=n(35),i=n(2);e.getEndPoint=function(t,s){void 0===t&&(t=""),void 0===s&&(s={});var e=new r.EndpointFactory;return new Promise(function(r,o){try{e.getEndpointData(t).then(function(t){var e=t;if(e){for(var n in s)e.endpoint=e.endpoint.replace("{{"+n+"}}",s[n]);r(e)}else o({error:"Unknown endPoint name."})})}catch(t){o(new i.CometChatException(t))}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InteractionGoal=void 0;var r=function(){function t(t,e){this.elementIds=[],this.type=t,this.elementIds=e}return t.prototype.getType=function(){return this.type},t.prototype.setType=function(t){this.type=t},t.prototype.getElementIds=function(){return this.elementIds},t.prototype.setElementIds=function(t){this.elementIds=t},t}();e.InteractionGoal=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CallController=void 0;var o=n(1),s=n(0),r=n(4),i=n(2),a=n(28),c=n(33).Plugins.Calling,E=function(){function t(){this.TAG="calling Log",this.callListner=void 0,this.CALL_NO_ANSWER_INTERVAL=45e3}return t.prototype.getCallListner=function(){return this.callListner},t.prototype.setCallListner=function(t){this.callListner=new a.UserCallListener(t)},t.getInstance=function(){try{return null!=this.callController&&null!=this.callController||(this.callController=new t),this.callController}catch(t){s.Logger.error("CallController: getInstance",t)}},t.prototype.getActiveCall=function(){try{return s.isFalsy(this.call)?null:this.call}catch(t){s.Logger.error("CallController: getActiveCall",t)}},t.prototype.initiateCall=function(n){var r=this;return new Promise(function(t,e){try{s.isFalsy(r.call)?null!=n&&null!=n?(r.call=n,r.startCallTimer(),t(n)):e(new i.CometChatException(o.CALL_ERROR.ERROR_IN_CALLING)):e(new i.CometChatException(o.CALL_ERROR.CALL_ALREADY_INITIATED))}catch(t){e(new i.CometChatException(t))}})},t.prototype.endCall=function(t){try{this.endCallSession()}catch(t){s.Logger.error("CallController: endCall",t)}},t.prototype.onCallStarted=function(n){var r=this;return new Promise(function(t,e){try{s.isFalsy(r.call)?null!=n&&null!=n?t(r.call=n):e(new i.CometChatException(o.CALL_ERROR.ERROR_IN_CALLING)):e(new i.CometChatException(o.CALL_ERROR.CALL_ALREADY_INITIATED))}catch(t){e(new i.CometChatException(t))}})},t.prototype.endCallSession=function(){try{this.call=void 0,t.callController=void 0,this.timer&&this.stopCallTimer()}catch(t){s.Logger.error("CallController:EndCallSession",{e:t})}},t.prototype.startCallTimer=function(){var e=this;try{this.timer=setTimeout(function(){e.call?r.CometChat.sendUnansweredResponse(e.call.getSessionId()).then(function(t){e.endCallSession()},function(t){e.endCallSession()}):e.endCallSession()},this.CALL_NO_ANSWER_INTERVAL)}catch(t){s.Logger.error("CallController: startCallTimer",t)}},t.prototype.stopCallTimer=function(){try{clearTimeout(this.timer)}catch(t){s.Logger.error("CallController: stopCallTimer",t)}},t.prototype.callStarted=function(){this.timer&&this.stopCallTimer()},t.prototype.endSession=function(){c.endCallSession()},t.callController=void 0,t}();e.CallController=E},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GroupMembersController=void 0;var r=n(40),o=n(1),s=n(0),i=function(){function t(){}return t.trasformJSONGroupMember=function(e){var t;try{return e.status&&"offline"!==e.status?e.status="online":e.status="offline",t=new r.GroupMember(e[o.GroupMemersConstans.KEYS.UID]),Object.assign(t,e),t}catch(t){return s.Logger.error("GroupMembersController:trasformJSONGroupMember",{e:t,groupMember:e}),e}},t}();e.GroupMembersController=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.GroupMember=void 0;var s=n(3),i=n(1),a=function(r){function t(t,e){var n=r.call(this,t)||this;return n.joinedAt=0,e&&(n.scope=e),n}return o(t,r),t.prototype.setScope=function(t){this.scope=t},t.prototype.setJoinedAt=function(t){this.joinedAt=t},t.prototype.setGuid=function(t){this.guid=t},t.prototype.getScope=function(){return this.scope},t.prototype.getJoinedAt=function(){return this.joinedAt},t.prototype.getGuid=function(){return this.guid},t.GroupMemberScope=i.GroupMemberScope,t}(s.User);e.GroupMember=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Conversation=void 0;var i=n(11),a=n(1),c=n(12),E=n(17),r=function(){function t(t,e,n,r,o,s){this.conversationId=t,this.conversationType=e,s&&0<s.length&&(this.tags=s),void 0!==n&&void 0!==(this.lastMessage=n).id&&(this.lastMessage=i.MessageController.trasformJSONMessge(n)),this.conversationType==a.MessageConstatnts.RECEIVER_TYPE.USER?this.conversationWith=c.UsersController.trasformJSONUser(r):this.conversationWith=E.GroupsController.trasformJSONGroup(r),this.unreadMessageCount=void 0!==o?o:0}return t.prototype.setConversationId=function(t){this.conversationId=t},t.prototype.setConversationType=function(t){this.conversationType=t},t.prototype.setLastMessage=function(t){this.lastMessage=t},t.prototype.setConversationWith=function(t){this.conversationWith=t},t.prototype.setUnreadMessageCount=function(t){this.unreadMessageCount=t},t.prototype.getConversationId=function(){return this.conversationId},t.prototype.getConversationType=function(){return this.conversationType},t.prototype.getLastMessage=function(){return this.lastMessage},t.prototype.getConversationWith=function(){return this.conversationWith},t.prototype.getUnreadMessageCount=function(){return this.unreadMessageCount},t.prototype.getTags=function(){return this.tags},t}();e.Conversation=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypingNotificationController=void 0;var r=n(0),o=function(){function t(){}return t.addTypingStarted=function(t){this.TYPING_STARTED_MAP[t]=r.getCurrentTime()},t.removeTypingStarted=function(t){delete this.TYPING_STARTED_MAP[t]},t.getTypingStartedMap=function(t){if(t)return this.TYPING_STARTED_MAP[t]},t.addTypingEnded=function(t){this.TYPING_ENDED_MAP[t]=r.getCurrentTime()},t.removeTypingEnded=function(t){delete this.TYPING_ENDED_MAP[t]},t.getTypingEndedMap=function(t){if(t)return this.TYPING_ENDED_MAP[t]},t.addIncomingTypingStarted=function(t){this.INCOMING_TYPING_STARTED_MAP[t.getReceiverId()]={typingNotification:t,timestamp:r.getCurrentTime()}},t.removeIncomingTypingStarted=function(t){delete this.INCOMING_TYPING_STARTED_MAP[t.getReceiverId()]},t.TYPING_STARTED_MAP={},t.TYPING_ENDED_MAP={},t.INCOMING_TYPING_STARTED_MAP={},t}();e.TypingNotificationController=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InteractionReceipt=void 0;var r=function(){function t(){}return t.prototype.getReceiverType=function(){return this.receiverType},t.prototype.setReceiverType=function(t){this.receiverType=t},t.prototype.getSender=function(){return this.sender},t.prototype.setSender=function(t){this.sender=t},t.prototype.getReceiveId=function(){return this.receiverId},t.prototype.setReceiverId=function(t){this.receiverId=t},t.prototype.getMessageId=function(){return this.messageId},t.prototype.setMessageId=function(t){this.messageId=t},t.prototype.getInteractions=function(){return this.interactions},t.prototype.setInteractions=function(t){this.interactions=t},t}();e.InteractionReceipt=r},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var s=arguments[e],i=0,a=s.length;i<a;i++,o++)r[o]=s[i];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.ListenerHandlers=void 0;var o=n(0),s=n(28),i=function(){function t(){this.connectionHandlers=[],this.loginHandlers=[],this.messageHandlers=[],this.userHandlers=[],this.groupHandlers=[],this.callHandlers=[]}return t.getInstance=function(){return null!=this.listenerHandlers&&null!=this.listenerHandlers||(this.listenerHandlers=new t),this.listenerHandlers},t.prototype.addConnectionEventListener=function(e,t){try{this.connectionHandlers=this.connectionHandlers.filter(function(t){return t._name!=e}),this.connectionHandlers=r(this.connectionHandlers,[new s.WSConnectionListener(e,t)])}catch(t){o.Logger.error("ListenerHandlers: addWSConnectionEventListener",t)}},t.prototype.removeConnectionEventListener=function(e){try{this.connectionHandlers=this.connectionHandlers.filter(function(t){return t._name!==e})}catch(t){o.Logger.error("ListenerHandlers: removeWSConnectionEventListener",t)}},t.prototype.addLoginEventListener=function(e,t){try{this.loginHandlers=this.loginHandlers.filter(function(t){return t._name!=e}),this.loginHandlers=r(this.loginHandlers,[new s.UserLoginListener(e,t)])}catch(t){o.Logger.error("ListenerHandlers: addLoginEventListener",t)}},t.prototype.removeLoginEventListener=function(e){try{this.loginHandlers=this.loginHandlers.filter(function(t){return t._name!==e})}catch(t){o.Logger.error("ListenerHandlers: removeLoginEventListener",t)}},t.prototype.addMessageEventListener=function(e,t){try{this.messageHandlers=this.messageHandlers.filter(function(t){return t._name!=e}),this.messageHandlers=r(this.messageHandlers,[new s.MessagesListener(e,t)])}catch(t){o.Logger.error("ListenerHandlers: addMessageEventListener",t)}},t.prototype.removeMessageEventListener=function(e){try{this.messageHandlers=this.messageHandlers.filter(function(t){return t._name!==e})}catch(t){o.Logger.error("ListenerHandlers: removeMessageEventListener",t)}},t.prototype.addUserEventListener=function(e,t){try{this.userHandlers=this.userHandlers.filter(function(t){return t._name!=e}),this.userHandlers=r(this.userHandlers,[new s.UsersListener(e,t)])}catch(t){o.Logger.error("ListenerHandlers: addUserEventListener",t)}},t.prototype.removeUserEventListener=function(e){try{this.userHandlers=this.userHandlers.filter(function(t){return t._name!==e})}catch(t){o.Logger.error("ListenerHandlers: removeUserEventListener",t)}},t.prototype.addGroupEventListener=function(e,t){try{this.groupHandlers=this.groupHandlers.filter(function(t){return t._name!=e}),this.groupHandlers=r(this.groupHandlers,[new s.GroupsListener(e,t)])}catch(t){o.Logger.error("ListenerHandlers: addGroupEventListener",t)}},t.prototype.removeGroupEventListener=function(e){try{this.groupHandlers=this.groupHandlers.filter(function(t){return t._name!==e})}catch(t){o.Logger.error("ListenerHandlers: removeGroupEventListener",t)}},t.prototype.addCallEventListener=function(e,t){try{this.callHandlers=this.callHandlers.filter(function(t){return t._name!=e}),this.callHandlers=r(this.callHandlers,[new s.CallsListener(e,t)])}catch(t){o.Logger.error("ListenerHandlers: addCallEventListener",t)}},t.prototype.removeCallEventListener=function(e){try{this.callHandlers=this.callHandlers.filter(function(t){return t._name!==e})}catch(t){o.Logger.error("ListenerHandlers: removeCallEventListener",t)}},t.listenerHandlers=new t,t}();e.ListenerHandlers=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getWSURL=e.stringifyMessage=e.checkConnection=void 0;var r=n(1),o=n(0),s=n(5);e.checkConnection=function(t){return t&&t.readyState===s.READY_STATE.OPEN},e.stringifyMessage=function(t){return JSON.stringify(t)},e.getWSURL=function(){return new Promise(function(n,t){o.getAppSettings().then(function(t){var e=s.WS.protocol+o.getChatHost(t)+":"+t[r.APP_SETTINGS.KEYS.CHAT_WSS_PORT];n(e)},function(t){o.Logger.error("WSHelper :: getWSURL",t)})})}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(){var e=this;this.platform="web",this.isNative=!1,this.Plugins={},"undefined"!=typeof Proxy&&(this.Plugins=new Proxy(this.Plugins,{get:function(t,n){if(void 0!==t[n])return t[n];var r=e;return new Proxy({},{get:function(t,e){return void 0===t[e]?r.pluginMethodNoop.bind(r,t,e,n):t[e]}})}}))}return t.prototype.pluginMethodNoop=function(t,e,n){return Promise.reject(n+" does not have web implementation.")},t.prototype.getPlatform=function(){return this.platform},t.prototype.isPluginAvailable=function(t){return this.Plugins.hasOwnProperty(t)},t.prototype.convertFileSrc=function(t){return t},t.prototype.handleError=function(t){},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GroupsRequestBuilder=e.GroupsRequest=void 0;var o=n(6),r=n(0),s=n(2),i=n(17),a=n(1),c=function(){function t(t){this.cursor=-1,this.total=-1,this.next_page=1,this.last_page=-1,this.current_page=1,this.total_pages=-1,this.hasJoined=0,this.withTags=!1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},r.isFalsy(t)||(r.isFalsy(t.limit)||(this.limit=t.limit),r.isFalsy(t.searchKeyword)||(this.searchKeyword=t.searchKeyword),r.isFalsy(t.hasJoined)||(this.hasJoined=1),r.isFalsy(t.tags)||(this.tags=t.tags),r.isFalsy(t.showTags)||(this.withTags=t.showTags))}return t.prototype.validateGroupBuilder=function(){if(void 0===this.limit)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.METHOD_COMPULSORY),"SET_LIMIT","SET_LIMIT","Set Limit")));if(isNaN(this.limit))return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(this.limit>a.DEFAULT_VALUES.GROUPS_MAX_LIMIT)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT",a.DEFAULT_VALUES.GROUPS_MAX_LIMIT)));if(this.limit<a.DEFAULT_VALUES.ZERO)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(void 0!==this.searchKeyword){if(typeof this.searchKeyword!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","setSearchKeyword()")));if(r.isFalsy(this.searchKeyword.trim()))return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword","search keyword")));this.searchKeyword=this.searchKeyword.trim()}if(void 0!==this.withTags){if(typeof this.withTags!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"WITH_TAGS","WITH_TAGS","withTags()")));1==this.withTags?this.withTags=!0:this.withTags=!1}return void 0===this.tags||Array.isArray(this.tags)?void 0:new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"TAGS","TAGS","setTags()")))},t.prototype.fetchNext=function(){var r=this;return new Promise(function(e,n){try{var t=r.validateGroupBuilder();if(t instanceof s.CometChatException)return void n(t);o.makeApiCall("getGroups",{},r.getNextData()).then(function(t){if(t.meta&&(r.total_pages=t.meta.pagination.total_pages),0<t.data.length){r.pagination=t.meta.pagination;var n=[];t.data.map(function(t,e){n.push(i.GroupsController.trasformJSONGroup(t))}),e(n)}e([])},function(t){n(new s.CometChatException(t.error))})}catch(t){n(new s.CometChatException(t))}})},t.prototype.getNextData=function(){var t={};if(t.per_page=this.limit,r.isFalsy(this.searchKeyword)||(t.searchKey=this.searchKeyword),r.isFalsy(this.hasJoined)||(t.hasJoined=1),r.isFalsy(this.tags)||(t.tags=this.tags),r.isFalsy(this.withTags)||(t.withTags=1),1==this.current_page)t.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return t.page=this.next_page,t;t.page=this.next_page++}return t},t.MAX_LIMIT=100,t.DEFAULT_LIMIT=30,t}();e.GroupsRequest=c;var E=function(){function t(){}return t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.setSearchKeyword=function(t){return this.searchKeyword=t,this},t.prototype.joinedOnly=function(t){return this.hasJoined=t,this},t.prototype.setTags=function(t){return this.tags=t,this},t.prototype.withTags=function(t){return this.showTags=t,this},t.prototype.build=function(){return new c(this)},t}();e.GroupsRequestBuilder=E},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GroupMembersRequestBuilder=e.GroupMembersRequest=void 0;var o=n(6),r=n(0),s=n(16),i=n(2),a=n(39),c=n(1),E=function(){function t(t){this.cursor=-1,this.total=-1,this.next_page=1,this.last_page=-1,this.current_page=1,this.total_pages=-1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},this.store=s.LocalStorage.getInstance(),r.isFalsy(t)||(this.limit=t.limit,this.guid=t.guid,r.isFalsy(t.searchKeyword)||(this.searchKeyword=t.searchKeyword),r.isFalsy(t.scopes)||(this.scopes=t.scopes))}return t.prototype.validateGroupMembersBuilder=function(){if(void 0===this.limit)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.METHOD_COMPULSORY),"SET_LIMIT","SET_LIMIT","Set Limit")));if(isNaN(this.limit))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(this.limit>c.DEFAULT_VALUES.USERS_MAX_LIMIT)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT",c.DEFAULT_VALUES.USERS_MAX_LIMIT)));if(this.limit<c.DEFAULT_VALUES.ZERO)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(void 0!==this.searchKeyword){if(typeof this.searchKeyword!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","setSearchKeyword()")));if(r.isFalsy(this.searchKeyword.trim()))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword","search keyword")));this.searchKeyword=this.searchKeyword.trim()}if(void 0!==this.guid){if(typeof this.guid!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"GUID","GUID","GroupMembersRequestBuilder()")));if(r.isFalsy(this.guid))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.INVALID),"GUID","GUID","GUID","GUID")))}return void 0===this.scopes||Array.isArray(this.scopes)?void 0:new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"SET_SCOPES","SET_SCOPES","setScopes()")))},t.prototype.fetchNext=function(){var r=this;return new Promise(function(n,e){try{var t=r.validateGroupMembersBuilder();if(t instanceof i.CometChatException)return void e(t);o.makeApiCall("getGroupMembers",{guid:r.guid},r.getNextData()).then(function(t){if(t.meta&&(r.total_pages=t.meta.pagination.total_pages),0<t.data.length){r.pagination=t.meta.pagination;var e=[];t.data.map(function(t){t.guid=r.guid,e.push(a.GroupMembersController.trasformJSONGroupMember(t))}),n(e)}else n([])},function(t){e(new i.CometChatException(t.error))})}catch(t){e(new i.CometChatException(t))}})},t.prototype.getNextData=function(){var t={};if(t.per_page=this.limit,r.isFalsy(this.searchKeyword)||(t.searchKey=this.searchKeyword),r.isFalsy(this.scopes)||(t.scopes=this.scopes),1==this.current_page)t.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return t.page=this.next_page,t;t.page=this.next_page++}return t},t.MAX_LIMIT=2,t.DEFAULT_LIMIT=1,t}();e.GroupMembersRequest=E;var u=function(){function t(t){this.guid=t}return t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.setSearchKeyword=function(t){return this.searchKeyword=t,this},t.prototype.setScopes=function(t){return this.scopes=t,this},t.prototype.build=function(){return new E(this)},t}();e.GroupMembersRequestBuilder=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BannedMembersRequestBuilder=e.BannedMembersRequest=void 0;var o=n(6),r=n(0),s=n(2),i=n(39),a=n(1),c=function(){function t(t){this.cursor=-1,this.total=-1,this.next_page=1,this.last_page=-1,this.current_page=1,this.total_pages=-1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},r.isFalsy(t)||(this.limit=t.limit,this.guid=t.guid,r.isFalsy(t.searchKeyword)||(this.searchKeyword=t.searchKeyword),r.isFalsy(t.scopes)||(this.scopes=t.scopes))}return t.prototype.validateBannedMembersBuilder=function(){if(void 0===this.limit)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.METHOD_COMPULSORY),"SET_LIMIT","SET_LIMIT","Set Limit")));if(isNaN(this.limit))return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(this.limit>a.DEFAULT_VALUES.USERS_MAX_LIMIT)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT",a.DEFAULT_VALUES.USERS_MAX_LIMIT)));if(this.limit<a.DEFAULT_VALUES.ZERO)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(void 0!==this.searchKeyword){if(typeof this.searchKeyword!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","setSearchKeyword()")));if(r.isFalsy(this.searchKeyword.trim()))return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword","search keyword")));this.searchKeyword=this.searchKeyword.trim()}if(void 0!==this.guid){if(typeof this.guid!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"GUID","GUID","GroupMembersRequestBuilder()")));if(r.isFalsy(this.guid))return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.INVALID),"GUID","GUID","GUID","GUID")))}return void 0===this.scopes||Array.isArray(this.scopes)?void 0:new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"SET_SCOPES","SET_SCOPES","setScopes()")))},t.prototype.fetchNext=function(){var r=this;return new Promise(function(n,e){try{var t=r.validateBannedMembersBuilder();if(t instanceof s.CometChatException)return void e(t);o.makeApiCall("getBannedGroupMembers",{guid:r.guid},r.getNextData()).then(function(t){if(t.meta&&(r.total_pages=t.meta.pagination.total_pages),0<t.data.length){r.pagination=t.meta.pagination;var e=[];t.data.map(function(t){t.guid=r.guid,e.push(i.GroupMembersController.trasformJSONGroupMember(t))}),n(e)}else n([])},function(t){e(new s.CometChatException(t.error))})}catch(t){e(new s.CometChatException(t))}})},t.prototype.getNextData=function(){var t={};if(t.per_page=this.limit,r.isFalsy(this.searchKeyword)||(t.searchKey=this.searchKeyword),r.isFalsy(this.scopes)||(t.scopes=this.scopes),1==this.current_page)t.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return t.page=this.next_page,t;t.page=this.next_page++}return t},t.MAX_LIMIT=2,t.DEFAULT_LIMIT=1,t}();e.BannedMembersRequest=c;var E=function(){function t(t){this.guid=t}return t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.setSearchKeyword=function(t){return this.searchKeyword=t,this},t.prototype.setScopes=function(t){return this.scopes=t,this},t.prototype.build=function(){return new c(this)},t}();e.BannedMembersRequestBuilder=E},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UsersRequestBuilder=e.UsersRequest=void 0;var o=n(6),r=n(0),s=n(12),i=n(2),a=n(51),c=n(1),E=function(){function e(t){this.next_page=1,this.current_page=1,this.total_pages=-1,this.hideBlockedUsers=!1,this.friendsOnly=!1,this.fetchingInProgress=!1,this.withTags=!1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},e.userStore=a.UserStore.getInstance(),r.isFalsy(t)||(this.limit=t.limit,r.isFalsy(t.searchKeyword)||(this.searchKeyword=t.searchKeyword),r.isFalsy(t.status)||(t.status==e.USER_STATUS.ONLINE?this.status=c.PresenceConstatnts.STATUS.AVAILABLE:this.status=t.status),r.isFalsy(t.shouldHideBlockedUsers)||(this.hideBlockedUsers=t.shouldHideBlockedUsers),r.isFalsy(t.showFriendsOnly)||(this.friendsOnly=t.showFriendsOnly),r.isFalsy(t.showTags)||(this.withTags=t.showTags),r.isFalsy(t.role)||(this.role=t.role),r.isFalsy(t.roles)||(this.roles=t.roles),r.isFalsy(t.tags)||(this.tags=t.tags),r.isFalsy(t.UIDs)||(this.UIDs=t.UIDs),r.isFalsy(t.SortBy)||(this.sortBy=t.SortBy),r.isFalsy(t.SearchIn)||(this.searchIn=t.SearchIn),r.isFalsy(t.SortOrder)||(this.sortOrder=t.SortOrder))}return e.prototype.validateUserBuilder=function(){if(void 0===this.limit)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.METHOD_COMPULSORY),"SET_LIMIT","SET_LIMIT","Set Limit")));if(isNaN(this.limit))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(this.limit>c.DEFAULT_VALUES.USERS_MAX_LIMIT)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT",c.DEFAULT_VALUES.USERS_MAX_LIMIT)));if(this.limit<c.DEFAULT_VALUES.ZERO)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(void 0!==this.searchKeyword){if(typeof this.searchKeyword!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","setSearchKeyword()")));if(r.isFalsy(this.searchKeyword.trim()))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword","search keyword")));this.searchKeyword=this.searchKeyword.trim()}if(this.status){if(typeof this.status!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_STATUS","SET_STATUS","setStatus()")));if("available"!=this.status.toLowerCase()&&"offline"!=this.status.toLowerCase())return new i.CometChatException(c.UserErrors.INVALID_STATUS)}if(void 0!==this.hideBlockedUsers){if(typeof this.hideBlockedUsers!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"HIDE_BLOCKED_USERS","HIDE_BLOCKED_USERS","hideBlockedUsers()")));1==this.hideBlockedUsers?this.hideBlockedUsers=!0:this.hideBlockedUsers=!1}if(void 0!==this.friendsOnly){if(typeof this.friendsOnly!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"FRIENDS_ONLY","FRIENDS_ONLY","friendsOnly()")));1==this.friendsOnly?this.friendsOnly=!0:this.friendsOnly=!1}if(void 0!==this.withTags){if(typeof this.withTags!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.MUST_BE_A_BOOLEAN),"WITH_TAGS","WITH_TAGS","withTags()")));1==this.withTags?this.withTags=!0:this.withTags=!1}if(void 0!==this.roles&&!Array.isArray(this.roles))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"ROLES","ROLES","setRoles()")));if(void 0!==this.tags&&!Array.isArray(this.tags))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"TAGS","TAGS","setTags()")));if(void 0!==this.UIDs&&!Array.isArray(this.UIDs))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"UIDs","UIDs","setUIDs()")));if(this.sortBy){if(typeof this.sortBy!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SORT_BY","SORT_BY","sortBy()")));if(r.isFalsy(this.sortBy.trim()))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.INVALID),"SORT_BY","SORT_BY","sort by","sort by")));this.sortBy=this.sortBy.trim().toLowerCase()}if(this.sortOrder){if(typeof this.sortOrder!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SORT_BY_ORDER","SORT_BY_ORDER","sortByOrder()")));if(r.isFalsy(this.sortOrder.trim()))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.INVALID),"SORT_BY_ORDER","SORT_BY_ORDER","sort order","sort order")));this.sortOrder=this.sortOrder.trim().toLowerCase()}return this.searchIn&&!Array.isArray(this.searchIn)?new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"SEARCH_IN","SEARCH_IN","searchIn()"))):void 0},e.prototype.fetchNext=function(){var r=this;return new Promise(function(n,e){try{if(r.fetchingInProgress)r.fetchingInProgress=!1,n([]);else{r.fetchingInProgress=!0;var t=r.validateUserBuilder();if(t instanceof i.CometChatException)return void e(t);o.makeApiCall("users",{},r.getNextData()).then(function(t){if(t.meta&&(r.total_pages=t.meta.pagination.total_pages),0<t.data.length){r.pagination=t.meta.pagination;var e=[];t.data.map(function(t){e.push(s.UsersController.trasformJSONUser(t))}),n(e)}else n([]);r.fetchingInProgress=!1},function(t){r.fetchingInProgress=!1,e(new i.CometChatException(t.error))})}}catch(t){r.fetchingInProgress=!1,e(new i.CometChatException(t))}})},e.prototype.getNextData=function(){var t={};if(t.per_page=this.limit,r.isFalsy(this.searchKeyword)||(t.searchKey=this.searchKeyword),r.isFalsy(this.status)||(t.status=this.status),r.isFalsy(this.hideBlockedUsers)||(t.hideBlockedUsers=1),r.isFalsy(this.role)||(t.roles=this.role),r.isFalsy(this.roles)||(t.roles=this.roles),r.isFalsy(this.tags)||(t.tags=this.tags),r.isFalsy(this.friendsOnly)||(t.friendsOnly=1),r.isFalsy(this.withTags)||(t.withTags=1),r.isFalsy(this.UIDs)||(t.uids=this.UIDs),r.isFalsy(this.sortBy)||(t.sortBy=this.sortBy),r.isFalsy(this.sortOrder)||(t.sortOrder=this.sortOrder),r.isFalsy(this.searchIn)||(t.searchIn=this.searchIn),1==this.current_page)t.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return t.page=this.next_page,t;t.page=this.next_page++}return t},e.USER_STATUS={ONLINE:c.PresenceConstatnts.STATUS.ONLINE,OFFLINE:c.PresenceConstatnts.STATUS.OFFLINE},e}();e.UsersRequest=E;var u=function(){function t(){this.shouldHideBlockedUsers=!1}return t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.setStatus=function(t){return this.status=t,this},t.prototype.setSearchKeyword=function(t){return this.searchKeyword=t,this},t.prototype.hideBlockedUsers=function(t){return this.shouldHideBlockedUsers=t,this},t.prototype.setRole=function(t){return this.role=t,this},t.prototype.setRoles=function(t){return this.roles=t,this},t.prototype.friendsOnly=function(t){return this.showFriendsOnly=t,this},t.prototype.setTags=function(t){return this.tags=t,this},t.prototype.withTags=function(t){return this.showTags=t,this},t.prototype.setUIDs=function(t){return this.UIDs=t,this},t.prototype.sortBy=function(t){return this.SortBy=t,this},t.prototype.sortByOrder=function(t){return this.SortOrder=t,this},t.prototype.searchIn=function(t){return this.SearchIn=t,this},t.prototype.build=function(){return this.role&&this.roles&&this.roles.push(this.role),new E(this)},t}();e.UsersRequestBuilder=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserStore=void 0;var r=n(4),o=n(0),s=n(1),i=n(13),a=function(){function t(t){this.store=s.constants.DEFAULT_STORE,o.isFalsy(t)||(this.store=t),this.userStore=i.createInstance({name:o.format(s.LOCAL_STORE.STORE_STRING,r.CometChat.getAppId(),s.LOCAL_STORE.USERS_STORE)}),this.userStore.setDriver([i.LOCALSTORAGE,i.INDEXEDDB,i.WEBSQL])}return t.getInstance=function(){return null==t.UserStore&&(t.UserStore=new t),t.UserStore},t.prototype.set=function(t,e){return this.userStore.setItem(t,e)},t.prototype.remove=function(t){this.userStore.removeItem(t)},t.prototype.get=function(t){return this.userStore.getItem(t)},t.prototype.clearStore=function(){var n=this;return new Promise(function(t,e){n.userStore.clear().then(function(){t(!0)}).catch(function(t){e(t)})})},t.prototype.clear=function(t){},t.prototype.selectStore=function(t){this.store=t},t.prototype.storeUsers=function(t){var e=this;return t.map(function(t){e.set(t.getUid(),t)}),!0},t.prototype.storeUser=function(t){return this.set(t.getUid(),t),!0},t}();e.UserStore=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationsRequestBuilder=e.ConversationsRequest=void 0;var o=n(6),r=n(0),s=n(2),i=n(29),a=n(1),c=function(){function t(t){this.limit=100,this.next_page=1,this.current_page=1,this.total_pages=-1,this.fetchingInProgress=!1,this.getUserAndGroupTags=!1,this.withTags=!1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},r.isFalsy(t)||(this.limit=t.limit,r.isFalsy(t.conversationType)||(this.conversationType=t.conversationType),r.isFalsy(t.getUserAndGroupTags)||(this.getUserAndGroupTags=t.getUserAndGroupTags),t.tags&&(this.tags=t.tags),r.isFalsy(t.WithTags)||(this.withTags=t.WithTags),t.groupTags&&(this.groupTags=t.groupTags),t.userTags&&(this.userTags=t.userTags))}return t.prototype.validateConversationBuilder=function(){return void 0===this.limit?new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.METHOD_COMPULSORY),"SET_LIMIT","SET_LIMIT","Set Limit"))):isNaN(this.limit)?new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()"))):this.limit>a.DEFAULT_VALUES.CONVERSATION_MAX_LIMIT?new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT",a.DEFAULT_VALUES.CONVERSATION_MAX_LIMIT))):this.limit<a.DEFAULT_VALUES.ZERO?new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()"))):void 0},t.prototype.fetchNext=function(){var r=this;return new Promise(function(n,e){try{if(r.fetchingInProgress)r.fetchingInProgress=!1,n([]);else{r.fetchingInProgress=!0;var t=r.validateConversationBuilder();if(t instanceof s.CometChatException)return void e(t);o.makeApiCall("getConversations",{},r.getNextData()).then(function(t){if(t.meta&&(r.total_pages=t.meta.pagination.total_pages),0<t.data.length){r.pagination=t.meta.pagination;var e=[];t.data.map(function(t){e.push(i.ConversationController.trasformJSONConversation(t.conversationId,t.conversationType,t.lastMessage,t.conversationWith,parseInt(t.unreadMessageCount),t.tags?t.tags:[]))}),n(e)}else n([]);r.fetchingInProgress=!1},function(t){r.fetchingInProgress=!1,e(new s.CometChatException(t.error))})}}catch(t){r.fetchingInProgress=!1,e(new s.CometChatException(t))}})},t.prototype.getNextData=function(){var t={};if(t.per_page=this.limit,r.isFalsy(this.conversationType)||(t.conversationType=this.conversationType),r.isFalsy(this.getUserAndGroupTags)||(t.withUserAndGroupTags=this.getUserAndGroupTags),r.isFalsy(this.tags)||(t.tags=this.tags),r.isFalsy(this.withTags)||(t.withTags=this.withTags),r.isFalsy(this.userTags)||(t.userTags=this.userTags),r.isFalsy(this.groupTags)||(t.groupTags=this.groupTags),1==this.current_page)t.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return t.page=this.next_page,t;t.page=this.next_page++}return t},t}();e.ConversationsRequest=c;var E=function(){function t(){this.WithTags=!1}return t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.setConversationType=function(t){return this.conversationType=t,this},t.prototype.withUserAndGroupTags=function(t){return"boolean"==typeof t&&(this.getUserAndGroupTags=t),this},t.prototype.setTags=function(t){return this.tags=t,this},t.prototype.withTags=function(t){return this.WithTags=t,this},t.prototype.setGroupTags=function(t){return this.groupTags=t,this},t.prototype.setUserTags=function(t){return this.userTags=t,this},t.prototype.build=function(){return new c(this)},t}();e.ConversationsRequestBuilder=E},function(t,e,n){"use strict";var I=this&&this.__awaiter||function(t,i,a,c){return new(a||(a=Promise))(function(n,e){function r(t){try{s(c.next(t))}catch(t){e(t)}}function o(t){try{s(c.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof a?e:new a(function(t){t(e)})).then(r,o)}s((c=c.apply(t,i||[])).next())})},O=this&&this.__generator||function(n,r){var o,s,i,t,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(i=2&e[0]?s.return:e[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,e[1])).done)return i;switch(s=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){a.label=e[1];break}if(6===e[0]&&a.label<i[1]){a.label=i[1],i=e;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(e);break}i[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],s=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var s=arguments[e],i=0,a=s.length;i<a;i++,o++)r[o]=s[i];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.MessagesRequestBuilder=e.MessagesRequest=void 0;var N=n(2),y=n(6),m=n(11),v=n(0),s=n(54),P=n(1),i=n(14),L=n(30),M=n(34),r=function(){function t(t){this.limit=P.DEFAULT_VALUES.MSGS_LIMIT,this.timestamp=0,this.id=P.DEFAULT_VALUES.DEFAULT_MSG_ID,this.messageStore=s.MessagesStore.getInstance(),this.endpointName="getUserMessages",this.listId="",this.totalPages=0,this.unread=!1,this.inProgress=!1,this.hideMessagesFromBlockedUsers=!1,this.updatedAt=0,this.onlyUpdates=0,this.paginationMeta={},this.WithTags=!1,this.hideDeletedMessages=!1,this.myMentionsOnlyFlag=!1,this.mentionsWithTagInfoFlag=!1,this.mentionsWithBlockedInfoFlag=!1,this.interactionGoalCompletedOnly=!1,this.limit=t.limit,this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.PER_PAGE]=this.limit,this.uid=t.uid,this.guid=t.guid,this.parentMessageId=t.parentMessageId,this.timestamp=t.timestamp,this.timestamp&&(this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.SENT_AT]=this.timestamp),this.id=t.id,this.id!=P.DEFAULT_VALUES.DEFAULT_MSG_ID&&(this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.ID]=this.id),this.hideMessagesFromBlockedUsers=t.HideMessagesFromBlockedUsers,this.hideMessagesFromBlockedUsers&&(this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.HIDE_MESSAGES_FROM_BLOCKED_USER]=this.hideMessagesFromBlockedUsers),this.unread=t.unread,this.unread&&(this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.UNREAD]=this.unread),t.searchKey&&(this.searchKey=t.searchKey,this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.SEARCH_KEY]=this.searchKey),t.onlyUpdate&&(this.onlyUpdates=t.onlyUpdate,this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.ONLY_UPDATES]=this.onlyUpdates),t.updatedAt&&(this.updatedAt=t.updatedAt,this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.UPDATED_AT]=this.updatedAt),t.category&&(this.category=t.category),t.categories&&(this.categories=t.categories),t.type&&(this.type=t.type),t.types&&(this.types=t.types),t.WithTags&&(this.WithTags=t.WithTags),t.tags&&(this.tags=t.tags),t.HideReplies&&(this.hideReplies=t.HideReplies,this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.HIDE_REPLIES]=this.hideReplies),this.hideDeletedMessages=t.HideDeletedMessages,this.hideDeletedMessages&&(this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.HIDE_DELETED_MESSAGES]=this.hideDeletedMessages),this.myMentionsOnlyFlag=t.myMentionsOnlyFlag,this.mentionsWithTagInfoFlag=t.mentionsWithTagInfoFlag,this.mentionsWithBlockedInfoFlag=t.mentionsWithBlockedInfoFlag,this.interactionGoalCompletedOnly=t.interactionGoalCompletedOnly,this.interactionGoalCompletedOnly&&(this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.ONLY_INTERACTION_GOAL_COMPLETED]=this.interactionGoalCompletedOnly)}return t.prototype.fetchNext=function(){var t=this;return new Promise(function(o,s){return I(t,void 0,void 0,function(){var e,n,r;return O(this,function(t){switch(t.label){case 0:if(t.trys.push([0,5,,6]),this.inProgress)return this.inProgress=!1,s(new N.CometChatException(i.MESSAGES_REQUEST_ERRORS.REQUEST_IN_PROGRESS_ERROR)),[2];if(this.inProgress=!0,this.onlyUpdates){if(0==this.updatedAt)return this.inProgress=!1,s(new N.CometChatException(i.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)),[2]}else if(0==this.timestamp&&0==this.id&&0==this.updatedAt)return this.inProgress=!1,s(new N.CometChatException(i.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)),[2];this.affix=P.MessageConstatnts.PAGINATION.AFFIX.APPEND,this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.AFFIX]=this.affix,this.currentMethod=P.MessageConstatnts.PAGINATION.AFFIX.APPEND,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.makeAPICall()];case 2:return e=t.sent(),o(e),this.inProgress=!1,[3,4];case 3:return n=t.sent(),this.inProgress=!1,s(new N.CometChatException(n)),[3,4];case 4:return[3,6];case 5:return r=t.sent(),this.inProgress=!1,s(new N.CometChatException(r)),[3,6];case 6:return[2]}})})})},t.prototype.fetchPrevious=function(){var t=this;return new Promise(function(o,s){return I(t,void 0,void 0,function(){var e,n,r;return O(this,function(t){switch(t.label){case 0:if(t.trys.push([0,5,,6]),this.inProgress)return s(new N.CometChatException(i.MESSAGES_REQUEST_ERRORS.REQUEST_IN_PROGRESS_ERROR)),this.inProgress=!1,[2];if(this.inProgress=!0,this.onlyUpdates&&0==this.updatedAt)return this.inProgress=!1,s(new N.CometChatException(i.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)),[2];this.affix=P.MessageConstatnts.PAGINATION.AFFIX.PREPEND,this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.AFFIX]=this.affix,this.currentMethod=P.MessageConstatnts.PAGINATION.AFFIX.PREPEND,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.makeAPICall()];case 2:return e=t.sent(),o(e),this.inProgress=!1,[3,4];case 3:return n=t.sent(),this.inProgress=!1,s(new N.CometChatException(n)),[3,4];case 4:return[3,6];case 5:return r=t.sent(),this.inProgress=!1,s(new N.CometChatException(r)),[3,6];case 6:return[2]}})})})},t.prototype.makeAPICall=function(){var R=this;return new Promise(function(r,e){try{var t=R.myMentionsOnlyFlag;if(void 0!==t&&!1!==t){if(typeof t!==P.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"MY_MENTIONS_ONLY","MY_MENTIONS_ONLY","myMentionsOnly()"))));R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.MY_MENTIONS_ONLY]=1==t?1:0}var n=R.mentionsWithTagInfoFlag;if(void 0!==n){if(typeof n!==P.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"MENTIONS_WITH_TAG_INFO","MENTIONS_WITH_TAG_INFO","mentionsWithTagInfo()"))));R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.MENTIONS_WITH_TAG_INFO]=1==n?1:0}var o=R.mentionsWithBlockedInfoFlag;if(void 0!==o){if(typeof o!==P.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"MENTIONS_WITH_BLOCKED_INFO","MENTIONS_WITH_BLOCKED_INFO","mentionsWithBlockedInfo()"))));R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.MENTIONS_WITH_BLOCKED_INFO]=1==o?1:0}var s=R.uid;if(void 0!==s){if(typeof s!==P.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"UID","UID","setUID()"))));if(v.isFalsy(s.trim()))return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.INVALID),"UID","UID","UID","UID"))));R.uid=s.trim()}var i=R.guid;if(void 0!==i){if(typeof i!==P.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"GUID","GUID","setGUID()"))));if(v.isFalsy(i.trim()))return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.INVALID),"GUID","GUID","GUID","GUID"))));R.guid=i.trim()}var a=R.parentMessageId;if(void 0!==a){if(isNaN(a))return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"PARENT_MESSAGE_ID","PARENT_MESSAGE_ID","setParentMessageId()"))));if(a<P.DEFAULT_VALUES.ZERO)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"PARENT_MESSAGE_ID","PARENT_MESSAGE_ID","setParentMessageId()"))))}var c=R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.PER_PAGE];if(void 0===c)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.METHOD_COMPULSORY),"SET_LIMIT","SET_LIMIT","Set Limit"))));if(isNaN(c))return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()"))));if(c>P.DEFAULT_VALUES.MSGS_MAX_LIMIT)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT",P.DEFAULT_VALUES.MSGS_MAX_LIMIT))));if(c<P.DEFAULT_VALUES.ZERO)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()"))));var E=R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.SEARCH_KEY];if(void 0!==E){if(typeof E!==P.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","setSearchKeyword()"))));if(v.isFalsy(E.trim()))return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword","search keyword"))));R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.SEARCH_KEY]=E.trim()}var u=R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.ID];if(void 0!==u){if(isNaN(u))return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"MESSAGE_ID","MESSAGE_ID","setMessageId()"))));if(u<P.DEFAULT_VALUES.ZERO)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"MESSAGE_ID","MESSAGE_ID","setMessageId()"))))}var p=R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.SENT_AT];if(void 0!==p){if(isNaN(p))return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"TIMESTAMP","TIMESTAMP","setTimestamp()"))));if(p<P.DEFAULT_VALUES.ZERO)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"TIMESTAMP","TIMESTAMP","setTimestamp()"))))}var l=R.hideMessagesFromBlockedUsers;if(void 0!==l){if(typeof l!==P.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"HIDE_MESSAGES_FROM_BLOCKED_USERS","HIDE_MESSAGES_FROM_BLOCKED_USERS","hideMessagesFromBlockedUsers()"))));R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.HIDE_MESSAGES_FROM_BLOCKED_USER]=1==l?1:0}var d=R.unread;if(void 0!==d){if(typeof d!==P.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"UNREAD","UNREAD","setUnread()"))));R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.UNREAD]=1==d?1:0}var S=R.category;if(void 0!==S){if(typeof S!==P.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_CATEGORY","SET_CATEGORY","setCategory()"))));if(v.isFalsy(S.trim()))return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.INVALID),"SET_CATEGORY","SET_CATEGORY","category","category"))));R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.CATEGORIES]=S.trim()}var h=R.categories;if(void 0!==h){if(!Array.isArray(h))return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"SET_CATEGORIES","SET_CATEGORIES","setCategories()"))));0<h.length&&(R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.CATEGORIES]=h)}var C=R.type;if(void 0!==C){if(typeof C!==P.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_TYPE","SET_TYPE","setType()"))));if(v.isFalsy(C.trim()))return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.INVALID),"SET_TYPE","SET_TYPE","type","type"))));R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.TYPES]=C.trim()}var f=R.types;if(void 0!==f){if(!Array.isArray(f))return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"SET_TYPES","SET_TYPES","setTypes()"))));0<f.length&&(R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.TYPES]=f)}var T=R.tags;if(void 0!==T){if(!Array.isArray(T))return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"SET_TAGS","SET_TAGS","setTags()"))));0<T.length&&(R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.TAGS]=T)}var g=R.WithTags;if(void 0!==g){if(typeof g!==P.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"WITH_TAGS","WITH_TAGS","withTags()"))));R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.WITH_TAGS]=1==g?1:0}var _=R.hideDeletedMessages;if(void 0!==_){if(typeof _!==P.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"HIDE_DELETED_MESSAGES","HIDE_DELETED_MESSAGES","hideDeletedMessages()"))));R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.HIDE_DELETED_MESSAGES]=1==_?1:0}var A=R.interactionGoalCompletedOnly;if(void 0!==A){if(typeof A!==P.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void e(new N.CometChatException(JSON.parse(v.format(JSON.stringify(P.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"ONLY_INTERACTION_GOAL_COMPLETED","ONLY_INTERACTION_GOAL_COMPLETED","interactionGoalCompletedOnly()"))));R.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.ONLY_INTERACTION_GOAL_COMPLETED]=1==A?1:0}if(R.createEndpoint(),R.totalPages)if(1!=R.totalPages);else if(R.lastAffix==R.affix)return void r([]);y.makeApiCall(R.endpointName,{listId:R.listId},R.paginationMeta).then(function(n){return I(R,void 0,void 0,function(){var c,e=this;return O(this,function(t){return c=[],n[P.ResponseConstants.RESPONSE_KEYS.KEY_META][P.ResponseConstants.RESPONSE_KEYS.KEY_CURSOR].hasOwnProperty(P.MessageConstatnts.PAGINATION.KEYS.ID)&&0==this.id&&(this.id=parseInt(n.meta.cursor[P.MessageConstatnts.PAGINATION.KEYS.ID])),n[P.ResponseConstants.RESPONSE_KEYS.KEY_META][P.ResponseConstants.RESPONSE_KEYS.KEY_CURSOR].hasOwnProperty(P.MessageConstatnts.PAGINATION.KEYS.SENT_AT)&&0==this.timestamp&&(this.timestamp=n.meta.cursor[P.MessageConstatnts.PAGINATION.KEYS.SENT_AT]),n.meta.pagination.hasOwnProperty("total_pages")&&(this.totalPages=n.meta.pagination.total_pages),n.meta.cursor.hasOwnProperty("affix")&&(this.lastAffix=n.meta.cursor.affix),n.data[0]?(0<this.id&&(this.id=parseInt(n.data[0].id)),0<this.timestamp&&(this.timestamp=n.data[0].sentAt),n.data.map(function(a){return I(e,void 0,void 0,function(){var e,n,r,o,s,i;return O(this,function(t){switch(t.label){case 0:return L.MessageListnerMaping.getInstance().get(P.LOCAL_STORE.KEY_MESSAGE_LISTENER_LIST).then(function(t){parseInt(a.id)>t&&L.MessageListnerMaping.getInstance().set(P.LOCAL_STORE.KEY_MESSAGE_LISTENER_LIST,parseInt(a.id))},function(t){L.MessageListnerMaping.getInstance().set(P.LOCAL_STORE.KEY_MESSAGE_LISTENER_LIST,parseInt(a.id))}),this.affix==P.MessageConstatnts.PAGINATION.AFFIX.APPEND?(this.id<parseInt(a.id)&&0<this.id&&(this.id=parseInt(a.id)),this.timestamp<a.sentAt&&0<this.timestamp&&(this.timestamp=a.sentAt),this.updatedAt<a.updatedAt&&0<this.updatedAt&&(this.updatedAt=a.updatedAt)):(this.id>parseInt(a.id)&&(this.id=parseInt(a.id)),this.timestamp>a.sentAt&&(this.timestamp=a.sentAt),this.updatedAt>a.updatedAt&&(this.updatedAt=a.updatedAt)),this.id&&(this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.ID]=this.id),this.timestamp&&(this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.SENT_AT]=this.timestamp),this.updatedAt&&(this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.UPDATED_AT]=this.updatedAt),a.category!==P.MessageConstatnts.CATEGORY.MESSAGE&&a.category!==P.MessageConstatnts.CATEGORY.CUSTOM||a.type===P.MessageConstatnts.TYPE.TEXT||!a.data.attachments||0===(null===(o=a.data.attachments)||void 0===o?void 0:o.length)?[3,2]:(null===(s=M.CometChat.user)||void 0===s?void 0:s.getFat())&&M.CometChat.SECURED_MEDIA_HOST?(e=M.CometChat.SECURED_MEDIA_HOST,n=null===(i=M.CometChat.user)||void 0===i?void 0:i.getFat(),[4,v.updatePropertiesWithDynamicValue(a,e,"?"+P.ADDITIONAL_CONSTANTS.SECURE_URL_PROPERTY+"="+n)]):[3,2];case 1:(r=t.sent())&&(a=r),t.label=2;case 2:return c.push(m.MessageController.trasformJSONMessge(a)),[2]}})})})):c=[],r(c),[2]})})},function(t){e(new N.CometChatException(t.error))})}catch(t){e(new N.CometChatException(t))}})},t.prototype.createEndpoint=function(){this.parentMessageId?(this.endpointName="getThreadMessages",this.listId=this.parentMessageId.toString(),this.hideReplies&&(this.hideReplies=!1,delete this.paginationMeta[P.MessageConstatnts.PAGINATION.KEYS.HIDE_REPLIES])):(v.isFalsy(this.guid)||v.isFalsy(this.uid))&&v.isFalsy(this.guid)?(v.isFalsy(this.uid)?this.endpointName="getMessages":this.endpointName="getUserMessages",this.listId=this.uid):(this.endpointName="getGroupMessages",this.listId=this.guid)},t.prototype.makeData=function(){var t={};t[P.MessageConstatnts.PAGINATION.KEYS.PER_PAGE]=this.limit,t[P.MessageConstatnts.PAGINATION.KEYS.AFFIX]=this.affix,(v.isFalsy(this.guid)||v.isFalsy(this.uid))&&v.isFalsy(this.guid)&&v.isFalsy(this.uid)},t.prototype.getFilteredPreviousDataByReceiverId=function(e){return I(this,void 0,void 0,function(){var n,r=this;return O(this,function(t){switch(t.label){case 0:switch(n=[],e){case"user":return[3,1];case"group":return[3,3];case"both":return[3,5]}return[3,7];case 1:return[4,s.MessagesStore.getInstance().get(this.uid).then(function(e){Object.keys(e).filter(function(t){return parseInt(t)>r.id}).map(function(t){n=o(n,[e[t]])})})];case 2:return t.sent(),[3,9];case 3:return[4,s.MessagesStore.getInstance().get(this.guid).then(function(e){Object.keys(e).filter(function(t){return parseInt(t)>r.id}).map(function(t){n=o(n,[e[t]])})})];case 4:t.sent(),t.label=5;case 5:return[4,s.MessagesStore.getInstance().get(this.guid).then(function(e){Object.keys(e).filter(function(t){return parseInt(t)>r.id}).filter(function(t){return e[t].sender.uid==r.uid}).map(function(t){n=o(n,[e[t]])})})];case 6:return t.sent(),[3,9];case 7:return[4,s.MessagesStore.getInstance().getAllMessages().then(function(e){Object.keys(e).filter(function(t){return parseInt(t)>r.id}).map(function(t){n=o(n,[e[t]])})})];case 8:return t.sent(),[3,9];case 9:return[2,n]}})})},t.prototype.getFilteredNextDataByReceiverId=function(e){return I(this,void 0,void 0,function(){var n,r=this;return O(this,function(t){switch(t.label){case 0:switch(n=[],e){case"user":return[3,1];case"group":return[3,3];case"both":return[3,5]}return[3,7];case 1:return[4,s.MessagesStore.getInstance().get(this.uid).then(function(e){Object.keys(e).filter(function(t){return parseInt(t)>r.id}).map(function(t){n=o(n,[e[t]])})})];case 2:return t.sent(),[3,9];case 3:return[4,s.MessagesStore.getInstance().get(this.guid).then(function(e){Object.keys(e).filter(function(t){return parseInt(t)>r.id}).map(function(t){n=o(n,[e[t]])})})];case 4:t.sent(),t.label=5;case 5:return[4,s.MessagesStore.getInstance().get(this.guid).then(function(e){Object.keys(e).filter(function(t){return parseInt(t)>r.id}).filter(function(t){return e[t].sender.uid==r.uid}).map(function(t){n=o(n,[e[t]])})})];case 6:return t.sent(),[3,9];case 7:return[4,s.MessagesStore.getInstance().getAllMessages().then(function(e){Object.keys(e).filter(function(t){return parseInt(t)>r.id}).map(function(t){n=o(n,[e[t]])})})];case 8:return t.sent(),[3,9];case 9:return[2,n]}})})},t}();e.MessagesRequest=r;var a=function(){function t(){this.maxLimit=P.DEFAULT_VALUES.MSGS_MAX_LIMIT,this.timestamp=0,this.id=P.DEFAULT_VALUES.DEFAULT_MSG_ID,this.unread=!1,this.HideMessagesFromBlockedUsers=!1,this.onlyUpdate=0,this.HideDeletedMessages=!1,this.WithTags=!1,this.myMentionsOnlyFlag=!1,this.mentionsWithTagInfoFlag=!1,this.mentionsWithBlockedInfoFlag=!1,this.interactionGoalCompletedOnly=!1}return t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.setGUID=function(t){return this.guid=t,this},t.prototype.setUID=function(t){return this.uid=t,this},t.prototype.setParentMessageId=function(t){return this.parentMessageId=t,this},t.prototype.setTimestamp=function(t){return void 0===t&&(t=v.getCurrentTime()),this.timestamp=t,this},t.prototype.setMessageId=function(t){return void 0===t&&(t=P.DEFAULT_VALUES.DEFAULT_MSG_ID),this.id=t,this},t.prototype.setUnread=function(t){return void 0===t&&(t=!1),this.unread=t,this},t.prototype.hideMessagesFromBlockedUsers=function(t){return void 0===t&&(t=!1),this.HideMessagesFromBlockedUsers=t,this},t.prototype.setSearchKeyword=function(t){return this.searchKey=t,this},t.prototype.setUpdatedAfter=function(t){return this.updatedAt=t,this},t.prototype.updatesOnly=function(t){return t&&(this.onlyUpdate=1),this},t.prototype.setCategory=function(t){return this.category=t,this},t.prototype.setCategories=function(t){return this.categories=t,this},t.prototype.setType=function(t){return this.type=t,this},t.prototype.setTypes=function(t){return this.types=t,this},t.prototype.hideReplies=function(t){return this.HideReplies=t,this},t.prototype.hideDeletedMessages=function(t){return this.HideDeletedMessages=t,this},t.prototype.setTags=function(t){return this.tags=t,this},t.prototype.withTags=function(t){return this.WithTags=t,this},t.prototype.myMentionsOnly=function(t){return void 0===t&&(t=!1),this.myMentionsOnlyFlag=t,this},t.prototype.mentionsWithTagInfo=function(t){return void 0===t&&(t=!1),this.mentionsWithTagInfoFlag=t,this},t.prototype.mentionsWithBlockedInfo=function(t){return void 0===t&&(t=!1),this.mentionsWithBlockedInfoFlag=t,this},t.prototype.setInteractionGoalCompletedOnly=function(t){return void 0===t&&(t=!1),this.interactionGoalCompletedOnly=t,this},t.prototype.build=function(){return this.category&&this.categories&&this.categories.push(this.category),this.type&&this.types&&this.types.push(this.type),new r(this)},t}();e.MessagesRequestBuilder=a},function(t,e,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.MessagesStore=void 0;var r=n(4),c=n(0),E=n(1),o=n(13),s=function(){function t(t){this.store=E.constants.DEFAULT_STORE,c.isFalsy(t)||(this.store=t),this.messagesStore=o.createInstance({name:c.format(E.LOCAL_STORE.STORE_STRING,r.CometChat.getAppId(),E.LOCAL_STORE.MESSAGES_STORE)}),this.messagesStore.setDriver([o.LOCALSTORAGE,o.INDEXEDDB,o.WEBSQL])}return t.getInstance=function(){return null==t.MessagesStore&&(t.MessagesStore=new t),t.MessagesStore},t.prototype.set=function(t,e){return this.messagesStore.setItem(t,e)},t.prototype.remove=function(t){this.messagesStore.removeItem(t)},t.prototype.get=function(t){return this.messagesStore.getItem(t)},t.prototype.clearStore=function(){var n=this;return new Promise(function(t,e){n.messagesStore.clear().then(function(){t(!0)}).catch(function(t){e(t)})})},t.prototype.getAllMessages=function(){var n=this,r={};return new Promise(function(t,e){n.messagesStore.iterate(function(t,e,n){e!=E.constants.MSG_VER_POST&&e!=E.constants.MSG_VER_POST&&(r=a(a({},r),t))}).then(function(){t(r)})})},t.prototype.clear=function(t){},t.prototype.selectStore=function(t){this.store=t},t.prototype.storeMessages=function(t){var n=this;if(r.CometChat.user.getUid()){var o=r.CometChat.user.getUid(),s={},i=0;return this.get(E.constants.MSG_VER_POST).then(function(r){t.map(function(t){var e;if(!c.isFalsy(t)){0==i&&(i=parseInt(t.getId().toString())),i>t.getId()&&(i=parseInt(t.getId().toString())),r<t.getId()&&(r=parseInt(t.getId().toString()));var n=void 0;n=t.getSender()instanceof Object?t.getSender().getUid():t.getSender(),t.getReceiverType()==E.MessageConstatnts.RECEIVER_TYPE.GROUP&&(n=t.getReceiver()),t.getSender()instanceof Object?t.getSender().getUid()==o&&(n=t.getReceiver()):t.getSender()==o&&(n=t.getReceiver()),s[n]||(s[n]={}),s[n]=a(a({},s[n]),((e={})[t.getId()]=t,e))}}),n.get(E.constants.MSG_VER_PRE).then(function(t){(0<i&&i<t||null==t)&&n.set(E.constants.MSG_VER_PRE,i)})&&0<r&&n.set(E.constants.MSG_VER_POST,r),Object.keys(s).map(function(e){n.get(e).then(function(t){null==t&&(t={}),n.set(e,a(a({},s[e]),t))})})}),!0}},t}();e.MessagesStore=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BlockedUsersRequestBuilder=e.BlockedUsersRequest=void 0;var o=n(6),r=n(0),s=n(12),i=n(2),a=n(1),c=function(){function t(t){this.next_page=1,this.current_page=1,this.total_pages=-1,this.fetchingInProgress=!1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},r.isFalsy(t)||(this.limit=t.limit,r.isFalsy(t.searchKeyword)||(this.searchKeyword=t.searchKeyword),r.isFalsy(t.direction)||(this.direction=t.direction))}return t.prototype.validateBlockedUsersBuilder=function(){if(void 0===this.limit)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.METHOD_COMPULSORY),"SET_LIMIT","SET_LIMIT","Set Limit")));if(isNaN(this.limit))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(this.limit>a.DEFAULT_VALUES.USERS_MAX_LIMIT)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT",a.DEFAULT_VALUES.USERS_MAX_LIMIT)));if(this.limit<a.DEFAULT_VALUES.ZERO)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(void 0!==this.searchKeyword){if(typeof this.searchKeyword!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","setSearchKeyword()")));if(r.isFalsy(this.searchKeyword.trim()))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword","search keyword")));this.searchKeyword=this.searchKeyword.trim()}if(void 0!==this.direction){if(typeof this.direction!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_DIRECTION","SET_DIRECTION","setDirection()")));if(this.direction!=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BOTH&&this.direction!=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BLOCKED_BY_ME&&this.direction!=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.HAS_BLOCKED_ME)return new i.CometChatException(a.UserErrors.INVALID_DIRECTION)}},t.prototype.fetchNext=function(){var r=this;return new Promise(function(n,e){try{if(r.fetchingInProgress)r.fetchingInProgress=!1,n([]);else{r.fetchingInProgress=!0;var t=r.validateBlockedUsersBuilder();if(t instanceof i.CometChatException)return void e(t);o.makeApiCall("blockedUsersList",{},r.getNextData()).then(function(t){if(t.meta&&(r.total_pages=t.meta.pagination.total_pages),0<t.data.length){r.pagination=t.meta.pagination;var e=[];t.data.map(function(t){e.push(s.UsersController.trasformJSONUser(t))}),n(e)}else n([]);r.fetchingInProgress=!1},function(t){r.fetchingInProgress=!1,e(new i.CometChatException(t.error))})}}catch(t){r.fetchingInProgress=!1,e(new i.CometChatException(t))}})},t.prototype.getNextData=function(){var t={};if(t.per_page=this.limit,r.isFalsy(this.direction)||(t.direction=this.direction),r.isFalsy(this.searchKeyword)||(t.searchKey=this.searchKeyword),1==this.current_page)t.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return t.page=this.next_page,t;t.page=this.next_page++}return t},t.MAX_LIMIT=2,t.DEFAULT_LIMIT=1,t.directions=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS,t}();e.BlockedUsersRequest=c;var E=function(){function t(){}return t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.setSearchKeyword=function(t){return this.searchKeyword=t,this},t.prototype.setDirection=function(t){return this.direction=t,this},t.prototype.blockedByMe=function(){return this.direction=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BLOCKED_BY_ME,this},t.prototype.hasBlockedMe=function(){return this.direction=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.HAS_BLOCKED_ME,this},t.prototype.build=function(){return new c(this)},t}();e.BlockedUsersRequestBuilder=E},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AppSettingsBuilder=e.AppSettings=void 0;var r=n(1),o=function(){function e(t){this.subscriptionType=e.SUBSCRIPTION_TYPE_NONE,this.roles=null,this.region=r.DEFAULT_VALUES.REGION_DEFAULT,this.autoJoinGroup=!0,this.establishSocketConnection=!0,this.adminHost=null,this.clientHost=null,this.subscriptionType=t.subscriptionType,this.roles=t.roles,this.region=t.region,this.autoJoinGroup=t.autoJoinGroup,this.establishSocketConnection=t.establishSocketConnection,this.adminHost=t.adminHost,this.clientHost=t.clientHost}return e.prototype.getSubscriptionType=function(){return this.subscriptionType},e.prototype.getRoles=function(){return this.roles},e.prototype.getRegion=function(){return this.region},e.prototype.getIsAutoJoinEnabled=function(){return this.autoJoinGroup},e.prototype.shouldAutoEstablishSocketConnection=function(){return this.establishSocketConnection},e.prototype.getAdminHost=function(){return this.adminHost},e.prototype.getClientHost=function(){return this.clientHost},e.SUBSCRIPTION_TYPE_NONE="NONE",e.SUBSCRIPTION_TYPE_ALL_USERS="ALL_USERS",e.SUBSCRIPTION_TYPE_ROLES="ROLES",e.SUBSCRIPTION_TYPE_FRIENDS="FRIENDS",e.REGION_EU=r.DEFAULT_VALUES.REGION_DEFAULT_EU,e.REGION_US=r.DEFAULT_VALUES.REGION_DEFAULT_US,e.REGION_IN=r.DEFAULT_VALUES.REGION_DEFAULT_IN,e.REGION_PRIVATE=r.DEFAULT_VALUES.REGION_DEFAULT_PRIVATE,e}();e.AppSettings=o;var s=function(){function t(){this.subscriptionType=o.SUBSCRIPTION_TYPE_NONE,this.roles=null,this.region=r.DEFAULT_VALUES.REGION_DEFAULT,this.autoJoinGroup=!0,this.establishSocketConnection=!0,this.adminHost=null,this.clientHost=null}return t.prototype.subscribePresenceForAllUsers=function(){return this.subscriptionType=o.SUBSCRIPTION_TYPE_ALL_USERS,this},t.prototype.subscribePresenceForRoles=function(t){return this.subscriptionType=o.SUBSCRIPTION_TYPE_ROLES,this.roles=t,this},t.prototype.subscribePresenceForFriends=function(){return this.subscriptionType=o.SUBSCRIPTION_TYPE_FRIENDS,this},t.prototype.setRegion=function(t){return void 0===t&&(t=r.DEFAULT_VALUES.REGION_DEFAULT),this.region=t.toLowerCase(),this},t.prototype.enableAutoJoinForGroups=function(t){return void 0===t&&(t=!0),this.autoJoinGroup=t,this},t.prototype.autoEstablishSocketConnection=function(t){return void 0===t&&(t=!0),this.establishSocketConnection=t,this},t.prototype.overrideAdminHost=function(t){return this.adminHost=t,this},t.prototype.overrideClientHost=function(t){return this.clientHost=t,this},t.prototype.build=function(){return new o(this)},t}();e.AppSettingsBuilder=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CometChatHelper=void 0;var p=n(11),l=n(1),d=n(12),S=n(17),h=n(29),r=n(4),o=n(2),s=n(0),i=function(){function t(){}return t.processMessage=function(t){try{return p.MessageController.trasformJSONMessge(t)}catch(t){s.Logger.error("CometChatHelper: processMessage",t)}},t.getConversationFromMessage=function(u){return new Promise(function(c,E){try{r.CometChat.getLoggedinUser().then(function(t){if(null!==t){var e=p.MessageController.trasformJSONMessge(u),n=e.receiverType,r=e.conversationId,o=void 0,s=p.MessageController.trasformJSONMessge(u);if(n==l.MessageConstatnts.RECEIVER_TYPE.USER){var i=d.UsersController.trasformJSONUser(e[l.MessageConstatnts.KEYS.SENDER]);o=i.getUid()==t.getUid()?d.UsersController.trasformJSONUser(e[l.MessageConstatnts.KEYS.RECEIVER]):i}else o=S.GroupsController.trasformJSONGroup(e[l.MessageConstatnts.KEYS.RECEIVER]);var a=h.ConversationController.trasformJSONConversation(r,n,s,o,0,[]);c(a)}else E(l.UserErrors.USER_NOT_LOGGED_IN)},function(t){E(new o.CometChatException(t.error))})}catch(t){E(new o.CometChatException(t))}})},t}();e.CometChatHelper=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainVideoContainerSetting=e.CallSettingsBuilder=e.CallSettings=void 0;var r=n(1),o=n(0),s=function(){function t(t){this.sessionID=t.sessionID,this.defaultLayout=t.defaultLayout,this.isAudioOnly=t.isAudioOnly,this.region=t.region,this.domain=t.domain,this.user=t.user,this.listener=t.listener,this.mode=t.mode,this.ShowEndCallButton=t.ShowEndCallButton,this.ShowSwitchCameraButton=t.ShowSwitchCameraButton,this.ShowMuteAudioButton=t.ShowMuteAudioButton,this.ShowPauseVideoButton=t.ShowPauseVideoButton,this.ShowAudioModeButton=t.ShowAudioModeButton,this.StartAudioMuted=t.StartAudioMuted,this.StartVideoMuted=t.StartVideoMuted,this.analyticsSettings=t.analyticsSettings,this.appId=t.appId,this.defaultAudioMode=t.defaultAudioMode,this.ShowSwitchToVideoCallButton=t.ShowSwitchToVideoCallButton,this.AvatarMode=t.AvatarMode,this.ShowRecordingButton=t.ShowRecordingButton,this.StartRecordingOnCallStart=t.StartRecordingOnCallStart,this.MainVideoContainerSetting=t.MainVideoContainerSetting,this.EnableVideoTileClick=t.EnableVideoTileClick,this.EnableDraggableVideoTile=t.EnableDraggableVideoTile}return t.prototype.getSessionId=function(){return this.sessionID},t.prototype.isAudioOnlyCall=function(){return this.isAudioOnly},t.prototype.getUser=function(){return this.user},t.prototype.getRegion=function(){return this.region},t.prototype.getAppId=function(){return this.appId},t.prototype.getDomain=function(){return this.domain},t.prototype.isDefaultLayoutEnabled=function(){return this.defaultLayout},t.prototype.getCallEventListener=function(){return this.listener},t.prototype.getMode=function(){return this.mode},t.prototype.getStartWithAudioMuted=function(){return this.StartAudioMuted},t.prototype.getStartWithVideoMuted=function(){return this.StartVideoMuted},t.prototype.isEndCallButtonEnabled=function(){return this.ShowEndCallButton},t.prototype.isSwitchCameraButtonEnabled=function(){return this.ShowSwitchCameraButton},t.prototype.isMuteAudioButtonEnabled=function(){return this.ShowMuteAudioButton},t.prototype.isPauseVideoButtonEnabled=function(){return this.ShowPauseVideoButton},t.prototype.isAudioModeButtonEnabled=function(){return this.ShowAudioModeButton},t.prototype.getAnalyticsSettings=function(){return this.analyticsSettings},t.prototype.getDefaultAudioMode=function(){return this.defaultAudioMode},t.prototype.isAudioToVideoButtonEnabled=function(){return this.ShowSwitchToVideoCallButton},t.prototype.getAvatarMode=function(){return this.AvatarMode},t.prototype.isRecordingButtonEnabled=function(){return this.ShowRecordingButton},t.prototype.shouldStartRecordingOnCallStart=function(){return this.StartRecordingOnCallStart},t.prototype.getMainVideoContainerSetting=function(){return this.MainVideoContainerSetting},t.prototype.isVideoTileClickEnabled=function(){return this.EnableVideoTileClick},t.prototype.isVideoTileDragEnabled=function(){return this.EnableDraggableVideoTile},t.POSITION_TOP_LEFT="top-left",t.POSITION_TOP_RIGHT="top-right",t.POSITION_BOTTOM_LEFT="bottom-left",t.POSITION_BOTTOM_RIGHT="bottom-right",t.ASPECT_RATIO_DEFAULT="default",t.ASPECT_RATIO_CONTAIN="contain",t.ASPECT_RATIO_COVER="cover",t}();e.CallSettings=s;var i=function(){function t(){this.defaultLayout=!0,this.isAudioOnly=!1,this.mode=r.CallConstants.CALL_MODE.DEFAULT,this.ShowEndCallButton=!0,this.ShowSwitchCameraButton=!0,this.ShowMuteAudioButton=!0,this.ShowPauseVideoButton=!0,this.ShowAudioModeButton=!0,this.StartAudioMuted=!1,this.StartVideoMuted=!1,this.analyticsSettings={},this.ShowSwitchToVideoCallButton=!0,this.AvatarMode="circle",this.ShowRecordingButton=!1,this.StartRecordingOnCallStart=!1,this.MainVideoContainerSetting=new a,this.EnableVideoTileClick=!0,this.EnableDraggableVideoTile=!0}return t.prototype.setSessionID=function(t){return this.sessionID=t,this},t.prototype.enableDefaultLayout=function(t){return this.defaultLayout=t,this},t.prototype.setIsAudioOnlyCall=function(t){return this.isAudioOnly=t,this},t.prototype.setRegion=function(t){return this.region=t,this},t.prototype.setDomain=function(t){return this.domain=t,this},t.prototype.setUser=function(t){return this.user=t,this},t.prototype.setCallEventListener=function(t){return this.listener=t,this},t.prototype.setMode=function(t){return this.mode=t,this},t.prototype.showEndCallButton=function(t){return this.ShowEndCallButton=t,this},t.prototype.showSwitchCameraButton=function(t){return this.ShowSwitchCameraButton=t,this},t.prototype.showMuteAudioButton=function(t){return this.ShowMuteAudioButton=t,this},t.prototype.showPauseVideoButton=function(t){return this.ShowPauseVideoButton=t,this},t.prototype.showAudioModeButton=function(t){return this.ShowAudioModeButton=t,this},t.prototype.startWithAudioMuted=function(t){return this.StartAudioMuted=t,this},t.prototype.startWithVideoMuted=function(t){return this.StartVideoMuted=t,this},t.prototype.setAnalyticsSettings=function(t){return this.analyticsSettings=t,this},t.prototype.setAppId=function(t){return this.appId=t,this},t.prototype.setDefaultAudioMode=function(t){return this.defaultAudioMode=t,this},t.prototype.showSwitchToVideoCallButton=function(t){return this.ShowSwitchToVideoCallButton=t,this},t.prototype.setAvatarMode=function(t){return this.AvatarMode=t,this},t.prototype.showRecordingButton=function(t){return this.ShowRecordingButton=t,this},t.prototype.startRecordingOnCallStart=function(t){return this.StartRecordingOnCallStart=t,this},t.prototype.setMainVideoContainerSetting=function(t){return this.MainVideoContainerSetting=t,this},t.prototype.enableVideoTileClick=function(t){return this.EnableVideoTileClick=t,this},t.prototype.enableVideoTileDrag=function(t){return this.EnableDraggableVideoTile=t,this},t.prototype.build=function(){return new s(this)},t}();e.CallSettingsBuilder=i;var a=function(){function t(){this.videoFit=s.ASPECT_RATIO_CONTAIN,this.zoomButton=r.CallConstants.ZOOM_BUTTON_DEFAULT_PARAMS,this.fullScreenButton=r.CallConstants.FULL_SCREEN_BUTTON_DEFAULT_PARAMS,this.userListButton=r.CallConstants.USER_LIST_BUTTON_DEFAULT_PARAMS,this.nameLabel=r.CallConstants.NAME_LABEL_DEFAULT_PARAMS}return t.prototype.setMainVideoAspectRatio=function(t){this.videoFit=t},t.prototype.setFullScreenButtonParams=function(t,e){o.isFalsy(t)||(this.fullScreenButton[r.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.POSITION]=t),null!=e&&null!=e&&(this.fullScreenButton[r.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.VISIBILITY]=e)},t.prototype.setNameLabelParams=function(t,e,n){o.isFalsy(t)||(this.nameLabel[r.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.POSITION]=t),null!=e&&null!=e&&(this.nameLabel[r.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.VISIBILITY]=e),o.isFalsy(n)||(this.nameLabel[r.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.COLOR]=n)},t.prototype.setZoomButtonParams=function(t,e){o.isFalsy(t)||(this.zoomButton[r.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.POSITION]=t),null!=e&&null!=e&&(this.zoomButton[r.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.VISIBILITY]=e)},t.prototype.setUserListButtonParams=function(t,e){o.isFalsy(t)||(this.userListButton[r.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.POSITION]=t),null!=e&&null!=e&&(this.userListButton[r.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.VISIBILITY]=e)},t}();e.MainVideoContainerSetting=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RTCUser=void 0;var r=n(0),o=function(){function t(t){this.avatar="",r.isFalsy(t)||(this.uid=t.toString())}return t.prototype.setUID=function(t){this.uid=t?t.toString():""},t.prototype.getUID=function(){return this.uid.toString()},t.prototype.setName=function(t){this.name=t?t.toString():""},t.prototype.getName=function(){return this.name.toString()},t.prototype.setAvatar=function(t){this.avatar=t?t.toString():""},t.prototype.getAvatar=function(){return this.avatar.toString()},t.prototype.setJWT=function(t){this.jwt=t?t.toString():""},t.prototype.getJWT=function(){return this.jwt.toString()},t.prototype.setResource=function(t){this.resource=t?t.toString():""},t.prototype.getResource=function(){return this.resource.toString()},t}();e.RTCUser=o},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,i,a,c){return new(a||(a=Promise))(function(n,e){function r(t){try{s(c.next(t))}catch(t){e(t)}}function o(t){try{s(c.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof a?e:new a(function(t){t(e)})).then(r,o)}s((c=c.apply(t,i||[])).next())})},a=this&&this.__generator||function(n,r){var o,s,i,t,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(i=2&e[0]?s.return:e[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,e[1])).done)return i;switch(s=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){a.label=e[1];break}if(6===e[0]&&a.label<i[1]){a.label=i[1],i=e;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(e);break}i[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],s=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.WSConnectionHelper=void 0;var l=n(4),o=n(61),d=n(1),s=n(38),c=n(42),S=n(0),i=n(44),h=n(27),E=n(30),u=n(24),p=n(25),C=n(62),f=n(63),T=n(64),g=n(65),_=n(66),A=n(67),R=n(68),I=n(26),O=n(32),N=n(31),y=n(5),m=n(45),v=i.ListenerHandlers.getInstance(),P=function(){function i(){var t=this;this.startWSResponseTimer=function(){i.wsResponseTimer=setInterval(function(){try{1<i.wsResponseTime?i.wsResponseTime=i.wsResponseTime-1:1===i.wsResponseTime&&(l.CometChat.disconnectInternally(),t.clearPingTimer(),t.clearWSResponseTimer(),i.appInactiveTimer&&i.clearAppInactiveTimer())}catch(t){S.Logger.error("CometChat: startWSResponseTimer",t)}},1e3)},this.clearWSResponseTimer=function(){try{i.wsResponseTime=30,clearInterval(i.wsResponseTimer)}catch(t){S.Logger.error("WSConnectionHelper: clearWSResponseTimer",t)}}}return i.prototype.onAppActive=function(){l.CometChat.appSettings.shouldAutoEstablishSocketConnection()||(i.isAppInactive=!1,i.pingTimer&&i.clearAppInactiveTimer(),!i.pingTimer&&m.checkConnection(this.connection)&&(this.pingWS(),this.startPingingWS()))},i.prototype.onAppInactive=function(){l.CometChat.appSettings.shouldAutoEstablishSocketConnection()||(i.isAppInactive=!0)},i.getInstance=function(){try{return null!=this.wsConnectionHelper&&null!=this.wsConnectionHelper||(this.wsConnectionHelper=new i),this.wsConnectionHelper}catch(t){S.Logger.error("WSConnectionHelper: getInstance",t)}},i.prototype.WSLogin=function(e,n){var r=this;try{m.getWSURL().then(function(t){r.connection=new WebSocket(t),n&&r.connection&&r.connection.readyState==y.READY_STATE.CONNECTING&&n(r.connection.readyState),r.connection.onopen=function(t){r.onOpen(t,n),r.authenticateUser(e)},r.connection.onclose=function(t){r.onClose(t,n)},r.connection.onmessage=function(t){r.onMessage(t)}},function(t){S.Logger.error("WSConnectionHelper :: WSLogin",t)})}catch(t){S.Logger.error("WSConnectionHelper: WSLogin",t)}},i.prototype.onOpen=function(t,e){try{e&&this.connection&&e(this.connection.readyState)}catch(t){S.Logger.error("WSConnectionHelper: onOpen",t)}},i.prototype.onClose=function(t,e){try{e&&this.connection&&e(this.connection.readyState,t)}catch(t){S.Logger.error("WSConnectionHelper: onClose",t)}},i.prototype.onMessage=function(t){if(t.data&&"string"==typeof t.data)try{var e=JSON.parse(t.data);if(e&&e.action&&e.action===y.KEYS.PONG)return;var n=this.getCometChatEventFromMessage(JSON.parse(t.data));if(n.getDeviceId()===l.CometChat.getSessionId()&&n.getType()!==y.AUTH.TYPE)return;switch(n.getType()){case y.TYPING_INDICATOR.TYPE:this.publishTypingIndicator(n);break;case y.RECEIPTS.TYPE:this.publishReceipts(n);break;case y.PRESENCE.TYPE:this.publishPresence(n);break;case y.AUTH.TYPE:this.authResponseReceived(n);break;case y.MESSAGE.TYPE:this.publishMessages(n);break;case y.TRANSIENT_MESSAGE.TYPE:this.publishTransientMessage(n);break;case y.INTERACTION_RECEIPT.TYPE:this.publishInteractionReceipt(n);break;default:S.Logger.log("WSHelper: onMessage :: unknown type",t.data)}}catch(t){S.Logger.error("WSHelper: onMessage",t)}else S.Logger.log("WSHelper: onMessage :: object data",t.data)},i.prototype.authenticateUser=function(u){var p=this;try{l.CometChat.getLoggedinUser().then(function(E){E?h.KeyStore.getInstance().get("deviceId").then(function(c){S.getAppSettings().then(function(t){var e=null;window&&window.location&&window.location.origin&&(e=window.location.origin);var n="",r=c,o={version:d.SDKHeader.sdkVersion,apiVersion:t[d.APP_SETTINGS.KEYS.CHAT_API_VERSION],origin:e,uts:(new Date).getTime()};S.isFalsy(l.CometChat.resource)||(o.resource=l.CometChat.resource),S.isFalsy(l.CometChat.platform)||(o.platform=l.CometChat.platform),S.isFalsy(l.CometChat.language)||(o.language=l.CometChat.language),navigator&&(n=navigator.userAgent);var s={appInfo:o,userAgent:n,deviceId:r,platform:d.SDKHeader.platform},i=new C.CometChatAuthEvent(l.CometChat.getAppId(),"","",E.getUid(),l.CometChat.getSessionId());if(i.setAuth(u),i.setPresenceSubscription(l.CometChat.appSettings.getSubscriptionType()),i.setDeviceId(l.CometChat.getSessionId()),i.setExtraParmaeters(s),m.checkConnection(p.connection)){var a=i.getAsString();p.connection.send(a)}})}):S.Logger.log("no logged-in user","null")},function(t){S.Logger.log("error in fetching logged-in user",t)})}catch(t){S.Logger.error("WSConnectionHelper: startTypingIndicator",t)}},i.prototype.authResponseReceived=function(t){try{"200"===t.getCode()&&"OK"===t.getStatus()&&this.startPingingWS()}catch(t){S.Logger.error("WSConnectionHelper: authResponseReceived",t)}},i.prototype.WSLogout=function(){try{this.clearPingTimer(),m.checkConnection(this.connection)&&this.connection.close(y.LOGOUT_CODE,y.LOGOUT_REASON)}catch(t){S.Logger.error("WSConnectionHelper: WSLogout",t)}},i.prototype.pingWS=function(s){return r(this,void 0,void 0,function(){var e,n,r,o;return a(this,function(t){switch(t.label){case 0:return(e=s||{}).onError,n=e.onSuccess,m.checkConnection(this.connection)?(r=new T.CometChatPingEvent("","","","",""),o=r.getAsString(),this.connection.send(o),i.isAppInactive&&this.startWSResponseTimer(),[4,this.listenForPong()]):[3,2];case 1:t.sent()?(S.Logger.log("WSConnectionHelper :: startPingingWS","pong success"),i.isAppInactive?(this.clearWSResponseTimer(),i.pingTimer&&this.clearPingTimer(),i.appInactiveTimer&&i.clearAppInactiveTimer(),i.startAppInactiveTimer()):i.appInactiveTimer&&i.clearAppInactiveTimer(),l.CometChat.getConnectionStatus()!=d.CONNECTION_STATUS.CONNECTED&&(this.WSLogout(),this.connection=null,l.CometChat.getInstance().makeWSConnection()),n&&n({status:l.CometChat.getConnectionStatus()})):(i.isAppInactive?(i.appInactiveTimer&&i.clearAppInactiveTimer(),i.startAppInactiveTimer()):i.appInactiveTimer&&i.clearAppInactiveTimer(),S.Logger.log("WSConnectionHelper :: startPingingWS","pong failure"),this.WSLogout(),this.connection=null,l.CometChat.getInstance().setConnectionStatus(d.CONNECTION_STATUS.DISCONNECTED),v.connectionHandlers.map(function(t){try{t._eventListener&&(S.isFalsy(t._eventListener.onDisconnected)||t._eventListener.onDisconnected())}catch(t){S.Logger.error("WSConnectionHandlers: Disconnected Status",t)}}),l.CometChat.getInstance().accidentallyDisconnected()),t.label=2;case 2:return[2]}})})},i.prototype.startPingingWS=function(){var t=this;try{i.pingTimer||(i.pingTimer=setInterval(function(){return r(t,void 0,void 0,function(){return a(this,function(t){return this.pingWS(),[2]})})},15e3))}catch(t){S.Logger.error("WSConnectionHelper: startPingingWS",t)}},i.startAppInactiveTimer=function(){i.appInactiveTimer=setInterval(function(){try{1<i.appInactiveTime?i.appInactiveTime=i.appInactiveTime-1:1===i.appInactiveTime&&(l.CometChat.disconnectInternally(),clearInterval(i.appInactiveTimer),i.appInactiveTime=30)}catch(t){S.Logger.error("CometChat: startAppInactiveTimer",t)}},1e3)},i.clearAppInactiveTimer=function(){try{i.appInactiveTime=30,clearInterval(i.appInactiveTimer)}catch(t){S.Logger.error("WSConnectionHelper: clearAppInactiveTime",t)}},i.prototype.listenForPong=function(){var r=this;return new Promise(function(e,t){var n=setTimeout(function(){e(!1)},3e3);r.connection.addEventListener("message",function(t){t&&t.data&&"string"==typeof t.data&&(JSON.parse(t.data).action===y.KEYS.PONG&&(clearTimeout(n),e(!0)))})})},i.prototype.clearPingTimer=function(){i.pingTimer&&(clearInterval(i.pingTimer),i.pingTimer=void 0)},i.prototype.sendOnlineEvent=function(){var r=this;try{m.checkConnection(this.connection)&&l.CometChat.getLoggedinUser().then(function(t){if(t){t.authToken&&delete t.authToken;var e={appId:l.CometChat.getAppId(),deviceId:l.CometChat.getSessionId(),type:y.PRESENCE.TYPE,body:{action:y.PRESENCE.ACTION.ONLINE,timestamp:Math.floor((new Date).getTime()/1e3),user:t}};if(m.checkConnection(r.connection)){var n=m.stringifyMessage(e);r.connection.send(n)}}else S.Logger.log("no logged-in user","null")},function(t){S.Logger.log("error in fetching logged-in user",t)})}catch(t){S.Logger.error("WSConnectionHelper: sendOnlineEvent",t)}},i.prototype.sendOfflineEvent=function(){var r=this;try{m.checkConnection(this.connection)&&l.CometChat.getLoggedinUser().then(function(t){if(t){t.authToken&&delete t.authToken;var e={appId:l.CometChat.getAppId(),deviceId:l.CometChat.getSessionId(),type:y.PRESENCE.TYPE,body:{action:y.PRESENCE.ACTION.OFFLINE,timestamp:Math.floor((new Date).getTime()/1e3),user:t}};if(m.checkConnection(r.connection)){var n=m.stringifyMessage(e);r.connection.send(n)}}else S.Logger.log("no logged-in user","null")},function(t){S.Logger.log("error in fetching logged-in user",t)})}catch(t){S.Logger.error("WSConnectionHelper: sendOfflineEvent",t)}},i.prototype.startTypingIndicator=function(o,s,i){var a=this;try{l.CometChat.getLoggedinUser().then(function(t){if(t){var e=new N.TypingIndicator(o,s);t.authToken&&delete t.authToken,e.setSender(t),i&&e.setMetadata(i);var n=new R.CometChatTypingEvent(l.CometChat.getAppId(),o,s,t.getUid(),l.CometChat.getSessionId());if(n.setAction(y.TYPING_INDICATOR.ACTION.STARTED),n.setTypingIndicator(e),m.checkConnection(a.connection)){var r=n.getAsString();a.connection.send(r)}}else S.Logger.log("no logged-in user","null")},function(t){S.Logger.log("error in fetching logged-in user",t)})}catch(t){S.Logger.error("WSConnectionHelper: startTypingIndicator",t)}},i.prototype.pauseTypingIndicator=function(o,s,i){var a=this;try{l.CometChat.getLoggedinUser().then(function(t){if(t){var e=new N.TypingIndicator(o,s);t.authToken&&delete t.authToken,e.setSender(t),i&&e.setMetadata(i);var n=new R.CometChatTypingEvent(l.CometChat.getAppId(),o,s,t.getUid(),l.CometChat.getSessionId());if(n.setAction(y.TYPING_INDICATOR.ACTION.ENDED),n.setTypingIndicator(e),m.checkConnection(a.connection)){var r=n.getAsString();a.connection.send(r)}}else S.Logger.log("no logged-in user","null")},function(t){S.Logger.log("error in fetching logged-in user",t)})}catch(t){S.Logger.error("WSConnectionHelper: pauseTypingIndicator",t)}},i.prototype.markAsRead=function(o,s,i,a){var c=this;try{l.CometChat.getLoggedinUser().then(function(t){if(t){var e=new _.CometChatReceiptEvent(l.CometChat.getAppId(),o,s,t.getUid(),l.CometChat.getSessionId(),a);e.setAction(y.RECEIPTS.ACTION.READ);var n=new I.MessageReceipt;if(t.authToken&&delete t.authToken,n.setSender(t),n.setReceiverType(s),n.setReceiver(o),n.setReceiptType(y.RECEIPTS.RECEIPT_TYPE.READ_RECEIPT),n.setMessageId(i),n.setTimestamp(Math.floor((new Date).getTime()/1e3).toString()),e.setMessageReceipt(n),m.checkConnection(c.connection)){var r=e.getAsString();c.connection.send(r)}}else S.Logger.log("no logged-in user","null")},function(t){S.Logger.log("error in fetching logged-in user",t)})}catch(t){S.Logger.error("WSConnectionHelper: markAsRead",t)}},i.prototype.markAsDelivered=function(o,s,i,a){var c=this;try{l.CometChat.getLoggedinUser().then(function(t){if(t){var e=new _.CometChatReceiptEvent(l.CometChat.getAppId(),o,s,t.getUid(),l.CometChat.getSessionId(),a);e.setAction(y.RECEIPTS.ACTION.DELIVERED);var n=new I.MessageReceipt;if(t.authToken&&delete t.authToken,n.setSender(t),n.setReceiverType(s),n.setReceiver(o),n.setReceiptType(y.RECEIPTS.RECEIPT_TYPE.DELIVERY_RECEIPT),n.setMessageId(i),n.setTimestamp(Math.floor((new Date).getTime()/1e3).toString()),e.setMessageReceipt(n),m.checkConnection(c.connection)){var r=e.getAsString();c.connection.send(r)}}else S.Logger.log("no logged-in user","null")},function(t){S.Logger.log("error in fetching logged-in user",t)})}catch(t){S.Logger.error("WSConnectionHelper: markAsDelivered",t)}},i.prototype.sendTransientMessage=function(o,s,i){var a=this;try{l.CometChat.getLoggedinUser().then(function(t){if(t){var e=new O.TransientMessage(o,s,i);t.authToken&&delete t.authToken,e.setSender(t);var n=new A.CometChatTransientEvent(l.CometChat.getAppId(),o,s,t.getUid(),l.CometChat.getSessionId());if(n.setTransientMessage(e),m.checkConnection(a.connection)){var r=n.getAsString();a.connection.send(r)}}else S.Logger.log("no logged-in user","null")},function(t){S.Logger.log("error in fetching logged-in user",t)})}catch(t){S.Logger.error("WSConnectionHelper: sendTransientMessage",t)}},i.prototype.publishTypingIndicator=function(t){try{var e=t.getTypingIndicator();switch(t.getAction()){case y.TYPING_INDICATOR.ACTION.STARTED:v.messageHandlers.map(function(t){t._eventListener.onTypingStarted&&t._eventListener.onTypingStarted(e)}),c.TypingNotificationController.addIncomingTypingStarted(e);break;case y.TYPING_INDICATOR.ACTION.ENDED:v.messageHandlers.map(function(t){t._eventListener.onTypingEnded&&t._eventListener.onTypingEnded(e)}),c.TypingNotificationController.removeIncomingTypingStarted(e)}}catch(t){S.Logger.error("WSHelper: publishTypingIndicator",t)}},i.prototype.publishReceipts=function(t){try{var e=t.getMessageReceipt();switch(t.getAction()){case y.RECEIPTS.ACTION.DELIVERED:v.messageHandlers.map(function(t){t._eventListener.onMessagesDelivered&&t._eventListener.onMessagesDelivered(e)});break;case y.RECEIPTS.ACTION.READ:v.messageHandlers.map(function(t){t._eventListener.onMessagesRead&&t._eventListener.onMessagesRead(e)})}}catch(t){S.Logger.error("WSHelper: publishReceipts",t)}},i.prototype.publishPresence=function(t){try{var e=t.getUser();switch(e.setLastActiveAt(t.getTimestamp()),t.getAction()){case y.PRESENCE.ACTION.ONLINE:case y.PRESENCE.ACTION.AVAILABLE:e.setStatus(d.PresenceConstatnts.STATUS.ONLINE),v.userHandlers.map(function(t){S.isFalsy(t._eventListener.onUserOnline)||t._eventListener.onUserOnline(e)});break;case y.PRESENCE.ACTION.OFFLINE:e.setStatus(d.PresenceConstatnts.STATUS.OFFLINE),v.userHandlers.map(function(t){S.isFalsy(t._eventListener.onUserOffline)||t._eventListener.onUserOffline(e)})}}catch(t){S.Logger.error("WSHelper: publishPresence",t)}},i.prototype.publishMessages=function(t){try{var e=t.getMessage();e&&e.getId()&&E.MessageListnerMaping.getInstance().set("all",e.getId()),e instanceof p.Call?this.publishCallMessage(e):e instanceof u.Action?this.publishActionMessage(e):this.publishMessage(e)}catch(t){S.Logger.error("WSHelper: publishMessages",t)}},i.prototype.publishMessage=function(n){try{v.messageHandlers.map(function(t){if(t._eventListener){var e=n;switch(e.getType()){case d.MessageConstatnts.TYPE.TEXT:S.isFalsy(t._eventListener.onTextMessageReceived)||t._eventListener.onTextMessageReceived(n);break;case d.MessageConstatnts.TYPE.CUSTOM:S.isFalsy(t._eventListener.onCustomMessageReceived)||t._eventListener.onCustomMessageReceived(n);break;default:e.getCategory()==d.MessageCategory.CUSTOM?S.isFalsy(t._eventListener.onCustomMessageReceived)||t._eventListener.onCustomMessageReceived(n):e.getCategory()==d.MessageCategory.INTERACTIVE?S.isFalsy(t._eventListener.onInteractiveMessageReceived)||t._eventListener.onInteractiveMessageReceived(n):S.isFalsy(t._eventListener.onMediaMessageReceived)||t._eventListener.onMediaMessageReceived(n)}}})}catch(t){S.Logger.error("WSHelper: publishMessage",t)}},i.prototype.publishCallMessage=function(e){try{var n=s.CallController.getInstance().getActiveCall();switch(e.getStatus()){case d.CallConstants.CALL_STATUS.INITIATED:e.getReceiverType()==d.CallConstants.RECEIVER_TYPE_GROUP?v.callHandlers.map(function(t){e.getCallInitiator().getUid().toLocaleLowerCase()!=l.CometChat.user.getUid().toLocaleLowerCase()&&(S.isFalsy(t._eventListener.onIncomingCallReceived)||t._eventListener.onIncomingCallReceived(e))}):v.callHandlers.map(function(t){S.isFalsy(t._eventListener.onIncomingCallReceived)||t._eventListener.onIncomingCallReceived(e)});break;case d.CallConstants.CALL_STATUS.ONGOING:e.getReceiverType()==d.CallConstants.RECEIVER_TYPE_GROUP?e.getCallInitiator().getUid().toLocaleLowerCase()==l.CometChat.user.getUid().toLocaleLowerCase()&&v.callHandlers.map(function(t){S.isFalsy(t._eventListener.onOutgoingCallAccepted)||t._eventListener.onOutgoingCallAccepted(e)}):v.callHandlers.map(function(t){S.isFalsy(t._eventListener.onOutgoingCallAccepted)||t._eventListener.onOutgoingCallAccepted(e)});break;case d.CallConstants.CALL_STATUS.UNANSWERED:if(e.getCallInitiator().getUid().toLocaleLowerCase()==l.CometChat.user.getUid().toLocaleLowerCase())v.callHandlers.map(function(t){S.isFalsy(t._eventListener.onOutgoingCallRejected)||t._eventListener.onOutgoingCallRejected(e)});else{if(null!==n&&n.getSessionId()===e.getSessionId())try{s.CallController.getInstance().endCall()}catch(t){S.Logger.error("CallError",t)}v.callHandlers.map(function(t){S.isFalsy(t._eventListener.onIncomingCallCancelled)||t._eventListener.onIncomingCallCancelled(e)})}break;case d.CallConstants.CALL_STATUS.REJECTED:if(e.getReceiverType()==d.CallConstants.RECEIVER_TYPE_GROUP)e.getCallInitiator().getUid().toLocaleLowerCase()==l.CometChat.user.getUid().toLocaleLowerCase()&&v.callHandlers.map(function(t){S.isFalsy(t._eventListener.onOutgoingCallRejected)||t._eventListener.onOutgoingCallRejected(e)});else{if(null!==n&&n.getSessionId()===e.getSessionId())try{s.CallController.getInstance().endCall()}catch(t){S.Logger.error("CallError",t)}v.callHandlers.map(function(t){S.isFalsy(t._eventListener.onOutgoingCallRejected)||t._eventListener.onOutgoingCallRejected(e)})}break;case d.CallConstants.CALL_STATUS.BUSY:e.getReceiverType()==d.CallConstants.RECEIVER_TYPE_GROUP?e.getCallInitiator().getUid().toLocaleLowerCase()==l.CometChat.user.getUid().toLocaleLowerCase()&&v.callHandlers.map(function(t){S.isFalsy(t._eventListener.onOutgoingCallRejected)||t._eventListener.onOutgoingCallRejected(e)}):v.callHandlers.map(function(t){if(null!==n&&n.getSessionId()===e.getSessionId())try{s.CallController.getInstance().endCall()}catch(t){S.Logger.error("CallError",t)}S.isFalsy(t._eventListener.onOutgoingCallRejected)||t._eventListener.onOutgoingCallRejected(e)});break;case d.CallConstants.CALL_STATUS.CANCELLED:if(v.callHandlers.map(function(t){S.isFalsy(t._eventListener.onIncomingCallCancelled)||t._eventListener.onIncomingCallCancelled(e)}),null!==n&&n.getSessionId()===e.getSessionId())try{s.CallController.getInstance().endCall()}catch(t){S.Logger.error("CallError",t)}break;case d.CallConstants.CALL_STATUS.ENDED:if(v.callHandlers.map(function(t){S.isFalsy(t._eventListener.onCallEndedMessageReceived)||t._eventListener.onCallEndedMessageReceived(e)}),s.CallController.getInstance().getCallListner()&&s.CallController.getInstance().getCallListner()._eventListener.onCallEnded(e),null!==n&&n.getSessionId()===e.getSessionId())try{s.CallController.getInstance().endCall()}catch(t){S.Logger.error("CallError",t)}break;default:S.Logger.log("WSHelper: publishCallMessage :: unknown status",e)}}catch(t){S.Logger.error("WSHelper: publishCallMessage",t)}},i.prototype.publishActionMessage=function(e){try{switch(e.getAction()){case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_JOINED:v.groupHandlers.map(function(t){S.isFalsy(t._eventListener.onGroupMemberJoined)||t._eventListener.onGroupMemberJoined(e,e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_INVITED:v.groupHandlers.map(function(t){S.isFalsy(t._eventListener.onGroupMemberJoined)||t._eventListener.onGroupMemberJoined(e,e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_LEFT:v.groupHandlers.map(function(t){S.isFalsy(t._eventListener.onGroupMemberLeft)||t._eventListener.onGroupMemberLeft(e,e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_BANNED:v.groupHandlers.map(function(t){S.isFalsy(t._eventListener.onGroupMemberBanned)||t._eventListener.onGroupMemberBanned(e,e.getActionOn(),e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_KICKED:v.groupHandlers.map(function(t){S.isFalsy(t._eventListener.onGroupMemberKicked)||t._eventListener.onGroupMemberKicked(e,e.getActionOn(),e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_UNBANNED:v.groupHandlers.map(function(t){S.isFalsy(t._eventListener.onGroupMemberUnbanned)||t._eventListener.onGroupMemberUnbanned(e,e.getActionOn(),e.getActionBy(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_SCOPE_CHANGED:v.groupHandlers.map(function(t){S.isFalsy(t._eventListener.onGroupMemberScopeChanged)||t._eventListener.onGroupMemberScopeChanged(e,e.getActionOn(),e.getNewScope(),e.getOldScope(),e.getActionFor())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MESSAGE_EDITED:v.messageHandlers.map(function(t){S.isFalsy(t._eventListener.onMessageEdited)||t._eventListener.onMessageEdited(e.getActionOn())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MESSAGE_DELETED:v.messageHandlers.map(function(t){S.isFalsy(t._eventListener.onMessageDeleted)||t._eventListener.onMessageDeleted(e.getActionOn())});break;case d.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_ADDED:v.groupHandlers.map(function(t){S.isFalsy(t._eventListener.onGroupMemberAddedToGroup)||t._eventListener.onGroupMemberAddedToGroup(e,e.getActionOn(),e.getActionBy(),e.getActionFor())});break;default:S.Logger.log("WSHelper: publishActionMessage :: unknown action",e)}}catch(t){S.Logger.error("WSHelper: publishActionMessage",t)}},i.prototype.publishTransientMessage=function(t){try{var e=t.getTransientMessage();v.messageHandlers.map(function(t){t._eventListener.onTransientMessageReceived&&t._eventListener.onTransientMessageReceived(e)})}catch(t){S.Logger.error("WSHelper: publishTransientMessage",t)}},i.prototype.publishInteractionReceipt=function(t){try{var e=t.getInteractionReceipt();v.messageHandlers.map(function(t){t._eventListener.onInteractionGoalCompleted&&t._eventListener.onInteractionGoalCompleted(e)})}catch(t){S.Logger.error("WSHelper: publishInteractionReceipt",t)}},i.prototype.getCometChatEventFromMessage=function(t){try{if(t.hasOwnProperty(y.KEYS.TYPE))switch(t.type){case y.TYPING_INDICATOR.TYPE:return R.CometChatTypingEvent.getTypingEventFromJSON(t);case y.RECEIPTS.TYPE:return _.CometChatReceiptEvent.getReceiptEventFromJSON(t);case y.PRESENCE.TYPE:return g.CometChatPresenceEvent.getPresenceEventFromJSON(t);case y.MESSAGE.TYPE:return f.CometChatMessageEvent.getMessageEventFromJSON(t);case y.AUTH.TYPE:return C.CometChatAuthEvent.getAuthEventFromJSON(t);case y.TRANSIENT_MESSAGE.TYPE:return A.CometChatTransientEvent.getTransientEventFromJSON(t);case y.INTERACTION_RECEIPT.TYPE:return o.CometChatInteractionReceiptEvent.getReceiptEventFromJSON(t)}}catch(t){S.Logger.error("WSConnectionHelper: getCometChatEventFromMessage",t)}},i.wsConnectionHelper=new i,i.appInactiveTime=30,i.isAppInactive=!1,i.wsResponseTime=30,i}();e.WSConnectionHelper=P},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CometChatInteractionReceiptEvent=void 0;var S=n(5),s=n(9),h=n(23),C=n(43),f=n(3),i=function(a){function d(t,e,n,r,o,s){var i=a.call(this,t,e,n,r,o,s)||this;return i.setType(S.INTERACTION_RECEIPT.TYPE),i}return o(d,a),d.prototype.getInteractionReceipt=function(){return this.interactionReceipt},d.prototype.setInteractionReceipt=function(t){this.interactionReceipt=t},d.prototype.getAsString=function(){return JSON.stringify(this.getAsJSONObject())},d.prototype.getAsJSONObject=function(){var t=this.getCometChatEventJSON(),e={};return e[S.KEYS.MESSAGE_ID]=this.interactionReceipt.getMessageId(),e[S.KEYS.USER]=this.interactionReceipt.getSender(),e[S.KEYS.INTERACTIONS]=this.interactionReceipt.getInteractions(),t[S.KEYS.BODY]=e,t},d.getReceiptEventFromJSON=function(t){var e=t[S.KEYS.APP_ID],n=t[S.KEYS.RECEIVER],r=t[S.KEYS.RECEIVER_TYPE],o=t[S.KEYS.DEVICE_ID],s=t[S.KEYS.SENDER],i=t[S.KEYS.MESSAGE_SENDER],a=t[S.KEYS.BODY],c=a[S.KEYS.USER],E=a[S.KEYS.MESSAGE_ID],u=a[S.KEYS.INTERACTIONS],p=new d(e,n,r,s,o,i),l=new C.InteractionReceipt;return l.setSender(new f.User(c)),l.setReceiverType(r),l.setMessageId(E),l.setReceiverId(n),l.setInteractions(u.map(function(t){return h.Interaction.getInteractionFromJSON(t)})),p.setInteractionReceipt(l),p},d}(s.CometChatEvent);e.CometChatInteractionReceiptEvent=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CometChatAuthEvent=void 0;var p=n(5),s=function(i){function u(t,e,n,r,o){var s=i.call(this,t,e,n,r,o)||this;return s.setType(p.AUTH.TYPE),s}return o(u,i),u.prototype.getStatus=function(){return this.status},u.prototype.setStatus=function(t){this.status=t},u.prototype.getCode=function(){return this.code},u.prototype.setCode=function(t){this.code=t},u.prototype.setAuth=function(t){this.auth=t},u.prototype.getAuth=function(){return this.auth},u.prototype.setPresenceSubscription=function(t){this.presenceSubscription=t},u.prototype.getPresenceSubscription=function(){return this.presenceSubscription},u.prototype.setDeviceId=function(t){this.deviceId=t},u.prototype.getdeviceId=function(){return this.deviceId},u.prototype.setExtraParmaeters=function(t){this.params=t},u.prototype.getExtraParameters=function(){return this.params},u.prototype.getAsString=function(){return JSON.stringify(this.getAsJSONObject())},u.prototype.getAsJSONObject=function(){var t=this.getCometChatEventJSON(),e={};return e[p.KEYS.AUTH]=this.auth,e[p.KEYS.DEVICE_ID]=this.deviceId,e[p.KEYS.PRESENCE_SUBSCRIPTION]=this.presenceSubscription,e[p.KEYS.PARAMS]=this.params,t[p.KEYS.BODY]=e,t},u.getAuthEventFromJSON=function(t){var e=t[p.KEYS.APP_ID],n=t[p.KEYS.RECEIVER],r=t[p.KEYS.RECEIVER_TYPE],o=t[p.KEYS.DEVICE_ID],s=t[p.KEYS.SENDER],i=t[p.KEYS.BODY],a=i[p.KEYS.STATUS],c=i[p.KEYS.CODE],E=new u(e,n,r,s,o);return E.setStatus(a),E.setCode(c),E},u}(n(9).CometChatEvent);e.CometChatAuthEvent=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CometChatMessageEvent=void 0;var u=n(11),p=n(5),s=function(i){function E(t,e,n,r,o){var s=i.call(this,t,e,n,r,o)||this;return s.setType(p.MESSAGE.TYPE),s}return o(E,i),E.prototype.getMessage=function(){return this.message},E.prototype.setMessage=function(t){this.message=t},E.getMessageEventFromJSON=function(t){var e=t[p.KEYS.APP_ID],n=t[p.KEYS.RECEIVER],r=t[p.KEYS.RECEIVER_TYPE],o=t[p.KEYS.DEVICE_ID],s=t[p.KEYS.SENDER],i=t[p.KEYS.BODY],a=new E(e,n,r,s,o),c=u.MessageController.trasformJSONMessge(i);return a.setMessage(c),a},E}(n(9).CometChatEvent);e.CometChatMessageEvent=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CometChatPingEvent=void 0;var i=n(5),s=function(s){function t(t,e,n,r,o){return s.call(this,t,e,n,r,o)||this}return o(t,s),t.prototype.getAsString=function(){return JSON.stringify(this.getAsJSONObject())},t.prototype.getAsJSONObject=function(){var t={};return t[i.KEYS.ACTION]=i.KEYS.PING,t[i.KEYS.ACK]="true",t},t}(n(9).CometChatEvent);e.CometChatPingEvent=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CometChatPresenceEvent=void 0;var u=n(5),s=n(9),p=n(3),i=function(i){function E(t,e,n,r,o){var s=i.call(this,t,e,n,r,o)||this;return s.setType(u.PRESENCE.TYPE),s}return o(E,i),E.prototype.getAction=function(){return this.action},E.prototype.setAction=function(t){this.action=t},E.prototype.getUser=function(){return this.user},E.prototype.setUser=function(t){this.user=t},E.prototype.getTimestamp=function(){return this.timestamp},E.prototype.setTimestamp=function(t){this.timestamp=t},E.getPresenceEventFromJSON=function(t){var e=t[u.KEYS.APP_ID],n=t[u.KEYS.DEVICE_ID],r=t[u.KEYS.SENDER],o=t[u.KEYS.BODY],s=o[u.KEYS.ACTION],i=o[u.KEYS.USER],a=o[u.KEYS.TIMESTAMP],c=new E(e,"","",r,n);return c.setAction(s),c.setUser(new p.User(i)),c.setTimestamp(a),c},E}(s.CometChatEvent);e.CometChatPresenceEvent=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CometChatReceiptEvent=void 0;var S=n(5),s=n(9),h=n(26),C=n(3),i=function(a){function d(t,e,n,r,o,s){var i=a.call(this,t,e,n,r,o,s)||this;return i.setType(S.RECEIPTS.TYPE),i}return o(d,a),d.prototype.getAction=function(){return this.action},d.prototype.setAction=function(t){this.action=t},d.prototype.getMessageReceipt=function(){return this.receipt},d.prototype.setMessageReceipt=function(t){this.receipt=t},d.prototype.getAsString=function(){return JSON.stringify(this.getAsJSONObject())},d.prototype.getAsJSONObject=function(){var t=this.getCometChatEventJSON(),e={};return e[S.KEYS.ACTION]=this.action,e[S.KEYS.MESSAGE_ID]=this.receipt.getMessageId(),e[S.KEYS.USER]=this.receipt.getSender(),t[S.KEYS.BODY]=e,t},d.getReceiptEventFromJSON=function(t){var e=t[S.KEYS.APP_ID],n=t[S.KEYS.RECEIVER],r=t[S.KEYS.RECEIVER_TYPE],o=t[S.KEYS.DEVICE_ID],s=t[S.KEYS.SENDER],i=t[S.KEYS.BODY],a=i[S.KEYS.ACTION],c=i[S.KEYS.USER],E=i[S.KEYS.MESSAGE_ID],u=i[S.KEYS.TIMESTAMP],p=new d(e,n,r,s,o);p.setAction(a);var l=new h.MessageReceipt;return l.setSender(new C.User(c)),l.setReceiverType(r),l.setReceiver(n),a===S.RECEIPTS.ACTION.DELIVERED&&(l.setReceiptType(S.RECEIPTS.RECEIPT_TYPE.DELIVERY_RECEIPT),l.setDeliveredAt(u)),a===S.RECEIPTS.ACTION.READ&&(l.setReceiptType(S.RECEIPTS.RECEIPT_TYPE.READ_RECEIPT),l.setReadAt(u)),l.setMessageId(E.toString()),l.setTimestamp(u),p.setMessageReceipt(l),p},d}(s.CometChatEvent);e.CometChatReceiptEvent=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CometChatTransientEvent=void 0;var l=n(5),s=n(9),d=n(32),S=n(3),i=function(i){function p(t,e,n,r,o){var s=i.call(this,t,e,n,r,o)||this;return s.setType(l.TRANSIENT_MESSAGE.TYPE),s}return o(p,i),p.prototype.getTransientMessage=function(){return this.transientMessage},p.prototype.setTransientMessage=function(t){this.transientMessage=t},p.prototype.getAsString=function(){return JSON.stringify(this.getAsJSONObject())},p.prototype.getAsJSONObject=function(){var t=this.getCometChatEventJSON(),e={};return e[l.KEYS.USER]=this.transientMessage.getSender(),this.transientMessage.getData()&&(e[l.KEYS.DATA]=this.transientMessage.getData()),t[l.KEYS.BODY]=e,t},p.getTransientEventFromJSON=function(t){var e=t[l.KEYS.APP_ID],n=t[l.KEYS.RECEIVER],r=t[l.KEYS.RECEIVER_TYPE],o=t[l.KEYS.DEVICE_ID],s=t[l.KEYS.SENDER],i=t[l.KEYS.BODY],a=i[l.KEYS.USER],c=i[l.KEYS.DATA],E=new p(e,n,r,s,o),u=new d.TransientMessage(n,r,c);return u.setSender(new S.User(a)),i.hasOwnProperty(l.KEYS.DATA)&&i[l.KEYS.DATA]&&u.setData(c),E.setTransientMessage(u),E},p}(s.CometChatEvent);e.CometChatTransientEvent=i},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.CometChatTypingEvent=void 0;var d=n(5),s=n(9),S=n(31),h=n(3),i=function(i){function l(t,e,n,r,o){var s=i.call(this,t,e,n,r,o)||this;return s.setType(d.TYPING_INDICATOR.TYPE),s}return o(l,i),l.prototype.getAction=function(){return this.action},l.prototype.setAction=function(t){this.action=t},l.prototype.getTypingIndicator=function(){return this.typingIndicator},l.prototype.setTypingIndicator=function(t){this.typingIndicator=t},l.prototype.getAsString=function(){return JSON.stringify(this.getAsJSONObject())},l.prototype.getAsJSONObject=function(){var t=this.getCometChatEventJSON(),e={};return e[d.KEYS.ACTION]=this.action,e[d.KEYS.USER]=this.typingIndicator.getSender(),this.typingIndicator.getMetadata()&&(e[d.KEYS.METADATA]=this.typingIndicator.getMetadata()),t[d.KEYS.BODY]=e,t},l.getTypingEventFromJSON=function(t){var e=t[d.KEYS.APP_ID],n=t[d.KEYS.RECEIVER],r=t[d.KEYS.RECEIVER_TYPE],o=t[d.KEYS.DEVICE_ID],s=t[d.KEYS.SENDER],i=t[d.KEYS.BODY],a=i[d.KEYS.ACTION],c=i[d.KEYS.USER],E=i[d.KEYS.METADATA],u=new l(e,n,r,s,o);u.setAction(a);var p=new S.TypingIndicator(n,r);return p.setSender(new h.User(c)),i.hasOwnProperty(d.KEYS.METADATA)&&i[d.KEYS.METADATA]&&p.setMetadata(E),u.setTypingIndicator(p),u},l}(s.CometChatEvent);e.CometChatTypingEvent=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CCExtension=void 0;var r=n(0),o=function(){function t(t){this.id="",this.name="",t&&(r.isFalsy(t.id)||(this.id=t.id),r.isFalsy(t.name)||(this.name=t.name))}return t.prototype.getId=function(){return this.id},t.prototype.getName=function(){return this.name},t}();e.CCExtension=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AudioMode=void 0;var r=n(0),o=function(){function t(t,e){this.isSelected=!1,this.mode="",r.isFalsy(t)||(this.mode=t.toString()),this.isSelected=e||!1}return t.prototype.setMode=function(t){this.mode=t?t.toString():""},t.prototype.getMode=function(){return this.mode.toString()},t.prototype.setIsSelected=function(t){this.isSelected=t||!1},t.prototype.getIsSelected=function(){return this.isSelected},t}();e.AudioMode=o},function(t,r,o){"use strict";(function(e,n){var s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},i=this&&this.__awaiter||function(t,i,a,c){return new(a||(a=Promise))(function(n,e){function r(t){try{s(c.next(t))}catch(t){e(t)}}function o(t){try{s(c.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?n(t.value):(e=t.value,e instanceof a?e:new a(function(t){t(e)})).then(r,o)}s((c=c.apply(t,i||[])).next())})},a=this&&this.__generator||function(n,r){var o,s,i,t,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(i=2&e[0]?s.return:e[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,e[1])).done)return i;switch(s=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){a.label=e[1];break}if(6===e[0]&&a.label<i[1]){a.label=i[1],i=e;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(e);break}i[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],s=0}finally{o=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.PostDetails=void 0;var c=o(4),E=o(1),u=o(27),p=o(6),t=function(){function t(){var e=this;this.platform="ionic",this.uiKitSDK={version:""},this.callSDK={version:""},this._isDev=null!=window.IonicDevServer,this.getSDKVersion(),u.KeyStore.getInstance().get(E.LOCAL_STORE.KEY_DEVICE_ID).then(function(t){t&&(e.deviceId=t)}),setTimeout(function(){e.postDetails()},5e3)}return t.prototype.getSDKVersion=function(){e.CometChatCallSDK&&(this.callSDK=e.CometChatCallSDK)},t.prototype.toBase64=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){return[2,n.from(e).toString("base64")]})})},t.prototype.customEncode=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){return[2,e.split("").map(function(t){return String.fromCharCode(t.charCodeAt(0)+1)}).join("")]})})},t.prototype.getSessionIdHash=function(){var o,s;return i(this,void 0,void 0,function(){var e,n,r;return a(this,function(t){switch(t.label){case 0:return e=""+E.SDKHeader.sdkVersion+(null!==(o=this.callSDK.version)&&void 0!==o?o:null)+"\n    "+(null!==(s=this._isDev)&&void 0!==s&&s)+(c.CometChat.demoMetaInfo?c.CometChat.demoMetaInfo.version:null),[4,this.toBase64(e)];case 1:return n=t.sent(),r=this.customEncode(n),[2,r.then(function(t){return t.replace(/[^a-zA-Z0-9]/g,"")})]}})})},t.prototype.getStoredSessionIdHash=function(){return i(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,u.KeyStore.getInstance().get(E.LOCAL_STORE.KEY_SESSION_ID)];case 1:return[2,t.sent()]}})})},t.prototype.getLocale=function(){return navigator.language||navigator.userLanguage||"unknown"},t.prototype.getTimeZone=function(){var t=(new Date).getTimezoneOffset(),e=Math.floor(Math.abs(t)/60),n=Math.abs(t)%60;return(0<t?"-":"+")+(e=e<10?"0"+e:e)+":"+(n=n<10?"0"+n:n)},t.prototype.getOS=function(){return-1<window.navigator.userAgent.indexOf("Android")?"Android":-1<window.navigator.userAgent.indexOf("iPhone")?"iOS":"Unknown"},t.prototype.postDetails=function(){var o;return i(this,void 0,void 0,function(){var e,n,r=this;return a(this,function(t){switch(t.label){case 0:return[4,this.getSessionIdHash()];case 1:return e=t.sent(),[4,this.getStoredSessionIdHash()];case 2:return t.sent()===e||(n={sessionId:e,data:s(s({cometchat:s({chatsdk:{platform:this.platform,version:E.SDKHeader.sdkVersion}},this.callSDK.version?{callssdk:{platform:this.platform,version:this.callSDK.version}}:{})},c.CometChat.demoMetaInfo?{demo:{name:c.CometChat.demoMetaInfo.name,type:c.CometChat.demoMetaInfo.type,version:c.CometChat.demoMetaInfo.version,platform:c.CometChat.demoMetaInfo.platform}}:{}),{app:{debug:null!==(o=this._isDev)&&void 0!==o&&o},device:{id:this.deviceId,platform:this.platform,language:this.getLocale(),resolution:window.screen.width+" × "+window.screen.height,userAgent:window.navigator.userAgent,timezone:this.getTimeZone(),os:{name:this.getOS()}}}),generatedAt:Math.ceil((new Date).valueOf()/1e3)},p.makeApiCall("userSessions",{},n).then(function(n){return i(r,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return(null===(e=null==n?void 0:n.data)||void 0===e?void 0:e.sessionId)?[4,u.KeyStore.getInstance().set(E.LOCAL_STORE.KEY_SESSION_ID,n.data.sessionId)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})),[2]}})})},t}();r.PostDetails=t}).call(this,o(10),o(72).Buffer)},function(t,K,e){"use strict";(function(t){var r=e(73),s=e(74),i=e(75);function n(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=p.prototype:(null===t&&(t=new p(e)),t.length=e),t}function p(t,e,n){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(t,e,n);if("number"!=typeof t)return o(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return E(this,t)}function o(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);p.TYPED_ARRAY_SUPPORT?(t=e).__proto__=p.prototype:t=u(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!p.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),o=(t=a(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(p.isBuffer(e)){var n=0|l(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):u(t,e);if("Buffer"===e.type&&i(e.data))return u(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function E(t,e){if(c(e),t=a(t,e<0?0:0|l(e)),!p.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function u(t,e){var n=e.length<0?0:0|l(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function l(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function d(t,e){if(p.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(r)return Y(t).length;e=(""+e).toLowerCase(),r=!0}}function S(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function h(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=p.from(e,r)),p.isBuffer(e))return 0===e.length?-1:C(t,e,n,r,o);if("number"==typeof e)return e&=255,p.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):C(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function C(t,e,n,r,o){var s,i=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a/=i=2,c/=2,n/=2}function E(t,e){return 1===i?t[e]:t.readUInt16BE(e*i)}if(o){var u=-1;for(s=n;s<a;s++)if(E(t,s)===E(e,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===c)return u*i}else-1!==u&&(s-=s-u),u=-1}else for(a<n+c&&(n=a-c),s=n;0<=s;s--){for(var p=!0,l=0;l<c;l++)if(E(t,s+l)!==E(e,l)){p=!1;break}if(p)return s}return-1}function f(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?o<(r=Number(r))&&(r=o):r=o;var s=e.length;if(s%2!=0)throw new TypeError("Invalid hex string");s/2<r&&(r=s/2);for(var i=0;i<r;++i){var a=parseInt(e.substr(2*i,2),16);if(isNaN(a))return i;t[n+i]=a}return i}function T(t,e,n,r){return b(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function g(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function _(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var s,i,a,c,E=t[o],u=null,p=239<E?4:223<E?3:191<E?2:1;if(o+p<=n)switch(p){case 1:E<128&&(u=E);break;case 2:128==(192&(s=t[o+1]))&&127<(c=(31&E)<<6|63&s)&&(u=c);break;case 3:s=t[o+1],i=t[o+2],128==(192&s)&&128==(192&i)&&2047<(c=(15&E)<<12|(63&s)<<6|63&i)&&(c<55296||57343<c)&&(u=c);break;case 4:s=t[o+1],i=t[o+2],a=t[o+3],128==(192&s)&&128==(192&i)&&128==(192&a)&&65535<(c=(15&E)<<18|(63&s)<<12|(63&i)<<6|63&a)&&c<1114112&&(u=c)}null===u?(u=65533,p=1):65535<u&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),o+=p}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}K.Buffer=p,K.SlowBuffer=function(t){+t!=t&&(t=0);return p.alloc(+t)},K.INSPECT_MAX_BYTES=50,p.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),K.kMaxLength=n(),p.poolSize=8192,p._augment=function(t){return t.__proto__=p.prototype,t},p.from=function(t,e,n){return o(null,t,e,n)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0})),p.alloc=function(t,e,n){return r=null,s=e,i=n,c(o=t),o<=0?a(r,o):void 0!==s?"string"==typeof i?a(r,o).fill(s,i):a(r,o).fill(s):a(r,o);var r,o,s,i},p.allocUnsafe=function(t){return E(null,t)},p.allocUnsafeSlow=function(t){return E(null,t)},p.isBuffer=function(t){return!(null==t||!t._isBuffer)},p.compare=function(t,e){if(!p.isBuffer(t)||!p.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,s=Math.min(n,r);o<s;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},p.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return p.alloc(0);var n;if(void 0===e)for(n=e=0;n<t.length;++n)e+=t[n].length;var r=p.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var s=t[n];if(!p.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},p.byteLength=d,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)S(this,e,e+1);return this},p.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)S(this,e,e+3),S(this,e+1,e+2);return this},p.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)S(this,e,e+7),S(this,e+1,e+6),S(this,e+2,e+5),S(this,e+3,e+4);return this},p.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?_(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return O(this,e,n);case"utf8":case"utf-8":return _(this,e,n);case"ascii":return R(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return g(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},p.prototype.equals=function(t){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===p.compare(this,t)},p.prototype.inspect=function(){var t="",e=K.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},p.prototype.compare=function(t,e,n,r,o){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=e)return 0;if(o<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var s=(o>>>=0)-(r>>>=0),i=(n>>>=0)-(e>>>=0),a=Math.min(s,i),c=this.slice(r,o),E=t.slice(e,n),u=0;u<a;++u)if(c[u]!==E[u]){s=c[u],i=E[u];break}return s<i?-1:i<s?1:0},p.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},p.prototype.indexOf=function(t,e,n){return h(this,t,e,n,!0)},p.prototype.lastIndexOf=function(t,e,n){return h(this,t,e,n,!1)},p.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||o<n)&&(n=o),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s,i,a,c,E,u,p,l,d,S=!1;;)switch(r){case"hex":return f(this,t,e,n);case"utf8":case"utf-8":return l=e,d=n,b(Y(t,(p=this).length-l),p,l,d);case"ascii":return T(this,t,e,n);case"latin1":case"binary":return T(this,t,e,n);case"base64":return c=this,E=e,u=n,b(G(t),c,E,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i=e,a=n,b(function(t,e){for(var n,r,o,s=[],i=0;i<t.length&&!((e-=2)<0);++i)n=t.charCodeAt(i),r=n>>8,o=n%256,s.push(o),s.push(r);return s}(t,(s=this).length-i),s,i,a);default:if(S)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),S=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function R(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function I(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function O(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var o="",s=e;s<n;++s)o+=w(t[s]);return o}function N(t,e,n){for(var r=t.slice(e,n),o="",s=0;s<r.length;s+=2)o+=String.fromCharCode(r[s]+256*r[s+1]);return o}function y(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function m(t,e,n,r,o,s){if(!p.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<e||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function v(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,s=Math.min(t.length-n,2);o<s;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function P(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,s=Math.min(t.length-n,4);o<s;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function L(t,e,n,r,o,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(t,e,n,r,o){return o||L(t,0,n,4),s.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,o){return o||L(t,0,n,8),s.write(t,e,n,r,52,8),n+8}p.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),e<t&&(e=t),p.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=p.prototype;else{var o=e-t;n=new p(o,void 0);for(var s=0;s<o;++s)n[s]=this[s+t]}return n},p.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||y(t,e,this.length);for(var r=this[t],o=1,s=0;++s<e&&(o*=256);)r+=this[t+s]*o;return r},p.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||y(t,e,this.length);for(var r=this[t+--e],o=1;0<e&&(o*=256);)r+=this[t+--e]*o;return r},p.prototype.readUInt8=function(t,e){return e||y(t,1,this.length),this[t]},p.prototype.readUInt16LE=function(t,e){return e||y(t,2,this.length),this[t]|this[t+1]<<8},p.prototype.readUInt16BE=function(t,e){return e||y(t,2,this.length),this[t]<<8|this[t+1]},p.prototype.readUInt32LE=function(t,e){return e||y(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},p.prototype.readUInt32BE=function(t,e){return e||y(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},p.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||y(t,e,this.length);for(var r=this[t],o=1,s=0;++s<e&&(o*=256);)r+=this[t+s]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*e)),r},p.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||y(t,e,this.length);for(var r=e,o=1,s=this[t+--r];0<r&&(o*=256);)s+=this[t+--r]*o;return(o*=128)<=s&&(s-=Math.pow(2,8*e)),s},p.prototype.readInt8=function(t,e){return e||y(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},p.prototype.readInt16LE=function(t,e){e||y(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt16BE=function(t,e){e||y(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt32LE=function(t,e){return e||y(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},p.prototype.readInt32BE=function(t,e){return e||y(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},p.prototype.readFloatLE=function(t,e){return e||y(t,4,this.length),s.read(this,t,!0,23,4)},p.prototype.readFloatBE=function(t,e){return e||y(t,4,this.length),s.read(this,t,!1,23,4)},p.prototype.readDoubleLE=function(t,e){return e||y(t,8,this.length),s.read(this,t,!0,52,8)},p.prototype.readDoubleBE=function(t,e){return e||y(t,8,this.length),s.read(this,t,!1,52,8)},p.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||m(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,s=0;for(this[e]=255&t;++s<n&&(o*=256);)this[e+s]=t/o&255;return e+n},p.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||m(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,s=1;for(this[e+o]=255&t;0<=--o&&(s*=256);)this[e+o]=t/s&255;return e+n},p.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||m(this,t,e,1,255,0),p.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},p.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||m(this,t,e,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):v(this,t,e,!0),e+2},p.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||m(this,t,e,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):v(this,t,e,!1),e+2},p.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||m(this,t,e,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},p.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||m(this,t,e,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},p.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);m(this,t,e,n,o-1,-o)}var s=0,i=1,a=0;for(this[e]=255&t;++s<n&&(i*=256);)t<0&&0===a&&0!==this[e+s-1]&&(a=1),this[e+s]=(t/i>>0)-a&255;return e+n},p.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);m(this,t,e,n,o-1,-o)}var s=n-1,i=1,a=0;for(this[e+s]=255&t;0<=--s&&(i*=256);)t<0&&0===a&&0!==this[e+s+1]&&(a=1),this[e+s]=(t/i>>0)-a&255;return e+n},p.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||m(this,t,e,1,127,-128),p.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},p.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||m(this,t,e,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):v(this,t,e,!0),e+2},p.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||m(this,t,e,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):v(this,t,e,!1),e+2},p.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||m(this,t,e,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},p.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||m(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},p.prototype.writeFloatLE=function(t,e,n){return M(this,t,e,!0,n)},p.prototype.writeFloatBE=function(t,e,n){return M(this,t,e,!1,n)},p.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},p.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},p.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,s=r-n;if(this===t&&n<e&&e<r)for(o=s-1;0<=o;--o)t[o+e]=this[o+n];else if(s<1e3||!p.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+s),e);return s},p.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!p.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var i=p.isBuffer(t)?t:Y(new p(t,r).toString()),a=i.length;for(s=0;s<n-e;++s)this[s+e]=i[s%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function w(t){return t<16?"0"+t.toString(16):t.toString(16)}function Y(t,e){var n;e=e||1/0;for(var r=t.length,o=null,s=[],i=0;i<r;++i){if(55295<(n=t.charCodeAt(i))&&n<57344){if(!o){if(56319<n){-1<(e-=3)&&s.push(239,191,189);continue}if(i+1===r){-1<(e-=3)&&s.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(e-=3)&&s.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(e-=3)&&s.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function G(t){return r.toByteArray(function(t){var e;if((t=(e=t,e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function b(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,e(10))},function(t,e,n){"use strict";e.byteLength=function(t){var e=d(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=d(t),r=n[0],o=n[1],s=new l((E=r,u=o,3*(E+u)/4-u)),i=0,a=0<o?r-4:r,c=0;c<a;c+=4)e=p[t.charCodeAt(c)]<<18|p[t.charCodeAt(c+1)]<<12|p[t.charCodeAt(c+2)]<<6|p[t.charCodeAt(c+3)],s[i++]=e>>16&255,s[i++]=e>>8&255,s[i++]=255&e;var E,u;2===o&&(e=p[t.charCodeAt(c)]<<2|p[t.charCodeAt(c+1)]>>4,s[i++]=255&e);1===o&&(e=p[t.charCodeAt(c)]<<10|p[t.charCodeAt(c+1)]<<4|p[t.charCodeAt(c+2)]>>2,s[i++]=e>>8&255,s[i++]=255&e);return s},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o=[],s=0,i=n-r;s<i;s+=16383)o.push(c(t,s,i<s+16383?i:s+16383));1===r?(e=t[n-1],o.push(a[e>>2]+a[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"="));return o.join("")};for(var a=[],p=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,s=r.length;o<s;++o)a[o]=r[o],p[r.charCodeAt(o)]=o;function d(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var r,o,s=[],i=e;i<n;i+=3)r=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),s.push(a[(o=r)>>18&63]+a[o>>12&63]+a[o>>6&63]+a[63&o]);return s.join("")}p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var s,i,a=8*o-r-1,c=(1<<a)-1,E=c>>1,u=-7,p=n?o-1:0,l=n?-1:1,d=t[e+p];for(p+=l,s=d&(1<<-u)-1,d>>=-u,u+=a;0<u;s=256*s+t[e+p],p+=l,u-=8);for(i=s&(1<<-u)-1,s>>=-u,u+=r;0<u;i=256*i+t[e+p],p+=l,u-=8);if(0===s)s=1-E;else{if(s===c)return i?NaN:1/0*(d?-1:1);i+=Math.pow(2,r),s-=E}return(d?-1:1)*i*Math.pow(2,s-r)},e.write=function(t,e,n,r,o,s){var i,a,c,E=8*s-o-1,u=(1<<E)-1,p=u>>1,l=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,S=r?1:-1,h=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,i=u):(i=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-i))<1&&(i--,c*=2),2<=(e+=1<=i+p?l/c:l*Math.pow(2,1-p))*c&&(i++,c/=2),u<=i+p?(a=0,i=u):1<=i+p?(a=(e*c-1)*Math.pow(2,o),i+=p):(a=e*Math.pow(2,p-1)*Math.pow(2,o),i=0));8<=o;t[n+d]=255&a,d+=S,a/=256,o-=8);for(i=i<<o|a,E+=o;0<E;t[n+d]=255&i,d+=S,i/=256,E-=8);t[n+d-S]|=128*h}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var i=n(77),a=n(78);t.exports=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;++s)e[r+s]=o[s];return e||a(o)}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},function(t,e){for(var o=[],n=0;n<256;++n)o[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,r=o;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")}}])}),function(){try{require("@capacitor/app")&&(window.CapacitorApp={},window.CapacitorApp.isApp=!0,window.CapacitorApp.App=require("@capacitor/app")),require("@cometchat/calls-sdk-ionic")&&(window.CometChatCallSDK=require("@cometchat/calls-sdk-ionic/package.json"),window.CometChatCalling={},window.CometChatCalling.isCallingComponentInstalled=!0,window.CometChatCalling.Calling=require("@cometchat/calls-sdk-ionic").Calling)}catch(t){}}();