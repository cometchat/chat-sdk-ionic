!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=41)}([function(e,h,T){"use strict";(function(n){var e=this&&this.__awaiter||function(e,i,a,c){return new(a||(a=Promise))(function(n,t){function r(e){try{s(c.next(e))}catch(e){t(e)}}function o(e){try{s(c.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a(function(e){e(t)})).then(r,o)}s((c=c.apply(e,i||[])).next())})},r=this&&this.__generator||function(n,r){var o,s,i,e,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(i=2&t[0]?s.return:t[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,t[1])).done)return i;switch(s=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,s=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){a.label=t[1];break}if(6===t[0]&&a.label<i[1]){a.label=i[1],i=t;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(t);break}i[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],s=0}finally{o=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};h.__esModule=!0,h.getCallingComponentVersion=h.isCallingComponentInstalled=h.validateConversationType=h.validateUpdateUser=h.validateCreateUser=h.validateMessage=h.validateChatType=h.validateMsgId=h.validateArray=h.validateHideMessagesFromBlockedUsers=h.validateId=h.validateCreateGroup=h.validateJoinGroup=h.validateUpdateGroup=h.validateScope=h.isAudio=h.isVideo=h.isImage=h.getUpdatedSettings=h.getAppSettings=h.getCurrentTime=h.Logger=h.createUidFromJid=h.format=h.getOrdinalSuffix=h.isFalsy=h.isTruthy=h.isObject=h.getJidHost=h.getChatHost=void 0;var o=T(16),s=T(1),i=T(6),a=T(2),c=T(18),E=T(19),u=T(21),p=T(3),t=T(13);T(30).Plugins.Calling;function l(e){return null!=e&&("string"==typeof e&&(e=e.trim()),"object"==typeof e&&0===Object.keys(e).length&&(e=void 0)),["",0,"0",!1,null,"null",void 0,"undefined"].includes(e)}function S(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return e.split("%s").reduce(function(e,t,n){return e+t+(r[n]||"")},"")}h.getChatHost=function(e){return e[s.APP_SETTINGS.KEYS.CHAT_HOST_OVERRIDE]?e[s.APP_SETTINGS.KEYS.CHAT_HOST_OVERRIDE]:e[s.APP_SETTINGS.KEYS.CHAT_HOST_APP_SPECIFIC]?e[s.APP_SETTINGS.KEYS.CHAT_HOST_APP_SPECIFIC]:e[s.APP_SETTINGS.KEYS.CHAT_HOST]},h.getJidHost=function(e){return e[s.APP_SETTINGS.KEYS.JID_HOST_OVERRIDE]?e[s.APP_SETTINGS.KEYS.JID_HOST_OVERRIDE]:e[s.APP_SETTINGS.KEYS.CHAT_HOST]},h.isObject=function(e){return e instanceof Object&&e.constructor===Object},h.isTruthy=function(e){return[!0,1,"1","true","TRUE"].includes(e)},h.isFalsy=l,h.getOrdinalSuffix=function(e){var t=e%10,n=e%100;return 1==t&&11!=n?e+"st":2==t&&12!=n?e+"nd":3==t&&13!=n?e+"rd":e+"th"},h.format=S,h.createUidFromJid=function(e){return e.substring(e.lastIndexOf("]")+1,e.lastIndexOf("@"))};var d=function(){function e(){}return e.log=function(e,t){},e.error=function(e,t){},e.info=function(e,t){},e}();function C(){return new Promise(function(t,n){i.makeApiCall("appSettings").then(function(e){o.LocalStorage.getInstance().set(s.LOCAL_STORE.KEY_APP_SETTINGS,e.data),e.data.MODE&&p.CometChat.setMode(e.data.MODE),t(e.data)},function(e){n(new a.CometChatException(e.error))})})}h.Logger=d,h.getCurrentTime=function(){return(new Date).getTime()},h.getAppSettings=function(){return new Promise(function(t,n){o.LocalStorage.getInstance().get(s.LOCAL_STORE.KEY_APP_SETTINGS).then(function(e){l(e)?C().then(function(e){t(e)},function(e){n(e)}):t(e)},function(e){n(e)})})},h.getUpdatedSettings=C,h.isImage=function(e){var t;return e.type&&e.type.toLowerCase().includes("image")&&(t=!0),t},h.isVideo=function(e){var t;return e.type&&e.type.toLowerCase().includes("video")&&(t=!0),t},h.isAudio=function(e){var t;return e.type&&e.type.toLowerCase().includes("audio")&&(t=!0),t},h.validateScope=function(e){return typeof e!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"SCOPE","SCOPE","Scope"))):l(e)?new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID),"SCOPE","SCOPE","scope","scope"))):e!=p.CometChat.GROUP_MEMBER_SCOPE.ADMIN&&e!=p.CometChat.GROUP_MEMBER_SCOPE.MODERATOR&&e!=p.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT?new a.CometChatException(s.GroupErrors.INVALID_SCOPE):void 0},h.validateUpdateGroup=function(e){return e.hasOwnProperty(s.GroupConstants.KEYS.GUID)?typeof e[s.GroupConstants.KEYS.GUID]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","GUID"))):l(e[s.GroupConstants.KEYS.GUID])?new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GUID","GUID","GUID","GUID"))):e.hasOwnProperty(s.GroupConstants.KEYS.NAME)&&""===e[s.GroupConstants.KEYS.NAME]?new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.EMPTY_STRING),"GROUP_NAME","GROUP_NAME","Group name"))):void 0:new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.PARAMETER_COMPULSORY),"GUID","GUID","GUID","GUID")))},h.validateJoinGroup=function(e,t,n){if(typeof e==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.OBJECT){if(!e.hasOwnProperty(s.GroupConstants.KEYS.GUID))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.PARAMETER_COMPULSORY),"GUID","GUID","GUID","GUID")));if(typeof e[s.GroupConstants.KEYS.GUID]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","GUID")));if(l(e[s.GroupConstants.KEYS.GUID]))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GUID","GUID","GUID","GUID")));if(!e.hasOwnProperty(s.GroupConstants.KEYS.TYPE))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.PARAMETER_COMPULSORY),"GROUP_TYPE","GROUP_TYPE","Group type","Group type")));if(typeof e[s.GroupConstants.KEYS.TYPE]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GROUP_TYPE","GROUP_TYPE","Group type")));if(l(e[s.GroupConstants.KEYS.TYPE]))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GROUP_TYPE","GROUP_TYPE","type","type")));if(e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PUBLIC&&e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PASSWORD&&e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PROTECTED&&e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PRIVATE)return new a.CometChatException(s.GroupErrors.INVALID_GROUP_TYPE);if(e[s.GroupConstants.KEYS.TYPE].toLowerCase()==p.CometChat.GROUP_TYPE.PASSWORD){if(!e.hasOwnProperty(s.GroupConstants.KEYS.PASSWORD))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.PASSWORD_COMPULSORY),"PASSWORD","PASSWORD")));if(typeof e[s.GroupConstants.KEYS.PASSWORD]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"PASSWORD","PASSWORD","Password")));if(l(e[s.GroupConstants.KEYS.PASSWORD]))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"PASSWORD","PASSWORD","password","password")))}}else{if(void 0!==e){if(typeof e!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","GUID")));if(l(e))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GUID","GUID","GUID","GUID")))}if(void 0!==t){if(typeof t!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GROUP_TYPE","GROUP_TYPE","Group type")));if(l(t))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GROUP_TYPE","GROUP_TYPE","type","type")));if(t.toLowerCase()!=p.CometChat.GROUP_TYPE.PUBLIC&&t.toLowerCase()!=p.CometChat.GROUP_TYPE.PASSWORD&&t.toLowerCase()!=p.CometChat.GROUP_TYPE.PROTECTED&&t.toLowerCase()!=p.CometChat.GROUP_TYPE.PRIVATE)return new a.CometChatException(s.GroupErrors.INVALID_GROUP_TYPE);if(t.toLowerCase()==p.CometChat.GROUP_TYPE.PASSWORD){if(typeof n!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"PASSWORD","PASSWORD","Password")));if(l(n))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"PASSWORD","PASSWORD","password","password")))}}}},h.validateCreateGroup=function(e){if(!e.hasOwnProperty(s.GroupConstants.KEYS.GUID))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.PARAMETER_COMPULSORY),"GUID","GUID","GUID","GUID")));if(typeof e[s.GroupConstants.KEYS.GUID]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","GUID")));if(l(e[s.GroupConstants.KEYS.GUID]))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GUID","GUID","GUID","GUID")));if(!e.hasOwnProperty(s.GroupConstants.KEYS.NAME))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.PARAMETER_COMPULSORY),"GROUP_NAME","GROUP_NAME","Group name","Group name")));if(typeof e[s.GroupConstants.KEYS.NAME]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GROUP_NAME","GROUP_NAME","Group name")));if(l(e[s.GroupConstants.KEYS.NAME]))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GROUP_NAME","GROUP_NAME","name","name")));if(!e.hasOwnProperty(s.GroupConstants.KEYS.TYPE))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.PARAMETER_COMPULSORY),"GROUP_TYPE","GROUP_TYPE","Group type","Group type")));if(typeof e[s.GroupConstants.KEYS.TYPE]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GROUP_TYPE","GROUP_TYPE","Group type")));if(l(e[s.GroupConstants.KEYS.TYPE]))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"GROUP_TYPE","GROUP_TYPE","type","type")));if(e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PUBLIC&&e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PASSWORD&&e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PROTECTED&&e[s.GroupConstants.KEYS.TYPE].toLowerCase()!=p.CometChat.GROUP_TYPE.PRIVATE)return new a.CometChatException(s.GroupErrors.INVALID_GROUP_TYPE);if(e[s.GroupConstants.KEYS.TYPE].toLowerCase()==p.CometChat.GROUP_TYPE.PASSWORD){if(!e.hasOwnProperty(s.GroupConstants.KEYS.PASSWORD))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.PASSWORD_COMPULSORY),"PASSWORD","PASSWORD")));if(typeof e[s.GroupConstants.KEYS.PASSWORD]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"PASSWORD","PASSWORD","Password")));if(l(e[s.GroupConstants.KEYS.PASSWORD]))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_GROUP_PROPERTY),"PASSWORD","PASSWORD","password","password")))}if(e.hasOwnProperty(s.GroupConstants.KEYS.TAGS)){if(!Array.isArray(e[s.GroupConstants.KEYS.TAGS]))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_AN_ARRAY),"GROUP_TAGS","GROUP_TAGS","Group tags")));if(0===e[s.GroupConstants.KEYS.TAGS].length)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.EMPTY_ARRAY),"GROUP_TAGS","GROUP_TAGS","Group tags")))}},h.validateId=function(e,t){if("user"===t){if(typeof e!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"UID","UID","UID")));if(l(e))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID),"UID","UID","UID","UID")))}if("group"===t){if(typeof e!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"GUID","GUID","GUID")));if(l(e))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID),"GUID","GUID","GUID","GUID")))}},h.validateHideMessagesFromBlockedUsers=function(e){if(typeof e!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_BOOLEAN),"HIDE_MESSAGES_FROM_BLOCKED_USERS","HIDE_MESSAGES_FROM_BLOCKED_USERS","hideMessagesFromBlockedUsers")))},h.validateArray=function(e,t){var n="List should be an array.";return n="blockUsers"===t?"blockUsers() method accepts an array of users.":"unblockUsers"===t?"unblockUsers() method accepts an array of users.":"groupMembers"===t?"addMembersToGroup() method accepts members list as an array of users.":"addMembersToGroup() method accepts bannedMembers list as an array of users.",typeof e!=s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.OBJECT?new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_ARRAY),"USER_LIST","USER_LIST",n))):Array.isArray(e)?void 0:new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_ARRAY),"USER_LIST","USER_LIST",n)))},h.validateMsgId=function(e){return isNaN(e)?new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_NUMBER),"MESSAGE_ID","MESSAGE_ID","Message Id"))):l(e)?new a.CometChatException(t.ERRORS.PARAMETER_MISSING):void 0},h.validateChatType=function(e){return typeof e!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"RECEIVER_TYPE","RECEIVER_TYPE","Receiver type"))):l(e)?new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID),"RECEIVER_TYPE","RECEIVER_TYPE","receiver type","receiver type"))):e!=s.MessageConstatnts.RECEIVER_TYPE.GROUP&&e!=s.MessageConstatnts.RECEIVER_TYPE.USER?new a.CometChatException(s.MessageErrors.INVALID_RECEIVER_TYPE):void 0},h.validateMessage=function(e){var t=e;if(typeof t.getReceiverId()!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"RECEIVER_ID","RECEIVER_ID","Receiver Id")));if(l(t.getReceiverId()))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID),"RECEIVER_ID","RECEIVER_ID","receiver id","receiver id")));if(typeof t.getReceiverType()!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"RECEIVER_TYPE","RECEIVER_TYPE","Receiver Type")));if(l(t.getReceiverType()))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID),"RECEIVER_TYPE","RECEIVER_TYPE","receiver type","receiver type")));if(t.getReceiverType()!=s.MessageConstatnts.RECEIVER_TYPE.GROUP&&t.getReceiverType()!=s.MessageConstatnts.RECEIVER_TYPE.USER)return new a.CometChatException(s.MessageErrors.INVALID_RECEIVER_TYPE);if(e instanceof c.TextMessage){var n=e;if(typeof n.getText()!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"MESSAGE_TEXT","MESSAGE_TEXT","Message text")));if(""===n.getText().trim())return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.EMPTY_STRING),"MESSAGE_TEXT","MESSAGE_TEXT","Message text")))}if(e instanceof E.MediaMessage){var r=e;if(r.getData()&&r.getData().hasOwnProperty("attachments")){var o=r.getAttachment();if(!o.getExtension())return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MISSING_KEY),"extension","Attachment")));if(!o.getMimeType())return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MISSING_KEY),"mimeType","Attachment")));if(!o.getName())return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MISSING_KEY),"name","Attachment")));if(!o.getUrl())return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MISSING_KEY),"url","Attachment")))}else{if(!(r.file instanceof Blob))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_BLOB),"MEDIA_OBJECT","MEDIA_OBJECT","Media object")));if("image"==r.getType()){if(!h.isImage(r.file))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_MEDIA_FILE),"IMAGE_FILE","IMAGE_FILE")))}else if("video"==r.getType()){if(!h.isVideo(r.file))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_MEDIA_FILE),"VIDEO_FILE","VIDEO_FILE")))}else if("audio"==r.getType()&&!h.isAudio(r.file))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_MEDIA_FILE),"AUDIO_FILE","AUDIO_FILE")))}}if(e instanceof u.CustomMessage&&l(e.getCustomData()))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID),"CUSTOM_DATA","CUSTOM_DATA","custom data","custom data")))},h.validateCreateUser=function(e){if(!e.hasOwnProperty(s.UserConstants.UID))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.PARAMETER_COMPULSORY),"UID","UID","UID","UID")));if(typeof e[s.UserConstants.UID]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"UID","UID","UID")));if(l(e[s.UserConstants.UID]))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_USER_PROPERTY),"UID","UID","UID","UID")));if(!e.hasOwnProperty(s.UserConstants.NAME))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.PARAMETER_COMPULSORY),"USER_NAME","USER_NAME","User name","User name")));if(typeof e[s.UserConstants.NAME]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"USER_NAME","USER_NAME","User name")));if(l(e[s.UserConstants.NAME]))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_USER_PROPERTY),"USER_NAME","USER_NAME","name","name")));if(e.hasOwnProperty(s.UserConstants.AVATAR)&&""===e[s.UserConstants.AVATAR])return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.EMPTY_STRING),"USER_AVATAR","USER_AVATAR","User avatar")));if(e.hasOwnProperty(s.UserConstants.META_DATA)&&""===e[s.UserConstants.META_DATA])return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.EMPTY_STRING),"USER_METADATA","USER_METADATA","User metadata")));if(e.hasOwnProperty(s.UserConstants.LINK)&&""===e[s.UserConstants.LINK])return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.EMPTY_STRING),"USER_LINK","USER_LINK","User link")));if(e.hasOwnProperty(s.UserConstants.STATUS_MESSAGE)&&""===e[s.UserConstants.STATUS_MESSAGE])return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.EMPTY_STRING),"USER_STATUS_MESSAGE","USER_STATUS_MESSAGE","User status message")));if(e.hasOwnProperty(s.UserConstants.ROLE)&&""===e[s.UserConstants.ROLE])return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.EMPTY_STRING),"USER_ROLE","USER_ROLE","User role")));if(e.hasOwnProperty(s.UserConstants.TAGS)){if(!Array.isArray(e[s.UserConstants.TAGS]))return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_AN_ARRAY),"USER_TAGS","USER_TAGS","User tags")));if(0===e[s.UserConstants.TAGS].length)return new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.EMPTY_ARRAY),"USER_TAGS","USER_TAGS","User tags")))}},h.validateUpdateUser=function(e){return e.hasOwnProperty(s.UserConstants.UID)?typeof e[s.UserConstants.UID]!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"UID","UID","UID"))):l(e[s.UserConstants.UID])?new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID_USER_PROPERTY),"UID","UID","UID","UID"))):e.hasOwnProperty(s.UserConstants.NAME)&&""===e[s.UserConstants.NAME]?new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.EMPTY_STRING),"USER_NAME","USER_NAME","User name"))):void 0:new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.PARAMETER_COMPULSORY),"UID","UID","UID","UID")))},h.validateConversationType=function(e){return typeof e!==s.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.MUST_BE_A_STRING),"CONVERSATION_TYPE","CONVERSATION_TYPE","Conversation type"))):l(e)?new a.CometChatException(JSON.parse(S(JSON.stringify(s.GENERAL_ERROR.INVALID),"CONVERSATION_TYPE","CONVERSATION_TYPE","conversation type","conversation type"))):(e=e.toLowerCase())!=p.CometChat.RECEIVER_TYPE.USER&&e!=p.CometChat.RECEIVER_TYPE.GROUP?new a.CometChatException(s.ConversationErrors.INVALID_CONVERSATION_TYPE):void 0},h.isCallingComponentInstalled=function(){return!!(n.hasOwnProperty("CometChatCalling")&&n.CometChatCalling&&n.CometChatCalling.hasOwnProperty("isCallingComponentInstalled")&&n.CometChatCalling.isCallingComponentInstalled)},h.getCallingComponentVersion=function(){return e(void 0,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:if(!h.isCallingComponentInstalled())return[3,7];t=n.CometChatCalling.Calling,e.label=1;case 1:return e.trys.push([1,5,,6]),t.getPluginVersion()?[4,t.getPluginVersion()]:[3,3];case 2:return 3==e.sent().version?[2,3]:[2,2];case 3:return[2,2];case 4:return[3,6];case 5:return e.sent(),[2,2];case 6:return[3,8];case 7:return[2,0];case 8:return[2]}})})}}).call(this,T(15))},function(e,t,n){"use strict";t.__esModule=!0,t.ONLINE_MEMBER_COUNT_API=t.JWT_API=t.ProsodyApiErrors=t.PROSODY_API=t.API_ERROR_CODES=t.CONNECTION_STATUS=t.COMMON_UTILITY_CONSTANTS=t.APP_SETTINGS=t.PresenceConstatnts=t.FeatureRestrictionErrors=t.MessageErrors=t.ExtensionErrors=t.ConversationErrors=t.GroupErrors=t.UserErrors=t.ReceiptErrors=t.GENERAL_ERROR=t.PARAMETER_ERROR=t.CALL_ERROR=t.Errors=t.UserConstants=t.GroupMemersConstans=t.GroupConstants=t.CallConstants=t.BlockedUsersConstants=t.ActionConstatnts=t.TYPING_NOTIFICATION=t.MessageCategory=t.ATTACHMENTS_CONSTANTS=t.MessageConstatnts=t.READ_RECEIPTS=t.DELIVERY_RECEIPTS=t.ResponseConstants=t.LOCAL_STORE=t.ANALYTICS=t.WS=t.SDKHeader=t.APPINFO=t.GROUP_MEMBER_SCOPE=t.GroupMemberScope=t.GROUP_TYPE=t.GroupType=t.DEFAULT_VALUES=t.constants=void 0;var r,o,s,i=n(2);t.constants={DEFAULT_STORE:"cometchat",MSG_VER_PRE:"store-ver-pre",MSG_VER_POST:"store-ver-post"},t.DEFAULT_VALUES={ZERO:0,MSGS_LIMIT:30,MSGS_MAX_LIMIT:100,USERS_LIMIT:30,USERS_MAX_LIMIT:100,GROUPS_LIMIT:30,GROUPS_MAX_LIMIT:100,CONVERSATION_MAX_LIMIT:50,CALL_TIMEOUT:45,DEFAULT_MSG_ID:0,DEFAULT_MAX_TYPING_INDICATOR_LIMIT:5,REGION_DEFAULT:"eu",REGION_DEFAULT_EU:"eu",REGION_DEFAULT_US:"us",REGION_DEFAULT_IN:"in",REGION_DEFAULT_PRIVATE:"private"},(r=t.GroupType||(t.GroupType={})).Public="public",r.Private="private",r.Protected="protected",r.Password="password",t.GROUP_TYPE={PUBLIC:"public",PRIVATE:"private",PROTECTED:"password",PASSWORD:"password"},(o=t.GroupMemberScope||(t.GroupMemberScope={})).Admin="admin",o.Moderator="moderator",o.Member="member",t.GROUP_MEMBER_SCOPE={ADMIN:"admin",MODERATOR:"moderator",PARTICIPANT:"participant"},t.APPINFO={platform:"IONIC_CORDOVA",sdkVersion:"v3.0.8",apiVersion:"v3.0",sdkVersionWithUnderScore:"3_0_8"},t.SDKHeader={platform:"ionic",sdkVersion:"3.0.8",sdk:"%s@%s"},t.WS={CONVERSATION:{TYPE:{CHAT:"chat",GROUP_CHAT:"groupchat"}}},t.ANALYTICS={analyticsHost:"metrics-%s.cometchat.io",analyticsVersion:"v1"},t.LOCAL_STORE={COMMON_STORE:"common_store",MESSAGE_LISTENERS_LIST:"message_listeners_list",USERS_STORE:"users_store",MESSAGES_STORE:"messages_store",KEYS_STORE:"keys_store",STORE_STRING:"%s:%s",KEY_STRING:"%s/%s",KEY_USER:"user",KEY_APP_SETTINGS:"app_settings",KEY_APP_ID:"appId",KEY_DEVICE_ID:"deviceId",KEY_MESSAGE_LISTENER_LIST:"all"},t.ResponseConstants={RESPONSE_KEYS:{KEY_DATA:"data",KEY_META:"meta",KEY_CURSOR:"cursor",KEY_ACTION:"action",KEY_MESSAGE:"message",KEY_ERROR:"error",KEY_ERROR_DETAILS:"details",KEY_ERROR_CODE:"code",KEY_ERROR_MESSAGE:"message",KEY_AUTH_TOKEN:"authToken",KEY_WS_CHANNEL:"wsChannel",KEY_IDENTITY:"identity",KEY_SERVICE:"identity",KEY_ENTITIES:"entities",KEY_ENTITITY:"entity",KEY_ENTITYTYPE:"entityType",KEY_ATTACHMENTS:"attachments",CODE_REQUEST_OK:200,CODE_BAD_REQUEST:401,UNREAD_UNDELIVERED_KEYS:{ENTITY:"entity",ENTITY_TYPE:"entityType",ENTITY_Id:"entityId",COUNT:"count"},GROUP_MEMBERS_RESPONSE:{SUCCESS:"success",ERROR:"error",MESSAGE:"message"},KEY_ENTITY_TYPE:{USER:"user",GROUP:"group"}}},t.DELIVERY_RECEIPTS={RECEIVER_ID:"receiverId",RECEIVER_TYPE:"type",RECIPIENT:"recipient",MESSAGE_ID:"messageId",RECEIVED:"delivered",DELIVERED_AT:"deliveredAt",ID:"id",TIME:"time",DELIVERED_TO_ME_AT:"deliveredToMeAt"},t.READ_RECEIPTS={RECEIVER_ID:"receiverId",RECEIVER_TYPE:"type",RECIPIENT:"recipient",MESSAGE_ID:"messageId",READ:"read",READ_AT:"readAt",ID:"id",TIME:"time",READ_BY_ME_AT:"readByMeAt"},t.MessageConstatnts={TYPE:{TEXT:"text",MEDIA:"media",IMAGE:"image",VIDEO:"video",AUDIO:"audio",FILE:"file",CUSTOM:"custom"},CATEGORY:{MESSAGE:"message",ACTION:"action",CALL:"call",CUSTOM:"custom"},RECEIVER_TYPE:{USER:"user",GROUP:"group"},KEYS:{ATTATCHMENT:"attatchment",ATTATCHMENTS:"attachments",ACTION:"action",TYPE:"type",DATA:"data",ID:"id",MUID:"muid",SENDER:"sender",RECEIVER:"receiver",RECEIVER_ID:"receiverId",CATEGORY:"category",RECEIVER_TYPE:"receiverType",SENT_AT:"sentAt",STATUS:"status",TEXT:"text",URL:"url",METADATA:"metadata",RECEIPTS:"receipts",MY_RECEIPTS:"myReceipt",CUSTOM_DATA:"customData",CUSTOM_SUB_TYPE:"subType",RESOURCE:"resource"},KNOWN_MEDIA_TYPE:{IMAGE:[],VIDEO:[],AUDIO:[],FILE:[]},PAGINATION:{AFFIX:{APPEND:"append",PREPEND:"prepend"},CURSOR_FILEDS:{ID:"id",SENT_AT:"sentAt"},CURSOR_AFFIX_DEFAULT:"prepend",CURSOR_FIELD_DEFAULT:"sentAt",KEYS:{PER_PAGE:"per_page",CURSOR_AFFIX:"cursorAffix",AFFIX:"affix",CURSOR_FIELD:"cursorField",CURSOR_VALUE:"cursorValue",UID:"uid",SENT_AT:"sentAt",ID:"id",CURRENT_PAGE:"page",UNREAD:"unread",HIDE_MESSAGES_FROM_BLOCKED_USER:"hideMessagesFromBlockedUsers",SEARCH_KEY:"searchKey",ONLY_UPDATES:"onlyUpdates",UPDATED_AT:"updatedAt",CATEGORY:"category",CATEGORIES:"categories",TYPE:"type",TYPES:"types",HIDE_REPLIES:"hideReplies",HIDE_DELETED_MESSAGES:"hideDeleted",WITH_TAGS:"withTags",TAGS:"tags"}}},t.ATTACHMENTS_CONSTANTS={KEYS:{EXTENSION:"extension",MIME_TYPE:"mimeType",NAME:"name",SIZE:"size",URL:"url"}},(s=t.MessageCategory||(t.MessageCategory={})).ACTION="action",s.MESSAGE="message",s.CALL="call",s.CUSTOM="custom",t.TYPING_NOTIFICATION={RECEIVER_ID:"receiverId",RECEIVER_TYPE:"receiverType",META:"metadata",KEYS:{TYPING_NOTIFICATION:"typingNotification",TIMESTAMP:"timestamp"},ACTIONS:{STARTED:"started",ENDED:"ended"}},t.ActionConstatnts={ACTION_SUBJECTS:{ACTION_ON:"on",ACTION_BY:"by",ACTION_FOR:"for"},ACTION_ENTITY_TYPE:{GROUP_USER:"groupuser",USER:"user",GROUP:"group",MESSAGE:"message"},ACTION_KEYS:{ACTION_CREATED:"created",ACTION_UPDATED:"updated",ACTION_DELETED:"deleted",ENTITIES:"entities",ENTITY:"entity",ENTITY_TYPE:"entityType",TYPE_MEMBER_JOINED:"joined",TYPE_MEMBER_LEFT:"left",TYPE_MEMBER_KICKED:"kicked",TYPE_MEMBER_BANNED:"banned",TYPE_MEMBER_UNBANNED:"unbanned",TYPE_MEMBER_INVITED:"invited",TYPE_MEMBER_ADDED:"added",ACTION_SCOPE_CHANGED:"scopeChanged",ACTION_TYPE_USER:"user",ACTION_TYPE_GROUP:"group",ACTION_TYPE_GROUP_MEMBER:"groupMember",TYPE_MESSAGE_EDITED:"edited",TYPE_MESSAGE_DELETED:"deleted",ACTION_TYPE_CALL:"call",EXTRAS:"extras",SCOPE:"scope",NEW:"new",OLD:"old"},ActionMessages:{ACTION_GROUP_JOINED_MESSAGE:"%s joined",ACTION_GROUP_LEFT_MESSAGE:"%s left",ACTION_MEMBER_KICKED_MESSAGE:"%s kicked %s",ACTION_MEMBER_BANNED_MESSAGE:"%s banned %s",ACTION_MEMBER_UNBANNED_MESSAGE:"%s unbanned %s",ACTION_MEMBER_INVITED_MESSAGE:"%s banned %s",ACTION_MESSAGE_EDITED_MESSAGE:" Message Edited",ACTION_MESSAGE_DELETED_MESSAGE:"Message Deleted",ACTION_MEMBER_SCOPE_CHANGED:"%s made %s %s",ACTION_MEMBER_ADDED_TO_GROUP:"%s added %s"},ACTION_TYPE:{TYPE_MEMBER_JOINED:"joined",TYPE_MEMBER_LEFT:"left",TYPE_MEMBER_KICKED:"kicked",TYPE_MEMBER_BANNED:"banned",TYPE_MEMBER_UNBANNED:"unbanned",TYPE_MEMBER_INVITED:"invited",TYPE_MEMBER_SCOPE_CHANGED:"scopeChanged",TYPE_MESSAGE:"message",TYPE_MESSAGE_EDITED:"edited",TYPE_MESSAGE_DELETED:"deleted",TYPE_MEMBER_ADDED:"added"},ACTIONS:{MEMBER_ADDED:"added",MEMBER_JOINED:"joined",MEMBER_LEFT:"left",MEMBER_KICKED:"kicked",MEMBER_BANNED:"banned",MEMBER_UNBANNED:"unbanned",MEMBER_INVITED:"invited",MEMBER_SCOPE_CHANGED:"scopeChanged",MESSAGE_EDITED:"edited",MESSSAGE_DELETED:"deleted",TYPE_USER:"user",TYPE_GROUP:"group",TYPE_GROUP_MEMBER:"groupMember"}},t.BlockedUsersConstants={REQUEST_KEYS:{DIRECTIONS:{BOTH:"both",HAS_BLOCKED_ME:"hasBlockedMe",BLOCKED_BY_ME:"blockedByMe"}}},t.CallConstants={CALL_MODE:{DEFAULT:"DEFAULT",SPOTLIGHT:"SPOTLIGHT",SINGLE:"SINGLE"},AUDIO_MODE:{SPEAKER:"SPEAKER",EARPIECE:"EARPIECE",BLUETOOTH:"BLUETOOTH",HEADPHONES:"HEADPHONES"},CALL_TYPE:{AUDIO:"audio",VIDEO:"video"},RECEIVER_TYPE_GROUP:"group",RECEIVER_TYPE_USER:"user",CALL_KEYS:{CALL_DATA:"data",CALL_ID:"id",CALL_SESSION_ID:"sessionid",CALL_RECEIVER:"receiver",CALL_SENDER:"sender",CALL_RECEIVER_TYPE:"receiverType",CALL_STATUS:"status",CALL_TYPE:"type",CALL_INITIATED_AT:"initiatedAt",CALL_JOINED_AT:"joinedAt",CALL_LEFT_AT:"leftAt",CALL_METADATA:"metadata",CALL_ENTITIES:"entities",CALL_ENTITY_TYPE:"entityType",CALL_ENTITY:"entity",CALL_ENTITY_USER:"user",CALL_ENTITY_GROUP:"group"},CALL_STATUS:{INITIATED:"initiated",ONGOING:"ongoing",UNANSWERED:"unanswered",REJECTED:"rejected",BUSY:"busy",CANCELLED:"cancelled",ENDED:"ended"}},t.GroupConstants={KEYS:{NAME:"name",GUID:"guid",TYPE:"type",PASSWORD:"password",ICON:"icon",DESCRIPTION:"description",OWNER:"owner",METADATA:"metadata",CREATED_AT:"createdAt",UPDATED_AT:"updatedAt",HAS_JOINED:"hasJoined",WS_CHANNEL:"wsChannel",TAGS:"tags"}},t.GroupMemersConstans={KEYS:{SCOPE:"scope",UID:"uid",GUID:"guid",USER:"user",NAME:"name"}},t.UserConstants={UID:"uid",NAME:"name",AUTH_TOKEN:"authToken",AVATAR:"avatar",LAST_ACTIVE_AT:"lastActiveAt",LINK:"link",META_DATA:"metadata",ROLE:"role",STATUS:"status",STATUS_MESSAGE:"statusMessage",USER_NAME:"user_name",TAGS:"tags",SORT_BY:{NAME:"name",STATUS:"status"},SORT_ORDER:{ASCENDING:"asc",DESCENDING:"desc"}},t.Errors={ERROR_IO_EXCEPTION:"ERROR_IO_EXCEPTION",ERROR_JSON_EXCEPTION:"ERROR_JSON_EXCEPTION",ERROR_PASSWORD_MISSING:"ERROR_PASSWORD_MISSING",ERROR_LIMIT_EXCEEDED:"ERROR_LIMIT_EXCEEDED",ERROR_USER_NOT_LOGGED_IN:"ERROR_USER_NOT_LOGGED_IN",ERROR_INVALID_GUID:"ERROR_INVALID_GUID",ERROR_PASSWORD_MISSING_MESSAGE:"Password is mandatory for a password group",ERROR_LIMIT_EXCEEDED_MESSAGE:"Limit Exceeded Max limit of %s",ERROR_USER_NOT_LOGGED_IN_MESSAGE:"Please log in to CometChat before calling this method",ERROR_INVALID_GUID_MESSAGE:"Please provide a valid GUID",ERROR_DEFAULT_MESSAGE:"Something went wrong",ERR_SETTINGS_HASH_OUTDATED:"ERR_SETTINGS_HASH_OUTDATED",ERR_NO_AUTH:"ERR_NO_AUTH"},t.CALL_ERROR={CALL_ALREADY_INITIATED:{code:"CALL_ALREADY_INITIATED",name:"CALL_ALREADY_INITIATED",message:"There is already call in progress",details:{}},ERROR_IN_CALLING:{code:"CALL_IN_PROGRESS",name:"CALL_ALREADY_INITIATED",message:"There is already call in progress",details:{}},CANNOT_ACCEPT_CALL:{code:"CALL_IN_PROGRESS",name:"CALL_IN_PROGRESS",message:"There is already a call in progress",details:{}},NOT_INITIALIZED:{code:"NOT_INITIALIZED",name:"NOT_INITIALIZED",message:"Please call the CometChat.init() method before calling any other methods related to CometChat.",details:{}},NOT_LOGGED_IN:{code:"NOT_LOGGED_IN",name:"NOT_LOGGED_IN",message:"Please login before starting a call.",details:{}},SESSION_ID_REQUIRED:{code:"SESSION_ID_REQUIRED",name:"SESSION_ID_REQUIRED",message:"Please make sure you are passing correct session id.",details:{}},CALL_SETTINGS_REQUIRED:{code:"CALL_SETTINGS_REQUIRED",name:"CALL_SETTINGS_REQUIRED",message:"Please make sure you are passing the call settings object.",details:{}},JWT_NOT_FOUND:{code:"JWT_NOT_FOUND",name:"JWT_NOT_FOUND",message:"There was some issue while fetching JWT from API.",details:{}},MODULE_NOT_INSTALLED:{code:"ERROR_CALL_MODULE_NOT_FOUND",name:"ERROR_CALL_MODULE_NOT_FOUND",message:"CometChat Calling module not found. Please add the CometChat Calling dependency and try again.",details:{}}},t.PARAMETER_ERROR={PARAMETER_REQUIRED:{code:"%s_NOT_PROVIDED",name:"%s_NOT_PROVIDED",message:"please provide the %s.",details:{}}},t.GENERAL_ERROR={MUST_BE_A_STRING:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a string.",details:{}},MUST_BE_A_NUMBER:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a number.",details:{}},MUST_BE_A_OBJECT:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a object.",details:{}},MUST_BE_AN_ARRAY:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be an array.",details:{}},MUST_BE_A_BOOLEAN:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a boolean.",details:{}},MUST_BE_A_BLOB:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a blob.",details:{}},INVALID:{code:"INVALID_%s",name:"INVALID_%s",message:"Invalid %s. Please provide a valid %s.",details:{}},METHOD_COMPULSORY:{code:"%s_IS_COMPULSORY",name:"%s_IS_COMPULSORY",message:"%s is required.",details:{}},LIMIT_EXCEEDED:{code:"ERROR_%s_EXCEEDED",name:"ERROR_%s_EXCEEDED",message:"Limit exceeded max limit of %s.",details:{}},MUST_BE_A_POSITIVE_NUMBER:{code:"INVALID_%s",name:"INVALID_%s",message:"%s should be a postive integer greater than 0.",details:{}},INVALID_MEDIA_FILE:{code:"INVALID_%s",name:"INVALID_%s",message:"The message type does not match the file's mime type.",details:{}},EMPTY_STRING:{code:"INVALID_%s",name:"INVALID_%s",message:"%s cannot be empty.",details:{}},MISSING_KEY:{code:"MISSING_KEY",name:"MISSING_KEY",message:"The key %s is missing from the %s object.",details:{}},EMPTY_ARRAY:{code:"INVALID_%s",name:"INVALID_%s",message:"The parameter %s should be an array and it cannot be empty.",details:{}},INVALID_SEARCH_KEYWORD:{code:"INVALID_SEARCH_KEYWORD",name:"INVALID_SEARCH_KEYWORD",message:"Invalid search keyword. Please provide a valid search keyword.",details:{}},INVALID_GROUP_PROPERTY:{code:"INVALID_%s",name:"INVALID_%s",message:"Invalid %s provided for the group. Please provide a valid %s.",details:{}},INVALID_USER_PROPERTY:{code:"INVALID_%s",name:"INVALID_%s",message:"Invalid %s provided for a user. Please provide a valid %s.",details:{}},PARAMETER_MUST_BE_A_NUMBER:{code:"INVALID_%s",name:"INVALID_%s",message:"%s method accepts parameter as a number.",details:{}},PARAMETER_MUST_BE_AN_ARRAY:{code:"INVALID_%s",name:"INVALID_%s",message:"%s method accepts parameter as an array.",details:{}},PARAMETER_MUST_BE_A_BOOLEAN:{code:"INVALID_%s",name:"INVALID_%s",message:"%s method accepts parameter as a boolean.",details:{}},PARAMETER_MUST_BE_A_POSITIVE_NUMBER:{code:"INVALID_%s",name:"INVALID_%s",message:"%s method accepts parameter to be a positive number greater than 0.",details:{}},PARAMETER_MUST_BE_A_STRING:{code:"INVALID_%s",name:"INVALID_%s",message:"%s method accepts parameter as a string.",details:{}},PARAMETER_COMPULSORY:{code:"%s_IS_COMPULSORY",name:"%s_IS_COMPULSORY",message:"%s cannot be blank. Please provide a valid %s.",details:{}},PASSWORD_COMPULSORY:{code:"%s_IS_COMPULSORY",name:"%s_IS_COMPULSORY",message:"Password is mandatory for a password group.",details:{}},INVALID_ARRAY:{code:"INVALID_%s",name:"INVALID_%s",message:"%s",details:{}}},t.ReceiptErrors={MISSING_PARAMETERS:{code:"MISSING_PARAMETERS",name:"MISSING_PARAMETERS",message:"Expected 4 parameters received 3",details:{}},INVALID_PARAMETER:{code:"INVALID_%s",name:"INVALID_%s",message:"%s",details:{}},NO_WEBSOCKET_CONNECTION:{code:"NO_WEBSOCKET_CONNECTION",name:"NO_WEBSOCKET_CONNECTION",message:"Connection to our Websockets server is broken. Please retry after some time.",details:{}},RECEIPTS_TEMPORARILY_BLOCKED:{code:"RECEIPTS_TEMPORARILY_BLOCKED",name:"RECEIPTS_TEMPORARILY_BLOCKED",message:"Due to high load. Receipts have been blocked for your app.",details:{}},UNKNOWN_ERROR_OCCURRED:{code:"UNKNOWN_ERROR_OCCURRED",name:"UNKNOWN_ERROR_OCCURRED",message:"Unknown error occurred while marking a message as read.",details:{}}},t.UserErrors={INVALID_STATUS:new i.CometChatException({code:"INVALID_STATUS_VALUE",name:"INVALID_STATUS_VALUE",message:"The `status` parameter accepts only `online` or `offline`.",details:""}),INVALID_DIRECTION:new i.CometChatException({code:"INVALID_DIRECTION_VALUE",name:"INVALID_DIRECTION_VALUE",message:"The `direction` parameter accepts only `both`, `blockeyByMe` or `hasBlockedMe`.",details:""}),USER_NOT_LOGGED_IN:new i.CometChatException({code:"USER_NOT_LOGGED_IN",name:"USER_NOT_LOGGED_IN",message:"Please log in to CometChat before calling this method.",details:""})},t.GroupErrors={NOT_A_GROUP:new i.CometChatException({code:"NOT_A_GROUP",message:"Please use group class to construct a new group."}),INVALID_SCOPE:new i.CometChatException({code:"INVALID_SCOPE_VALUE",name:"INVALID_SCOPE_VALUE",message:"Scope can be `admin`, `moderator` or `participant`.",details:""}),INVALID_GROUP_TYPE:new i.CometChatException({code:"INVALID_GROUP_TYPE",name:"INVALID_GROUP_TYPE",message:"Group type can be `public`, `private`, `protected` or `password`.",details:""})},t.ConversationErrors={INVALID_CONVERSATION_TYPE:{code:"INVALID_CONVERSATION_TYPE",name:"INVALID_CONVERSATION_TYPE",message:"Conversation type can be `user` or `group`.",details:"Please check the value of conversationType."},CONVERSATION_NOT_FOUND:{code:"CONVERSATION_NOT_FOUND",name:"CONVERSATION_NOT_FOUND",message:"Conversation for %s %s not found.",details:"Please check the value of conversationWith and conversationType."}},t.ExtensionErrors={INVALID_EXTENSION:{code:"ERROR_INVALID_EXTENSION",name:"ERROR_INVALID_EXTENSION",message:"The provided extension cannot be null or empty. Please provide a valid extension.",details:{}},EXTENSION_NOT_FOUND:{code:"ERROR_EXTENSION_NOT_FOUND",name:"ERROR_EXTENSION_NOT_FOUND",message:"The provided extension could not be found.",details:{}}},t.MessageErrors={INVALID_RECEIVER_TYPE:{code:"INVALID_RECEIVER_TYPE",name:"INVALID_RECEIVER_TYPE",message:"Receiver type can be `user` or `group`.",details:"Please check the value of receiverType."}},t.FeatureRestrictionErrors={INVALID_FEATURE:{code:"ERROR_INVALID_FEATURE",name:"ERROR_INVALID_FEATURE",message:"The provided feature cannot be null or empty. Please provide a valid feature.",details:{}},FEATURE_NOT_FOUND:{code:"ERROR_FEATURE_NOT_FOUND",name:"ERROR_FEATURE_NOT_FOUND",message:"The provided feature could not be found.",details:{}}},t.PresenceConstatnts={STATUS:{ONLINE:"online",AVAILABLE:"available",OFFLINE:"offline",JOINED:"JOINED",LEFT:"LEFT"}},t.APP_SETTINGS={APP_SETTINGS:"app_settings",KEYS:{CHAT_HOST:"CHAT_HOST",CHAT_USE_SSL:"CHAT_USE_SSL",GROUP_SERVICE:"GROUP_SERVICE",CALL_SERVICE:"CALL_SERVICE",CHAT_WS_PORT:"CHAT_WS_PORT",CHAT_WSS_PORT:"CHAT_WSS_PORT",CHAT_HTTP_BIND_PORT:"CHAT_HTTP_BIND_PORT",CHAT_HTTPS_BIND_PORT:"CHAT_HTTPS_BIND_PORT",ADMIN_API_HOST:"ADMIN_API_HOST",CLIENT_API_HOST:"CLIENT_API_HOST",WEBRTC_HOST:"WEBRTC_HOST",WEBRTC_USE_SSL:"WEBRTC_USE_SSL",WEBRTC_WS_PORT:"WEBRTC_WS_PORT",WEBRTC_WSS_PORT:"WEBRTC_WSS_PORT",WEBRTC_HTTP_BIND_PORT:"WEBRTC_HTTP_BIND_PORT",WEBRTC_HTTPS_BIND_PORT:"WEBRTC_HTTPS_BIND_PORT",EXTENSION_LIST:"extensions",EXTENSION_KEYS:{ID:"id",NAME:"name"},JID_HOST_OVERRIDE:"JID_HOST_OVERRIDE",CHAT_HOST_OVERRIDE:"CHAT_HOST_OVERRIDE",CHAT_HOST_APP_SPECIFIC:"CHAT_HOST_APP_SPECIFIC",MODE:"MODE",CONNECTION_TYPE:"connection_type",DEFAULT_MODE:"DEFAULT",LIMITED_TRANSIENT:"LIMITED_TRANSIENT",NO_TRANSIENT:"NO_TRANSIENT",POLLING_ENABLED:"POLLING_ENABLED",POLLING_INTERVAL:"POLLING_INTERVAL",ANALYTICS_PING_DISABLED:"ANALYTICS_PING_DISABLED",ANALYTICS_HOST:"ANALYTICS_HOST",ANALYTICS_VERSION:"ANALYTICS_VERSION",ANALYTICS_USE_SSL:"ANALYTICS_USE_SSL",SETTINGS_HASH:"settingsHash",SETTINGS_HASH_RECEIVED_AT:"settingsHashReceivedAt",DENY_FALLBACK_TO_POLLING:"DENY_FALLBACK_TO_POLLING",APP_VERSION:"APP_VERSION"}},t.COMMON_UTILITY_CONSTANTS={TYPE_CONSTANTS:{BOOLEAN:"boolean",STRING:"string",OBJECT:"object",NUMBER:"number"}},t.CONNECTION_STATUS={CONNECTED:"connected",CONNECTING:"connecting",DISCONNECTED:"disconnected",FEATURE_THROTTLED:"featureThrottled"},t.API_ERROR_CODES={AUTH_ERR_AUTH_TOKEN_NOT_FOUND:"AUTH_ERR_AUTH_TOKEN_NOT_FOUND"},t.PROSODY_API={DOMAIN_PREFIX:"xmpp",PATH:{ROOM:"room",ROOM_SIZE:"room-size",SESSIONS:"sessions"},RESPONSE:{PARTICIPANTS:"participants"},QUERY_PARAMETERS:{DOMAIN:"domain",ROOM:"room"}},t.ProsodyApiErrors={INVALID_SESSIONID:{code:"ERROR_INVALID_SESSIONID",name:"ERROR_INVALID_SESSIONID",message:"The provided sessionId cannot be null or empty. Please provide a valid sessionId.",details:""},INVALID_TYPE:{code:"ERROR_INVALID_TYPE",name:"ERROR_INVALID_TYPE",message:"The provided type cannot be null or empty. Please provide a valid type.",details:""}},t.JWT_API={KEYS:{PASSTHROUGH:"passthrough",EXPAND:"expand"}},t.ONLINE_MEMBER_COUNT_API={ENDPOINTS:{GET_ONLINE_MEMBER_COUNT:"api/v1/online-members"},RESPONSE:{ONLINE_USERS_COUNT:"onlineUsersCount",GROUPS:"groups"},ERRORS:{INVALID_GROUPLIST:{code:"ERROR_INVALID_GROUPLIST",name:"ERROR_INVALID_GROUPLIST",message:"Grouplist cannot be null or empty.",details:""}}}},function(e,t,n){"use strict";t.__esModule=!0,t.CometChatException=void 0;var r=function(e){null!==e.code&&void 0!==e.code&&""!==e.code&&(this.code=e.code),null!==e.name&&void 0!==e.name&&""!==e.name&&(this.name=e.name),null!==e.message&&void 0!==e.message&&""!==e.message&&(this.message=e.message),null!==e.details&&void 0!==e.details&&""!==e.details&&(this.details=e.details)};t.CometChatException=r},function(e,ne,re){"use strict";(function(M){var S=this&&this.__assign||function(){return(S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=this&&this.__awaiter||function(e,i,a,c){return new(a||(a=Promise))(function(n,t){function r(e){try{s(c.next(e))}catch(e){t(e)}}function o(e){try{s(c.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a(function(e){e(t)})).then(r,o)}s((c=c.apply(e,i||[])).next())})},D=this&&this.__generator||function(n,r){var o,s,i,e,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(i=2&t[0]?s.return:t[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,t[1])).done)return i;switch(s=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,s=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){a.label=t[1];break}if(6===t[0]&&a.label<i[1]){a.label=i[1],i=t;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(t);break}i[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],s=0}finally{o=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};ne.__esModule=!0,ne.CometChat=void 0;var u=re(31),U=re(0),w=re(2),Y=re(6),G=re(4),d=re(16),E=re(19),p=re(7),l=re(18),C=re(10),h=re(11),b=re(1),a=re(8),T=re(17),s=re(33),e=re(25),t=re(23),K=re(34),g=re(13),n=re(22),r=re(42),o=re(43),i=re(44),_=re(45),f=re(47),R=re(48),A=re(27),I=re(28),O=re(38),N=re(21),m=re(36),y=re(50),v=re(51),L=re(52),x=re(37),B=re(26),F=re(20),V=re(53),P=re(30),J=re(54),k=re(55),H=re(39),W=re(5),j=re(29),q=re(64),X=re(32),Q=re(65),z=P.Plugins.Calling,Z=re(66),$=k.WSConnectionHelper.getInstance(),ee=H.ListenerHandlers.getInstance(),te=function(){function P(e){try{P.appId=e,P.localStorage=d.LocalStorage.getInstance(),P.keyStore=s.KeyStore.getInstance()}catch(e){U.Logger.error("CometChat: constructor",e)}}return P.setAuthToken=function(e){try{P.authToken=e}catch(e){U.Logger.error("CometChat: setAuthToken",e)}},P.prototype.getAuthToken=function(){try{return P.authToken}catch(e){U.Logger.error("CometChat: getAuthToken",e)}},P.getAppId=function(){try{return P.appId}catch(e){U.Logger.error("CometChat: getAppId",e)}},P.prototype.getApiKey=function(){try{return P.apiKey}catch(e){U.Logger.error("CometChat: getApiKey",e)}},P.getMode=function(){try{return P.mode}catch(e){U.Logger.error("CometChat: getMode",e)}},P.setMode=function(e){try{P.mode=e}catch(e){U.Logger.error("CometChat: getMode",e)}},P.getSessionId=function(){try{return P.sessionId}catch(e){U.Logger.error("CometChat: getAppId",e)}},P.didAnalyticsPingStart=function(){try{return P.isAnalyticsPingStarted}catch(e){U.Logger.error("CometChat: didAnalyticsPingStart",e)}},P.init=function(o,e){var r=this;return void 0===o&&(o=""),new Promise(function(n,t){try{"object"==typeof o&&(o.hasOwnProperty("appId")&&(o=o.appId),o.hasOwnProperty("appSettings")&&(e=o.appSettings)),U.isFalsy(e)?e=(new v.AppSettingsBuilder).setRegion(v.AppSettings.REGION_EU).build():e.getRegion()==v.AppSettings.REGION_PRIVATE&&(e.region=o),r.appSettings=e,U.isFalsy(o)?t(new w.CometChatException(g.INIT_ERROR.NO_APP_ID)):(r.initialzed=!0,P.appId=o,P.getInstance(o),P.sessionId=b.APPINFO.platform+"-"+b.APPINFO.sdkVersionWithUnderScore+"-"+Z()+"-"+(new Date).getTime(),d.LocalStorage.getInstance().get(b.LOCAL_STORE.KEY_APP_ID).then(function(e){if(null==e||null==e)P.appId=o,P.getInstance(o),d.LocalStorage.getInstance().set(b.LOCAL_STORE.KEY_APP_ID,o),n(!0);else{var t=e.toLocaleString();t===o?(P.appId=t,P.getInstance(t),d.LocalStorage.getInstance().get(b.LOCAL_STORE.KEY_USER).then(function(e){e?(P.isLoggedOut=!1,P.user=new G.Me(e),P.setAuthToken(P.user.getAuthToken()),e.jwt&&(P.jwt=e.jwt),n(!0),d.LocalStorage.getInstance().get(b.LOCAL_STORE.KEY_APP_SETTINGS).then(function(e){if(e){if(e.hasOwnProperty(b.APP_SETTINGS.KEYS.APP_VERSION)){var t=parseInt(b.APPINFO.sdkVersion.charAt(1));e[b.APP_SETTINGS.KEYS.APP_VERSION]<t&&(r.appSettings.shouldAutoEstablishSocketConnection()||(P.shouldConnectToWS=!1),P.getInstance().internalRestart(P.user.getAuthToken()))}else r.appSettings.shouldAutoEstablishSocketConnection()||(P.shouldConnectToWS=!1),P.getInstance().internalRestart(P.user.getAuthToken());e[b.APP_SETTINGS.KEYS.MODE]&&(P.mode=e[b.APP_SETTINGS.KEYS.MODE]),e[b.APP_SETTINGS.KEYS.SETTINGS_HASH]&&(P.settingsHash=e[b.APP_SETTINGS.KEYS.SETTINGS_HASH]),e[b.APP_SETTINGS.KEYS.SETTINGS_HASH_RECEIVED_AT]&&(P.settingsHashReceivedAt=e[b.APP_SETTINGS.KEYS.SETTINGS_HASH_RECEIVED_AT]),e[b.APP_SETTINGS.KEYS.ANALYTICS_HOST]&&(P.analyticsHost=e[b.APP_SETTINGS.KEYS.ANALYTICS_HOST]),e[b.APP_SETTINGS.KEYS.ANALYTICS_VERSION]&&(P.analyticsVersion=e[b.APP_SETTINGS.KEYS.ANALYTICS_VERSION]),P.isAnalyticsDisabled=!!e[b.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED],P.didAnalyticsPingStart()||P.isAnalyticsDisabled||!r.appSettings.shouldAutoEstablishSocketConnection()||(P.pingAnalytics(),P.startAnalyticsPingTimer()),$&&!$.connection&&r.appSettings.shouldAutoEstablishSocketConnection()&&(P.isConnectingFromInit=!0,P.WSLogin(P.user))}})):n(!0)})):r.clearCache().then(function(){P.apiKey=void 0,P.user=void 0,P.authToken=void 0,P.cometChat=void 0,P.mode=void 0,$.WSLogout(),P.appId=o,d.LocalStorage.getInstance().set(b.LOCAL_STORE.KEY_APP_ID,o),P.getInstance(o),n(!0)})}s.KeyStore.getInstance().get(b.LOCAL_STORE.KEY_DEVICE_ID).then(function(e){if(null==e){var t=Z(),n=(new Date).getTime(),r=o+"_"+t+"_"+n;s.KeyStore.getInstance().set(b.LOCAL_STORE.KEY_DEVICE_ID,r)}})}))}catch(e){t(new w.CometChatException(e))}})},P.isInitialized=function(){try{return this.initialzed}catch(e){U.Logger.error("CometChat: isInitialized",e)}},P.getInstance=function(e){try{return this.cometChat||(this.cometChat=new P(e)),this.cometChat}catch(e){U.Logger.error("CometChat: getInstance",e)}},P.registerTokenForPushNotification=function(p,l){var S=this;return new Promise(function(E,u){try{P.keyStore.get(b.LOCAL_STORE.KEY_DEVICE_ID).then(function(e){var t="",n=e,r=b.APPINFO.platform,o=b.APPINFO.sdkVersion,s=b.APPINFO.apiVersion;if(navigator&&(t=navigator.userAgent),null==n){var i=Z(),a=(new Date).getTime();n=S.appId+"_"+i+"_"+a,P.keyStore.set(b.LOCAL_STORE.KEY_DEVICE_ID,n)}var c={platform:r,deviceId:n,appInfo:{version:o,apiVersion:s,userAgent:t,pushNotification:{fcmDeviceToken:p,settings:l}}};Y.makeApiCall("updateMyDetails",{},c,!1).then(function(e){E("Token Registration successful")},function(e){u(new w.CometChatException(e.error))}).catch(function(e){u(new w.CometChatException(e))})})}catch(e){u(new w.CometChatException(e))}})},P.pushToLoginListener=function(t,n){ee.loginHandlers.map(function(e){try{if(e._eventListener)switch(n){case"Login_Success":U.isFalsy(e._eventListener.loginSuccess)||e._eventListener.loginSuccess(t);break;case"Login_Failure":U.isFalsy(e._eventListener.loginFailure)||e._eventListener.loginFailure(t);break;case"Logout_Success":U.isFalsy(e._eventListener.logoutSuccess)||e._eventListener.logoutSuccess()}}catch(e){U.Logger.error("ConnectionHandlers: onConnected Status",e)}})},P.login=function(){for(var c=this,E=[],e=0;e<arguments.length;e++)E[e]=arguments[e];return new Promise(function(i,a){try{if(P.loginInProgress){P.isLoggedOut=!0;var t=new w.CometChatException(g.LOGIN_ERROR.REQUEST_IN_PROGRESS);return a(t)}P.loginInProgress=!0,P.isConnectingFromInit=!1,P.localStorage.get(b.LOCAL_STORE.KEY_APP_ID).then(function(e){if(null==e||null==e){var t=new w.CometChatException(g.LOGIN_ERROR.NOT_INITIALIZED);return P.internalRestart||P.pushToLoginListener(t,"Login_Failure"),P.loginInProgress=!1,P.isLoggedOut=!0,a(t)}var n=e.toLocaleString();if(c.getInstance(n),P.appId=n,d.LocalStorage.getInstance().set(b.LOCAL_STORE.KEY_APP_ID,n),"object"==typeof E[0]){var r=E[0];E[0].hasOwnProperty("authToken")?E[0]=r.authToken:E[0].hasOwnProperty("username")&&E[0].hasOwnProperty("apiKey")&&(E[0]=r.username,E[1]=r.apiKey)}if(2==E.length){if(U.isFalsy(E[0])||U.isFalsy(E[1])){t=new w.CometChatException(g.ERRORS.PARAMETER_MISSING);return P.internalRestart||P.pushToLoginListener(t,"Login_Failure"),P.loginInProgress=!1,P.isLoggedOut=!0,a(t)}}else{if(1!=E.length){t=new w.CometChatException(g.ERRORS.PARAMETER_MISSING);return P.internalRestart||P.pushToLoginListener(t,"Login_Failure"),P.loginInProgress=!1,P.isLoggedOut=!0,a(t)}if(U.isFalsy(E[0])){var t=new w.CometChatException(g.ERRORS.PARAMETER_MISSING);return P.internalRestart||P.pushToLoginListener(t,"Login_Failure"),P.loginInProgress=!1,P.isLoggedOut=!0,a(t)}}if(U.isFalsy(c.getAppId())){t=new w.CometChatException(g.LOGIN_ERROR.NOT_INITIALIZED);return P.internalRestart||P.pushToLoginListener(t,"Login_Failure"),P.loginInProgress=!1,P.isLoggedOut=!0,a(t)}return P.localStorage.get(b.LOCAL_STORE.KEY_USER).then(function(s){if(2==E.length){P.apiKey=E[1];var e=E[0];if(null!=s&&s.uid!==E[0])P.localStorage.clearStore().then(function(){$.WSLogout(),P.generateAuthToken(e).then(function(e){P.user=new G.Me(e),P.setAuthToken(P.user.getAuthToken()),P.getLoggedInUser().then(function(e){(P.user=new G.Me(e)).setAuthToken(P.authToken),P.setAuthToken(P.user.getAuthToken());var t=P.user;t.setStatus(b.PresenceConstatnts.STATUS.ONLINE),P.localStorage.set("user",t);var n=new G.User(t);i(n),P.isConnectingFromInit||P.internalRestart||P.pushToLoginListener(n,"Login_Success"),P.loginInProgress=!1,P.didAnalyticsPingStart()||P.isAnalyticsDisabled||!P.appSettings.shouldAutoEstablishSocketConnection()||(P.pingAnalytics(),P.startAnalyticsPingTimer()),P.isLoggedOut=!1,(P.appSettings.shouldAutoEstablishSocketConnection()||P.internalRestart)&&P.shouldConnectToWS&&P.WSLogin(P.user)},function(e){return P.internalRestart||P.pushToLoginListener(e,"Login_Failure"),P.loginInProgress=!1,P.isLoggedOut=!0,a(e)})},function(e){return P.internalRestart||P.pushToLoginListener(e,"Login_Failure"),P.loginInProgress=!1,P.isLoggedOut=!0,a(e)})});else{if(!U.isFalsy(P.authToken)){var t=new G.User(c.user);return P.internalRestart||P.pushToLoginListener(t,"Login_Success"),P.loginInProgress=!1,P.isLoggedOut=!1,i(t)}if(!U.isFalsy(e)){if(U.isFalsy(P.apiKey)){var n=new w.CometChatException(g.LOGIN_ERROR.UNAUTHORISED);return P.internalRestart||P.pushToLoginListener(n,"Login_Failure"),P.loginInProgress=!1,P.isLoggedOut=!0,a(n)}c.generateAuthToken(e).then(function(e){c.user=new G.Me(e),c.setAuthToken(P.user.getAuthToken()),c.getLoggedInUser().then(function(e){c.user=new G.Me(e),c.user.setAuthToken(P.authToken),c.setAuthToken(c.user.getAuthToken()),$.WSLogout();var t=c.user;t.setStatus(b.PresenceConstatnts.STATUS.ONLINE),c.localStorage.set("user",t);var n=new G.User(t);i(n),P.isConnectingFromInit||P.internalRestart||P.pushToLoginListener(n,"Login_Success"),P.loginInProgress=!1,P.didAnalyticsPingStart()||P.isAnalyticsDisabled||!P.appSettings.shouldAutoEstablishSocketConnection()||(P.pingAnalytics(),P.startAnalyticsPingTimer()),P.isLoggedOut=!1,(P.appSettings.shouldAutoEstablishSocketConnection()||P.internalRestart)&&P.shouldConnectToWS&&c.WSLogin(c.user)},function(e){return P.internalRestart||P.pushToLoginListener(e,"Login_Failure"),P.loginInProgress=!1,P.isLoggedOut=!0,a(e)})},function(e){return P.internalRestart||P.pushToLoginListener(e,"Login_Failure"),P.loginInProgress=!1,P.isLoggedOut=!0,a(e)})}}}else P.authToken=E[0],c.getLoggedInUser().then(function(e){if(e.authToken!=E[0]){var r=c;r.localStorage.clearStore().then(function(){$.WSLogout(),r.getLoggedInUser().then(function(e){(P.user=new G.Me(e)).setAuthToken(P.authToken),P.setAuthToken(P.user.getAuthToken());var t=P.user;t.setStatus(b.PresenceConstatnts.STATUS.ONLINE),r.localStorage.set("user",t);var n=new G.User(t);i(n),P.isConnectingFromInit||P.internalRestart||P.pushToLoginListener(n,"Login_Success"),P.loginInProgress=!1,P.didAnalyticsPingStart()||P.isAnalyticsDisabled||!P.appSettings.shouldAutoEstablishSocketConnection()||(P.pingAnalytics(),P.startAnalyticsPingTimer()),P.isLoggedOut=!1,(P.appSettings.shouldAutoEstablishSocketConnection()||P.internalRestart)&&P.shouldConnectToWS&&P.WSLogin(new G.Me(e))},function(e){return P.internalRestart||P.pushToLoginListener(e,"Login_Failure"),P.loginInProgress=!1,P.isLoggedOut=!0,a(e)})})}else{if(s){var t=new G.User(e);return P.internalRestart||P.pushToLoginListener(t,"Login_Success"),P.loginInProgress=!1,P.isLoggedOut=!1,i(t)}(P.user=new G.Me(e)).setAuthToken(P.authToken),P.setAuthToken(P.user.getAuthToken());var n=P.user;n.setStatus(b.PresenceConstatnts.STATUS.ONLINE),P.localStorage.set("user",n);var o=new G.User(n);i(o),P.isConnectingFromInit||P.internalRestart||P.pushToLoginListener(o,"Login_Success"),P.loginInProgress=!1,P.didAnalyticsPingStart()||P.isAnalyticsDisabled||!P.appSettings.shouldAutoEstablishSocketConnection()||(P.pingAnalytics(),P.startAnalyticsPingTimer()),P.isLoggedOut=!1,(P.appSettings.shouldAutoEstablishSocketConnection()||P.internalRestart)&&P.shouldConnectToWS&&P.WSLogin(new G.Me(e))}},function(e){return P.internalRestart||P.pushToLoginListener(e,"Login_Failure"),P.loginInProgress=!1,P.isLoggedOut=!0,a(e)})})})}catch(e){t=new w.CometChatException(e);return P.internalRestart||P.pushToLoginListener(t,"Login_Failure"),P.loginInProgress=!1,P.isLoggedOut=!0,a(t)}})},P.sendMessage=function(a){var e=this;return new Promise(function(s,i){return c(e,void 0,void 0,function(){var t,n,r,o=this;return D(this,function(e){try{return a instanceof l.TextMessage||a instanceof E.MediaMessage||a instanceof N.CustomMessage||(a=a[b.MessageConstatnts.KEYS.ATTATCHMENT]?(t=b.MessageConstatnts.TYPE.FILE,U.isImage(a[b.MessageConstatnts.KEYS.ATTATCHMENT])?t=b.MessageConstatnts.TYPE.IMAGE:U.isAudio(a[b.MessageConstatnts.KEYS.ATTATCHMENT])?t=b.MessageConstatnts.TYPE.AUDIO:U.isVideo(a[b.MessageConstatnts.KEYS.ATTATCHMENT])&&(t=b.MessageConstatnts.TYPE.VIDEO),new E.MediaMessage(a[b.MessageConstatnts.KEYS.RECEIVER_ID],a[b.MessageConstatnts.KEYS.ATTATCHMENT],t,a[b.MessageConstatnts.KEYS.RECEIVER_TYPE])):new l.TextMessage(a[b.MessageConstatnts.KEYS.RECEIVER_ID],a[b.MessageConstatnts.KEYS.TEXT],a[b.MessageConstatnts.KEYS.RECEIVER_TYPE])),(n=U.validateMessage(a))instanceof w.CometChatException?(i(n),[2]):(a.receiver=a.receiverId,delete a.receiverId,r=a.parentMessageId,[2,Y.makeApiCall(r?"sendMessageInThread":"sendMessage",r?{parentId:r}:{},a,a instanceof E.MediaMessage).then(function(n){return c(o,void 0,void 0,function(){var t;return D(this,function(e){return t=C.MessageController.trasformJSONMessge(n.data),A.MessageListnerMaping.getInstance().set("all",parseInt(t.id)),s(t),[2]})})},function(e){i(new w.CometChatException(e.error))})])}catch(e){i(new w.CometChatException(e))}return[2]})})})},P.sendDirectMessage=function(e){try{return Object.assign(e,{receiverType:b.MessageConstatnts.RECEIVER_TYPE.USER}),this.sendMessage(e)}catch(e){U.Logger.error("CometChat: sendDirectMessage",e)}},P.sendGroupMessage=function(e){try{return Object.assign(e,{receiverType:b.MessageConstatnts.RECEIVER_TYPE.GROUP}),this.sendMessage(e)}catch(e){U.Logger.error("CometChat: sendGroupMessage",e)}},P.sendMediaMessage=function(e){try{return this.sendMessage(e)}catch(e){U.Logger.error("CometChat: sendMediaMessage",e)}},P.sendCustomMessage=function(e){try{return this.sendMessage(e)}catch(e){U.Logger.error("CometChat: sendCustomMessage",e)}},P.getLastDeliveredMessageId=function(){return c(this,void 0,void 0,function(){var t;return D(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,A.MessageListnerMaping.getInstance().get(b.LOCAL_STORE.KEY_MESSAGE_LISTENER_LIST)];case 1:return[2,e.sent()];case 2:return t=e.sent(),U.Logger.error("CometChat: getLastDeliveredMessageId",t),[3,3];case 3:return[2]}})})},P.startTyping=function(e){try{if(U.isFalsy(e))return;var t=void 0,n=this.RECEIVER_TYPE.USER,r={};if(e instanceof I.TypingIndicator)t=e.getReceiverId(),n=e.getReceiverType(),r=e.getMetadata();else{if(!e.hasOwnProperty(b.TYPING_NOTIFICATION.RECEIVER_ID))return;t=e[b.TYPING_NOTIFICATION.RECEIVER_ID],e.hasOwnProperty(b.TYPING_NOTIFICATION.RECEIVER_TYPE)&&(n=e[b.TYPING_NOTIFICATION.RECEIVER_TYPE]),e.hasOwnProperty(b.TYPING_NOTIFICATION.META)&&(r=e[b.TYPING_NOTIFICATION.META])}if(U.isFalsy(t))return;if(null==O.TypingNotificationController.getTypingStartedMap(t)){var o=P.getMode();return U.isFalsy(o)||o&&o!==b.APP_SETTINGS.KEYS.NO_TRANSIENT&&o!==b.APP_SETTINGS.KEYS.LIMITED_TRANSIENT?($.startTypingIndicator(t,n,r),O.TypingNotificationController.addTypingStarted(t),void O.TypingNotificationController.removeTypingEnded(t)):void 0}}catch(e){U.Logger.error("CometChat: startTyping",e)}},P.endTyping=function(e){try{if(U.isFalsy(e))return;var t=void 0,n=this.RECEIVER_TYPE.USER,r={};if(e instanceof I.TypingIndicator)t=e.getReceiverId(),n=e.getReceiverType(),r=e.getMetadata();else{if(!e.hasOwnProperty(b.TYPING_NOTIFICATION.RECEIVER_ID))return;t=e[b.TYPING_NOTIFICATION.RECEIVER_ID],e.hasOwnProperty(b.TYPING_NOTIFICATION.RECEIVER_TYPE)&&(n=e[b.TYPING_NOTIFICATION.RECEIVER_TYPE]),n=n==this.RECEIVER_TYPE.USER?b.WS.CONVERSATION.TYPE.CHAT:b.WS.CONVERSATION.TYPE.GROUP_CHAT,e.hasOwnProperty(b.TYPING_NOTIFICATION.META)&&(r=e[b.TYPING_NOTIFICATION.META])}if(U.isFalsy(t))return;if(null==O.TypingNotificationController.getTypingEndedMap(t)){var o=P.getMode();return U.isFalsy(o)||o&&o!==b.APP_SETTINGS.KEYS.NO_TRANSIENT&&o!==b.APP_SETTINGS.KEYS.LIMITED_TRANSIENT?($.pauseTypingIndicator(t,n,r),O.TypingNotificationController.addTypingEnded(t),void O.TypingNotificationController.removeTypingStarted(t)):void 0}}catch(e){U.Logger.error("CometChat: endTyping",e)}},P.markAsRead=function(){for(var c=[],e=0;e<arguments.length;e++)c[e]=arguments[e];return new Promise(function(e,t){try{var n=void 0,r=void 0,o=void 0,s=void 0;if(3===c.length)return t(new w.CometChatException(b.ReceiptErrors.MISSING_PARAMETERS));if(4===c.length){if(U.isFalsy(c[0])||"string"!=typeof c[0])return t(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER),"MESSAGE_ID","MESSAGE_ID","Message ID should be a string."))));if(n=c[0],U.isFalsy(c[1])||"string"!=typeof c[1])return t(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER),"RECEIVER_ID","RECEIVER_ID","Receiver ID should be a string."))));if(r=c[1],U.isFalsy(c[2])||"string"!=typeof c[2])return t(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER),"RECEIVER_TYPE","RECEIVER_TYPE","Receiver type should be a string."))));if(o=c[2],U.isFalsy(c[3])||"string"!=typeof c[3])return t(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER),"SENDER_ID","SENDER_ID","Sender ID should be a string."))));s=c[3]}else{if(1!==c.length)return t(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER),"ARGUMENTS","ARGUMENTS","markAsRead() expects either 1 or 4 arguments."))));if(U.isFalsy(c[0])||!(c[0]instanceof p.BaseMessage))return t(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER),"MESSAGE","MESSAGE","Invalid message object received."))));var i=c[0];n=i.getId().toString(),r=(o=i.getReceiverType())===b.MessageConstatnts.RECEIVER_TYPE.USER?i.getSender().getUid()===P.user.getUid()?i.getReceiverId():i.getSender().getUid():i.getReceiverId(),s=i.getSender().getUid()}var a=P.getMode();return U.isFalsy(a)||a&&a!==b.APP_SETTINGS.KEYS.NO_TRANSIENT&&a!==b.APP_SETTINGS.KEYS.LIMITED_TRANSIENT?P.getConnectionStatus()===b.CONNECTION_STATUS.CONNECTED?($.markAsRead(r,o,n,s),e()):t(new w.CometChatException(b.ReceiptErrors.NO_WEBSOCKET_CONNECTION)):t(new w.CometChatException(b.ReceiptErrors.RECEIPTS_TEMPORARILY_BLOCKED))}catch(e){return U.Logger.error("CometChat: markAsRead",e),t(new w.CometChatException(b.ReceiptErrors.UNKNOWN_ERROR_OCCURRED))}})},P.markAsDelivered=function(){for(var c=[],e=0;e<arguments.length;e++)c[e]=arguments[e];return new Promise(function(e,t){try{var n=void 0,r=void 0,o=void 0,s=void 0;if(3===c.length)return t(new w.CometChatException(b.ReceiptErrors.MISSING_PARAMETERS));if(4===c.length){if(U.isFalsy(c[0])||"string"!=typeof c[0])return t(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER),"MESSAGE_ID","MESSAGE_ID","Message ID should be a string."))));if(n=c[0],U.isFalsy(c[1])||"string"!=typeof c[1])return t(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER),"RECEIVER_ID","RECEIVER_ID","Receiver ID should be a string."))));if(r=c[1],U.isFalsy(c[2])||"string"!=typeof c[2])return t(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER),"RECEIVER_TYPE","RECEIVER_TYPE","Receiver type should be a string."))));if(o=c[2],U.isFalsy(c[3])||"string"!=typeof c[3])return t(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER),"SENDER_ID","SENDER_ID","Sender ID should be a string."))));s=c[3]}else{if(1!==c.length)return t(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER),"ARGUMENTS","ARGUMENTS","markAsDelivered() expects either 1 or 4 arguments."))));if(U.isFalsy(c[0])||!(c[0]instanceof p.BaseMessage))return t(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER),"MESSAGE","MESSAGE","Invalid message object received."))));var i=c[0];n=i.getId().toString(),r=(o=i.getReceiverType())===b.MessageConstatnts.RECEIVER_TYPE.USER?i.getSender().getUid()===P.user.getUid()?i.getReceiverId():i.getSender().getUid():i.getReceiverId(),s=i.getSender().getUid()}var a=P.getMode();return U.isFalsy(a)||a&&a!==b.APP_SETTINGS.KEYS.NO_TRANSIENT&&a!==b.APP_SETTINGS.KEYS.LIMITED_TRANSIENT?P.getConnectionStatus()===b.CONNECTION_STATUS.CONNECTED?($.markAsDelivered(r,o,n,s),e()):t(new w.CometChatException(b.ReceiptErrors.NO_WEBSOCKET_CONNECTION)):t(new w.CometChatException(b.ReceiptErrors.RECEIPTS_TEMPORARILY_BLOCKED))}catch(e){return U.Logger.error("CometChat: markAsDelivered",e),t(new w.CometChatException(b.ReceiptErrors.UNKNOWN_ERROR_OCCURRED))}})},P.sendTransientMessage=function(e){try{if(U.isFalsy(e))return;var t=void 0,n=void 0,r={};if(!(e instanceof j.TransientMessage))return;if(t=e.getReceiverId(),n=e.getReceiverType(),r=e.getData(),U.isFalsy(t)||U.isFalsy(n))return;var o=P.getMode();return U.isFalsy(o)||o&&o!==b.APP_SETTINGS.KEYS.NO_TRANSIENT?void $.sendTransientMessage(t,n,r):void 0}catch(e){U.Logger.error("CometChat: startTyping",e)}},P.getMessageDetails=function(e){return new Promise(function(t,n){try{U.isFalsy(e)?n(new w.CometChatException(g.ERRORS.PARAMETER_MISSING)):Y.makeApiCall("getMessageDetails",{messageId:e}).then(function(e){t(C.MessageController.trasformJSONMessge(e.data))},function(e){U.Logger.error("CometChat:GetMessageDetails:",e),n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.getMessageReceipts=function(r){return new Promise(function(t,n){try{var e=U.validateMsgId(r);if(e instanceof w.CometChatException)return void n(e);U.isFalsy(r)?n(new w.CometChatException(g.ERRORS.PARAMETER_MISSING)):Y.makeApiCall("getMessageDetails",{messageId:r}).then(function(e){C.MessageController.getReceiptsFromJSON(e.data).then(function(e){t(e)},function(e){n(new w.CometChatException(e))})},function(e){U.Logger.error("CometChat:GetMessageDetails:",e),n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.getUnreadMessageCount=function(n){void 0===n&&(n=!1);var o=0;return new Promise(function(r,t){try{var e=U.validateHideMessagesFromBlockedUsers(n);if(e instanceof w.CometChatException)return void t(e);n&&(o=1),Y.makeApiCall("getMessages",{},{unread:1,count:1,hideMessagesFromBlockedUsers:o}).then(function(e){var t={},n={};e.data.map(function(e){e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE]==b.MessageConstatnts.RECEIVER_TYPE.GROUP?n[e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]:t[e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]}),r({users:t,groups:n})},function(e){t(new w.CometChatException(e.error))})}catch(e){t(new w.CometChatException(e))}})},P.getUnreadMessageCountForAllUsers=function(r){void 0===r&&(r=!1);var o=0;return new Promise(function(n,t){try{var e=U.validateHideMessagesFromBlockedUsers(r);if(e instanceof w.CometChatException)return void t(e);r&&(o=1),Y.makeApiCall("getMessages",{},{hideMessagesFromBlockedUsers:o,receiverType:b.MessageConstatnts.RECEIVER_TYPE.USER,unread:1,count:1}).then(function(e){var t={};e.data.map(function(e){t[e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]}),n(S({},t))},function(e){t(new w.CometChatException(e.error))})}catch(e){t(new w.CometChatException(e))}})},P.getUnreadMessageCountForAllGroups=function(r){void 0===r&&(r=!1);var o=0;return new Promise(function(n,t){try{var e=U.validateHideMessagesFromBlockedUsers(r);if(e instanceof w.CometChatException)return void t(e);r&&(o=1),Y.makeApiCall("getMessages",{},{hideMessagesFromBlockedUsers:o,receiverType:b.MessageConstatnts.RECEIVER_TYPE.GROUP,unread:1,count:1}).then(function(e){var t={};e.data.map(function(e){e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE]==b.MessageConstatnts.RECEIVER_TYPE.GROUP&&(t[e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT])}),n(S({},t))},function(e){t(new w.CometChatException(e.error))})}catch(e){t(new w.CometChatException(e))}})},P.getUnreadMessageCountForUser=function(o,s){void 0===s&&(s=!1);var i=0;return new Promise(function(n,t){try{var e=U.validateId(o,"user");if(e instanceof w.CometChatException)return void t(e);var r=U.validateHideMessagesFromBlockedUsers(s);if(r instanceof w.CometChatException)return void t(r);s&&(i=1),Y.makeApiCall("getUserMessages",{listId:o},{hideMessagesFromBlockedUsers:i,unread:1,count:1,uid:o}).then(function(e){var t={};e.data.map(function(e){t[e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]}),n(S({},t))},function(e){t(new w.CometChatException(e.error))})}catch(e){t(new w.CometChatException(e))}})},P.getUnreadMessageCountForGroup=function(o,s){void 0===s&&(s=!1);var i=0;return new Promise(function(n,t){try{var e=U.validateId(o,"group");if(e instanceof w.CometChatException)return void t(e);var r=U.validateHideMessagesFromBlockedUsers(s);if(r instanceof w.CometChatException)return void t(r);s&&(i=1),Y.makeApiCall("getGroupMessages",{listId:o},{hideMessagesFromBlockedUsers:i,unread:1,count:1,guid:o}).then(function(e){var t={};e.data.map(function(e){e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE]==b.MessageConstatnts.RECEIVER_TYPE.GROUP&&(t[e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]]=e[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT])}),n(S({},t))},function(e){t(new w.CometChatException(e.error))})}catch(e){t(new w.CometChatException(e))}})},P.editMessage=function(r){return new Promise(function(t,n){try{var e=U.validateMsgId(r.getId());if(e instanceof w.CometChatException)return void n(e);Y.makeApiCall("updateMessage",{messageId:r.getId()},r).then(function(e){t(C.MessageController.trasformJSONMessge(e.data).getActionOn())},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.deleteMessage=function(r){return new Promise(function(t,n){try{var e=U.validateMsgId(r);if(e instanceof w.CometChatException)return void n(e);Y.makeApiCall("deleteMessage",{messageId:r},{id:r}).then(function(e){t(C.MessageController.trasformJSONMessge(e.data).getActionOn())},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.getOnlineUserCount=function(){return new Promise(function(r,o){try{U.getAppSettings().then(function(e){var t=U.format((new u.EndpointFactory).wsApi,U.getChatHost(e),b.ONLINE_MEMBER_COUNT_API.ENDPOINTS.GET_ONLINE_MEMBER_COUNT),n={appId:P.appId,Authorization:P.jwt,Accept:"application/json","Content-Type":"application/json"};Y.postData(t,"POST",{},n,!1).then(function(e){return e.json()}).then(function(e){return e.hasOwnProperty(b.ResponseConstants.RESPONSE_KEYS.KEY_DATA)?r(e[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA][b.ONLINE_MEMBER_COUNT_API.RESPONSE.ONLINE_USERS_COUNT]):o(new w.CometChatException(e.error))}).catch(function(){var e={error:g.FETCH_ERROR.ERROR_IN_API_CALL};return o(e)})},function(e){return o(new w.CometChatException(e))})}catch(e){return o(new w.CometChatException(e))}})},P.getOnlineGroupMemberCount=function(i){return new Promise(function(o,s){try{if(!i||0==i.length)return s(new w.CometChatException(b.ONLINE_MEMBER_COUNT_API.ERRORS.INVALID_GROUPLIST));U.getAppSettings().then(function(e){var t=U.format((new u.EndpointFactory).wsApi,U.getChatHost(e),b.ONLINE_MEMBER_COUNT_API.ENDPOINTS.GET_ONLINE_MEMBER_COUNT),n={groups:i},r={appId:P.appId,Authorization:P.jwt,Accept:"application/json","Content-Type":"application/json"};Y.postData(t,"POST",n,r,!1).then(function(e){return e.json()}).then(function(e){return e.hasOwnProperty(b.ResponseConstants.RESPONSE_KEYS.KEY_DATA)?o(e[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA][b.ONLINE_MEMBER_COUNT_API.RESPONSE.GROUPS]):s(new w.CometChatException(e.error))}).catch(function(){var e={error:g.FETCH_ERROR.ERROR_IN_API_CALL};return s(e)})},function(e){return s(new w.CometChatException(e))})}catch(e){return s(new w.CometChatException(e))}})},P.createUser=function(o,s){return new Promise(function(n,t){try{if(U.isFalsy(s))return void t(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.GENERAL_ERROR.INVALID),"AUTH_KEY","AUTH_KEY","AUTH_KEY","AUTH_KEY"))));P.apiKey=s;var e=U.validateCreateUser(o);if(e instanceof w.CometChatException)return void t(e);if(!(o instanceof G.User)){var r=void 0;if(!o.hasOwnProperty(b.UserConstants.UID))return void t(new w.CometChatException(g.ERRORS.PARAMETER_MISSING));if(!o.hasOwnProperty(b.UserConstants.NAME))return void t(new w.CometChatException(g.ERRORS.PARAMETER_MISSING));r=new G.User(o[b.UserConstants.UID],o[b.UserConstants.NAME]),o.hasOwnProperty(b.UserConstants.AVATAR)&&r.setAvatar(o[b.UserConstants.AVATAR]),o.hasOwnProperty(b.UserConstants.ROLE)&&r.setRole(o[b.UserConstants.ROLE]),o.hasOwnProperty(b.UserConstants.META_DATA)&&r.setMetadata(o[b.UserConstants.META_DATA]),o.hasOwnProperty(b.UserConstants.LINK)&&r.setLink(o[b.UserConstants.LINK]),o.hasOwnProperty(b.UserConstants.STATUS_MESSAGE)&&r.setStatusMessage(o[b.UserConstants.STATUS_MESSAGE]),o.hasOwnProperty(b.UserConstants.TAGS)&&r.setTags(o[b.UserConstants.TAGS]),o=r}Y.makeApiCall("createUser",{},o).then(function(e){var t=h.UsersController.trasformJSONUser(e.data);n(t)},function(e){t(new w.CometChatException(e.error))})}catch(e){t(new w.CometChatException(e))}})},P.updateUser=function(r,i){var a=this;return new Promise(function(o,t){try{if(U.isFalsy(i))return void t(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.GENERAL_ERROR.INVALID),"AUTH_KEY","AUTH_KEY","AUTH_KEY","AUTH_KEY"))));P.apiKey=i;var e=U.validateUpdateUser(r);if(e instanceof w.CometChatException)return void t(e);if(!(r instanceof G.User)){var n=void 0;if(!r.hasOwnProperty(b.UserConstants.UID))return void t(new w.CometChatException(g.ERRORS.PARAMETER_MISSING));n=new G.User(r[b.UserConstants.UID]),r.hasOwnProperty(b.UserConstants.NAME)&&n.setName(r[b.UserConstants.NAME]),r.hasOwnProperty(b.UserConstants.AVATAR)&&n.setAvatar(r[b.UserConstants.AVATAR]),r.hasOwnProperty(b.UserConstants.ROLE)&&n.setRole(r[b.UserConstants.ROLE]),r.hasOwnProperty(b.UserConstants.META_DATA)&&n.setMetadata(r[b.UserConstants.META_DATA]),r.hasOwnProperty(b.UserConstants.LINK)&&n.setLink(r[b.UserConstants.LINK]),r.hasOwnProperty(b.UserConstants.STATUS_MESSAGE)&&n.setStatusMessage(r[b.UserConstants.STATUS_MESSAGE]),r.hasOwnProperty(b.UserConstants.TAGS)&&n.setTags(r[b.UserConstants.TAGS]),r=n}var s=r.uid;Y.makeApiCall("updateUser",{uid:s},r).then(function(r){if(a.user&&s.toLocaleLowerCase()===a.user.getUid().toLocaleLowerCase())d.LocalStorage.getInstance().get("user").then(function(e){if(e){var t=h.UsersController.trasformJSONUser(r.data),n=r.data;n.wsChannel=e.wsChannel,n.authToken=P.authToken,n.status=b.PresenceConstatnts.STATUS.ONLINE,e.jwt&&(n.jwt=e.jwt),P.user=new G.Me(n),a.localStorage.set("user",P.user),o(t)}});else{var e=h.UsersController.trasformJSONUser(r.data);o(e)}},function(e){t(new w.CometChatException(e.error))})}catch(e){t(new w.CometChatException(e))}})},P.updateCurrentUserDetails=function(o){var s=this;return new Promise(function(r,t){try{o.uid=s.user.uid;var e=U.validateUpdateUser(o);if(e instanceof w.CometChatException)return void t(e);if(!(o instanceof G.User)){var n=void 0;o.hasOwnProperty(b.UserConstants.UID)&&(n=new G.User(o[b.UserConstants.UID])),o.hasOwnProperty(b.UserConstants.NAME)&&n.setName(o[b.UserConstants.NAME]),o.hasOwnProperty(b.UserConstants.AVATAR)&&n.setAvatar(o[b.UserConstants.AVATAR]),o.hasOwnProperty(b.UserConstants.ROLE)&&n.setRole(o[b.UserConstants.ROLE]),o.hasOwnProperty(b.UserConstants.META_DATA)&&n.setMetadata(o[b.UserConstants.META_DATA]),o.hasOwnProperty(b.UserConstants.LINK)&&n.setLink(o[b.UserConstants.LINK]),o.hasOwnProperty(b.UserConstants.STATUS_MESSAGE)&&n.setStatusMessage(o[b.UserConstants.STATUS_MESSAGE]),o.hasOwnProperty(b.UserConstants.TAGS)&&n.setTags(o[b.UserConstants.TAGS]),o=n}Y.makeApiCall("updateMyDetails",{},o).then(function(e){var t=h.UsersController.trasformJSONUser(e.data),n=P.user=new G.Me(e.data);n.setStatus(b.PresenceConstatnts.STATUS.ONLINE),P.localStorage.set("user",n),r(t)},function(e){t(new w.CometChatException(e.error))})}catch(e){t(new w.CometChatException(e))}})},P.getUser=function(r){return new Promise(function(n,t){try{"object"==typeof r&&r.hasOwnProperty("uid")&&(r=r.uid);var e=U.validateId(r,"user");if(e instanceof w.CometChatException)return void t(e);Y.makeApiCall("user",{uid:r}).then(function(e){var t=h.UsersController.trasformJSONUser(e.data);n(t)}).catch(function(e){t(new w.CometChatException(e.error))})}catch(e){t(new w.CometChatException(e))}})},P.getLoggedInUser=function(){var l=this;return new Promise(function(u,p){try{P.localStorage.get(b.LOCAL_STORE.KEY_USER).then(function(e){if(e)u(P.user=new G.Me(e));else{var s="",i="",a=b.APPINFO.platform,c=b.APPINFO.sdkVersion,E=b.APPINFO.apiVersion;P.keyStore.get(b.LOCAL_STORE.KEY_DEVICE_ID).then(function(e){if(i=e,navigator&&(s=navigator.userAgent),null==i){var t=Z(),n=(new Date).getTime();i=l.appId+"_"+t+"_"+n,P.keyStore.set(b.LOCAL_STORE.KEY_DEVICE_ID,i)}var r={version:c,apiVersion:E,userAgent:s};U.isFalsy(l.platform)||(r.platform=l.platform),U.isFalsy(l.language)||(r.language=l.language),U.isFalsy(l.resource)||(r.resource=l.resource);var o={platform:a,deviceId:i,appInfo:r};Y.makeApiCall("updateMyDetails",{},o,!1).then(function(e){e.data.jwt&&(P.jwt=e.data.jwt);var t=e.data.settings;t&&(d.LocalStorage.getInstance().set("app_settings",t),t[b.APP_SETTINGS.KEYS.MODE]&&P.setMode(t[b.APP_SETTINGS.KEYS.MODE]),t[b.APP_SETTINGS.KEYS.SETTINGS_HASH]&&(P.settingsHash=t[b.APP_SETTINGS.KEYS.SETTINGS_HASH]),t[b.APP_SETTINGS.KEYS.SETTINGS_HASH_RECEIVED_AT]&&(P.settingsHashReceivedAt=t[b.APP_SETTINGS.KEYS.SETTINGS_HASH_RECEIVED_AT]),t[b.APP_SETTINGS.KEYS.ANALYTICS_HOST]&&(P.analyticsHost=t[b.APP_SETTINGS.KEYS.ANALYTICS_HOST]),t[b.APP_SETTINGS.KEYS.ANALYTICS_VERSION]&&(P.analyticsVersion=t[b.APP_SETTINGS.KEYS.ANALYTICS_VERSION]),P.isAnalyticsDisabled=!!t[b.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED]),u(new G.Me(e.data))},function(e){p(new w.CometChatException(e.error))}).catch(function(e){p(new w.CometChatException(e))})})}})}catch(e){p(new w.CometChatException(e))}})},P.getLoggedinUser=function(){return new Promise(function(t,n){try{P.localStorage.get(b.LOCAL_STORE.KEY_USER).then(function(e){t(e?new G.User(e):null)},function(e){t(null)})}catch(e){n(new w.CometChatException(e))}})},P.blockUsers=function(r){return new Promise(function(t,n){try{var e=U.validateArray(r,"blockUsers");if(e instanceof w.CometChatException)return void n(e);U.isFalsy(r)?n(new w.CometChatException(g.USERS_REQUEST_ERRORS.EMPTY_USERS_LIST)):Y.makeApiCall("blockUsers",{},{blockedUids:r}).then(function(e){t(e.data)},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.unblockUsers=function(r){return new Promise(function(t,n){try{var e=U.validateArray(r,"unblockUsers");if(e instanceof w.CometChatException)return void n(e);U.isFalsy(r)?n(new w.CometChatException(g.USERS_REQUEST_ERRORS.EMPTY_USERS_LIST)):Y.makeApiCall("unblockUsers",{},{blockedUids:r}).then(function(e){t(e.data)},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.getConversation=function(i,a){return new Promise(function(n,r){try{var e=U.validateConversationType(a);if(e instanceof w.CometChatException)return void r(e);var t=U.validateId(i,a);if(t instanceof w.CometChatException)return void r(t);a=a.toLowerCase(),i=i.toLowerCase();var o={},s="";a===b.MessageConstatnts.RECEIVER_TYPE.GROUP?(s="getGroupConversation",o.guid=i):(s="getUserConversation",o.uid=i),Y.makeApiCall(s,o).then(function(e){if(e.data){var t=e.data;n(B.ConversationController.trasformJSONConversation(t.conversationId,t.conversationType,t.lastMessage,t.conversationWith,parseInt(t.unreadMessageCount),t.tags?t.tags:[]))}else r(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.ConversationErrors.CONVERSATION_NOT_FOUND),a,i))))},function(e){r(new w.CometChatException(e.error))})}catch(e){r(new w.CometChatException(e))}})},P.tagConversation=function(i,a,c){return void 0===c&&(c=[]),new Promise(function(n,r){try{var e=U.validateConversationType(a);if(e instanceof w.CometChatException)return void r(e);var t=U.validateId(i,a);if(t instanceof w.CometChatException)return void r(t);a=a.toLowerCase(),i=i.toLowerCase();var o={},s="";a===b.MessageConstatnts.RECEIVER_TYPE.GROUP?(s="updateGroupConversation",o.guid=i):(s="updateUserConversation",o.uid=i),Y.makeApiCall(s,o,{tags:c}).then(function(e){if(e.data){var t=e.data;n(B.ConversationController.trasformJSONConversation(t.conversationId,t.conversationType,t.lastMessage,t.conversationWith,parseInt(t.unreadMessageCount),t.tags?t.tags:[]))}else r(new w.CometChatException(JSON.parse(U.format(JSON.stringify(b.ConversationErrors.CONVERSATION_NOT_FOUND),a,i))))},function(e){r(new w.CometChatException(e.error))})}catch(e){r(new w.CometChatException(e))}})},P.deleteConversation=function(i,a){return new Promise(function(t,n){try{var e=U.validateConversationType(a);if(e instanceof w.CometChatException)return void n(e);var r=U.validateId(i,a);if(r instanceof w.CometChatException)return void n(r);var o={},s="";a=a.toLowerCase(),i=i.toLowerCase(),a===b.MessageConstatnts.RECEIVER_TYPE.GROUP?(s="deleteGroupConversation",o.guid=i):(s="deleteUserConversation",o.uid=i),Y.makeApiCall(s,o).then(function(e){t("Conversation deleted successfully.")},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.createGroup=function(o){return new Promise(function(t,n){try{var e=U.validateCreateGroup(o);if(e instanceof w.CometChatException)return void n(e);if(!(o instanceof a.Group)){var r=void 0;if(!o.hasOwnProperty(b.GroupConstants.KEYS.GUID))return void n(new w.CometChatException(g.ERRORS.PARAMETER_MISSING));if(!o.hasOwnProperty(b.GroupConstants.KEYS.NAME))return void n(new w.CometChatException(g.ERRORS.PARAMETER_MISSING));if(r=new a.Group(o[b.GroupConstants.KEYS.GUID],o[b.GroupConstants.KEYS.NAME],""),o.hasOwnProperty(b.GroupConstants.KEYS.TYPE))if(o[b.GroupConstants.KEYS.TYPE].toLocaleLowerCase()==b.GroupType.Password){if(!o.hasOwnProperty(b.GroupConstants.KEYS.PASSWORD))return void n(new w.CometChatException(g.GROUP_CREATION_ERRORS.EMPTY_PASSWORD));r.setType(b.GROUP_TYPE.PASSWORD),r.setPassword(o[b.GroupConstants.KEYS.PASSWORD])}else r.setType(o[b.GroupConstants.KEYS.TYPE]);else r.setType(b.GROUP_TYPE.PUBLIC);o.hasOwnProperty(b.GroupConstants.KEYS.ICON)&&r.setIcon(o[b.GroupConstants.KEYS.ICON]),o.hasOwnProperty(b.GroupConstants.KEYS.DESCRIPTION)&&r.setDescription(o[b.GroupConstants.KEYS.DESCRIPTION]),o.hasOwnProperty(b.GroupConstants.KEYS.TAGS)&&r.setTags(o[b.GroupConstants.KEYS.TAGS]),o=r}Y.makeApiCall("createGroup",{},o).then(function(e){T.GroupsController.trasformJSONGroup(e.data).setHasJoined(!0),t(T.GroupsController.trasformJSONGroup(e.data))},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.getGroup=function(r){return new Promise(function(t,n){try{"object"==typeof r&&r.hasOwnProperty("guid")&&(r=r.guid);var e=U.validateId(r,"group");if(e instanceof w.CometChatException)return void n(e);Y.makeApiCall("getGroup",{guid:r}).then(function(e){t(T.GroupsController.trasformJSONGroup(e.data))},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.joinGroup=function(o,s,i){return void 0===s&&(s=b.GroupType.Public),void 0===i&&(i=""),new Promise(function(n,t){try{var e=U.validateJoinGroup(o,s,i);if(e instanceof w.CometChatException)return void t(e);var r=void 0;"object"==typeof o&&(o.hasOwnProperty(b.GroupConstants.KEYS.GUID)?(o.hasOwnProperty(b.GroupConstants.KEYS.TYPE)&&(s=o[b.GroupConstants.KEYS.TYPE],o[b.GroupConstants.KEYS.TYPE].toLocaleLowerCase()===b.GroupType.Password&&o.hasOwnProperty(b.GroupConstants.KEYS.PASSWORD)&&(i=o[b.GroupConstants.KEYS.PASSWORD])),o=o[b.GroupConstants.KEYS.GUID]):t(new w.CometChatException(g.ERRORS.PARAMETER_MISSING))),r=U.isFalsy(i)?new a.Group(o,"name",s):new a.Group(o,"name",s,i),Y.makeApiCall("joinGroup",r,r).then(function(e){var t=T.GroupsController.trasformJSONGroup(e.data[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA][b.ActionConstatnts.ACTION_KEYS.ENTITIES][b.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][b.ActionConstatnts.ACTION_KEYS.ENTITY]);t.setHasJoined(!0),n(t)},function(e){t(new w.CometChatException(e.error))})}catch(e){t(new w.CometChatException(e))}})},P.updateGroup=function(o){return new Promise(function(t,n){try{var e=U.validateUpdateGroup(o);if(e instanceof w.CometChatException)return void n(e);if(!(o instanceof a.Group)){var r=void 0;if(!o.hasOwnProperty(b.GroupConstants.KEYS.GUID))return void n(new w.CometChatException(g.ERRORS.PARAMETER_MISSING));r=new a.Group(b.GroupConstants.KEYS.GUID,"",""),o.hasOwnProperty(b.GroupConstants.KEYS.TYPE)?r.setType(o[b.GroupConstants.KEYS.TYPE]):(o[b.GroupConstants.KEYS.TYPE]=b.GROUP_TYPE.PUBLIC,r.setType[b.GROUP_TYPE.PUBLIC]),o.hasOwnProperty(b.GroupConstants.KEYS.NAME)&&r.setName(o[b.GroupConstants.KEYS.NAME]),o.hasOwnProperty(b.GroupConstants.KEYS.ICON)&&r.setIcon(o[b.GroupConstants.KEYS.ICON]),o.hasOwnProperty(b.GroupConstants.KEYS.DESCRIPTION)&&r.setDescription(o[b.GroupConstants.KEYS.DESCRIPTION]),o.hasOwnProperty(b.GroupConstants.KEYS.TAGS)&&r.setTags(o[b.GroupConstants.KEYS.TAGS]),o=r}Y.makeApiCall("updateGroup",o,o).then(function(e){t(T.GroupsController.trasformJSONGroup(e.data))},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.deleteGroup=function(r){return new Promise(function(t,n){try{var e=U.validateId(r,"group");if(e instanceof w.CometChatException)return void n(e);Y.makeApiCall("deleteGroup",{guid:r}).then(function(e){t(!0)},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.leaveGroup=function(r){return new Promise(function(t,n){try{var e=U.validateId(r,"group");if(e instanceof w.CometChatException)return void n(e);Y.makeApiCall("leaveGroup",{guid:r}).then(function(e){t(!0)},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.kickGroupMember=function(o,s){return new Promise(function(t,n){try{var e=U.validateId(o,"group");if(e instanceof w.CometChatException)return void n(e);var r=U.validateId(s,"user");if(r instanceof w.CometChatException)return void n(r);Y.makeApiCall("kickGroupMembers",{guid:o,uid:s}).then(function(e){t(!0)},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.updateGroupMemberScope=function(s,i,a){return new Promise(function(t,n){try{var e=U.validateId(s,"group");if(e instanceof w.CometChatException)return void n(e);var r=U.validateId(i,"user");if(r instanceof w.CometChatException)return void n(r);var o=U.validateScope(a);if(o instanceof w.CometChatException)return void n(o);Y.makeApiCall("changeScopeOfMember",{guid:s,uid:i},{scope:a}).then(function(e){t(!0)},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.banGroupMember=function(o,s){return new Promise(function(t,n){try{var e=U.validateId(o,"group");if(e instanceof w.CometChatException)return void n(e);var r=U.validateId(s,"user");if(r instanceof w.CometChatException)return void n(r);Y.makeApiCall("banGroupMember",{guid:o,uid:s}).then(function(e){t(!0)},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.unbanGroupMember=function(o,s){return new Promise(function(t,n){try{var e=U.validateId(o,"group");if(e instanceof w.CometChatException)return void n(e);var r=U.validateId(s,"user");if(r instanceof w.CometChatException)return void n(r);Y.makeApiCall("unbanGroupMember",{guid:o,uid:s}).then(function(e){t(!0)},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.addMembersToGroup=function(i,a,c){var E=[],u=[],p=[],l=[];return new Promise(function(e,t){try{var n=U.validateId(i,"group");if(n instanceof w.CometChatException)return void t(n);var r=U.validateArray(a,"groupMembers");if(r instanceof w.CometChatException)return void t(r);if(c){var o=U.validateArray(c,"bannedMembers");if(o instanceof w.CometChatException)return void t(o)}U.isFalsy(a)&&U.isFalsy(c)?t(new w.CometChatException({})):U.isFalsy(a)||U.isFalsy(c)?U.isFalsy(a)?c.map(function(e){l.push(e)}):(a.filter(function(e){if(e.getScope()==b.GROUP_MEMBER_SCOPE.ADMIN)return!0}).map(function(e){E.push(e.getUid())}),a.filter(function(e){if(e.getScope()==b.GROUP_MEMBER_SCOPE.MODERATOR)return!0}).map(function(e){u.push(e.getUid())}),a.filter(function(e){if(e.getScope()==b.GROUP_MEMBER_SCOPE.PARTICIPANT)return!0}).map(function(e){p.push(e.getUid())})):(a.filter(function(e){if(e.getScope()==b.GROUP_MEMBER_SCOPE.ADMIN)return!0}).map(function(e){E.push(e.getUid())}),a.filter(function(e){if(e.getScope()==b.GROUP_MEMBER_SCOPE.MODERATOR)return!0}).map(function(e){u.push(e.getUid())}),a.filter(function(e){if(e.getScope()==b.GROUP_MEMBER_SCOPE.PARTICIPANT)return!0}).map(function(e){p.push(e.getUid())}),c.map(function(e){l.push(e)}));var s={};U.isFalsy(E)||(s=S(S({},s),{admins:E})),U.isFalsy(p)||(s=S(S({},s),{participants:p})),U.isFalsy(u)||(s=S(S({},s),{moderators:u})),U.isFalsy(l)||(s=S(S({},s),{usersToBan:l})),Y.makeApiCall("addMemebersToGroup",{guid:i},s).then(function(t){var n={};Object.keys(t.data.admins).map(function(e){t.data.admins[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?n[e]=b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:n[e]=t.data.admins[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(t.data.participants).map(function(e){t.data.participants[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?n[e]=b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:n[e]=t.data.participants[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(t.data.moderators).map(function(e){t.data.moderators[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?n[e]=b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:n[e]=t.data.moderators[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(t.data.usersToBan).map(function(e){t.data.usersToBan[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?n[e]=b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:n[e]=t.data.usersToBan[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),e(n)},function(e){t(new w.CometChatException(e.error))})}catch(e){t(new w.CometChatException(e))}})},P.transferGroupOwnership=function(o,s){return new Promise(function(n,t){try{var e=U.validateId(o,"group");if(e instanceof w.CometChatException)return void t(e);var r=U.validateId(s,"user");if(r instanceof w.CometChatException)return void t(r);Y.makeApiCall("transferOwnership",{guid:o},{owner:s}).then(function(e){var t;t=e&&e.data&&e.data.message?e.data.message:"Ownership transferred to user "+s+" for the group with guid "+o+".",n(t)},function(e){t(new w.CometChatException(e.error))})}catch(e){t(new w.CometChatException(e))}})},P.createGroupWithMembers=function(i,a,c){var E=[],u=[],p=[],l=[];return new Promise(function(s,t){try{var e=U.validateCreateGroup(i);if(e instanceof w.CometChatException)return void t(e);if(a&&0<a.length){var n=U.validateArray(a,"groupMembers");if(n instanceof w.CometChatException)return void t(n);a.map(function(e){e.getScope()===b.GROUP_MEMBER_SCOPE.ADMIN&&E.push(e.getUid()),e.getScope()===b.GROUP_MEMBER_SCOPE.MODERATOR&&u.push(e.getUid()),e.getScope()===b.GROUP_MEMBER_SCOPE.PARTICIPANT&&p.push(e.getUid())})}if(c&&0<c.length){var r=U.validateArray(c,"bannedMembers");if(r instanceof w.CometChatException)return void t(r);c.map(function(e){l.push(e)})}var o={};o=S({},i),U.isFalsy(E)||(o.members=S(S({},o.members),{admins:E})),U.isFalsy(p)||(o.members=S(S({},o.members),{participants:p})),U.isFalsy(u)||(o.members=S(S({},o.members),{moderators:u})),U.isFalsy(l)||(o.members=S(S({},o.members),{usersToBan:l})),Y.makeApiCall("createGroup",{},o).then(function(e){var t={members:{}},n=e.data.members.data?e.data.members.data:{admins:{},moderators:{},participants:{},usersToBan:{}};Object.keys(n.admins).map(function(e){n.admins[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?t.members[e]=b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:t.members[e]=n.admins[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(n.participants).map(function(e){n.participants[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?t.members[e]=b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:t.members[e]=n.participants[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(n.moderators).map(function(e){n.moderators[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?t.members[e]=b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:t.members[e]=n.moderators[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),Object.keys(n.usersToBan).map(function(e){n.usersToBan[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS]?t.members[e]=b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS:t.members[e]=n.usersToBan[e][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE]}),delete e.data.members;var r=e.data,o=T.GroupsController.trasformJSONGroup(r);o.setHasJoined(!0),t=S(S({},t),{group:o}),s(t)},function(e){t(new w.CometChatException(e.error))})}catch(e){t(new w.CometChatException(e))}})},P.initiateCall=function(t){var o=this;return new Promise(function(n,r){if(U.isCallingComponentInstalled()){var e=o.getActiveCall();if(null===e)try{U.isFalsy(JSON.parse(JSON.stringify(t)).sender)?U.isFalsy(e)?(t.setStatus(b.CallConstants.CALL_STATUS.INITIATED),t.receiver=t.receiverId.toString(),delete t.receiverId,Y.makeApiCall("createCallSession",{},t).then(function(e){var t=C.MessageController.trasformJSONMessge(e[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);K.CallController.getInstance().initiateCall(t).then(function(e){n(t)}).catch(function(e){r(new w.CometChatException(e))})},function(e){r(new w.CometChatException(e.error))})):r(new w.CometChatException(b.CALL_ERROR.ERROR_IN_CALLING)):K.CallController.getInstance().initiateCall(t).then(function(e){n(Object.assign(t))}).catch(function(e){r(new w.CometChatException(e))})}catch(e){r(new w.CometChatException(e))}else r(new w.CometChatException(b.CALL_ERROR.CALL_ALREADY_INITIATED))}else r(new w.CometChatException(b.CALL_ERROR.MODULE_NOT_INSTALLED))})},P.acceptCall=function(r){var o=this;return new Promise(function(n,t){if(U.isCallingComponentInstalled())if(null===o.getActiveCall())try{var e={};e[b.CallConstants.CALL_KEYS.CALL_STATUS]=b.CallConstants.CALL_STATUS.ONGOING,Y.makeApiCall("updateCallSession",{sessionid:r},e).then(function(e){var t=C.MessageController.trasformJSONMessge(e[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);K.CallController.getInstance().onCallStarted(t),n(t)},function(e){t(new w.CometChatException(e.error))})}catch(e){t(new w.CometChatException(e))}else t(new w.CometChatException(b.CALL_ERROR.CANNOT_ACCEPT_CALL));else t(new w.CometChatException(b.CALL_ERROR.MODULE_NOT_INSTALLED))})},P.rejectCall=function(e,t){try{switch(t){case b.CallConstants.CALL_STATUS.REJECTED:return this.rejectIncomingCall(e);case b.CallConstants.CALL_STATUS.CANCELLED:return this.cancelCall(e);case b.CallConstants.CALL_STATUS.BUSY:return this.sendBusyResponse(e);default:return this.endCall(e)}}catch(e){U.Logger.error("CometChat: rejectCall",e)}},P.endCall=function(o){var s=this;return new Promise(function(n,t){if(U.isCallingComponentInstalled()){var r=s.getActiveCall();if(null!==r){if(r.getSessionId()===o)try{var e={};e[b.CallConstants.CALL_KEYS.CALL_STATUS]=b.CallConstants.CALL_STATUS.ENDED,r.getJoinedAt()&&(e[b.CallConstants.CALL_KEYS.CALL_JOINED_AT]=r.getJoinedAt()),Y.makeApiCall("updateCallSession",{sessionid:o},e).then(function(e){K.CallController.getInstance().endSession();var t=C.MessageController.trasformJSONMessge(e[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);n(t),K.CallController.getInstance().getCallListner()&&K.CallController.getInstance().getCallListner()._eventListener.onCallEnded(t),K.CallController.getInstance().endCall()},function(e){U.Logger.log("calling Log",{error:e}),K.CallController.getInstance().endSession(),r.setStatus(b.CallConstants.CALL_STATUS.ENDED),n(r),K.CallController.getInstance().getCallListner()&&K.CallController.getInstance().getCallListner()._eventListener.onCallEnded(r),K.CallController.getInstance().endCall()})}catch(e){t(new w.CometChatException(e))}}else K.CallController.getInstance().endSession(),K.CallController.getInstance().getCallListner()&&K.CallController.getInstance().getCallListner()._eventListener.onCallEnded(null),K.CallController.getInstance().endCall(),n(null)}else t(new w.CometChatException(b.CALL_ERROR.MODULE_NOT_INSTALLED))})},P.getActiveCall=function(){try{return K.CallController.getInstance().getActiveCall()}catch(e){U.Logger.error("CometChat: getActiveCall",e)}},P.startCall=function(L){return c(this,void 0,void 0,function(){var r,o,s,i,a,c,E,u,p,l,S,d,C,h,T,g,_,f,R,A,I,O,N,m,y,t,n,v=this;return D(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),o=this.getActiveCall(),S=l=!(p=u=E=c=a=!(i=!1)),d=b.CallConstants.CALL_MODE.DEFAULT,_={},R=f=!0,O=I=!(A="circle"),N=this.user,[4,U.getCallingComponentVersion()];case 1:return t=e.sent(),y=3===t?M.CometChatCalling.Calling:2===t?z:null,P.getAppSettings().then(function(e){if(g=e[b.APP_SETTINGS.KEYS.WEBRTC_HOST],e.hasOwnProperty(b.APP_SETTINGS.KEYS.ANALYTICS_HOST)?_[b.APP_SETTINGS.KEYS.ANALYTICS_HOST]=e[b.APP_SETTINGS.KEYS.ANALYTICS_HOST]:_[b.APP_SETTINGS.KEYS.ANALYTICS_HOST]=U.format(b.ANALYTICS.analyticsHost,P.appSettings.getRegion()),e.hasOwnProperty(b.APP_SETTINGS.KEYS.ANALYTICS_VERSION)?_[b.APP_SETTINGS.KEYS.ANALYTICS_VERSION]=e[b.APP_SETTINGS.KEYS.ANALYTICS_VERSION]:_[b.APP_SETTINGS.KEYS.ANALYTICS_VERSION]=b.ANALYTICS.analyticsVersion,e.hasOwnProperty(b.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED)?_[b.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED]=e[b.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED]:_[b.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED]=!0,e.hasOwnProperty(b.APP_SETTINGS.KEYS.ANALYTICS_USE_SSL)?_[b.APP_SETTINGS.KEYS.ANALYTICS_USE_SSL]=e[b.APP_SETTINGS.KEYS.ANALYTICS_USE_SSL]:_[b.APP_SETTINGS.KEYS.ANALYTICS_USE_SSL]=!0,L.getCallEventListener()&&K.CallController.getInstance().setCallListner(L.getCallEventListener()),y)if(U.isFalsy(v.appSettings))K.CallController.getInstance().getCallListner()&&K.CallController.getInstance().getCallListner()._eventListener.onError(new w.CometChatException(b.CALL_ERROR.NOT_INITIALIZED));else if(h=v.appSettings.getRegion())if(N)if((m=new J.RTCUser(N.getUid())).setName(N.getName()),m.setAvatar(N.getAvatar()),m.setResource(P.getSessionId()),P.appId)if(T=P.appId,U.isFalsy(L))K.CallController.getInstance().getCallListner()&&K.CallController.getInstance().getCallListner()._eventListener.onError(new w.CometChatException(b.CALL_ERROR.CALL_SETTINGS_REQUIRED));else{if(o){var t=o.getType();i=t===b.CallConstants.CALL_TYPE.AUDIO,s=o.getSessionId()}else{if(i=L.isAudioOnlyCall(),U.isFalsy(L.getSessionId()))return void(K.CallController.getInstance().getCallListner()&&K.CallController.getInstance().getCallListner()._eventListener.onError(new w.CometChatException(b.CALL_ERROR.SESSION_ID_REQUIRED)));s=("v1."+h+"."+P.getAppId()+"."+L.getSessionId()).toLowerCase()}if(s){a=L.isDefaultLayoutEnabled(),c=L.isPauseVideoButtonEnabled(),E=L.isMuteAudioButtonEnabled(),u=L.isEndCallButtonEnabled(),p=L.isAudioModeButtonEnabled(),d=L.getMode(),l=L.getStartWithAudioMuted(),S=L.getStartWithVideoMuted(),C=L.getDefaultAudioMode(),R=i?(f=L.isAudioToVideoButtonEnabled(),!1):(f=!1,L.isSwitchCameraButtonEnabled()),A=L.getAvatarMode(),I=L.isRecordingButtonEnabled(),O=L.shouldStartRecordingOnCallStart();var n={uid:N.getUid(),sessionId:s};P.getJWT(n).then(function(e){e.hasOwnProperty("token")?(m.setJWT(e.token),r=(new V.CallSettingsBuilder).setSessionID(s).enableDefaultLayout(a).setIsAudioOnlyCall(i).setUser(m).setRegion(h).setAppId(T).setDomain(g).showEndCallButton(u).showMuteAudioButton(E).showPauseVideoButton(c).showAudioModeButton(p).setMode(d).startWithAudioMuted(l).startWithVideoMuted(S).setAnalyticsSettings(_).setDefaultAudioMode(C).showSwitchToVideoCallButton(f).showSwitchCameraButton(R).setAvatarMode(A).showRecordingButton(I).startRecordingOnCallStart(O).build(),y.startCall({callsettings:JSON.stringify(r)}),y.addListener("ON_CALL_END_BUTTON_PRESSED",function(e){U.Logger.log("CALLING_EVENT","ON_CALL_END_BUTTON_PRESSED"),o?P.endCall(r.getSessionId()):K.CallController.getInstance().getCallListner()&&K.CallController.getInstance().getCallListner()._eventListener.onCallEnded(null),y.endCallSession()}),y.addListener("ON_CALL_ENDED",function(e){U.Logger.log("CALLING_EVENT","ON_CALL_ENDED"),o&&(P.endCall(r.getSessionId()),y.endCallSession())}),y.addListener("ON_USER_JOINED",function(e){if(U.Logger.log("CALLING_EVENT","ON_USER_JOINED"),e){var t=void 0,n=e;U.isFalsy(n.uid)||U.isFalsy(n.name)||((t=new G.User(n)).setStatus("online"),P.user.getUid().toLowerCase()!=t.getUid().toLowerCase()&&K.CallController.getInstance().getCallListner()&&(U.isFalsy(K.CallController.getInstance().getCallListner()._eventListener.onUserJoined)||K.CallController.getInstance().getCallListner()._eventListener.onUserJoined(t)))}}),y.addListener("ON_USER_LEFT",function(e){if(U.Logger.log("CALLING_EVENT","ON_USER_LEFT"),e){var t=void 0,n=e;U.isFalsy(n.uid)||U.isFalsy(n.name)||((t=new G.User(n)).setStatus("online"),P.user.getUid().toLowerCase()!=t.getUid().toLowerCase()&&K.CallController.getInstance().getCallListner()&&(U.isFalsy(K.CallController.getInstance().getCallListner()._eventListener.onUserLeft)||K.CallController.getInstance().getCallListner()._eventListener.onUserLeft(t)))}}),y.addListener("ON_USER_LIST_CHANGED",function(e){U.Logger.log("CALLING_EVENT","ON_USER_LIST_CHANGED");var n=[];e&&e.userList&&0<e.userList.length&&(e.userList.map(function(e){if(!U.isFalsy(e.uid)&&!U.isFalsy(e.name)){var t=new G.User(e);t.setStatus("online"),n.push(t)}}),K.CallController.getInstance().getCallListner()&&(U.isFalsy(K.CallController.getInstance().getCallListner()._eventListener.onUserListUpdated)||K.CallController.getInstance().getCallListner()._eventListener.onUserListUpdated(n)))}),y.addListener("ON_AUDIO_MODE_CHANGED",function(e){var r=[];e&&e.modes&&0<e.modes.length&&(e.modes.map(function(e){var t="",n=!1;e.hasOwnProperty("mode")&&(t=e.mode),e.hasOwnProperty("isSelected")&&(n=e.isSelected),e.hasOwnProperty("type")&&(t=e.type),e.hasOwnProperty("selected")&&(n=e.selected),r.push(new Q.AudioMode(t,n))}),K.CallController.getInstance().getCallListner()&&(U.isFalsy(K.CallController.getInstance().getCallListner()._eventListener.onAudioModesUpdated)||K.CallController.getInstance().getCallListner()._eventListener.onAudioModesUpdated(r)))}),z.addListener("ON_SWITCHED_TO_VIDEO",function(e){if(U.Logger.info("onCallSwitchedToVideo received in SDK = ",e),e.hasOwnProperty("initiator")&&e.hasOwnProperty("sessionId")&&!U.isFalsy(e.initiator.uid)&&!U.isFalsy(e.sessionId)&&e.hasOwnProperty("accepted")&&!U.isFalsy(e.accepted.uid)){var t=e.sessionId,n=new G.User(e.initiator);n.setStatus("online");var r=new G.User(e.accepted);if(r.setStatus("online"),K.CallController.getInstance().getCallListner()&&(U.isFalsy(K.CallController.getInstance().getCallListner()._eventListener.onCallSwitchedToVideo)||K.CallController.getInstance().getCallListner()._eventListener.onCallSwitchedToVideo(t,n,r)),e.initiator.uid.toLowerCase()===P.user.getUid().toLowerCase()&&!e.sessionId.includes("v1."))try{Y.makeApiCall("updateCallType",{sessionid:t},{type:"video"}).then(function(e){U.Logger.log("API :: response",e)},function(e){U.Logger.error("CallController :: onSwitchedToVideo",e)})}catch(e){U.Logger.error("CallController :: onSwitchedToVideo",e)}}}),z.addListener("ON_RECORDING_TOGGLED",function(e){if(e&&e.hasOwnProperty("user")&&e.hasOwnProperty("recordingStarted")&&!U.isFalsy(e.user.uid)&&!U.isFalsy(e.user.name)){var t=new G.User(e.user);t.setStatus("online");var n=e.recordingStarted;K.CallController.getInstance().getCallListner()&&(n?U.isFalsy(K.CallController.getInstance().getCallListner()._eventListener.onRecordingStarted)||K.CallController.getInstance().getCallListner()._eventListener.onRecordingStarted(t):U.isFalsy(K.CallController.getInstance().getCallListner()._eventListener.onRecordingStopped)||K.CallController.getInstance().getCallListner()._eventListener.onRecordingStopped(t))}}),z.addListener("ON_USER_MUTED",function(e){if(e&&e.hasOwnProperty("muted")&&e.hasOwnProperty("mutedBy")&&!U.isFalsy(e.muted.uid)&&!U.isFalsy(e.muted.name)&&!U.isFalsy(e.mutedBy.uid)&&!U.isFalsy(e.mutedBy.name)){var t=new G.User(e.muted);t.setStatus("online");var n=new G.User(e.mutedBy);n.setStatus("online"),K.CallController.getInstance().getCallListner()&&(U.isFalsy(K.CallController.getInstance().getCallListner()._eventListener.onUserMuted)||K.CallController.getInstance().getCallListner()._eventListener.onUserMuted(t,n))}})):K.CallController.getInstance().getCallListner()&&K.CallController.getInstance().getCallListner()._eventListener.onError(new w.CometChatException(b.CALL_ERROR.JWT_NOT_FOUND))},function(e){K.CallController.getInstance().getCallListner()&&K.CallController.getInstance().getCallListner()._eventListener.onError(new w.CometChatException(e))})}else K.CallController.getInstance().getCallListner()&&K.CallController.getInstance().getCallListner()._eventListener.onError(new w.CometChatException(b.CALL_ERROR.SESSION_ID_REQUIRED))}else K.CallController.getInstance().getCallListner()&&K.CallController.getInstance().getCallListner()._eventListener.onError(new w.CometChatException(b.CALL_ERROR.NOT_INITIALIZED));else K.CallController.getInstance().getCallListner()&&K.CallController.getInstance().getCallListner()._eventListener.onError(new w.CometChatException(b.CALL_ERROR.NOT_LOGGED_IN));else K.CallController.getInstance().getCallListner()&&K.CallController.getInstance().getCallListner()._eventListener.onError(new w.CometChatException(b.CALL_ERROR.NOT_INITIALIZED));else K.CallController.getInstance().getCallListner()&&K.CallController.getInstance().getCallListner()._eventListener.onError(new w.CometChatException(b.CALL_ERROR.MODULE_NOT_INSTALLED))}),[3,3];case 2:return n=e.sent(),U.Logger.error("CometChat: startCall",n),[3,3];case 3:return[2]}})})},P.getCallParticipantCount=function(a,c){var E=this;return new Promise(function(s,i){try{U.getAppSettings().then(function(e){if(U.isFalsy(a))return i(new w.CometChatException(b.ProsodyApiErrors.INVALID_SESSIONID));if(U.isFalsy(c))return i(new w.CometChatException(b.ProsodyApiErrors.INVALID_TYPE));var t=E.appSettings.getRegion(),n={},r=e[b.APP_SETTINGS.KEYS.WEBRTC_HOST],o=U.format((new u.EndpointFactory).prosodyApi,b.PROSODY_API.DOMAIN_PREFIX,r,b.PROSODY_API.PATH.ROOM_SIZE);"direct"===c.toLowerCase()&&(a=("v1."+t+"."+P.getAppId()+"."+a).toLowerCase()),n[b.PROSODY_API.QUERY_PARAMETERS.DOMAIN]=r,n[b.PROSODY_API.QUERY_PARAMETERS.ROOM]=a,Y.postData(o,"GET",n,{},!1).then(function(e){return e.text()}).then(function(e){var t=e?JSON.parse(e):{};return t.hasOwnProperty(b.PROSODY_API.RESPONSE.PARTICIPANTS)?s(t[b.PROSODY_API.RESPONSE.PARTICIPANTS]):s(0)}).catch(function(){var e={error:g.FETCH_ERROR.ERROR_IN_API_CALL};return i(e)})},function(e){return i(new w.CometChatException(e))})}catch(e){return i(new w.CometChatException(e))}})},P.rejectIncomingCall=function(r){return new Promise(function(n,t){try{if(U.isCallingComponentInstalled()){var e={};e[b.CallConstants.CALL_KEYS.CALL_STATUS]=b.CallConstants.CALL_STATUS.REJECTED,Y.makeApiCall("updateCallSession",{sessionid:r},e).then(function(e){var t=C.MessageController.trasformJSONMessge(e[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);n(t)},function(e){t(new w.CometChatException(e.error))})}else t(new w.CometChatException(b.CALL_ERROR.MODULE_NOT_INSTALLED))}catch(e){t(new w.CometChatException(e))}})},P.cancelCall=function(o){var s=this;return new Promise(function(n,t){var e=s.getActiveCall();if(null!==e&&e.getSessionId()===o&&e.getCallInitiator().getUid().toLocaleLowerCase()===P.user.getUid().toLocaleLowerCase())try{if(U.isCallingComponentInstalled()){var r={};r[b.CallConstants.CALL_KEYS.CALL_STATUS]=b.CallConstants.CALL_STATUS.CANCELLED,Y.makeApiCall("updateCallSession",{sessionid:o},r).then(function(e){var t=C.MessageController.trasformJSONMessge(e[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);K.CallController.getInstance().endCallSession(),n(t)},function(e){t(new w.CometChatException(e.error))})}else t(new w.CometChatException(b.CALL_ERROR.MODULE_NOT_INSTALLED))}catch(e){t(new w.CometChatException(e))}})},P.sendBusyResponse=function(r){return new Promise(function(n,t){try{if(U.isCallingComponentInstalled()){var e={};e[b.CallConstants.CALL_KEYS.CALL_STATUS]=b.CallConstants.CALL_STATUS.BUSY,Y.makeApiCall("updateCallSession",{sessionid:r},e).then(function(e){var t=C.MessageController.trasformJSONMessge(e[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);n(t)},function(e){t(new w.CometChatException(e.error))})}else t(new w.CometChatException(b.CALL_ERROR.MODULE_NOT_INSTALLED))}catch(e){t(new w.CometChatException(e))}})},P.sendUnansweredResponse=function(n){return new Promise(function(r,t){try{if(U.isCallingComponentInstalled()){var e={};e[b.CallConstants.CALL_KEYS.CALL_STATUS]=b.CallConstants.CALL_STATUS.UNANSWERED,Y.makeApiCall("updateCallSession",{sessionid:n},e).then(function(e){var t=C.MessageController.trasformJSONMessge(e[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]),n=$.getCometChatEventFromMessage(Object.assign(t,e[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]));$.publishMessages(n),r(t)},function(e){t(new w.CometChatException(e.error))})}else t(new w.CometChatException(b.CALL_ERROR.MODULE_NOT_INSTALLED))}catch(e){t(new w.CometChatException(e))}})},P.addConnectionListener=function(e,t){try{ee.addConnectionEventListener(e,t)}catch(e){U.Logger.error("CometChat: addConnectionListener",e)}},P.removeConnectionListener=function(e){try{ee.removeConnectionEventListener(e)}catch(e){U.Logger.error("CometChat: removeConnectionListener",e)}},P.addMessageListener=function(e,t){try{ee.addMessageEventListener(e,t)}catch(e){U.Logger.error("CometChat: addMessageListener",e)}},P.removeMessageListener=function(e){try{ee.removeMessageEventListener(e)}catch(e){U.Logger.error("CometChat: removeMessageListener",e)}},P.addCallListener=function(e,t){try{ee.addCallEventListener(e,t)}catch(e){U.Logger.error("CometChat: addCallListener",e)}},P.removeCallListener=function(e){try{ee.removeCallEventListener(e)}catch(e){U.Logger.error("CometChat: removeCallListener",e)}},P.addUserListener=function(e,t){try{ee.addUserEventListener(e,t)}catch(e){U.Logger.error("CometChat: addUserListener",e)}},P.removeUserListener=function(e){try{ee.removeUserEventListener(e)}catch(e){U.Logger.error("CometChat: removeUserListener",e)}},P.addGroupListener=function(e,t){try{ee.addGroupEventListener(e,t)}catch(e){U.Logger.error("CometChat: addGroupListener",e)}},P.removeGroupListener=function(e){try{ee.removeGroupEventListener(e)}catch(e){U.Logger.error("CometChat: removeGroupListener",e)}},P.addLoginListener=function(e,t){try{ee.addLoginEventListener(e,t)}catch(e){U.Logger.error("CometChat: addLoginListener",e)}},P.removeLoginListener=function(e){try{ee.removeLoginEventListener(e)}catch(e){U.Logger.error("CometChat: removeLoginListener",e)}},P.generateAuthToken=function(p){var l=this;return new Promise(function(r,o){try{var s={},i="",a="",c=b.APPINFO.platform,E=b.APPINFO.sdkVersion,u=b.APPINFO.apiVersion;navigator&&(a=navigator.userAgent),P.keyStore.get(b.LOCAL_STORE.KEY_DEVICE_ID).then(function(e){if(null==(i=e)){var t=Z(),n=(new Date).getTime();i=l.appId+"_"+t+"_"+n,P.keyStore.set(b.LOCAL_STORE.KEY_DEVICE_ID,i)}s={platform:c,deviceId:i,appInfo:{version:E,apiVersion:u,userAgent:a}},Y.makeApiCall("authToken",{uid:p},s).then(function(e){r(e.data)}).catch(function(e){o(new w.CometChatException(e.error))})},function(e){U.Logger.error("Got error while fetching data from key store",e)})}catch(e){o(new w.CometChatException(e))}})},P.tryReconnectingToWS=function(){P.WSReconnectionInProgress||P.startWSReconnectionTimer()},P.prototype.makeWSConnection=function(){P.WSLogin(P.user)},P.prototype.accidentallyDisconnected=function(){P.currentConnectionStatus=b.CONNECTION_STATUS.CONNECTING,ee.connectionHandlers.map(function(e){try{e._eventListener&&(U.isFalsy(e._eventListener.inConnecting)||e._eventListener.inConnecting())}catch(e){U.Logger.error("ConnectionHandlers: inConnecting Status",e)}}),P.tryReconnectingToWS()},P.WSLogin=function(e){var n=this;$.connection||$.WSLogin(e.getJWT(),function(e){switch(e){case W.READY_STATE.CONNECTING:(t=P.getConnectionStatus())==b.CONNECTION_STATUS.DISCONNECTED&&(n.currentConnectionStatus=b.CONNECTION_STATUS.CONNECTING,ee.connectionHandlers.map(function(e){try{e._eventListener&&(U.isFalsy(e._eventListener.inConnecting)||e._eventListener.inConnecting())}catch(e){U.Logger.error("connectionHandlers: Connecting Status",e)}}));break;case W.READY_STATE.OPEN:(t=P.getConnectionStatus())==b.CONNECTION_STATUS.CONNECTING&&(n.currentConnectionStatus=b.CONNECTION_STATUS.CONNECTED,ee.connectionHandlers.map(function(e){try{e._eventListener&&(U.isFalsy(e._eventListener.onConnected)||e._eventListener.onConnected())}catch(e){U.Logger.error("connectionHandlers: Connected Status",e)}})),P.WSReconnectionInProgress&&P.clearWSReconnectionTimer();break;case W.READY_STATE.CLOSING:break;case W.READY_STATE.CLOSED:var t;(t=P.getConnectionStatus())!==b.CONNECTION_STATUS.DISCONNECTED&&t!==b.CONNECTION_STATUS.CONNECTING&&(n.currentConnectionStatus=b.CONNECTION_STATUS.DISCONNECTED,ee.connectionHandlers.map(function(e){try{e._eventListener&&(U.isFalsy(e._eventListener.onDisconnected)||e._eventListener.onDisconnected())}catch(e){U.Logger.error("connectionHandlers: Disconnected Status",e)}})),$.connection&&($.connection=null),P.isLoggedOut||P.disconnectedByUser||n.tryReconnectingToWS()}})},P.pingAnalytics=function(){var c=this;try{P.keyStore.get("deviceId").then(function(e){var t=b.SDKHeader.platform,n="",r=e,o={version:b.SDKHeader.sdkVersion,apiVersion:b.APPINFO.apiVersion,origin:t,uts:(new Date).getTime()};U.isFalsy(c.resource)||(o.resource=c.resource),U.isFalsy(c.platform)||(o.platform=c.platform),U.isFalsy(c.language)||(o.language=c.language),navigator&&(n=navigator.userAgent);var s={appInfo:o,uid:P.user.getUid(),userAgent:n,deviceId:r,platform:b.SDKHeader.platform};U.isFalsy(P.getSessionId())||(s.wsId=P.getSessionId()),P.analyticsHost||(P.analyticsHost=U.format(b.ANALYTICS.analyticsHost,P.appSettings.getRegion())),P.analyticsVersion||(P.analyticsVersion=b.ANALYTICS.analyticsVersion);var i="https://"+P.analyticsHost+"/"+P.analyticsVersion+"/ping",a={appId:P.appId,sdk:U.format(b.SDKHeader.sdk,b.SDKHeader.platform,b.SDKHeader.sdkVersion),"Content-Type":"application/json"};P.settingsHash&&(a.settingsHash=P.settingsHash),P.settingsHashReceivedAt&&(a.settingsHashReceivedAt=P.settingsHashReceivedAt),P.jwt&&(a.Authorization="Bearer "+P.jwt),P.authToken&&(a.authToken=P.authToken),Y.postData(i,"POST",s,a,!1).then(function(e){return e.json()}).then(function(e){if(e.hasOwnProperty(b.ResponseConstants.RESPONSE_KEYS.KEY_DATA))U.Logger.log("Analytics Ping Request Data",e[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);else if(e.hasOwnProperty(b.ResponseConstants.RESPONSE_KEYS.KEY_ERROR)){var t=e[b.ResponseConstants.RESPONSE_KEYS.KEY_ERROR];U.Logger.log("Analytics Ping Request Error",new w.CometChatException(t));var n=t.code;if(n===b.Errors.ERR_SETTINGS_HASH_OUTDATED){var r=P.authToken;P.getInstance().internalRestart(r)}n===b.Errors.ERR_NO_AUTH&&c.updateJWT()}}).catch(function(e){U.Logger.error("CometChat: pingAnalytics Fetch Error",e)})})}catch(e){U.Logger.error("CometChat: pingAnalytics",e)}},P.updateJWT=function(){Y.makeApiCall("getMyDetails",{},{},!1).then(function(e){var t=e.data,n=t.settings,r=new G.Me(t);if(t.hasOwnProperty("jwt")&&t.jwt&&(P.jwt=t.jwt),d.LocalStorage.getInstance().set("user",r),n&&n[b.APP_SETTINGS.KEYS.SETTINGS_HASH]&&P.settingsHash!==n[b.APP_SETTINGS.KEYS.SETTINGS_HASH]){var o=P.getInstance().getAuthToken();P.getInstance().internalRestart(o)}U.Logger.log("CometChat: updateJWT response",e)},function(e){U.Logger.error("CometChat: updateJWT Fetch Error",e)}).catch(function(e){U.Logger.error("CometChat: updateJWT",e)})},P.startAnalyticsPingTimer=function(){var e=this;P.isAnalyticsPingStarted=!0,P.analyticsPingTimer=setInterval(function(){try{e.pingAnalytics()}catch(e){U.Logger.error("CometChat: startAnalyticsPingTimer",e)}},P.settingsInterval)},P.clearAnalyticsPingTimer=function(){try{P.isAnalyticsPingStarted=!1,clearInterval(P.analyticsPingTimer)}catch(e){U.Logger.error("CometChat: clearAnalyticsPingTimer",e)}},P.startWSReconnectionTimer=function(){P.WSReconnectionInProgress=!0,P.WSReconnectionTimer=setInterval(function(){try{P.WSLogin(P.user)}catch(e){U.Logger.error("CometChat: startWSReconnectionTimer",e)}},P.WSReconnectionTimerInterval)},P.clearWSReconnectionTimer=function(){P.WSReconnectionInProgress=!1,clearInterval(P.WSReconnectionTimer)},P.getJWT=function(s){return new Promise(function(r,o){try{X.getEndPoint("getJWT").then(function(e){var t={appId:P.appId,Accept:"application/json",authToken:P.authToken,resource:P.getSessionId(),sdk:U.format(b.SDKHeader.sdk,b.SDKHeader.platform,b.SDKHeader.sdkVersion),"Content-Type":"application/json"},n={};n[b.JWT_API.KEYS.PASSTHROUGH]=s,Y.postData(e.endpoint,e.method,n,t,!1).then(function(e){return e.json()}).then(function(e){e.hasOwnProperty(b.ResponseConstants.RESPONSE_KEYS.KEY_DATA)?r(e[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]):o(new w.CometChatException(e.error))}).catch(function(e){var t={error:g.FETCH_ERROR.ERROR_IN_API_CALL};o(new w.CometChatException(t))})},function(e){o(new w.CometChatException(e))})}catch(e){o(new w.CometChatException(e))}})},P.getConnectionStatus=function(){return this.currentConnectionStatus},P.prototype.setConnectionStatus=function(e){P.currentConnectionStatus=e},P.isExtensionEnabled=function(s){return new Promise(function(r,o){try{if(U.isFalsy(s))return o(new w.CometChatException(b.ExtensionErrors.INVALID_EXTENSION));U.getAppSettings().then(function(e){if(e.extensions){var t=e.extensions;if(0<t.length){var n=t.some(function(e){return e.id===s});return r(n)}return r(!1)}return o(new w.CometChatException(b.ExtensionErrors.EXTENSION_NOT_FOUND))},function(e){return o(new w.CometChatException(e))})}catch(e){return o(new w.CometChatException(e))}})},P.getExtensionDetails=function(i){return new Promise(function(o,s){try{if(U.isFalsy(i))return s(new w.CometChatException(b.ExtensionErrors.INVALID_EXTENSION));U.getAppSettings().then(function(e){if(e.extensions){var t=e.extensions;if(0<t.length){var n=t.filter(function(e){return e.id===i});if(0<n.length){var r=new q.CCExtension(n[0]);return o(r)}return s(new w.CometChatException(b.ExtensionErrors.EXTENSION_NOT_FOUND))}return s(new w.CometChatException(b.ExtensionErrors.EXTENSION_NOT_FOUND))}return s(new w.CometChatException(b.ExtensionErrors.EXTENSION_NOT_FOUND))},function(e){return s(new w.CometChatException(e))})}catch(e){return s(new w.CometChatException(e))}})},P.getAppSettings=function(){return new Promise(function(t,n){try{Y.makeApiCall("appSettings").then(function(e){d.LocalStorage.getInstance().set(b.LOCAL_STORE.KEY_APP_SETTINGS,e.data),t(e.data)},function(e){n(new w.CometChatException(e.error))})}catch(e){n(new w.CometChatException(e))}})},P.isFeatureEnabled=function(o){return new Promise(function(n,r){try{if(U.isFalsy(o))return r(new w.CometChatException(b.FeatureRestrictionErrors.INVALID_FEATURE));U.getAppSettings().then(function(e){if(e.parameters){var t=e.parameters;return t.hasOwnProperty(o)?n(t[o]):n(!1)}return r(new w.CometChatException(b.FeatureRestrictionErrors.FEATURE_NOT_FOUND))},function(e){return r(new w.CometChatException(e))})}catch(e){return r(new w.CometChatException(e))}})},P.logout=function(){var r=this;return new Promise(function(t,n){try{P.didAnalyticsPingStart()&&P.clearAnalyticsPingTimer(),P.WSReconnectionInProgress&&P.clearWSReconnectionTimer(),P.isLoggedOut=!0,P.WSReconnectionInProgress=!1,P.isAnalyticsDisabled=!1,Y.makeApiCall("userLogout").then(function(e){r.clearCache().then(function(){P.apiKey=void 0,P.user=void 0,P.authToken=void 0,P.cometChat=void 0,P.mode=void 0,$.WSLogout(),P.pushToLoginListener("","Logout_Success"),t(e.data)})},function(e){r.clearCache().then(function(){P.apiKey=void 0,P.user=void 0,P.authToken=void 0,P.cometChat=void 0,P.mode=void 0,$.WSLogout(),P.pushToLoginListener("","Logout_Success"),new w.CometChatException(e.error).code==g.SERVER_ERRORS.AUTH_ERR.code?t({}):n(new w.CometChatException(e.error))})})}catch(e){n(new w.CometChatException(e))}})},P.callExtension=function(o,s,i,a){return void 0===a&&(a={}),new Promise(function(t,n){var e=U.format((new u.EndpointFactory).extensionApi,o,P.appSettings.getRegion(),i),r={appId:P.appId,Accept:"application/json",authToken:P.authToken,resource:P.getSessionId(),sdk:U.format(b.SDKHeader.sdk,b.SDKHeader.platform,b.SDKHeader.sdkVersion),chatApiVersion:b.APPINFO.apiVersion,"Content-Type":"application/json"};Y.postData(e,s,a,r,!1).then(function(e){return e.json()}).then(function(e){e.hasOwnProperty(b.ResponseConstants.RESPONSE_KEYS.KEY_DATA)?t(e[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]):n(new w.CometChatException(e.error))}).catch(function(e){var t={error:g.FETCH_ERROR.ERROR_IN_API_CALL};n(t)})})},P.setSource=function(e,t,n){U.isFalsy(e)||(this.resource=e),U.isFalsy(t)||(this.platform=t),U.isFalsy(n)||(this.language=n)},P.clearCache=function(){return new Promise(function(e,t){try{d.LocalStorage.getInstance().clearStore().then(function(){U.Logger.info("CometChat: clearCache => All store cleared successfully","true"),e(!0)})}catch(e){U.Logger.error("CometChat: clearCache",e),t(e)}})},P.connect=function(){P.user&&($.connection||(P.disconnectedByUser=!1,P.WSLogin(P.user)),P.didAnalyticsPingStart()||P.isAnalyticsDisabled||(P.pingAnalytics(),P.startAnalyticsPingTimer()))},P.disconnect=function(){P.user&&(P.disconnectedByUser=!0,$.connection&&$.WSLogout(),P.didAnalyticsPingStart()&&P.clearAnalyticsPingTimer())},P.prototype.internalRestart=function(e){P.internalRestart||P.getInstance().internalLogout(!1).then(function(){P.internalRestart=!0,P.login(e).then(function(e){P.shouldConnectToWS=!0,P.internalRestart=!1},function(e){U.Logger.error("CometChat: internalRestart :: login",e),P.internalRestart=!1})},function(e){U.Logger.error("CometChat: internalRestart :: internalLogout",e)})},P.prototype.internalLogout=function(n){return void 0===n&&(n=!0),new Promise(function(e,t){try{P.didAnalyticsPingStart()&&P.clearAnalyticsPingTimer(),P.WSReconnectionInProgress&&P.clearWSReconnectionTimer(),P.isLoggedOut=!0,P.WSReconnectionInProgress=!1,P.isAnalyticsDisabled=!1,P.clearCache().then(function(){P.apiKey=void 0,P.user=void 0,P.authToken=void 0,P.cometChat=void 0,P.mode=void 0,$.WSLogout(),n&&P.pushToLoginListener("","Logout_Success"),e(!0)})}catch(e){U.Logger.error("CometChat: internalLogout",e),t(e)}})},P.initialzed=!1,P.CometChatException=w.CometChatException,P.TextMessage=l.TextMessage,P.MediaMessage=E.MediaMessage,P.CustomMessage=N.CustomMessage,P.Action=n.Action,P.Call=t.Call,P.TypingIndicator=I.TypingIndicator,P.TransientMessage=j.TransientMessage,P.Group=a.Group,P.User=G.User,P.GroupMember=m.GroupMember,P.Conversation=x.Conversation,P.USER_STATUS={ONLINE:b.PresenceConstatnts.STATUS.ONLINE,OFFLINE:b.PresenceConstatnts.STATUS.OFFLINE},P.MessagesRequest=R.MessagesRequest,P.MessagesRequestBuilder=R.MessagesRequestBuilder,P.UsersRequest=_.UsersRequest,P.UsersRequestBuilder=_.UsersRequestBuilder,P.ConversationsRequest=f.ConversationsRequest,P.ConversationsRequestBuilder=f.ConversationsRequestBuilder,P.BlockedUsersRequest=y.BlockedUsersRequest,P.BlockedUsersRequestBuilder=y.BlockedUsersRequestBuilder,P.GroupsRequest=r.GroupsRequest,P.GroupsRequestBuilder=r.GroupsRequestBuilder,P.GroupMembersRequest=o.GroupMembersRequest,P.GroupMembersRequestBuilder=o.GroupMembersRequestBuilder,P.BannedMembersRequest=i.BannedMembersRequest,P.BannedMembersRequestBuilder=i.BannedMembersRequestBuilder,P.CallSettings=V.CallSettings,P.CallSettingsBuilder=V.CallSettingsBuilder,P.AppSettings=v.AppSettings,P.AppSettingsBuilder=v.AppSettingsBuilder,P.MessageListener=e.MessageListener,P.UserListener=e.UserListener,P.GroupListener=e.GroupListener,P.OngoingCallListener=e.OngoingCallListener,P.CallListener=e.CallListener,P.ConnectionListener=e.ConnectionListener,P.LoginListener=e.LoginListener,P.CallController=K.CallController,P.CometChatHelper=L.CometChatHelper,P.Attachment=F.Attachment,P.MESSAGE_TYPE=b.MessageConstatnts.TYPE,P.CATEGORY_MESSAGE=b.MessageConstatnts.CATEGORY.MESSAGE,P.CATEGORY_ACTION=b.MessageConstatnts.CATEGORY.ACTION,P.CATEGORY_CALL=b.MessageConstatnts.CATEGORY.CALL,P.CATEGORY_CUSTOM=b.MessageConstatnts.CATEGORY.CUSTOM,P.ACTION_TYPE=b.ActionConstatnts.ACTIONS,P.CALL_TYPE=b.CallConstants.CALL_TYPE,P.RECEIVER_TYPE=b.MessageConstatnts.RECEIVER_TYPE,P.CALL_STATUS=b.CallConstants.CALL_STATUS,P.GROUP_MEMBER_SCOPE=b.GROUP_MEMBER_SCOPE,P.GROUP_TYPE=b.GROUP_TYPE,P.MESSAGE_REQUEST=b.MessageConstatnts.PAGINATION.CURSOR_FILEDS,P.CONNECTION_STATUS=b.CONNECTION_STATUS,P.CALL_MODE=b.CallConstants.CALL_MODE,P.AUDIO_MODE=b.CallConstants.AUDIO_MODE,P.SORT_BY=b.UserConstants.SORT_BY,P.SORT_ORDER=b.UserConstants.SORT_ORDER,P.WSReconnectionInProgress=!1,P.WSReconnectionTimerInterval=5e3,P.currentConnectionStatus=b.CONNECTION_STATUS.DISCONNECTED,P.isConnectingFromInit=!1,P.loginInProgress=!1,P.internalRestart=!1,P.settingsInterval=6e4,P.isAnalyticsPingStarted=!1,P.isLoggedOut=!0,P.isAnalyticsDisabled=!1,P.disconnectedByUser=!1,P.shouldConnectToWS=!0,P}();ne.CometChat=te}).call(this,re(15))},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0,t.Me=t.User=void 0;var s=n(2),i=n(13),a=n(1),c=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.hasBlockedMe=!1,this.blockedByMe=!1,this.deactivatedAt=0,1===e.length)typeof e[0]===a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING?this.uid=e[0]:(this.uid=e[0].uid,this.name=e[0].name,e[0].authToken&&(this.authToken=e[0].authToken),e[0].avatar&&(this.avatar=e[0].avatar),e[0].lastActiveAt&&(this.lastActiveAt=e[0].lastActiveAt),e[0].link&&(this.link=e[0].link),e[0].metadata&&(this.metadata=e[0].metadata),e[0].role&&(this.role=e[0].role),e[0].statusMessage&&(this.statusMessage=e[0].statusMessage),e[0].status&&"offline"!==e[0].status?this.status="online":this.status="offline",e[0].tags&&(this.tags=e[0].tags),e[0].deactivatedAt&&(this.deactivatedAt=e[0].deactivatedAt));else{if(2!==e.length)throw new s.CometChatException(i.ERRORS.PARAMETER_MISSING);this.uid=e[0],this.name=e[1]}}return e.prototype.getUid=function(){return this.uid.toString()},e.prototype.setUid=function(e){this.uid=e},e.prototype.getName=function(){return this.name.toString()},e.prototype.setName=function(e){e&&(this.name=e)},e.prototype.getAuthToken=function(){return this.authToken},e.prototype.setAuthToken=function(e){this.authToken=e},e.prototype.getAvatar=function(){return this.avatar},e.prototype.setAvatar=function(e){this.avatar=e},e.prototype.getLastActiveAt=function(){return this.lastActiveAt},e.prototype.setLastActiveAt=function(e){this.lastActiveAt=e},e.prototype.getLink=function(){return this.link},e.prototype.setLink=function(e){return this.link=e},e.prototype.getMetadata=function(){return this.metadata},e.prototype.setMetadata=function(e){this.metadata=e},e.prototype.getRole=function(){return this.role},e.prototype.setRole=function(e){this.role=e},e.prototype.getStatus=function(){return this.status},e.prototype.setStatus=function(e){this.status=e},e.prototype.getStatusMessage=function(){return this.statusMessage},e.prototype.setStatusMessage=function(e){this.statusMessage=e},e.prototype.setBlockedByMe=function(e){this.blockedByMe=e},e.prototype.getBlockedByMe=function(){return this.blockedByMe},e.prototype.setHasBlockedMe=function(e){this.hasBlockedMe=e},e.prototype.getHasBlockedMe=function(){return this.hasBlockedMe},e.prototype.setTags=function(e){this.tags=e},e.prototype.getTags=function(){return this.tags},e.prototype.setDeactivatedAt=function(e){this.deactivatedAt=e},e.prototype.getDeactivatedAt=function(){return this.deactivatedAt},e}(),E=function(n){function e(e){var t=n.call(this,e)||this;return t.wsChannel=e.wsChannel,e.jwt&&(t.jwt=e.jwt),t}return o(e,n),e.prototype.getWsChannel=function(){return this.wsChannel},e.prototype.getJWT=function(){return this.jwt},e}(t.User=c);t.Me=E},function(e,t,n){"use strict";t.__esModule=!0,t.KEYS=t.AUTH=t.MESSAGE=t.PRESENCE=t.RECEIPTS=t.TRANSIENT_MESSAGE=t.TYPING_INDICATOR=t.LOGOUT_REASON=t.LOGOUT_CODE=t.READY_STATE=t.WS=void 0,t.WS={protocol:"wss://"},t.READY_STATE={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3,INVALID_JWT:4},t.LOGOUT_CODE=1e3,t.LOGOUT_REASON="User logged out",t.TYPING_INDICATOR={TYPE:"typing_indicator",ACTION:{STARTED:"started",ENDED:"ended"}},t.TRANSIENT_MESSAGE={TYPE:"transient_message"},t.RECEIPTS={TYPE:"receipts",ACTION:{READ:"read",DELIVERED:"delivered"},RECEIPT_TYPE:{READ_RECEIPT:"read",DELIVERY_RECEIPT:"delivery"}},t.PRESENCE={TYPE:"presence",ACTION:{ONLINE:"online",AVAILABLE:"available",OFFLINE:"offline"}},t.MESSAGE={TYPE:"message"},t.AUTH={TYPE:"auth"},t.KEYS={TYPE:"type",ACTION:"action",APP_ID:"appId",RECEIVER:"receiver",RECEIVER_TYPE:"receiverType",DEVICE_ID:"deviceId",BODY:"body",USER:"user",METADATA:"metadata",MESSAGE_ID:"messageId",TIMESTAMP:"timestamp",STATUS:"status",CODE:"code",SENDER:"sender",MESSAGE_SENDER:"messageSender",PRESENCE_SUBSCRIPTION:"presenceSubscription",AUTH:"auth",PING:"ping",DATA:"data",PARAMS:"params",ACK:"ack",PONG:"pong"}},function(e,t,n){"use strict";t.__esModule=!0,t.postData=t.makeAdminApiCall=t.makeApiCall=void 0;var c=n(32),E=n(3),u=n(0),p=n(2),l=n(13),S=n(1);function d(n,e,r,t,o){var s;return void 0===n&&(n=""),void 0===e&&(e="GET"),void 0===r&&(r={}),void 0===t&&(t={}),r=u.isFalsy(r)?void 0:("GET"==e&&(n+="?",Object.keys(r).map(function(e,t){n=t===Object.keys(r).length-1?n+e+"="+r[e]:n+e+"="+r[e]+"&"}),r=void 0),o&&(s=new FormData,Object.keys(r).map(function(e){"data"!=e?"tags"==e?s.append(e+"[]",r[e]):"metadata"!=e&&s.append(e,r[e]):s.append(e,JSON.stringify(r[e]))})),JSON.stringify(r)),fetch(n,{method:e,mode:"cors",cache:"no-cache",headers:t,redirect:"follow",referrer:"no-referrer",body:o?s:r})}t.makeApiCall=function(o,e,s,i){void 0===o&&(o=""),void 0===e&&(e={}),void 0===s&&(s={});var a=E.CometChat.getInstance(E.CometChat.getAppId());return new Promise(function(n,r){try{c.getEndPoint(o,e).then(function(e){var t={resource:E.CometChat.getSessionId(),appId:E.CometChat.getAppId(),Accept:"application/json",sdk:u.format(S.SDKHeader.sdk,S.SDKHeader.platform,S.SDKHeader.sdkVersion)};i||(t["Content-Type"]="application/json"),e.hasOwnProperty("isAdminApi")&&e.isAdminApi?a.getApiKey()?t.apiKey=a.getApiKey():r({error:{code:"API_KEY_NOT_SET",message:"An apiKey is needed to use the "+o+" api.",name:"API_KEY_NOT_SET"}}):a.getAuthToken()?t.authToken=a.getAuthToken():r({error:{code:"USER_NOT_LOGED_IN",message:"An authToken is need to use the "+o+" end-point. PS- We are aware of the spelling mistake, but in order to maintain backward compatibility we cannot change it :(",name:"User not logged-in"}}),d(e.endpoint,e.method,s,t,i).then(function(e){return e.json()}).then(function(e){if(e.hasOwnProperty("data"))e.data.hasOwnProperty("authToken")&&E.CometChat.setAuthToken(e.data.authToken),n(e);else{if(e.hasOwnProperty("error")){var t=e.error;t.hasOwnProperty("code")&&t.code===S.API_ERROR_CODES.AUTH_ERR_AUTH_TOKEN_NOT_FOUND&&E.CometChat.getInstance().internalLogout().then(function(){u.Logger.log("CometChat: makeApiCall","User logged out")})}r(e)}}).catch(function(e){var t={error:l.FETCH_ERROR.ERROR_IN_API_CALL};r(t)})}).catch(function(e){return r})}catch(e){r(new p.CometChatException(e))}})},t.makeAdminApiCall=function(o,e,s,i){void 0===o&&(o=""),void 0===e&&(e={}),void 0===s&&(s={});var a=E.CometChat.getInstance(E.CometChat.getAppId());return new Promise(function(n,r){c.getEndPoint(o,e).then(function(e){var t={appId:E.CometChat.getAppId(),Accept:"application/json",sdk:u.format(S.SDKHeader.sdk,S.SDKHeader.platform,S.SDKHeader.sdkVersion)};i||(t["Content-Type"]="application/json"),e.hasOwnProperty("isAdminApi")&&e.isAdminApi?a.getApiKey()?t.apiKey=a.getApiKey():r({error:"An apiKey is need to use the "+o+" api."}):a.getAuthToken()?t.authToken=a.getAuthToken():r({error:"An authToken is need to use the "+o+" api."}),d(e.endpoint,e.method,s,t,i).then(function(e){return e.json()}).then(function(e){e.hasOwnProperty("data")?(e.data.hasOwnProperty("authToken")&&E.CometChat.setAuthToken(e.data.authToken),n(e)):r(e)}).catch(function(e){var t={error:l.FETCH_ERROR.ERROR_IN_API_CALL};r(t)})}).catch(function(e){return r})})},t.postData=d},function(e,t,n){"use strict";t.__esModule=!0,t.BaseMessage=void 0;var r=function(){function e(e,t,n,r){this.receiverId=e,this.type=t,this.receiverType=n,this.category=r}return e.prototype.getId=function(){return this.id},e.prototype.setId=function(e){this.id=e},e.prototype.getConversationId=function(){return this.conversationId},e.prototype.setConversationId=function(e){this.conversationId=e},e.prototype.getParentMessageId=function(){return this.parentMessageId},e.prototype.setParentMessageId=function(e){this.parentMessageId=e},e.prototype.getMuid=function(){return this.muid},e.prototype.setMuid=function(e){this.muid=e},e.prototype.getSender=function(){return this.sender},e.prototype.setSender=function(e){this.sender=e},e.prototype.getReceiver=function(){return this.receiver},e.prototype.setReceiver=function(e){this.receiver=e},e.prototype.getReceiverId=function(){return this.receiverId},e.prototype.setReceiverId=function(e){this.receiverId=e},e.prototype.getType=function(){return this.type},e.prototype.setType=function(e){this.type=e},e.prototype.getReceiverType=function(){return this.receiverType},e.prototype.setReceiverType=function(e){this.receiverType=e},e.prototype.getSentAt=function(){return this.sentAt},e.prototype.setSentAt=function(e){this.sentAt=e},e.prototype.getStatus=function(){return this.status},e.prototype.setStatus=function(e){this.status=e},e.prototype.getDeliveredAt=function(){return this.deliveredAt},e.prototype.setDeliveredAt=function(e){this.deliveredAt=e},e.prototype.getDeliveredToMeAt=function(){return this.deliveredToMeAt},e.prototype.setDeliveredToMeAt=function(e){this.deliveredToMeAt=e},e.prototype.getReadAt=function(){return this.readAt},e.prototype.setReadAt=function(e){this.readAt=e},e.prototype.getReadByMeAt=function(){return this.readByMeAt},e.prototype.setReadByMeAt=function(e){this.readByMeAt=e},e.prototype.getCategory=function(){return this.category},e.prototype.setCategory=function(e){this.category=e},e.prototype.getEditedAt=function(){return this.editedAt},e.prototype.setEditedAt=function(e){this.editedAt=e},e.prototype.getEditedBy=function(){return this.editedBy},e.prototype.setEditedBy=function(e){this.editedBy=e},e.prototype.getDeletedAt=function(){return this.deletedAt},e.prototype.setDeletedAt=function(e){this.deletedAt=e},e.prototype.getDeletedBy=function(){return this.deletedBy},e.prototype.setDeletedBy=function(e){this.deletedBy=e},e.prototype.getReplyCount=function(){return this.replyCount},e.prototype.setReplyCount=function(e){this.replyCount=e},e.prototype.getRawMessage=function(){return this.rawMessage},e.prototype.setRawMessage=function(e){this.rawMessage=e},e}();t.BaseMessage=r},function(e,t,n){"use strict";t.__esModule=!0,t.Group=void 0;var r=n(1),o=function(){function e(e,t,n,r,o,s,i){this.hasJoined=!1,this.membersCount=0,this.guid=e,t&&(this.name=t),n&&(this.type=n),!r&&""!==r||"password"!=n||(this.password=r),(o||""===o)&&(this.icon=o),(s||""===s)&&(this.description=s),i&&(this.hasJoined=i)}return e.prototype.getGuid=function(){return this.guid},e.prototype.setGuid=function(e){this.guid=e},e.prototype.getName=function(){return this.name},e.prototype.setName=function(e){e&&(this.name=e)},e.prototype.getType=function(){return this.type},e.prototype.setType=function(e){this.type=e},e.prototype.getPassword=function(){return this.password},e.prototype.setPassword=function(e){this.password=e},e.prototype.getIcon=function(){return this.icon},e.prototype.setIcon=function(e){this.icon=e},e.prototype.getDescription=function(){return this.description},e.prototype.setDescription=function(e){this.description=e},e.prototype.getOwner=function(){return this.owner},e.prototype.setOwner=function(e){this.owner=e},e.prototype.getMetadata=function(){return this.metadata},e.prototype.setMetadata=function(e){this.metadata=e},e.prototype.getCreatedAt=function(){return this.createdAt},e.prototype.setCreatedAt=function(e){this.createdAt=e},e.prototype.getUpdatedAt=function(){return this.updatedAt},e.prototype.setUpdatedAt=function(e){this.updatedAt=e},e.prototype.getHasJoined=function(){return this.hasJoined},e.prototype.setHasJoined=function(e){this.hasJoined=e},e.prototype.getWsChannel=function(){return this.wsChannel},e.prototype.setWsChannel=function(e){this.wsChannel=e},e.prototype.setScope=function(e){this.scope=e},e.prototype.getScope=function(){return this.scope},e.prototype.getJoinedAt=function(){return this.joinedAt},e.prototype.setJoinedAt=function(e){this.joinedAt=e},e.prototype.getMembersCount=function(){return this.membersCount},e.prototype.setMembersCount=function(e){this.membersCount=e},e.prototype.setTags=function(e){this.tags=e},e.prototype.getTags=function(){return this.tags},e.TYPE=r.GroupType,e.Type=e.TYPE,e}();t.Group=o},function(e,t,n){"use strict";t.__esModule=!0,t.CometChatEvent=void 0;var i=n(0),r=n(5),o=function(){function e(e,t,n,r,o,s){i.isFalsy(e)||(this.appId=e),i.isFalsy(t)||(this.receiver=t),i.isFalsy(n)||(this.receiverType=n),i.isFalsy(o)||(this.deviceId=o),i.isFalsy(r)||(this.sender=r),i.isFalsy(s)||(this.messageSender=s)}return e.prototype.getAppId=function(){return this.appId},e.prototype.setAppId=function(e){this.appId=e},e.prototype.getReceiver=function(){return this.receiver},e.prototype.setReceiver=function(e){this.receiver=e},e.prototype.getSender=function(){return this.sender},e.prototype.setSender=function(e){this.sender=e},e.prototype.getReceiverType=function(){return this.receiverType},e.prototype.setReceiverType=function(e){this.receiverType=e},e.prototype.getType=function(){return this.type},e.prototype.setType=function(e){this.type=e},e.prototype.getDeviceId=function(){return this.deviceId},e.prototype.setDeviceId=function(e){this.deviceId=e},e.prototype.getMessageSender=function(){return this.messageSender},e.prototype.setMessageSender=function(e){this.messageSender=e},e.prototype.getCometChatEventJSON=function(){var e={};return e[r.KEYS.APP_ID]=this.getAppId(),e[r.KEYS.RECEIVER]=this.getReceiver(),e[r.KEYS.RECEIVER_TYPE]=this.getReceiverType(),e[r.KEYS.DEVICE_ID]=this.getDeviceId(),e[r.KEYS.TYPE]=this.getType(),e[r.KEYS.SENDER]=this.getSender(),i.isFalsy(this.getMessageSender())||(e[r.KEYS.MESSAGE_SENDER]=this.getMessageSender()),e},e}();t.CometChatEvent=o},function(e,t,n){"use strict";t.__esModule=!0,t.MessageController=void 0;var i=n(7),a=n(18),c=n(19),E=n(0),u=n(1),p=n(22),l=n(23),S=n(24),s=n(2),d=n(20),C=n(21),h=n(3),T=n(11),r=function(){function e(){}return e.trasformJSONMessge=function(n){try{var e=null;n.hasOwnProperty("rawMessage")||(e=JSON.parse(JSON.stringify(n)));var t=void 0;switch(n[u.MessageConstatnts.KEYS.CATEGORY]){case u.MessageConstatnts.CATEGORY.ACTION:t=p.Action.actionFromJSON(n);break;case u.MessageConstatnts.CATEGORY.CALL:t=l.Call.callFromJSON(n);break;case u.MessageConstatnts.CATEGORY.MESSAGE:switch(n[u.MessageConstatnts.KEYS.TYPE]){case u.MessageConstatnts.TYPE.TEXT:t=new a.TextMessage(n[u.MessageConstatnts.KEYS.RECEIVER],n[u.MessageConstatnts.KEYS.DATA][u.MessageConstatnts.KEYS.TEXT],n[u.MessageConstatnts.KEYS.RECEIVER_TYPE]);break;case u.MessageConstatnts.TYPE.CUSTOM:t=new C.CustomMessage(n[u.MessageConstatnts.KEYS.RECEIVER],n[u.MessageConstatnts.KEYS.DATA][u.MessageConstatnts.KEYS.CUSTOM_DATA],n[u.MessageConstatnts.KEYS.RECEIVER_TYPE]);break;default:if(t=new c.MediaMessage(n[u.MessageConstatnts.KEYS.RECEIVER],n[u.MessageConstatnts.KEYS.DATA][u.MessageConstatnts.KEYS.URL],n[u.MessageConstatnts.KEYS.TYPE],n[u.MessageConstatnts.KEYS.RECEIVER_TYPE]),n.hasOwnProperty(u.MessageConstatnts.KEYS.DATA)){var r=n[u.MessageConstatnts.KEYS.DATA];if(r.hasOwnProperty(u.MessageConstatnts.KEYS.ATTATCHMENTS)){var o,s=r[u.MessageConstatnts.KEYS.ATTATCHMENTS];new Array;s.map(function(e){o=new d.Attachment(e)}),t.setAttachment(o)}r.hasOwnProperty(u.MessageConstatnts.KEYS.TEXT)&&t.setCaption(r[u.MessageConstatnts.KEYS.TEXT])}t.hasOwnProperty("file")&&delete t.file}break;case u.MessageConstatnts.CATEGORY.CUSTOM:t=new C.CustomMessage(n[u.MessageConstatnts.KEYS.RECEIVER],n[u.MessageConstatnts.KEYS.DATA][u.MessageConstatnts.KEYS.CUSTOM_DATA],n[u.MessageConstatnts.KEYS.RECEIVER_TYPE],n.type)}n[u.MessageConstatnts.KEYS.MY_RECEIPTS]&&(n[u.MessageConstatnts.KEYS.MY_RECEIPTS]=n[u.MessageConstatnts.KEYS.MY_RECEIPTS],Object.keys(n[u.MessageConstatnts.KEYS.MY_RECEIPTS]).map(function(e){var t=new S.MessageReceipt;e==u.DELIVERY_RECEIPTS.DELIVERED_AT&&(t.setReceiptType(t.RECEIPT_TYPE.DELIVERY_RECEIPT),t.setDeliveredAt(n[u.MessageConstatnts.KEYS.MY_RECEIPTS][u.DELIVERY_RECEIPTS.DELIVERED_AT]),E.isFalsy(n[u.MessageConstatnts.KEYS.MY_RECEIPTS][u.DELIVERY_RECEIPTS.RECIPIENT])?n[u.DELIVERY_RECEIPTS.DELIVERED_TO_ME_AT]=n[u.MessageConstatnts.KEYS.MY_RECEIPTS][u.DELIVERY_RECEIPTS.DELIVERED_AT]:t.setSender(n[u.MessageConstatnts.KEYS.MY_RECEIPTS][u.DELIVERY_RECEIPTS.RECIPIENT]),t.setReceiverType(n[u.MessageConstatnts.KEYS.RECEIVER_TYPE]),t.setReceiver(n[u.MessageConstatnts.KEYS.RECEIVER])),n[u.MessageConstatnts.KEYS.MY_RECEIPTS][u.READ_RECEIPTS.READ_AT]&&(t.setReceiptType(t.RECEIPT_TYPE.READ_RECEIPT),t.setReadAt(n[u.MessageConstatnts.KEYS.MY_RECEIPTS][u.READ_RECEIPTS.READ_AT]),E.isFalsy(n[u.MessageConstatnts.KEYS.MY_RECEIPTS][u.READ_RECEIPTS.RECIPIENT])?n[u.READ_RECEIPTS.READ_BY_ME_AT]=n[u.MessageConstatnts.KEYS.MY_RECEIPTS][u.READ_RECEIPTS.READ_AT]:t.setSender(n[u.MessageConstatnts.KEYS.MY_RECEIPTS][u.READ_RECEIPTS.RECIPIENT]),t.setReceiverType(n[u.MessageConstatnts.KEYS.RECEIVER_TYPE]),t.setReceiver(n[u.MessageConstatnts.KEYS.RECEIVER]))}));try{if(Object.assign(t,n),(n=t).parentId&&(n.parentMessageId=n.parentId,delete n.parentId),n instanceof i.BaseMessage&&(E.isFalsy(e)||n.setRawMessage(e)),n instanceof a.TextMessage)n.setSender(n.getSender()),n.setReceiver(n.getReceiver()),n.getData()[u.MessageConstatnts.KEYS.METADATA]&&n.setMetadata(n.getData()[u.MessageConstatnts.KEYS.METADATA]);else if(n instanceof c.MediaMessage)n.getData()[u.MessageConstatnts.KEYS.METADATA]&&n.setMetadata(n.getData()[u.MessageConstatnts.KEYS.METADATA]),n.setSender(n.getSender()),n.setReceiver(n.getReceiver());else if(n instanceof p.Action)n.setSender(n.getSender()),n.setReceiver(n.getActionFor()),n.setActionBy(n.getActionBy()),n.setActionOn(n.getActionOn()),n.setActionFor(n.getActionFor()),n.setMessage(n.getMessage());else if(n instanceof l.Call){try{n.setSender(n.getSender())}catch(e){E.Logger.error("MessageController: trasformJSONMessge: setSender",e)}try{n.setCallInitiator(n.getCallInitiator())}catch(e){E.Logger.error("MessageController: trasformJSONMessge: setCallInitiator",e)}try{n.setReceiver(n.getCallReceiver()),n.setCallReceiver(n.getCallReceiver())}catch(e){E.Logger.error("MessageController: trasformJSONMessge: setCallreceiver",e)}}else n instanceof C.CustomMessage&&(n.getData()[u.MessageConstatnts.KEYS.METADATA]&&n.setMetadata(n.getData()[u.MessageConstatnts.KEYS.METADATA]),n.setCustomData(n.getData()[u.MessageConstatnts.KEYS.CUSTOM_DATA]),n.setSubType(n.getData()[u.MessageConstatnts.KEYS.CUSTOM_SUB_TYPE]),n.setSender(n.getSender()),n.setReceiver(n.getReceiver()))}catch(e){E.Logger.error("MessageController: trasformJSONMessge: Main",e),n=null}return n}catch(e){E.Logger.error("MessageController: trasformJSONMessge",e)}},e.getReceiptsFromJSON=function(o){return new Promise(function(e,t){try{var r=[];h.CometChat.getLoggedInUser().then(function(n){E.isFalsy(o.receipts)?e([]):(o.receipts.data.map(function(e){var t=new S.MessageReceipt;e[u.DELIVERY_RECEIPTS.DELIVERED_AT]&&(t.setReceiptType(t.RECEIPT_TYPE.DELIVERY_RECEIPT),t.setDeliveredAt(e[u.DELIVERY_RECEIPTS.DELIVERED_AT]),t.setTimestamp(e[u.DELIVERY_RECEIPTS.DELIVERED_AT]),E.isFalsy(e[u.DELIVERY_RECEIPTS.RECIPIENT])?t.setSender(n):t.setSender(T.UsersController.trasformJSONUser(e[u.DELIVERY_RECEIPTS.RECIPIENT])),t.setReceiverType(o[u.MessageConstatnts.KEYS.RECEIVER_TYPE]),t.setReceiver(o[u.MessageConstatnts.KEYS.RECEIVER])),e[u.READ_RECEIPTS.READ_AT]&&(t.setReceiptType(t.RECEIPT_TYPE.READ_RECEIPT),t.setReadAt(e[u.READ_RECEIPTS.READ_AT]),t.setTimestamp(e[e[u.READ_RECEIPTS.READ_AT]]),E.isFalsy(e[u.READ_RECEIPTS.RECIPIENT])?t.setSender(n):t.setSender(T.UsersController.trasformJSONUser(e[u.READ_RECEIPTS.RECIPIENT])),t.setReceiverType(o[u.MessageConstatnts.KEYS.RECEIVER_TYPE]),t.setReceiver(o[u.MessageConstatnts.KEYS.RECEIVER])),r.push(t)}),e(r))})}catch(e){t(new s.CometChatException(e))}})},e}();t.MessageController=r},function(e,t,n){"use strict";t.__esModule=!0,t.UsersController=void 0;var r=n(4),o=n(0),s=function(){function e(){}return e.trasformJSONUser=function(e){var t;try{e.uid=e.uid.toString(),e.name=e.name.toString(),e.status&&"offline"!==e.status?e.status="online":e.status="offline",t=new r.User(e),Object.assign(t,e),e=t}catch(e){o.Logger.error("UsersController:transformJSONUser",e)}return e},e}();t.UsersController=s},function(e,t,n){(function(r){e.exports=function o(s,i,a){function c(n,e){if(!i[n]){if(!s[n]){if(E)return E(n,!0);var t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}var r=i[n]={exports:{}};s[n][0].call(r.exports,function(e){var t=s[n][1][e];return c(t||e)},r,r.exports,o,s,i,a)}return i[n].exports}for(var E=!1,e=0;e<a.length;e++)c(a[e]);return c}({1:[function(e,u,t){(function(t){"use strict";var n,r,e=t.MutationObserver||t.WebKitMutationObserver;if(e){var o=0,s=new e(E),i=t.document.createTextNode("");s.observe(i,{characterData:!0}),n=function(){i.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){E(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(E,0)};else{var a=new t.MessageChannel;a.port1.onmessage=E,n=function(){a.port2.postMessage(0)}}var c=[];function E(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}u.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var o=e(1);function E(){}var u={},s=["REJECTED"],i=["FULFILLED"],a=["PENDING"];function r(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,e!==E&&S(this,e)}function c(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function p(t,n,r){o(function(){var e;try{e=n(r)}catch(e){return u.reject(t,e)}e===t?u.reject(t,new TypeError("Cannot resolve promise with itself")):u.resolve(t,e)})}function l(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function S(t,e){var n=!1;function r(e){n||(n=!0,u.reject(t,e))}function o(e){n||(n=!0,u.resolve(t,e))}var s=d(function(){e(o,r)});"error"===s.status&&r(s.value)}function d(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=r).prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){if("function"!=typeof e&&this.state===i||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(E);if(this.state!==a){var r=this.state===i?e:t;p(n,r,this.outcome)}else this.queue.push(new c(n,e,t));return n},c.prototype.callFulfilled=function(e){u.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){p(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){u.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){p(this.promise,this.onRejected,e)},u.resolve=function(e,t){var n=d(l,t);if("error"===n.status)return u.reject(e,n.value);var r=n.value;if(r)S(e,r);else{e.state=i,e.outcome=t;for(var o=-1,s=e.queue.length;++o<s;)e.queue[o].callFulfilled(t)}return e},u.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},r.resolve=function(e){return e instanceof this?e:u.resolve(new this(E),e)},r.reject=function(e){var t=new this(E);return u.reject(t,e)},r.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,o=!1;if(!r)return this.resolve([]);for(var s=new Array(r),i=0,t=-1,a=new this(E);++t<r;)c(e[t],t);return a;function c(e,t){n.resolve(e).then(function(e){s[t]=e,++i!==r||o||(o=!0,u.resolve(a,s))},function(e){o||(o=!0,u.reject(a,e))})}},r.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o,s=-1,i=new this(E);++s<n;)o=e[s],t.resolve(o).then(function(e){r||(r=!0,u.resolve(i,e))},function(e){r||(r=!0,u.reject(i,e))});return i}},{1:1}],3:[function(t,e,n){(function(e){"use strict";"function"!=typeof e.Promise&&(e.Promise=t(2))}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function i(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,o=new r,s=0;s<t.length;s+=1)o.append(t[s]);return o.getBlob(n.type)}}"undefined"==typeof Promise&&e(3);var p=Promise;function l(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function E(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function u(e){return"string"!=typeof e&&(e=String(e)),e}function s(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var a="local-forage-detect-blob-support",o=void 0,S={},d=Object.prototype.toString,C="readonly",h="readwrite";function T(e){return"boolean"==typeof o?p.resolve(o):(r=e,new p(function(n){var e=r.transaction(a,h),t=i([""]);e.objectStore(a).put(t,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||43<=parseInt(e[1],10))}}).catch(function(){return!1})).then(function(e){return o=e});var r}function g(e){var t=S[e.name],n={};n.promise=new p(function(e,t){n.resolve=e,n.reject=t}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function _(e){var t=S[e.name],n=t.deferredOperations.pop();if(n)return n.resolve(),n.promise}function f(e,t){var n=S[e.name],r=n.deferredOperations.pop();if(r)return r.reject(t),r.promise}function R(o,s){return new p(function(e,t){if(S[o.name]=S[o.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},o.db){if(!s)return e(o.db);g(o),o.db.close()}var n=[o.name];s&&n.push(o.version);var r=c.open.apply(c,n);s&&(r.onupgradeneeded=function(e){var t=r.result;try{t.createObjectStore(o.storeName),e.oldVersion<=1&&t.createObjectStore(a)}catch(e){if("ConstraintError"!==e.name)throw e}}),r.onerror=function(e){e.preventDefault(),t(r.error)},r.onsuccess=function(){e(r.result),_(o)}})}function A(e){return R(e,!1)}function I(e){return R(e,!0)}function O(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version,e.version=e.db.version),o||n){if(n){var s=e.db.version+1;s>e.version&&(e.version=s)}return!0}return!1}function N(e){var t=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}(atob(e.data));return i([t],{type:e.type})}function m(e){return e&&e.__local_forage_encoded_blob}function y(e){var t=this,n=t._initReady().then(function(){var e=S[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return E(n,e,e),n}function v(t,n,r,o){void 0===o&&(o=1);try{var e=t.db.transaction(t.storeName,n);r(null,e)}catch(e){if(0<o&&(!t.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return p.resolve().then(function(){if(!t.db||"NotFoundError"===e.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),I(t)}).then(function(){return function(n){g(n);for(var r=S[n.name],o=r.forages,e=0;e<o.length;e++){var t=o[e];t._dbInfo.db&&(t._dbInfo.db.close(),t._dbInfo.db=null)}return n.db=null,A(n).then(function(e){return n.db=e,O(n)?I(n):e}).then(function(e){n.db=r.db=e;for(var t=0;t<o.length;t++)o[t]._dbInfo.db=e}).catch(function(e){throw f(n,e),e})}(t).then(function(){v(t,n,r,o-1)})}).catch(r);r(e)}}var L={_driver:"asyncStorage",_initStorage:function(e){var r=this,o={db:null};if(e)for(var t in e)o[t]=e[t];var s=S[o.name];s||(s={forages:[],db:null,dbReady:null,deferredOperations:[]},S[o.name]=s),s.forages.push(r),r._initReady||(r._initReady=r.ready,r.ready=y);var n=[];function i(){return p.resolve()}for(var a=0;a<s.forages.length;a++){var c=s.forages[a];c!==r&&n.push(c._initReady().catch(i))}var E=s.forages.slice(0);return p.all(n).then(function(){return o.db=s.db,A(o)}).then(function(e){return o.db=e,O(o,r._defaultConfig.version)?I(o):e}).then(function(e){o.db=s.db=e,r._dbInfo=o;for(var t=0;t<E.length;t++){var n=E[t];n!==r&&(n._dbInfo.db=o.db,n._dbInfo.version=o.version)}})},_support:function(){try{if(!c)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(a,e){var c=this,t=new p(function(s,i){c.ready().then(function(){v(c._dbInfo,C,function(e,t){if(e)return i(e);try{var n=t.objectStore(c._dbInfo.storeName),r=n.openCursor(),o=1;r.onsuccess=function(){var e=r.result;if(e){var t=e.value;m(t)&&(t=N(t));var n=a(t,e.key,o++);void 0!==n?s(n):e.continue()}else s()},r.onerror=function(){i(r.error)}}catch(e){i(e)}})}).catch(i)});return l(t,e),t},getItem:function(i,e){var a=this;i=u(i);var t=new p(function(o,s){a.ready().then(function(){v(a._dbInfo,C,function(e,t){if(e)return s(e);try{var n=t.objectStore(a._dbInfo.storeName),r=n.get(i);r.onsuccess=function(){var e=r.result;void 0===e&&(e=null),m(e)&&(e=N(e)),o(e)},r.onerror=function(){s(r.error)}}catch(e){s(e)}})}).catch(s)});return l(t,e),t},setItem:function(a,t,e){var c=this;a=u(a);var n=new p(function(s,i){var e;c.ready().then(function(){return e=c._dbInfo,"[object Blob]"===d.call(t)?T(e.db).then(function(e){return e?t:(r=t,new p(function(n,e){var t=new FileReader;t.onerror=e,t.onloadend=function(e){var t=btoa(e.target.result||"");n({__local_forage_encoded_blob:!0,data:t,type:r.type})},t.readAsBinaryString(r)}));var r}):t}).then(function(o){v(c._dbInfo,h,function(e,t){if(e)return i(e);try{var n=t.objectStore(c._dbInfo.storeName);null===o&&(o=void 0);var r=n.put(o,a);t.oncomplete=function(){void 0===o&&(o=null),s(o)},t.onabort=t.onerror=function(){var e=r.error?r.error:r.transaction.error;i(e)}}catch(e){i(e)}})}).catch(i)});return l(n,e),n},removeItem:function(i,e){var a=this;i=u(i);var t=new p(function(o,s){a.ready().then(function(){v(a._dbInfo,h,function(e,t){if(e)return s(e);try{var n=t.objectStore(a._dbInfo.storeName),r=n.delete(i);t.oncomplete=function(){o()},t.onerror=function(){s(r.error)},t.onabort=function(){var e=r.error?r.error:r.transaction.error;s(e)}}catch(e){s(e)}})}).catch(s)});return l(t,e),t},clear:function(e){var i=this,t=new p(function(o,s){i.ready().then(function(){v(i._dbInfo,h,function(e,t){if(e)return s(e);try{var n=t.objectStore(i._dbInfo.storeName),r=n.clear();t.oncomplete=function(){o()},t.onabort=t.onerror=function(){var e=r.error?r.error:r.transaction.error;s(e)}}catch(e){s(e)}})}).catch(s)});return l(t,e),t},length:function(e){var i=this,t=new p(function(o,s){i.ready().then(function(){v(i._dbInfo,C,function(e,t){if(e)return s(e);try{var n=t.objectStore(i._dbInfo.storeName),r=n.count();r.onsuccess=function(){o(r.result)},r.onerror=function(){s(r.error)}}catch(e){s(e)}})}).catch(s)});return l(t,e),t},key:function(a,e){var c=this,t=new p(function(s,i){a<0?s(null):c.ready().then(function(){v(c._dbInfo,C,function(e,t){if(e)return i(e);try{var n=t.objectStore(c._dbInfo.storeName),r=!1,o=n.openCursor();o.onsuccess=function(){var e=o.result;e?0===a?s(e.key):r?s(e.key):(r=!0,e.advance(a)):s(null)},o.onerror=function(){i(o.error)}}catch(e){i(e)}})}).catch(i)});return l(t,e),t},keys:function(e){var a=this,t=new p(function(s,i){a.ready().then(function(){v(a._dbInfo,C,function(e,t){if(e)return i(e);try{var n=t.objectStore(a._dbInfo.storeName),r=n.openCursor(),o=[];r.onsuccess=function(){var e=r.result;e?(o.push(e.key),e.continue()):s(o)},r.onerror=function(){i(r.error)}}catch(e){i(e)}})}).catch(i)});return l(t,e),t},dropInstance:function(a,e){e=s.apply(this,arguments);var t,n=this.config();if((a="function"!=typeof a&&a||{}).name||(a.name=a.name||n.name,a.storeName=a.storeName||n.storeName),a.name){var r=a.name===n.name&&this._dbInfo.db,o=r?p.resolve(this._dbInfo.db):A(a).then(function(e){var t=S[a.name],n=t.forages;t.db=e;for(var r=0;r<n.length;r++)n[r]._dbInfo.db=e;return e});t=a.storeName?o.then(function(e){if(e.objectStoreNames.contains(a.storeName)){var o=e.version+1;g(a);var r=S[a.name],s=r.forages;e.close();for(var t=0;t<s.length;t++){var n=s[t];n._dbInfo.db=null,n._dbInfo.version=o}var i=new p(function(t,n){var r=c.open(a.name,o);r.onerror=function(e){var t=r.result;t.close(),n(e)},r.onupgradeneeded=function(){var e=r.result;e.deleteObjectStore(a.storeName)},r.onsuccess=function(){var e=r.result;e.close(),t(e)}});return i.then(function(e){r.db=e;for(var t=0;t<s.length;t++){var n=s[t];n._dbInfo.db=e,_(n._dbInfo)}}).catch(function(e){throw(f(a,e)||p.resolve()).catch(function(){}),e})}}):o.then(function(e){g(a);var r=S[a.name],o=r.forages;e.close();for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=null}var s=new p(function(t,n){var r=c.deleteDatabase(a.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}});return s.then(function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];_(n._dbInfo)}}).catch(function(e){throw(f(a,e)||p.resolve()).catch(function(){}),e})})}else t=p.reject("Invalid arguments");return l(t,e),t}},P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M=/^~~local_forage_type~([^~]+)~/,D="__lfsc__:",U=D.length,w="arbf",Y="blob",G=U+w.length,b=Object.prototype.toString;function K(e){var t,n,r,o,s,i=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var E=new ArrayBuffer(i),u=new Uint8Array(E);for(t=0;t<a;t+=4)n=P.indexOf(e[t]),r=P.indexOf(e[t+1]),o=P.indexOf(e[t+2]),s=P.indexOf(e[t+3]),u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&s;return E}function x(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=P[n[t]>>2],r+=P[(3&n[t])<<4|n[t+1]>>4],r+=P[(15&n[t+1])<<2|n[t+2]>>6],r+=P[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var B={serialize:function(t,n){var e="";if(t&&(e=b.call(t)),t&&("[object ArrayBuffer]"===e||t.buffer&&"[object ArrayBuffer]"===b.call(t.buffer))){var r,o=D;t instanceof ArrayBuffer?(r=t,o+=w):(r=t.buffer,"[object Int8Array]"===e?o+="si08":"[object Uint8Array]"===e?o+="ui08":"[object Uint8ClampedArray]"===e?o+="uic8":"[object Int16Array]"===e?o+="si16":"[object Uint16Array]"===e?o+="ur16":"[object Int32Array]"===e?o+="si32":"[object Uint32Array]"===e?o+="ui32":"[object Float32Array]"===e?o+="fl32":"[object Float64Array]"===e?o+="fl64":n(new Error("Failed to get type for BinaryArray"))),n(o+x(r))}else if("[object Blob]"===e){var s=new FileReader;s.onload=function(){var e="~~local_forage_type~"+t.type+"~"+x(this.result);n(D+Y+e)},s.readAsArrayBuffer(t)}else try{n(JSON.stringify(t))}catch(e){n(null,e)}},deserialize:function(e){if(e.substring(0,U)!==D)return JSON.parse(e);var t,n=e.substring(G),r=e.substring(U,G);if(r===Y&&M.test(n)){var o=n.match(M);t=o[1],n=n.substring(o[0].length)}var s=K(n);switch(r){case w:return s;case Y:return i([s],{type:t});case"si08":return new Int8Array(s);case"ui08":return new Uint8Array(s);case"uic8":return new Uint8ClampedArray(s);case"si16":return new Int16Array(s);case"ur16":return new Uint16Array(s);case"si32":return new Int32Array(s);case"ui32":return new Uint32Array(s);case"fl32":return new Float32Array(s);case"fl64":return new Float64Array(s);default:throw new Error("Unkown type: "+r)}},stringToBuffer:K,bufferToString:x};function F(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function V(e,r,o,s,i,a){e.executeSql(o,s,i,function(e,n){n.code===n.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[r.storeName],function(e,t){t.rows.length?a(e,n):F(e,r,function(){e.executeSql(o,s,i,a)},a)},a):a(e,n)},a)}function J(i,e,a,c){var E=this;i=u(i);var t=new p(function(o,s){E.ready().then(function(){void 0===e&&(e=null);var n=e,r=E._dbInfo;r.serializer.serialize(e,function(t,e){e?s(e):r.db.transaction(function(e){V(e,r,"INSERT OR REPLACE INTO "+r.storeName+" (key, value) VALUES (?, ?)",[i,t],function(){o(n)},function(e,t){s(t)})},function(e){if(e.code===e.QUOTA_ERR){if(0<c)return void o(J.apply(E,[i,n,a,c-1]));s(e)}})})}).catch(s)});return l(t,a),t}var k={_driver:"webSQLStorage",_initStorage:function(e){var r=this,o={db:null};if(e)for(var t in e)o[t]="string"!=typeof e[t]?e[t].toString():e[t];var n=new p(function(t,n){try{o.db=openDatabase(o.name,String(o.version),o.description,o.size)}catch(e){return n(e)}o.db.transaction(function(e){F(e,o,function(){r._dbInfo=o,t()},function(e,t){n(t)})},n)});return o.serializer=B,n},_support:"function"==typeof openDatabase,iterate:function(E,e){var t=this,n=new p(function(c,n){t.ready().then(function(){var a=t._dbInfo;a.db.transaction(function(e){V(e,a,"SELECT * FROM "+a.storeName,[],function(e,t){for(var n=t.rows,r=n.length,o=0;o<r;o++){var s=n.item(o),i=s.value;if(i&&(i=a.serializer.deserialize(i)),void 0!==(i=E(i,s.key,o+1)))return void c(i)}c()},function(e,t){n(t)})})}).catch(n)});return l(n,e),n},getItem:function(t,e){var s=this;t=u(t);var n=new p(function(o,n){s.ready().then(function(){var r=s._dbInfo;r.db.transaction(function(e){V(e,r,"SELECT * FROM "+r.storeName+" WHERE key = ? LIMIT 1",[t],function(e,t){var n=t.rows.length?t.rows.item(0).value:null;n&&(n=r.serializer.deserialize(n)),o(n)},function(e,t){n(t)})})}).catch(n)});return l(n,e),n},setItem:function(e,t,n){return J.apply(this,[e,t,n,1])},removeItem:function(o,e){var s=this;o=u(o);var t=new p(function(n,r){s.ready().then(function(){var t=s._dbInfo;t.db.transaction(function(e){V(e,t,"DELETE FROM "+t.storeName+" WHERE key = ?",[o],function(){n()},function(e,t){r(t)})})}).catch(r)});return l(t,e),t},clear:function(e){var o=this,t=new p(function(n,r){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){V(e,t,"DELETE FROM "+t.storeName,[],function(){n()},function(e,t){r(t)})})}).catch(r)});return l(t,e),t},length:function(e){var o=this,t=new p(function(r,n){o.ready().then(function(){var t=o._dbInfo;t.db.transaction(function(e){V(e,t,"SELECT COUNT(key) as c FROM "+t.storeName,[],function(e,t){var n=t.rows.item(0).c;r(n)},function(e,t){n(t)})})}).catch(n)});return l(t,e),t},key:function(o,e){var s=this,t=new p(function(r,n){s.ready().then(function(){var t=s._dbInfo;t.db.transaction(function(e){V(e,t,"SELECT key FROM "+t.storeName+" WHERE id = ? LIMIT 1",[o+1],function(e,t){var n=t.rows.length?t.rows.item(0).key:null;r(n)},function(e,t){n(t)})})}).catch(n)});return l(t,e),t},keys:function(e){var r=this,t=new p(function(o,n){r.ready().then(function(){var t=r._dbInfo;t.db.transaction(function(e){V(e,t,"SELECT key FROM "+t.storeName,[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).key);o(n)},function(e,t){n(t)})})}).catch(n)});return l(t,e),t},dropInstance:function(n,e){e=s.apply(this,arguments);var r=this.config();(n="function"!=typeof n&&n||{}).name||(n.name=n.name||r.name,n.storeName=n.storeName||r.storeName);var t,o=this;return l(t=n.name?new p(function(e){var t,s;t=n.name===r.name?o._dbInfo.db:openDatabase(n.name,"","",0),n.storeName?e({db:t,storeNames:[n.storeName]}):e((s=t,new p(function(o,n){s.transaction(function(e){e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(e,t){for(var n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r).name);o({db:s,storeNames:n})},function(e,t){n(t)})},function(e){n(e)})})))}).then(function(a){return new p(function(s,i){a.db.transaction(function(r){function e(t){return new p(function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],function(){e()},function(e,t){n(t)})})}for(var t=[],n=0,o=a.storeNames.length;n<o;n++)t.push(e(a.storeNames[n]));p.all(t).then(function(){s()}).catch(function(e){i(e)})},function(e){i(e)})})}):p.reject("Invalid arguments"),e),t}};function H(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function W(){return!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||0<localStorage.length}var j={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=H(e,this._defaultConfig),W()?((this._dbInfo=t).serializer=B,p.resolve()):p.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(c,e){var E=this,t=E.ready().then(function(){for(var e=E._dbInfo,t=e.keyPrefix,n=t.length,r=localStorage.length,o=1,s=0;s<r;s++){var i=localStorage.key(s);if(0===i.indexOf(t)){var a=localStorage.getItem(i);if(a&&(a=e.serializer.deserialize(a)),void 0!==(a=c(a,i.substring(n),o++)))return a}}});return l(t,e),t},getItem:function(n,e){var r=this;n=u(n);var t=r.ready().then(function(){var e=r._dbInfo,t=localStorage.getItem(e.keyPrefix+n);return t&&(t=e.serializer.deserialize(t)),t});return l(t,e),t},setItem:function(i,e,t){var a=this;i=u(i);var n=a.ready().then(function(){void 0===e&&(e=null);var s=e;return new p(function(n,r){var o=a._dbInfo;o.serializer.serialize(e,function(e,t){if(t)r(t);else try{localStorage.setItem(o.keyPrefix+i,e),n(s)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||r(e),r(e)}})})});return l(n,t),n},removeItem:function(t,e){var n=this;t=u(t);var r=n.ready().then(function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)});return l(r,e),r},clear:function(e){var r=this,t=r.ready().then(function(){for(var e=r._dbInfo.keyPrefix,t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}});return l(t,e),t},length:function(e){var t=this.keys().then(function(e){return e.length});return l(t,e),t},key:function(n,e){var r=this,t=r.ready().then(function(){var t,e=r._dbInfo;try{t=localStorage.key(n)}catch(e){t=null}return t&&(t=t.substring(e.keyPrefix.length)),t});return l(t,e),t},keys:function(e){var s=this,t=s.ready().then(function(){for(var e=s._dbInfo,t=localStorage.length,n=[],r=0;r<t;r++){var o=localStorage.key(r);0===o.indexOf(e.keyPrefix)&&n.push(o.substring(e.keyPrefix.length))}return n});return l(t,e),t},dropInstance:function(t,e){if(e=s.apply(this,arguments),!(t="function"!=typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,o=this;return l(r=t.name?new p(function(e){t.storeName?e(H(t,o._defaultConfig)):e(t.name+"/")}).then(function(e){for(var t=localStorage.length-1;0<=t;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}):p.reject("Invalid arguments"),e),r}},q=function(e,t){for(var n=e.length,r=0;r<n;){if((o=e[r])===(s=t)||"number"==typeof o&&"number"==typeof s&&isNaN(o)&&isNaN(s))return!0;r++}var o,s;return!1},X=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Q={},z={},Z={INDEXEDDB:L,WEBSQL:k,LOCALSTORAGE:j},$=[Z.INDEXEDDB._driver,Z.WEBSQL._driver,Z.LOCALSTORAGE._driver],ee=["dropInstance"],te=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ee),ne={description:"",driver:$.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function re(t,n){t[n]=function(){var e=arguments;return t.ready().then(function(){return t[n].apply(t,e)})}}function oe(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(X(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var se=function(){function o(e){for(var t in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Z)if(Z.hasOwnProperty(t)){var n=Z[t],r=n._driver;this[t]=r,Q[r]||this.defineDriver(n)}this._defaultConfig=oe({},ne),this._config=oe({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return o.prototype.config=function(e){if("object"!==(void 0===e?"undefined":r(e)))return"string"==typeof e?this._config[e]:this._config;if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e&&e.driver)||this.setDriver(this._config.driver)},o.prototype.defineDriver=function(u,e,t){var n=new p(function(t,n){try{var r=u._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!u._driver)return void n(e);for(var o=te.concat("_initStorage"),s=0,i=o.length;s<i;s++){var a=o[s],c=!q(ee,a);if((c||u[a])&&"function"!=typeof u[a])return void n(e)}!function(){for(var e=function(n){return function(){var e=new Error("Method "+n+" is not implemented by the current driver"),t=p.reject(e);return l(t,arguments[arguments.length-1]),t}},t=0,n=ee.length;t<n;t++){var r=ee[t];u[r]||(u[r]=e(r))}}();var E=function(e){Q[r],Q[r]=u,z[r]=e,t()};"_support"in u?u._support&&"function"==typeof u._support?u._support().then(E,n):E(!!u._support):E(!0)}catch(e){n(e)}});return E(n,e,t),n},o.prototype.driver=function(){return this._driver||null},o.prototype.getDriver=function(e,t,n){var r=Q[e]?p.resolve(Q[e]):p.reject(new Error("Driver not found."));return E(r,t,n),r},o.prototype.getSerializer=function(e){var t=p.resolve(B);return E(t,e),t},o.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return E(n,e,e),n},o.prototype.setDriver=function(e,t,n){var s=this;X(e)||(e=[e]);var r=this._getSupportedDrivers(e);function i(){s._config.driver=s.driver()}function a(e){return s._extend(e),i(),s._ready=s._initStorage(s._config),s._ready}var o=null!==this._driverSet?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=o.then(function(){var e=r[0];return s._dbInfo=null,s._ready=null,s.getDriver(e).then(function(e){var o;s._driver=e._driver,i(),s._wrapLibraryMethodsWithReady(),s._initDriver=(o=r,function(){var n=0;function r(){for(;n<o.length;){var e=o[n];return n++,s._dbInfo=null,s._ready=null,s.getDriver(e).then(a).catch(r)}i();var t=new Error("No available storage method found.");return s._driverSet=p.reject(t),s._driverSet}return r()})})}).catch(function(){i();var e=new Error("No available storage method found.");return s._driverSet=p.reject(e),s._driverSet}),E(this._driverSet,t,n),this._driverSet},o.prototype.supports=function(e){return!!z[e]},o.prototype._extend=function(e){oe(this,e)},o.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},o.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=te.length;e<t;e++)re(this,te[e])},o.prototype.createInstance=function(e){return new o(e)},o}(),ie=new se;t.exports=ie},{3:3}]},{},[4])(4)}).call(this,n(15))},function(e,t,n){"use strict";t.__esModule=!0,t.FETCH_ERROR=t.TYPINGNOTIFICATION_CONSTANTS=t.LOGIN_ERROR=t.MESSAGE_ERRORS=t.MESSAGES_REQUEST_ERRORS=t.USERS_REQUEST_ERRORS=t.GROUP_CREATION_ERRORS=t.INIT_ERROR=t.ERRORS=t.SERVER_ERRORS=void 0,t.SERVER_ERRORS={AUTH_ERR:{code:"AUTH_ERR_AUTH_TOKEN_NOT_FOUND",message:"The auth token %s% does not exist. Please make sure you are logged in and have a valid auth token or try login again."}},t.ERRORS={PARAMETER_MISSING:{code:"MISSING_PARAMETERS",name:"Invalid or no parameter passed to the method."}},t.INIT_ERROR={NO_APP_ID:{code:t.ERRORS.PARAMETER_MISSING.code,name:t.ERRORS.PARAMETER_MISSING.name,message:"AppID cannot be empty. Please specify a valid appID.",details:{}}},t.GROUP_CREATION_ERRORS={EMPTY_PASSWORD:{code:"ERR_EMPTY_GROUP_PASS",details:void 0,message:"Password is mandatory to join a group.",name:void 0}},t.USERS_REQUEST_ERRORS={EMPTY_USERS_LIST:{code:"EMPTY_USERS_LIST",name:"EMPTY_USERS_LIST",message:"The users list needs to have atleast one UID.",details:{}}},t.MESSAGES_REQUEST_ERRORS={REQUEST_IN_PROGRESS_ERROR:{code:"REQUEST_IN_PROGRESS",name:"REQUEST_IN_PROGRESS",message:"Request in progress.",details:{}},NOT_ENOUGH_PARAMS:{code:"NOT_ENOUGH_PARAMETERS",name:"NOT_ENOUGH_PARAMETERS",message:"`Timestamp`, `MessageId` or `updatedAfter` is required to use the 'fetchNext()' method.",details:{}}},t.MESSAGE_ERRORS={INVALID_CUSTOM_DATA:{code:"-1",name:"%s_CUSTOM_DATA",message:"",details:{}}},t.LOGIN_ERROR={NOT_INITIALIZED:{code:"-1",name:"COMETCHAT_INITIALIZATION_NOT_DONE",message:"please initialize the cometchat before using login method.",details:{}},UNAUTHORISED:{code:401,name:"USER_NOT_AUTHORISED",message:"The `authToken` of the user is not authorised. Please verify again.",details:{}},WS_CONNECTION_FAIL:{code:-1,name:"WS_CONNECTION_FAIL",message:"WS Connection failed. %s",details:{}},WS_CONNECTION_FAIL_PORT_ERROR:{code:-1,name:"WS_CONNECTION_FAIL",message:"WS Connection failed. Trying to connect with port: %s",details:{}},WS_CONNECTION_FALLBACK_FAIL_PORT_ERROR:{code:-1,name:"WS_CONNECTION_FALLBACK_FAIL",message:"WS Connection fallback failed. Trying to connect with port: %s",details:{}},WS_AUTH_FAIL:{code:-1,name:"WS_AUTH_FAIL",message:"WS username/password not correct.",details:{}},NO_INTERNET:{code:-1,name:"NO_INTERNET_CONNECTION",message:"You do not have internet connection.",details:{}},REQUEST_IN_PROGRESS:{code:-1,name:"LOGIN_IN_PROGRESS",message:"Please wait until the previous login request ends.",details:{}}},t.TYPINGNOTIFICATION_CONSTANTS={TOO_MANY_REQUEST:{code:"TOO_MANY_REQUEST",name:"TOO MANY REQUEST",message:"too many request, wait for `%s` seconds before sending next request.",details:{}}},t.FETCH_ERROR={ERROR_IN_API_CALL:{code:"FAILED_TO_FETCH",name:"FAILED_TO_FETCH",message:"There is an unknown issue with the API request. Please check your internet connection and verify the api call.",details:{}}}},function(e,s,i){"use strict";(function(e){i.d(s,"a",function(){return r}),i.d(s,"b",function(){return o});var t,n=i(40),r=(t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{}).Capacitor=t.Capacitor||new n.a,o=r.Plugins}).call(this,i(15))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.__esModule=!0,t.LocalStorage=void 0;var r=n(0),o=n(1),s=n(12),i=n(3),a=n(2),c=function(){function e(e){this.store=o.constants.DEFAULT_STORE,r.isFalsy(e)||(this.store=e),this.localStore=s.createInstance({name:r.format(o.LOCAL_STORE.STORE_STRING,i.CometChat.getAppId(),o.LOCAL_STORE.COMMON_STORE)}),this.localStore.setDriver([s.LOCALSTORAGE,s.INDEXEDDB,s.WEBSQL])}return e.getInstance=function(){return null==e.localStorage&&(e.localStorage=new e),e.localStorage},e.prototype.set=function(e,t){return this.localStore.setItem(e,JSON.stringify(t))},e.prototype.remove=function(e){this.localStore.removeItem(e)},e.prototype.update=function(e,t){this.remove(e),this.set(e,t)},e.prototype.get=function(e){var r=this;return new Promise(function(n,t){try{r.localStore.getItem(e).then(function(t){try{n(JSON.parse(t))}catch(e){n(t)}},function(e){t(e)})}catch(e){t(new a.CometChatException(e))}})},e.prototype.clearStore=function(){var r=this;return new Promise(function(n,t){try{r.localStore.keys().then(function(e){if(0<e.length)for(var t=0;t<e.length;t++)"appId"!==e[t]&&r.localStore.removeItem(e[t]),t===e.length-1&&n(!0)})}catch(e){t(e)}})},e.prototype.clear=function(e){},e.prototype.selectStore=function(e){this.store=e},e.localStorage=null,e}();t.LocalStorage=c},function(e,t,n){"use strict";t.__esModule=!0,t.GroupsController=void 0;var r=n(8),o=n(1),s=n(0),i=function(){function e(){}return e.trasformJSONGroup=function(e){var t;try{t=new r.Group(e[o.GroupConstants.KEYS.GUID],e[o.GroupConstants.KEYS.NAME],e[o.GroupConstants.KEYS.TYPE]),e.wsChannel&&delete e.wsChannel,Object.assign(t,e),e=t}catch(e){s.Logger.error("GroupsController:transformJSONGroup",e)}return e},e}();t.GroupsController=i},function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.__esModule=!0,t.TextMessage=void 0;var o=n(7),a=n(1),c=n(4),E=n(8),u=n(0),p=function(o){function e(e,t,n){var r=o.call(this,e,"text",n,a.MessageCategory.MESSAGE)||this;return r.type="text",r.data={text:t},r.text=t,r}return s(e,o),e.prototype.getSender=function(){try{return this.getSenderFromData()}catch(e){return this.sender}},e.prototype.getReceiver=function(){try{return this.getReceiverFromData()}catch(e){return this.receiver}},e.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},e.prototype.setMetadata=function(e){this.metadata=e,this.data=i(i({},this.data),{metadata:e})},e.prototype.getData=function(){return this.data},e.prototype.setData=function(e){this.data=e},e.prototype.getText=function(){return this.text},e.prototype.setText=function(e){this.text=e,this.data.text=e},e.prototype.setProcessedText=function(e){this.processedText=e},e.prototype.getProcessedText=function(){return this.processedText},e.prototype.getTags=function(){return this.tags},e.prototype.setTags=function(e){this.tags=e},e.prototype.getSenderFromData=function(){try{var e=this.getData();if(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])return new c.User(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])}catch(e){u.Logger.error("TextMessageModel: getSenderFromData",e)}},e.prototype.getReceiverFromData=function(){try{var e=this.getData(),t=e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY];if(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITYTYPE]==[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITY_TYPE.USER])return new c.User(t);var n=new E.Group(t[a.GroupConstants.KEYS.GUID],t[a.GroupConstants.KEYS.NAME],t[a.MessageConstatnts.KEYS.TYPE]);return Object.assign(n,t)}catch(e){u.Logger.error("TextMessageModel: getReceiverFromData",e)}},e.TYPE=a.MessageConstatnts.TYPE.TEXT,e.RECEIVER_TYPE=a.MessageConstatnts.RECEIVER_TYPE,e.CATEGORY=a.MessageConstatnts.CATEGORY.MESSAGE,e}(o.BaseMessage);t.TextMessage=p},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.__esModule=!0,t.MediaMessage=void 0;var s=n(7),a=n(1),c=n(4),E=n(20),u=n(8),p=n(0),l=function(s){function e(e,t,n,r){var o=s.call(this,e,n,r,a.MessageCategory.MESSAGE)||this;return o.data={},"object"!=typeof t?o.data={url:t}:o.file=t,o}return o(e,s),e.prototype.setCaption=function(e){this.caption=e,this.data[a.MessageConstatnts.KEYS.TEXT]=e},e.prototype.getCaption=function(){return this.data[a.MessageConstatnts.KEYS.TEXT]},e.prototype.getSender=function(){try{return this.getSenderFromData()}catch(e){return this.sender}},e.prototype.getReceiver=function(){try{return this.getReceiverFromData()}catch(e){return this.receiver}},e.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},e.prototype.setMetadata=function(e){this.metadata=e,this.data=i(i({},this.data),{metadata:e})},e.prototype.getData=function(){return this.data},e.prototype.setData=function(e){this.data=e},e.prototype.getAttachment=function(){return new E.Attachment(this.data.attachments[0])},e.prototype.setAttachment=function(e){this.data.attachments=[e.toJSON(e)]},e.prototype.getURL=function(){try{var e=this.getData();if(e[a.MessageConstatnts.KEYS.URL])return e[a.MessageConstatnts.KEYS.URL]}catch(e){p.Logger.error("MediaMessageModel: getURL",e)}},e.prototype.getTags=function(){return this.tags},e.prototype.setTags=function(e){this.tags=e},e.prototype.getSenderFromData=function(){try{var e=this.getData();if(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])return new c.User(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])}catch(e){p.Logger.error("MediaMessageModel: getSenderFromData",e)}},e.prototype.getReceiverFromData=function(){try{var e=this.getData(),t=e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY];if(e[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITYTYPE]==[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITY_TYPE.USER])return new c.User(t);var n=new u.Group(t[a.GroupConstants.KEYS.GUID],t[a.GroupConstants.KEYS.NAME],t[a.MessageConstatnts.KEYS.TYPE]);return Object.assign(n,t)}catch(e){p.Logger.error("MediaMessageModel: getReceiverFromData",e)}},e.TYPE=a.MessageConstatnts.TYPE,e.RECEIVER_TYPE=a.MessageConstatnts.RECEIVER_TYPE,e.CATEGORY=a.MessageConstatnts.CATEGORY,e}(s.BaseMessage);t.MediaMessage=l},function(e,t,n){"use strict";t.__esModule=!0,t.Attachment=void 0;var r=n(1),o=function(){function t(e){e.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.EXTENSION)&&(this.extension=e[r.ATTACHMENTS_CONSTANTS.KEYS.EXTENSION]),e.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.MIME_TYPE)&&(this.mimeType=e[r.ATTACHMENTS_CONSTANTS.KEYS.MIME_TYPE]),e.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.NAME)&&(this.name=e[r.ATTACHMENTS_CONSTANTS.KEYS.NAME]),e.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.SIZE)&&(this.size=e[r.ATTACHMENTS_CONSTANTS.KEYS.SIZE]),e.hasOwnProperty(r.ATTACHMENTS_CONSTANTS.KEYS.URL)&&(this.url=e[r.ATTACHMENTS_CONSTANTS.KEYS.URL])}return t.prototype.createFileFromJSON=function(e){return new t(e)},t.prototype.toJSON=function(e){return{extension:e.getExtension(),mimeType:e.getMimeType(),name:e.getName(),url:e.getUrl(),size:e.getSize()}},t.prototype.getExtension=function(){return this.extension},t.prototype.setExtension=function(e){this.extension=e},t.prototype.getMimeType=function(){return this.mimeType},t.prototype.setMimeType=function(e){this.mimeType=e},t.prototype.getName=function(){return this.name},t.prototype.setName=function(e){this.name=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getUrl=function(){return this.url},t.prototype.setUrl=function(e){this.url=e},t}();t.Attachment=o},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.__esModule=!0,t.CustomMessage=void 0;var i=n(7),c=n(1),E=n(4),u=n(0),p=n(8),a=function(a){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this;if(3==e.length){var r=e[0],o=e[1],s=e[2];n=a.call(this,r,c.MessageConstatnts.TYPE.CUSTOM,o,c.MessageCategory.MESSAGE)||this,("object"!=typeof s||Array.isArray(s))&&(s={}),n.customData=s,u.isFalsy(n.data)&&(n.data={}),n.data[c.MessageConstatnts.KEYS.CUSTOM_DATA]=s}if(4==e.length){r=e[0],o=e[1];var i=e[2];s=e[3];n=a.call(this,r,i,o,c.MessageCategory.CUSTOM)||this,("object"!=typeof s||Array.isArray(s))&&(s={}),n.customData=s,u.isFalsy(n.data)&&(n.data={}),n.data[c.MessageConstatnts.KEYS.CUSTOM_DATA]=s}return n}return o(e,a),e.prototype.getCustomData=function(){return this.customData},e.prototype.setCustomData=function(e){this.customData=e,this.data[c.MessageConstatnts.KEYS.CUSTOM_DATA]=e},e.prototype.getSender=function(){try{return this.getSenderFromData()}catch(e){return this.sender}},e.prototype.getReceiver=function(){try{return this.getReceiverFromData()}catch(e){return this.receiver}},e.prototype.getSubType=function(){return this.subType},e.prototype.setSubType=function(e){this.subType=e,this.data=s(s({},this.data),{subType:e})},e.prototype.getMetadata=function(){return this.metadata},e.prototype.setMetadata=function(e){this.metadata=e,this.data=s(s({},this.data),{metadata:e})},e.prototype.getData=function(){return this.data},e.prototype.getTags=function(){return this.tags},e.prototype.setTags=function(e){this.tags=e},e.prototype.getSenderFromData=function(){try{var e=this.getData();if(e[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.MessageConstatnts.KEYS.SENDER][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])return new E.User(e[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.MessageConstatnts.KEYS.SENDER][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])}catch(e){u.Logger.error("CustomMessageModel: getSenderFromData",e)}},e.prototype.getReceiverFromData=function(){try{var e=this.getData(),t=e[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.MessageConstatnts.KEYS.RECEIVER][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY];if(e[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.MessageConstatnts.KEYS.RECEIVER][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITYTYPE]==[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITY_TYPE.USER])return new E.User(t);var n=new p.Group(t[c.GroupConstants.KEYS.GUID],t[c.GroupConstants.KEYS.NAME],t[c.MessageConstatnts.KEYS.TYPE]);return Object.assign(n,t)}catch(e){u.Logger.error("CustomMessageModel: getReceiverFromData",e)}},e}(i.BaseMessage);t.CustomMessage=a},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.__esModule=!0,t.Action=void 0;var i=n(7),E=n(8),u=n(4),p=n(1),a=n(0),l=n(10),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.actionFromJSON=function(e){var t=new this(e[p.MessageConstatnts.KEYS.RECEIVER],e[p.MessageConstatnts.KEYS.TYPE],e[p.MessageConstatnts.KEYS.RECEIVER_TYPE],p.MessageCategory.ACTION),n=e[p.MessageConstatnts.KEYS.DATA];if(t.data=n,t.setAction(n[p.MessageConstatnts.KEYS.ACTION]),n[p.ActionConstatnts.ACTION_KEYS.EXTRAS]){var r=n[p.ActionConstatnts.ACTION_KEYS.EXTRAS];if(r[p.ActionConstatnts.ACTION_KEYS.SCOPE]){var o=r[p.ActionConstatnts.ACTION_KEYS.SCOPE];o[p.ActionConstatnts.ACTION_KEYS.NEW]&&o[p.ActionConstatnts.ACTION_KEYS.OLD]&&(t.setOldScope(o[p.ActionConstatnts.ACTION_KEYS.OLD]),t.setNewScope(o[p.ActionConstatnts.ACTION_KEYS.NEW]))}}n[p.MessageConstatnts.KEYS.METADATA]&&t.setMetadata(n[p.MessageConstatnts.KEYS.METADATA]);var s=n[p.ActionConstatnts.ACTION_KEYS.ENTITIES];if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY])if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][p.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==p.ActionConstatnts.ACTION_ENTITY_TYPE.USER){var i=new u.User(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][p.ActionConstatnts.ACTION_KEYS.ENTITY]);Object.assign(i,s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][p.ActionConstatnts.ACTION_KEYS.ENTITY]),t.actionBy=i,t.setSender(i)}else{var a=new E.Group("","","");Object.assign(a,s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][p.ActionConstatnts.ACTION_KEYS.ENTITY]),t.actionBy=a}if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR])if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][p.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==p.ActionConstatnts.ACTION_ENTITY_TYPE.USER){i=new u.User(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][p.ActionConstatnts.ACTION_KEYS.ENTITY]);Object.assign(i,s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][p.ActionConstatnts.ACTION_KEYS.ENTITY]),t.actionFor=i}else{a=new E.Group("","","");Object.assign(a,s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][p.ActionConstatnts.ACTION_KEYS.ENTITY]),t.actionFor=a}if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON])if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][p.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==p.ActionConstatnts.ACTION_ENTITY_TYPE.USER){i=new u.User(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][p.ActionConstatnts.ACTION_KEYS.ENTITY]);Object.assign(i,s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][p.ActionConstatnts.ACTION_KEYS.ENTITY]),t.actionOn=i}else if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][p.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==p.ActionConstatnts.ACTION_ENTITY_TYPE.GROUP){a=new E.Group("","","");Object.assign(a,s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][p.ActionConstatnts.ACTION_KEYS.ENTITY]),t.actionOn=a}else if(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][p.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==p.ActionConstatnts.ACTION_ENTITY_TYPE.MESSAGE){var c=l.MessageController.trasformJSONMessge(s[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][p.ActionConstatnts.ACTION_KEYS.ENTITY]);t.actionOn=c}return t.setMessage(t.getActionMessage(t)),t},t.prototype.getOldScope=function(){return this.oldScope},t.prototype.setOldScope=function(e){this.oldScope=e},t.prototype.getNewScope=function(){return this.newScope},t.prototype.setNewScope=function(e){this.newScope=e},t.prototype.getRawData=function(){return this.rawData},t.prototype.setRawData=function(e){this.rawData=e},t.prototype.getMessage=function(){return this.message},t.prototype.setMessage=function(e){this.message=e},t.prototype.getAction=function(){return this.action},t.prototype.setAction=function(e){this.action=e},t.prototype.getSender=function(){try{return this.getSenderFromData()}catch(e){return this.sender}},t.prototype.getActionBy=function(){return this.actionBy},t.prototype.setActionBy=function(e){this.actionBy=e},t.prototype.getActionOn=function(){return this.actionOn},t.prototype.setActionOn=function(e){this.actionOn=e},t.prototype.getActionFor=function(){return this.actionFor},t.prototype.setActionFor=function(e){this.actionFor=e},t.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},t.prototype.setMetadata=function(e){this.metadata=e,this.data=s(s({},this.data),{metadata:e})},t.prototype.getActionMessage=function(e){var t="";switch(e.getType()){case p.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_USER:case p.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_GROUP:switch(e.getAction()){case p.ActionConstatnts.ACTION_KEYS.ACTION_CREATED:case p.ActionConstatnts.ACTION_KEYS.ACTION_UPDATED:case p.ActionConstatnts.ACTION_KEYS.ACTION_DELETED:}break;case p.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_GROUP_MEMBER:switch(e.getAction()){case p.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_JOINED:var n=e.getActionBy();t=a.format(p.ActionConstatnts.ActionMessages.ACTION_GROUP_JOINED_MESSAGE,n.getName());break;case p.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_LEFT:n=e.getActionBy();t=a.format(p.ActionConstatnts.ActionMessages.ACTION_GROUP_LEFT_MESSAGE,n.getName());break;case p.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_KICKED:n=e.getActionBy();var r=e.getActionOn();t=a.format(p.ActionConstatnts.ActionMessages.ACTION_MEMBER_KICKED_MESSAGE,n.getName(),r.getName());break;case p.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_BANNED:n=e.getActionBy(),r=e.getActionOn();t=a.format(p.ActionConstatnts.ActionMessages.ACTION_MEMBER_BANNED_MESSAGE,n.getName(),r.getName());break;case p.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_UNBANNED:n=e.getActionBy(),r=e.getActionOn();t=a.format(p.ActionConstatnts.ActionMessages.ACTION_MEMBER_UNBANNED_MESSAGE,n.getName(),r.getName());break;case p.ActionConstatnts.ACTION_KEYS.ACTION_SCOPE_CHANGED:n=e.getActionBy(),r=e.getActionOn();var o=e.getNewScope();t=a.format(p.ActionConstatnts.ActionMessages.ACTION_MEMBER_SCOPE_CHANGED,n.getName(),r.getName(),o);break;case p.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_ADDED:n=e.getActionBy(),r=e.getActionOn();t=a.format(p.ActionConstatnts.ActionMessages.ACTION_MEMBER_ADDED_TO_GROUP,n.getName(),r.getName());break;case p.ActionConstatnts.ACTION_KEYS.TYPE_MESSAGE_EDITED:t=a.format(p.ActionConstatnts.ActionMessages.ACTION_MESSAGE_EDITED_MESSAGE,"");break;case p.ActionConstatnts.ACTION_KEYS.TYPE_MESSAGE_DELETED:t=a.format(p.ActionConstatnts.ActionMessages.ACTION_MESSAGE_DELETED_MESSAGE,"")}}return t},t.prototype.getSenderFromData=function(){var e=this.data[p.ActionConstatnts.ACTION_KEYS.ENTITIES];if(e[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY]&&e[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][p.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE]==p.ActionConstatnts.ACTION_ENTITY_TYPE.USER){var t=new u.User(e[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][p.ActionConstatnts.ACTION_KEYS.ENTITY]);return Object.assign(t,e[p.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][p.ActionConstatnts.ACTION_KEYS.ENTITY]),t}},t.TYPE=p.MessageConstatnts.TYPE,t.RECEIVER_TYPE=p.MessageConstatnts.RECEIVER_TYPE,t.CATEGORY=p.MessageConstatnts.CATEGORY,t.ACTION_TYPE=p.ActionConstatnts.ACTION_TYPE,t}(i.BaseMessage);t.Action=c},function(e,t,n){"use strict";var r,s=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.__esModule=!0,t.Call=void 0;var o=n(7),a=n(8),c=n(1),E=n(0),u=n(4),p=function(o){function e(e,t,n,r){return E.isFalsy(r)?o.call(this,e,t,n,c.MessageCategory.CALL)||this:o.call(this,e,t,n,r)||this}return s(e,o),e.prototype.getCallInitiator=function(){return this.getCallInitiatedByFromData()},e.prototype.setCallInitiator=function(e){this.callInitiator=e},e.prototype.getCallReceiver=function(){return this.getCallReceivedByFromData()},e.prototype.setCallReceiver=function(e){this.callReceiver=e},e.prototype.getData=function(){return this.data},e.prototype.setData=function(e){this.data=e},e.prototype.getSessionId=function(){return this.sessionId},e.prototype.setSessionId=function(e){this.sessionId=e},e.prototype.getMetadata=function(){return this.data.metadata&&(this.metadata=this.data.metadata),this.metadata},e.prototype.setMetadata=function(e){this.metadata=e,this.data=i(i({},this.data),{metadata:e})},e.prototype.getSender=function(){try{return this.getSenderFromData()}catch(e){return this.sender}},e.prototype.getAction=function(){return this.action},e.prototype.setAction=function(e){this.action=e},e.prototype.getInitiatedAt=function(){return this.initiatedAt},e.prototype.setInitiatedAt=function(e){this.initiatedAt=e},e.prototype.getJoinedAt=function(){return this.joinedAt},e.prototype.setJoinedAt=function(e){this.joinedAt=e},e.prototype.getRawData=function(){return this.rawData},e.prototype.setRawData=function(e){this.rawData=e},e.callFromJSON=function(e){try{var t=new this(e[c.MessageConstatnts.KEYS.RECEIVER],e[c.MessageConstatnts.KEYS.TYPE],e[c.MessageConstatnts.KEYS.RECEIVER_TYPE],c.MessageCategory.CALL),n=e[c.MessageConstatnts.KEYS.DATA];t.setAction(n[c.MessageConstatnts.KEYS.ACTION]),n[c.MessageConstatnts.KEYS.METADATA]&&t.setMetadata(n[c.MessageConstatnts.KEYS.METADATA]);var r=n[c.ActionConstatnts.ACTION_KEYS.ENTITIES];if(r[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY])r[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY];if(r[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON]){var o=r[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON];if(o[c.CallConstants.CALL_KEYS.CALL_ENTITY]){var s=o[c.CallConstants.CALL_KEYS.CALL_ENTITY];if(s[c.CallConstants.CALL_KEYS.CALL_SESSION_ID]&&(t.sessionId=s[c.CallConstants.CALL_KEYS.CALL_SESSION_ID]),s[c.CallConstants.CALL_KEYS.CALL_STATUS]&&(t.status=s[c.CallConstants.CALL_KEYS.CALL_STATUS]),s[c.CallConstants.CALL_KEYS.CALL_DATA]){var i=s[c.CallConstants.CALL_KEYS.CALL_DATA];if(i[c.CallConstants.CALL_KEYS.CALL_METADATA]&&(t.metadata=i[c.CallConstants.CALL_KEYS.CALL_METADATA]),i[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES])i[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES]}s[c.CallConstants.CALL_KEYS.CALL_INITIATED_AT]&&(t.initiatedAt=s[c.CallConstants.CALL_KEYS.CALL_INITIATED_AT]),s[c.CallConstants.CALL_KEYS.CALL_JOINED_AT]&&(t.joinedAt=s[c.CallConstants.CALL_KEYS.CALL_JOINED_AT]),s[c.CallConstants.CALL_KEYS.CALL_LEFT_AT]&&(t.joinedAt=s[c.CallConstants.CALL_KEYS.CALL_LEFT_AT])}}return t}catch(e){E.Logger.error("CallModel: callFromJSON",e)}},e.prototype.getSenderFromData=function(){try{var e=this.getData();if((e=e[c.ActionConstatnts.ACTION_KEYS.ENTITIES])[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.CallConstants.CALL_KEYS.CALL_ENTITY])return new u.User(e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][c.CallConstants.CALL_KEYS.CALL_ENTITY])}catch(e){E.Logger.error("CallModel:getSenderFromData",e)}},e.prototype.getCallInitiatedByFromData=function(){try{var e=this.getData();if((e=e[c.ActionConstatnts.ACTION_KEYS.ENTITIES])[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.CallConstants.CALL_KEYS.CALL_DATA][c.ActionConstatnts.ACTION_KEYS.ENTITIES][c.CallConstants.CALL_KEYS.CALL_SENDER])return new u.User(e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.CallConstants.CALL_KEYS.CALL_DATA][c.ActionConstatnts.ACTION_KEYS.ENTITIES][c.CallConstants.CALL_KEYS.CALL_SENDER][c.CallConstants.CALL_KEYS.CALL_ENTITY])}catch(e){E.Logger.error("CallModel:getCallInitiatedByFromData",e)}},e.prototype.getCallReceivedByFromData=function(){try{var e=this.getData();if((e=e[c.ActionConstatnts.ACTION_KEYS.ENTITIES])[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY]){if(e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY_TYPE]==c.CallConstants.CALL_KEYS.CALL_ENTITY_USER)return new u.User(e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY]);var t=new a.Group(e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.GroupConstants.KEYS.GUID],e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.GroupConstants.KEYS.NAME],e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY][c.GroupConstants.KEYS.TYPE]);return Object.assign(t,e[c.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][c.CallConstants.CALL_KEYS.CALL_ENTITY])}}catch(e){E.Logger.error("CallModel:getCallReceivedByFromData",e)}},e.TYPE=c.MessageConstatnts.TYPE,e.RECEIVER_TYPE=c.MessageConstatnts.RECEIVER_TYPE,e.CATEGORY=c.MessageConstatnts.CATEGORY,e.ACTION_TYPE=c.ActionConstatnts.ACTION_TYPE,e}(o.BaseMessage);t.Call=p},function(e,t,n){"use strict";t.__esModule=!0,t.MessageReceipt=void 0;var r=function(){function e(){this.RECEIPT_TYPE={READ_RECEIPT:"read",DELIVERY_RECEIPT:"delivery"},this.receiptType=this.RECEIPT_TYPE.DELIVERY_RECEIPT}return e.prototype.getReceiverType=function(){return this.receiverType},e.prototype.setReceiverType=function(e){this.receiverType=e},e.prototype.getSender=function(){return this.sender},e.prototype.setSender=function(e){this.sender=e},e.prototype.getReceiver=function(){return this.receiver},e.prototype.setReceiver=function(e){this.receiver=e},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.setTimestamp=function(e){this.timestamp=e},e.prototype.setReadAt=function(e){this.readAt=e},e.prototype.getReadAt=function(){return this.readAt},e.prototype.setDeliveredAt=function(e){this.deliveredAt=e},e.prototype.getDeliveredAt=function(){return this.deliveredAt},e.prototype.getMessageId=function(){return this.messageId},e.prototype.setMessageId=function(e){this.messageId=e},e.prototype.getReceiptType=function(){return this.receiptType},e.prototype.setReceiptType=function(e){void 0===e&&(e=this.RECEIPT_TYPE.DELIVERY_RECEIPT),this.receiptType=e},e}();t.MessageReceipt=r},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0,t.WSConnectionListener=t.UserLoginListener=t.CallsListener=t.UserCallListener=t.GroupsListener=t.UsersListener=t.MessagesListener=t.Listener=t.ConnectionListener=t.LoginListener=t.OngoingCallListener=t.GroupListener=t.UserListener=t.CallListener=t.MessageListener=void 0;var o=n(0),s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.onTextMessageReceived=void 0,this.onMediaMessageReceived=void 0,this.onCustomMessageReceived=void 0,this.onTypingStarted=void 0,this.onTypingEnded=void 0,this.onMessagesDelivered=void 0,this.onMessagesRead=void 0,this.onMessageEdited=void 0,this.onMessageDeleted=void 0,this.onTransientMessageReceived=void 0,o.isFalsy(e[0].onTextMessageReceived)||(this.onTextMessageReceived=e[0].onTextMessageReceived),o.isFalsy(e[0].onMediaMessageReceived)||(this.onMediaMessageReceived=e[0].onMediaMessageReceived),o.isFalsy(e[0].onTypingStarted)||(this.onTypingStarted=e[0].onTypingStarted),o.isFalsy(e[0].onTypingEnded)||(this.onTypingEnded=e[0].onTypingEnded),o.isFalsy(e[0].onMessagesDelivered)||(this.onMessagesDelivered=e[0].onMessagesDelivered),o.isFalsy(e[0].onMessagesRead)||(this.onMessagesRead=e[0].onMessagesRead),o.isFalsy(e[0].onCustomMessageReceived)||(this.onCustomMessageReceived=e[0].onCustomMessageReceived),o.isFalsy(e[0].onMessageEdited)||(this.onMessageEdited=e[0].onMessageEdited),o.isFalsy(e[0].onMessageDeleted)||(this.onMessageDeleted=e[0].onMessageDeleted),o.isFalsy(e[0].onTransientMessageReceived)||(this.onTransientMessageReceived=e[0].onTransientMessageReceived)};t.MessageListener=s;var a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.onIncomingCallReceived=void 0,this.onOutgoingCallAccepted=void 0,this.onOutgoingCallRejected=void 0,this.onIncomingCallCancelled=void 0,o.isFalsy(e[0].onIncomingCallReceived)||(this.onIncomingCallReceived=e[0].onIncomingCallReceived),o.isFalsy(e[0].onOutgoingCallAccepted)||(this.onOutgoingCallAccepted=e[0].onOutgoingCallAccepted),o.isFalsy(e[0].onOutgoingCallRejected)||(this.onOutgoingCallRejected=e[0].onOutgoingCallRejected),o.isFalsy(e[0].onIncomingCallCancelled)||(this.onIncomingCallCancelled=e[0].onIncomingCallCancelled)};t.CallListener=a;var c=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.isFalsy(e[0].onUserOnline)||(this.onUserOnline=e[0].onUserOnline),o.isFalsy(e[0].onUserOffline)||(this.onUserOffline=e[0].onUserOffline)};t.UserListener=c;var E=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.isFalsy(e[0].onGroupMemberJoined)||(this.onGroupMemberJoined=e[0].onGroupMemberJoined),o.isFalsy(e[0].onGroupMemberLeft)||(this.onGroupMemberLeft=e[0].onGroupMemberLeft),o.isFalsy(e[0].onGroupMemberKicked)||(this.onGroupMemberKicked=e[0].onGroupMemberKicked),o.isFalsy(e[0].onGroupMemberBanned)||(this.onGroupMemberBanned=e[0].onGroupMemberBanned),o.isFalsy(e[0].onGroupMemberUnbanned)||(this.onGroupMemberUnbanned=e[0].onGroupMemberUnbanned),o.isFalsy(e[0].onGroupMemberScopeChanged)||(this.onGroupMemberScopeChanged=e[0].onGroupMemberScopeChanged),o.isFalsy(e[0].onMemberAddedToGroup)||(this.onGroupMemberAddedToGroup=e[0].onMemberAddedToGroup)};t.GroupListener=E;var u=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.isFalsy(e[0].onYouLeft)||(this.onYouLeft=e[0].onYouLeft),o.isFalsy(e[0].onYouJoined)||(this.onYouJoined=e[0].onYouJoined),o.isFalsy(e[0].onUserJoined)||(this.onUserJoined=e[0].onUserJoined),o.isFalsy(e[0].onUserLeft)||(this.onUserLeft=e[0].onUserLeft),o.isFalsy(e[0].onUserListUpdated)||(this.onUserListUpdated=e[0].onUserListUpdated),o.isFalsy(e[0].onAudioModesUpdated)||(this.onAudioModesUpdated=e[0].onAudioModesUpdated),o.isFalsy(e[0].onCallEnded)||(this.onCallEnded=e[0].onCallEnded),o.isFalsy(e[0].onError)||(this.onError=e[0].onError),o.isFalsy(e[0].onRecordingStarted)||(this.onRecordingStarted=e[0].onRecordingStarted),o.isFalsy(e[0].onRecordingStopped)||(this.onRecordingStopped=e[0].onRecordingStopped),o.isFalsy(e[0].onUserMuted)||(this.onUserMuted=e[0].onUserMuted),o.isFalsy(e[0].onCallSwitchedToVideo)||(this.onCallSwitchedToVideo=e[0].onCallSwitchedToVideo)};t.OngoingCallListener=u;var p=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.isFalsy(e[0].loginSuccess)||(this.loginSuccess=e[0].loginSuccess),o.isFalsy(e[0].loginFailure)||(this.loginFailure=e[0].loginFailure),o.isFalsy(e[0].logoutSuccess)||(this.logoutSuccess=e[0].logoutSuccess),o.isFalsy(e[0].logoutFailure)||(this.logoutFailure=e[0].logoutFailure)};t.LoginListener=p;var l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.onConnected=void 0,this.inConnecting=void 0,this.onDisconnected=void 0,this.onFeatureThrottled=void 0,o.isFalsy(e[0].onConnected)||(this.onConnected=e[0].onConnected),o.isFalsy(e[0].inConnecting)||(this.inConnecting=e[0].inConnecting),o.isFalsy(e[0].onDisconnected)||(this.onDisconnected=e[0].onDisconnected),o.isFalsy(e[0].onFeatureThrottled)||(this.onFeatureThrottled=e[0].onFeatureThrottled)};t.ConnectionListener=l;var S=function(e,t){this._name=e,this._callback=t},d=function(s){function e(e,t,n,r){var o=s.call(this,e,r)||this;return o._eventListener=t,n&&(o._cursor=n),o}return i(e,s),e}(t.Listener=S);t.MessagesListener=d;var C=function(s){function e(e,t,n,r){var o=s.call(this,e,r)||this;return o._eventListener=t,n&&(o._cursor=n),o}return i(e,s),e}(S);t.UsersListener=C;var h=function(s){function e(e,t,n,r){var o=s.call(this,e,r)||this;return o._eventListener=t,n&&(o._cursor=n),o}return i(e,s),e}(S);t.GroupsListener=h;var T=function(o){function e(e,t,n){var r=o.call(this,"callListner",n)||this;return r._eventListener=e,r}return i(e,o),e}(S);t.UserCallListener=T;var g=function(s){function e(e,t,n,r){var o=s.call(this,e,r)||this;return o._eventListener=t,o}return i(e,s),e}(S);t.CallsListener=g;var _=function(s){function e(e,t,n,r){var o=s.call(this,e,r)||this;return o._eventListener=t,n&&(o._cursor=n),o}return i(e,s),e}(S);t.UserLoginListener=_;var f=function(s){function e(e,t,n,r){var o=s.call(this,e,r)||this;return o._eventListener=t,n&&(o._cursor=n),o}return i(e,s),e}(S);t.WSConnectionListener=f},function(e,t,n){"use strict";t.__esModule=!0,t.ConversationController=void 0;var a=n(37),c=n(0),r=function(){function e(){}return e.trasformJSONConversation=function(e,t,n,r,o,s){var i;try{i=new a.Conversation(e,t,n,r,o,s)}catch(e){c.Logger.error("ConversationController:transformJSONConversation",e)}return i},e}();t.ConversationController=r},function(e,t,n){"use strict";t.__esModule=!0,t.MessageListnerMaping=void 0;var r=n(0),o=n(1),s=n(12),i=n(3),a=function(){function e(e){this.store=o.constants.DEFAULT_STORE,r.isFalsy(e)||(this.store=e),this.settingsStore=s.createInstance({name:r.format(o.LOCAL_STORE.STORE_STRING,i.CometChat.getAppId(),o.LOCAL_STORE.MESSAGE_LISTENERS_LIST)}),this.settingsStore.setDriver([s.LOCALSTORAGE,s.INDEXEDDB,s.WEBSQL])}return e.getInstance=function(){return null==e.settingsStore&&(e.settingsStore=new e),e.settingsStore},e.prototype.set=function(e,t){return this.settingsStore.setItem(e,t)},e.prototype.remove=function(e){this.settingsStore.removeItem(e)},e.prototype.get=function(e){return this.settingsStore.getItem(e)},e.prototype.clearStore=function(){return this.settingsStore.clear()},e.prototype.clear=function(e){},e.prototype.selectStore=function(e){this.store=e},e.settingsStore=null,e}();t.MessageListnerMaping=a},function(e,t,n){"use strict";t.__esModule=!0,t.TypingIndicator=void 0;var r=function(){function e(e,t,n){this.receiverId=e,this.receiverType=t,this.metadata=n}return e.prototype.getReceiverType=function(){return this.receiverType},e.prototype.setReceiverType=function(e){this.receiverType=e},e.prototype.getReceiverId=function(){return this.receiverId},e.prototype.setReceiverId=function(e){this.receiverId=e},e.prototype.getMetadata=function(){return this.metadata},e.prototype.setMetadata=function(e){this.metadata=e},e.prototype.getSender=function(){return this.sender},e.prototype.setSender=function(e){this.sender=e},e}();t.TypingIndicator=r},function(e,t,n){"use strict";t.__esModule=!0,t.TransientMessage=void 0;var r=function(){function e(e,t,n){this.receiverId=e,this.receiverType=t,this.data=n||{}}return e.prototype.getReceiverId=function(){return this.receiverId},e.prototype.setReceiverId=function(e){this.receiverId=e},e.prototype.getReceiverType=function(){return this.receiverType},e.prototype.setReceiverType=function(e){this.receiverType=e},e.prototype.getData=function(){return this.data},e.prototype.setData=function(e){this.data=e},e.prototype.getSender=function(){return this.sender},e.prototype.setSender=function(e){this.sender=e},e}();t.TransientMessage=r},function(e,t,n){"use strict";var r,o,c,s,E,i,a,u,p,l,S,d,C,h,T,g,_,f,R,A,I,O,N,m,y,v,L,P;n.r(t),(o=r||(r={})).Prompt="PROMPT",o.Camera="CAMERA",o.Photos="PHOTOS",(s=c||(c={})).Rear="REAR",s.Front="FRONT",(i=E||(E={})).Uri="uri",i.Base64="base64",i.DataUrl="dataUrl",(u=a||(a={})).Documents="DOCUMENTS",u.Data="DATA",u.Cache="CACHE",u.External="EXTERNAL",u.ExternalStorage="EXTERNAL_STORAGE",(l=p||(p={})).UTF8="utf8",l.ASCII="ascii",l.UTF16="utf16",(d=S||(S={})).Heavy="HEAVY",d.Medium="MEDIUM",d.Light="LIGHT",(h=C||(C={})).SUCCESS="SUCCESS",h.WARNING="WARNING",h.ERROR="ERROR",(g=T||(T={})).Dark="DARK",g.Light="LIGHT",(f=_||(_={})).Body="body",f.Ionic="ionic",f.Native="native",f.None="none",(A=R||(R={})).Default="DEFAULT",A.Destructive="DESTRUCTIVE",A.Cancel="CANCEL",(O=I||(I={})).Camera="camera",O.Photos="photos",O.Geolocation="geolocation",O.Notifications="notifications",O.ClipboardRead="clipboard-read",O.ClipboardWrite="clipboard-write",O.Microphone="microphone",(m=N||(N={})).Smart="smart",m.Shared="shared",m.User="user",(v=y||(y={})).Dark="DARK",v.Light="LIGHT",(P=L||(L={})).None="NONE",P.Slide="SLIDE",P.Fade="FADE";var M=n(14),D=function(){function e(){this.plugins={},this.loadedPlugins={}}return e.prototype.addPlugin=function(e){this.plugins[e.config.name]=e},e.prototype.getPlugin=function(e){return this.plugins[e]},e.prototype.loadPlugin=function(e){var t=this.getPlugin(e);t&&t.load()},e.prototype.getPlugins=function(){var e=[];for(var t in this.plugins)e.push(this.plugins[t]);return e},e}(),U=new D,w=function(){function e(e,t){this.config=e,this.loaded=!1,this.listeners={},this.windowListeners={},t?t.addPlugin(this):U.addPlugin(this)}return e.prototype.addWindowListener=function(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0},e.prototype.removeWindowListener=function(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)},e.prototype.addListener=function(e,t){var n=this;this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);var r=this.windowListeners[e];return r&&!r.registered&&this.addWindowListener(r),{remove:function(){n.removeListener(e,t)}}},e.prototype.removeListener=function(e,t){var n=this.listeners[e];if(n){var r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}},e.prototype.removeAllListeners=function(){for(var e in this.listeners={},this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}},e.prototype.notifyListeners=function(e,t){var n=this.listeners[e];n&&n.forEach(function(e){return e(t)})},e.prototype.hasListeners=function(e){return!!this.listeners[e].length},e.prototype.registerWindowListener=function(e,t){var n=this;this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:function(e){n.notifyListeners(t,e)}}},e.prototype.requestPermissions=function(){return Capacitor.isNative?Capacitor.nativePromise(this.config.name,"requestPermissions",{}):Promise.resolve({results:[]})},e.prototype.load=function(){this.loaded=!0},e}(),Y=function(e){for(var t=0,n=U.getPlugins();t<n.length;t++){var r=n[t];G(e,r)}},G=function(e,t){var n;(!e.hasOwnProperty(t.config.name)||(n=t).config.platforms&&0<=n.config.platforms.indexOf(Capacitor.platform))&&(e[t.config.name]=t)},b=function(e,t){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function K(e,t){function n(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function x(s,i,a,c){return new(a||(a=Promise))(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}o((c=c.apply(s,i||[])).next())})}function B(n,r){var o,s,i,e,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(i=2&t[0]?s.return:t[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,t[1])).done)return i;switch(s=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,s=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){a.label=t[1];break}if(6===t[0]&&a.label<i[1]){a.label=i[1],i=t;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(t);break}i[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],s=0}finally{o=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var F=function(e){function t(){return e.call(this,{name:"Accessibility",platforms:["web"]})||this}return K(t,e),t.prototype.isScreenReaderEnabled=function(){throw new Error("Feature not available in the browser")},t.prototype.speak=function(e){if(!("speechSynthesis"in window))return Promise.reject("Browser does not support the Speech Synthesis API");var t=new SpeechSynthesisUtterance(e.value);return e.language&&(t.lang=e.language),window.speechSynthesis.speak(t),Promise.resolve()},t}(w),V=new F,J=function(t){function e(){var e=t.call(this,{name:"App",platforms:["web"]})||this;return"undefined"!=typeof document&&document.addEventListener("visibilitychange",e.handleVisibilityChange.bind(e),!1),e}return K(e,t),e.prototype.exitApp=function(){throw new Error("Method not implemented.")},e.prototype.canOpenUrl=function(e){return Promise.resolve({value:!0})},e.prototype.openUrl=function(e){return Promise.resolve({completed:!0})},e.prototype.getLaunchUrl=function(){return Promise.resolve({url:""})},e.prototype.getState=function(){return Promise.resolve({isActive:!0!==document.hidden})},e.prototype.handleVisibilityChange=function(){var e={isActive:!0!==document.hidden};this.notifyListeners("appStateChange",e)},e}(w),k=new J,H=function(e){function t(){return e.call(this,{name:"Browser",platforms:["web"]})||this}return K(t,e),t.prototype.open=function(t){return x(this,void 0,void 0,function(){return B(this,function(e){return this._lastWindow=window.open(t.url,t.windowName||"_blank"),[2,Promise.resolve()]})})},t.prototype.prefetch=function(e){return x(this,void 0,void 0,function(){return B(this,function(e){return[2,Promise.resolve()]})})},t.prototype.close=function(){return x(this,void 0,void 0,function(){return B(this,function(e){return this._lastWindow&&this._lastWindow.close(),[2,Promise.resolve()]})})},t}(w),W=new H,j=function(e){function t(){return e.call(this,{name:"Camera",platforms:["web"]})||this}return K(t,e),t.prototype.getPhoto=function(a){return x(this,void 0,void 0,function(){var t=this;return B(this,function(e){return[2,new Promise(function(s,i){return x(t,void 0,void 0,function(){var o,t=this;return B(this,function(e){switch(e.label){case 0:return a.webUseInput?(this.fileInputExperience(a,s),[3,7]):[3,1];case 1:if(!customElements.get("pwa-camera-modal"))return[3,6];o=document.createElement("pwa-camera-modal"),document.body.appendChild(o),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,o.componentOnReady()];case 3:return e.sent(),o.addEventListener("onPhoto",function(r){return x(t,void 0,void 0,function(){var t,n;return B(this,function(e){switch(e.label){case 0:return null!==(t=r.detail)?[3,1]:(i("User cancelled photos app"),[3,4]);case 1:return t instanceof Error?(i(t.message),[3,4]):[3,2];case 2:return n=s,[4,this._getCameraPhoto(t,a)];case 3:n.apply(void 0,[e.sent()]),e.label=4;case 4:return o.dismiss(),document.body.removeChild(o),[2]}})})}),o.present(),[3,5];case 4:return e.sent(),this.fileInputExperience(a,s),[3,5];case 5:return[3,7];case 6:this.fileInputExperience(a,s),e.label=7;case 7:return[2]}})})})]})})},t.prototype.fileInputExperience=function(o,s){var i=document.querySelector("#_capacitor-camera-input"),a=function(){i.parentNode&&i.parentNode.removeChild(i)};i||((i=document.createElement("input")).id="_capacitor-camera-input",i.type="file",document.body.appendChild(i)),i.accept="image/*",i.capture=!0,o.source===r.Photos||o.source===r.Prompt?i.removeAttribute("capture"):o.direction===c.Front?i.capture="user":o.direction===c.Rear&&(i.capture="environment"),i.addEventListener("change",function(e){var t=i.files[0],n="jpeg";if("image/png"===t.type?n="png":"image/gif"===t.type&&(n="gif"),o.resultType===E.DataUrl||o.resultType===E.Base64){var r=new FileReader;r.addEventListener("load",function(){if(o.resultType===E.DataUrl)s({dataUrl:r.result,format:n});else if(o.resultType===E.Base64){var e=r.result.split(",")[1];s({base64String:e,format:n})}a()}),r.readAsDataURL(t)}else s({webPath:URL.createObjectURL(t),format:n}),a()}),i.click()},t.prototype._getCameraPhoto=function(e,s){return new Promise(function(t,n){var r=new FileReader,o=e.type.split("/")[1];s.resultType===E.Uri?t({webPath:URL.createObjectURL(e),format:o}):(r.readAsDataURL(e),r.onloadend=function(){var e=r.result;s.resultType===E.DataUrl?t({dataUrl:e,format:o}):t({base64String:e.split(",")[1],format:o})},r.onerror=function(e){n(e)})})},t}(w),q=new j,X=function(e){function t(){return e.call(this,{name:"Clipboard",platforms:["web"]})||this}return K(t,e),t.prototype.write=function(o){return x(this,void 0,void 0,function(){var t,n,r;return B(this,function(e){switch(e.label){case 0:return navigator.clipboard?void 0!==o.string||o.url?navigator.clipboard.writeText?[4,navigator.clipboard.writeText(void 0!==o.string?o.string:o.url)]:[2,Promise.reject("Writting to clipboard not supported in this browser")]:[3,2]:[2,Promise.reject("Clipboard API not available in this browser")];case 1:return e.sent(),[3,10];case 2:if(!o.image)return[3,9];if(!navigator.clipboard.write)return[2,Promise.reject("Setting images not supported in this browser")];e.label=3;case 3:return e.trys.push([3,7,,8]),[4,fetch(o.image)];case 4:return[4,e.sent().blob()];case 5:return t=e.sent(),n=new ClipboardItem(((r={})[t.type]=t,r)),[4,navigator.clipboard.write([n])];case 6:return e.sent(),[3,8];case 7:return e.sent(),[2,Promise.reject("Failed to write image")];case 8:return[3,10];case 9:return[2,Promise.reject("Nothing to write")];case 10:return[2,Promise.resolve()]}})})},t.prototype.read=function(){return x(this,void 0,void 0,function(){var t,n,r,o;return B(this,function(e){switch(e.label){case 0:return navigator.clipboard?navigator.clipboard.read?[3,1]:navigator.clipboard.readText?[2,this.readText()]:[2,Promise.reject("Reading from clipboard not supported in this browser")]:[2,Promise.reject("Clipboard API not available in this browser")];case 1:return e.trys.push([1,5,,6]),[4,navigator.clipboard.read()];case 2:return t=e.sent(),n=t[0].types[0],[4,t[0].getType(n)];case 3:return r=e.sent(),[4,this._getBlobData(r,n)];case 4:return o=e.sent(),[2,Promise.resolve({value:o,type:n})];case 5:return e.sent(),[2,this.readText()];case 6:return[2]}})})},t.prototype.readText=function(){return x(this,void 0,void 0,function(){var t;return B(this,function(e){switch(e.label){case 0:return[4,navigator.clipboard.readText()];case 1:return t=e.sent(),[2,Promise.resolve({value:t,type:"text/plain"})]}})})},t.prototype._getBlobData=function(e,o){return new Promise(function(t,n){var r=new FileReader;o.includes("image")?r.readAsDataURL(e):r.readAsText(e),r.onloadend=function(){var e=r.result;t(e)},r.onerror=function(e){n(e)}})},t}(w),Q=new X,z=function(t){function o(){var e=t.call(this,{name:"Filesystem",platforms:["web"]})||this;return e.DEFAULT_DIRECTORY=a.Data,e.DB_VERSION=1,e.DB_NAME="Disc",e._writeCmds=["add","put","delete"],e}return K(o,t),o.prototype.initDb=function(){return x(this,void 0,void 0,function(){var r=this;return B(this,function(e){if(void 0!==this._db)return[2,this._db];if(!("indexedDB"in window))throw new Error("This browser doesn't support IndexedDB");return[2,new Promise(function(e,t){var n=indexedDB.open(r.DB_NAME,r.DB_VERSION);n.onupgradeneeded=o.doUpgrade,n.onsuccess=function(){r._db=n.result,e(n.result)},n.onerror=function(){return t(n.error)},n.onblocked=function(){}})]})})},o.doUpgrade=function(e){var t=e.target.result;switch(e.oldVersion){case 0:case 1:default:t.objectStoreNames.contains("FileStorage")&&t.deleteObjectStore("FileStorage"),t.createObjectStore("FileStorage",{keyPath:"path"}).createIndex("by_folder","folder")}},o.prototype.dbRequest=function(i,a){return x(this,void 0,void 0,function(){var s;return B(this,function(e){return s=-1!==this._writeCmds.indexOf(i)?"readwrite":"readonly",[2,this.initDb().then(function(o){return new Promise(function(e,t){var n=o.transaction(["FileStorage"],s).objectStore("FileStorage"),r=n[i].apply(n,a);r.onsuccess=function(){return e(r.result)},r.onerror=function(){return t(r.error)}})})]})})},o.prototype.dbIndexRequest=function(i,a,c){return x(this,void 0,void 0,function(){var s;return B(this,function(e){return s=-1!==this._writeCmds.indexOf(a)?"readwrite":"readonly",[2,this.initDb().then(function(o){return new Promise(function(e,t){var n=o.transaction(["FileStorage"],s).objectStore("FileStorage").index(i),r=n[a].apply(n,c);r.onsuccess=function(){return e(r.result)},r.onerror=function(){return t(r.error)}})})]})})},o.prototype.getPath=function(e,t){e=e||this.DEFAULT_DIRECTORY;var n=void 0!==t?t.replace(/^[/]+|[/]+$/g,""):"",r="/"+e;return""!==t&&(r+="/"+n),r},o.prototype.clear=function(){return x(this,void 0,void 0,function(){var t,n;return B(this,function(e){switch(e.label){case 0:return[4,this.initDb()];case 1:return t=e.sent(),n=t.transaction(["FileStorage"],"readwrite"),n.objectStore("FileStorage").clear(),[2,{}]}})})},o.prototype.readFile=function(r){return x(this,void 0,void 0,function(){var t,n;return B(this,function(e){switch(e.label){case 0:return t=this.getPath(r.directory,r.path),[4,this.dbRequest("get",[t])];case 1:if(void 0===(n=e.sent()))throw Error("File does not exist.");return[2,{data:n.content}]}})})},o.prototype.writeFile=function(p){return x(this,void 0,void 0,function(){var t,n,r,o,s,i,a,c,E,u;return B(this,function(e){switch(e.label){case 0:return t=this.getPath(p.directory,p.path),n=p.data,r=p.recursive,[4,this.dbRequest("get",[t])];case 1:if((o=e.sent())&&"directory"===o.type)throw"The supplied path is a directory.";return s=p.encoding,i=t.substr(0,t.lastIndexOf("/")),[4,this.dbRequest("get",[i])];case 2:return void 0!==e.sent()?[3,4]:-1===(a=i.indexOf("/",1))?[3,4]:(c=i.substr(a),[4,this.mkdir({path:c,directory:p.directory,recursive:r})]);case 3:e.sent(),e.label=4;case 4:return E=Date.now(),u={path:t,folder:i,type:"file",size:n.length,ctime:E,mtime:E,content:!s&&0<=n.indexOf(",")?n.split(",")[1]:n},[4,this.dbRequest("put",[u])];case 5:return e.sent(),[2,{uri:u.path}]}})})},o.prototype.appendFile=function(u){return x(this,void 0,void 0,function(){var t,n,r,o,s,i,a,c,E;return B(this,function(e){switch(e.label){case 0:return t=this.getPath(u.directory,u.path),n=u.data,r=t.substr(0,t.lastIndexOf("/")),o=Date.now(),s=o,[4,this.dbRequest("get",[t])];case 1:if((i=e.sent())&&"directory"===i.type)throw"The supplied path is a directory.";return[4,this.dbRequest("get",[r])];case 2:return void 0!==e.sent()?[3,4]:(a=r.indexOf("/",1),c=-1!==a?r.substr(a):"/",[4,this.mkdir({path:c,directory:u.directory,recursive:!0})]);case 3:e.sent(),e.label=4;case 4:return void 0!==i&&(n=i.content+n,s=i.ctime),E={path:t,folder:r,type:"file",size:n.length,ctime:s,mtime:o,content:n},[4,this.dbRequest("put",[E])];case 5:return e.sent(),[2,{}]}})})},o.prototype.deleteFile=function(n){return x(this,void 0,void 0,function(){var t;return B(this,function(e){switch(e.label){case 0:return t=this.getPath(n.directory,n.path),[4,this.dbRequest("get",[t])];case 1:if(void 0===e.sent())throw Error("File does not exist.");return[4,this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(t)])];case 2:if(0!==e.sent().length)throw Error("Folder is not empty.");return[4,this.dbRequest("delete",[t])];case 3:return e.sent(),[2,{}]}})})},o.prototype.mkdir=function(u){return x(this,void 0,void 0,function(){var t,n,r,o,s,i,a,c,E;return B(this,function(e){switch(e.label){case 0:return t=this.getPath(u.directory,u.path),n=u.recursive,r=t.substr(0,t.lastIndexOf("/")),o=(t.match(/\//g)||[]).length,[4,this.dbRequest("get",[r])];case 1:return s=e.sent(),[4,this.dbRequest("get",[t])];case 2:if(i=e.sent(),1===o)throw Error("Cannot create Root directory");if(void 0!==i)throw Error("Current directory does already exist.");if(!n&&2!==o&&void 0===s)throw Error("Parent directory must exist");return n&&2!==o&&void 0===s?(a=r.substr(r.indexOf("/",1)),[4,this.mkdir({path:a,directory:u.directory,recursive:n})]):[3,4];case 3:e.sent(),e.label=4;case 4:return c=Date.now(),E={path:t,folder:r,type:"directory",size:0,ctime:c,mtime:c},[4,this.dbRequest("put",[E])];case 5:return e.sent(),[2,{}]}})})},o.prototype.rmdir=function(p){return x(this,void 0,void 0,function(){var t,n,r,o,s,i,a,c,E,u;return B(this,function(e){switch(e.label){case 0:return t=p.path,n=p.directory,r=p.recursive,o=this.getPath(n,t),[4,this.dbRequest("get",[o])];case 1:if(void 0===(s=e.sent()))throw Error("Folder does not exist.");if("directory"!==s.type)throw Error("Requested path is not a directory");return[4,this.readdir({path:t,directory:n})];case 2:if(0!==(i=e.sent()).files.length&&!r)throw Error("Folder is not empty");a=0,c=i.files,e.label=3;case 3:return a<c.length?(E=c[a],u=t+"/"+E,[4,this.stat({path:u,directory:n})]):[3,9];case 4:return"file"!==e.sent().type?[3,6]:[4,this.deleteFile({path:u,directory:n})];case 5:return e.sent(),[3,8];case 6:return[4,this.rmdir({path:u,directory:n,recursive:r})];case 7:e.sent(),e.label=8;case 8:return a++,[3,3];case 9:return[4,this.dbRequest("delete",[o])];case 10:return e.sent(),[2,{}]}})})},o.prototype.readdir=function(o){return x(this,void 0,void 0,function(){var t,n,r;return B(this,function(e){switch(e.label){case 0:return t=this.getPath(o.directory,o.path),[4,this.dbRequest("get",[t])];case 1:if(n=e.sent(),""!==o.path&&void 0===n)throw Error("Folder does not exist.");return[4,this.dbIndexRequest("by_folder","getAllKeys",[IDBKeyRange.only(t)])];case 2:return r=e.sent(),[2,{files:r.map(function(e){return e.substring(t.length+1)})}]}})})},o.prototype.getUri=function(r){return x(this,void 0,void 0,function(){var t,n;return B(this,function(e){switch(e.label){case 0:return t=this.getPath(r.directory,r.path),[4,this.dbRequest("get",[t])];case 1:return void 0!==(n=e.sent())?[3,3]:[4,this.dbRequest("get",[t+"/"])];case 2:n=e.sent(),e.label=3;case 3:if(void 0===n)throw Error("Entry does not exist.");return[2,{uri:n.path}]}})})},o.prototype.stat=function(r){return x(this,void 0,void 0,function(){var t,n;return B(this,function(e){switch(e.label){case 0:return t=this.getPath(r.directory,r.path),[4,this.dbRequest("get",[t])];case 1:return void 0!==(n=e.sent())?[3,3]:[4,this.dbRequest("get",[t+"/"])];case 2:n=e.sent(),e.label=3;case 3:if(void 0===n)throw Error("Entry does not exist.");return[2,{type:n.type,size:n.size,ctime:n.ctime,mtime:n.mtime,uri:n.path}]}})})},o.prototype.rename=function(t){return x(this,void 0,void 0,function(){return B(this,function(e){return[2,this._copy(t,!0)]})})},o.prototype.copy=function(t){return x(this,void 0,void 0,function(){return B(this,function(e){return[2,this._copy(t,!1)]})})},o.prototype._copy=function(g,_){return void 0===_&&(_=!1),x(this,void 0,void 0,function(){var t,n,r,i,o,s,a,c,E,u,p,l,S,d,C,h,T=this;return B(this,function(e){switch(e.label){case 0:if(t=g.to,n=g.from,r=g.directory,i=g.toDirectory,!t||!n)throw Error("Both to and from must be provided");if(i||(i=r),o=this.getPath(r,n),s=this.getPath(i,t),o===s)return[2,{}];if(s.startsWith(o))throw Error("To path cannot contain the from path");e.label=1;case 1:return e.trys.push([1,3,,6]),[4,this.stat({path:t,directory:i})];case 2:return a=e.sent(),[3,6];case 3:return e.sent(),(c=t.split("/")).pop(),E=c.join("/"),0<c.length?[4,this.stat({path:E,directory:i})]:[3,5];case 4:if("directory"!==e.sent().type)throw new Error("Parent directory of the to path is a file");e.label=5;case 5:return[3,6];case 6:if(a&&"directory"===a.type)throw new Error("Cannot overwrite a directory with a file");return[4,this.stat({path:n,directory:r})];case 7:switch(u=e.sent(),p=function(r,o,s){return x(T,void 0,void 0,function(){var t,n;return B(this,function(e){switch(e.label){case 0:return t=this.getPath(i,r),[4,this.dbRequest("get",[t])];case 1:return(n=e.sent()).ctime=o,n.mtime=s,[4,this.dbRequest("put",[n])];case 2:return e.sent(),[2]}})})},u.type){case"file":return[3,8];case"directory":return[3,15]}return[3,28];case 8:return[4,this.readFile({path:n,directory:r})];case 9:return l=e.sent(),_?[4,this.deleteFile({path:n,directory:r})]:[3,11];case 10:e.sent(),e.label=11;case 11:return[4,this.writeFile({path:t,directory:i,data:l.data})];case 12:return e.sent(),_?[4,p(t,u.ctime,u.mtime)]:[3,14];case 13:e.sent(),e.label=14;case 14:return[2,{}];case 15:if(a)throw Error("Cannot move a directory over an existing object");e.label=16;case 16:return e.trys.push([16,20,,21]),[4,this.mkdir({path:t,directory:i,recursive:!1})];case 17:return e.sent(),_?[4,p(t,u.ctime,u.mtime)]:[3,19];case 18:e.sent(),e.label=19;case 19:return[3,21];case 20:return e.sent(),[3,21];case 21:return[4,this.readdir({path:n,directory:r})];case 22:S=e.sent().files,d=0,C=S,e.label=23;case 23:return d<C.length?(h=C[d],[4,this._copy({from:n+"/"+h,to:t+"/"+h,directory:r,toDirectory:i},_)]):[3,26];case 24:e.sent(),e.label=25;case 25:return d++,[3,23];case 26:return _?[4,this.rmdir({path:n,directory:r})]:[3,28];case 27:e.sent(),e.label=28;case 28:return[2,{}]}})})},o._debug=!0,o}(w),Z=new z,$=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.forEach(function(e){if(e&&"object"==typeof e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])}),n},ee=function(e){function t(){return e.call(this,{name:"Geolocation",platforms:["web"]})||this}return K(t,e),t.prototype.getCurrentPosition=function(r){var e=this;return new Promise(function(t,n){return e.requestPermissions().then(function(e){window.navigator.geolocation.getCurrentPosition(function(e){t(e)},function(e){n(e)},$({enableHighAccuracy:!0,timeout:1e4,maximumAge:0},r))})})},t.prototype.watchPosition=function(e,t){return""+window.navigator.geolocation.watchPosition(function(e){t(e)},function(e){t(null,e)},$({enableHighAccuracy:!0,timeout:1e4,maximumAge:0},e))},t.prototype.clearWatch=function(e){return window.navigator.geolocation.clearWatch(parseInt(e.id,10)),Promise.resolve()},t}(w),te=new ee,ne=function(e){function t(){return e.call(this,{name:"Device",platforms:["web"]})||this}return K(t,e),t.prototype.getInfo=function(){return x(this,void 0,void 0,function(){var t,n;return B(this,function(e){return t=navigator.userAgent,n=this.parseUa(t),[2,Promise.resolve({model:n.model,platform:"web",appVersion:"",appBuild:"",appId:"",appName:"",operatingSystem:n.operatingSystem,osVersion:n.osVersion,manufacturer:navigator.vendor,isVirtual:!1,uuid:this.getUid()})]})})},t.prototype.getBatteryInfo=function(){return x(this,void 0,void 0,function(){var t;return B(this,function(e){switch(e.label){case 0:t={},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,navigator.getBattery()];case 2:return t=e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2,Promise.resolve({batteryLevel:t.level,isCharging:t.charging})]}})})},t.prototype.getLanguageCode=function(){return x(this,void 0,void 0,function(){return B(this,function(e){return[2,{value:navigator.language}]})})},t.prototype.parseUa=function(e){var t={},n=e.indexOf("(")+1,r=e.indexOf(") AppleWebKit");-1!==e.indexOf(") Gecko")&&(r=e.indexOf(") Gecko"));var o=e.substring(n,r);if(-1!==e.indexOf("Android"))t.model=o.replace("; wv","").split("; ").pop().split(" Build")[0],t.osVersion=o.split("; ")[1];else if(t.model=o.split("; ")[0],navigator.oscpu)t.osVersion=navigator.oscpu;else if(-1!==e.indexOf("Windows"))t.osVersion=o;else{var s=o.split("; ").pop().replace(" like Mac OS X","").split(" ");t.osVersion=s[s.length-1].replace(/_/g,".")}return/android/i.test(e)?t.operatingSystem="android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?t.operatingSystem="ios":/Win/.test(e)?t.operatingSystem="windows":/Mac/i.test(e)?t.operatingSystem="mac":t.operatingSystem="unknown",t},t.prototype.getUid=function(){var e=window.localStorage.getItem("_capuid");return e||(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),window.localStorage.setItem("_capuid",e),e)},t}(w),re=new ne,oe=function(t){function e(){var e=t.call(this,{name:"LocalNotifications",platforms:["web"]})||this;return e.pending=[],e}return K(e,t),e.prototype.createChannel=function(e){throw new Error("Feature not available in the browser. "+e.id)},e.prototype.deleteChannel=function(e){throw new Error("Feature not available in the browser. "+e.id)},e.prototype.listChannels=function(){throw new Error("Feature not available in the browser")},e.prototype.sendPending=function(){var t=this,n=[],r=+new Date;this.pending.forEach(function(e){e.schedule&&e.schedule.at&&+e.schedule.at<=r&&(t.buildNotification(e),n.push(e))}),this.pending=this.pending.filter(function(t){return!n.find(function(e){return e===t})})},e.prototype.sendNotification=function(e){var t=this,n=e;if(e.schedule&&e.schedule.at){var r=+e.schedule.at-+new Date;return this.pending.push(n),void setTimeout(function(){t.sendPending()},r)}this.buildNotification(e)},e.prototype.buildNotification=function(e){var t=e;return new Notification(t.title,{body:t.body})},e.prototype.schedule=function(e){var t=this,n=[];return e.notifications.forEach(function(e){n.push(t.sendNotification(e))}),Promise.resolve({notifications:e.notifications.map(function(e){return{id:""+e.id}})})},e.prototype.getPending=function(){return Promise.resolve({notifications:this.pending.map(function(e){return{id:""+e.id}})})},e.prototype.registerActionTypes=function(e){throw new Error("Method not implemented.")},e.prototype.cancel=function(e){return this.pending=this.pending.filter(function(t){return!e.notifications.find(function(e){return e.id===""+t.id})}),Promise.resolve()},e.prototype.areEnabled=function(){return Promise.resolve({value:"granted"===Notification.permission})},e.prototype.requestPermission=function(){return new Promise(function(n){Notification.requestPermission(function(e){var t=!0;"denied"!==e&&"default"!==e||(t=!1),n({granted:t})})})},e.prototype.requestPermissions=function(){return new Promise(function(t,n){Notification.requestPermission(function(e){"denied"!==e&&"default"!==e?t({results:[e]}):n(e)})})},e}(w),se=new oe,ie=function(e){function t(){return e.call(this,{name:"Share",platforms:["web"]})||this}return K(t,e),t.prototype.share=function(e){return navigator.share?navigator.share({title:e.title,text:e.text,url:e.url}):Promise.reject("Web Share API not available")},t}(w),ae=new ie,ce=function(e){function t(){return e.call(this,{name:"Modals",platforms:["web"]})||this}return K(t,e),t.prototype.alert=function(t){return x(this,void 0,void 0,function(){return B(this,function(e){return window.alert(t.message),[2,Promise.resolve()]})})},t.prototype.prompt=function(n){return x(this,void 0,void 0,function(){var t;return B(this,function(e){return t=window.prompt(n.message,n.inputText||""),[2,Promise.resolve({value:t,cancelled:null===t})]})})},t.prototype.confirm=function(n){return x(this,void 0,void 0,function(){var t;return B(this,function(e){return t=window.confirm(n.message),[2,Promise.resolve({value:t})]})})},t.prototype.showActions=function(n){return x(this,void 0,void 0,function(){var t=this;return B(this,function(e){return[2,new Promise(function(o,e){return x(t,void 0,void 0,function(){var t,r=this;return B(this,function(e){return(t=document.querySelector("pwa-action-sheet"))||(t=document.createElement("pwa-action-sheet"),document.body.appendChild(t)),t.header=n.title,t.cancelable=!1,t.options=n.options,t.addEventListener("onSelection",function(n){return x(r,void 0,void 0,function(){var t;return B(this,function(e){return t=n.detail,o({index:t}),[2]})})}),[2]})})})]})})},t}(w),Ee=new ce,ue=function(t){function e(){var e=t.call(this,{name:"Motion"})||this;return e.registerWindowListener("devicemotion","accel"),e.registerWindowListener("deviceorientation","orientation"),e}return K(e,t),e}(w),pe=new ue,le=function(t){function e(){var e=t.call(this,{name:"Network",platforms:["web"]})||this;return e.listenerFunction=null,e}return K(e,t),e.prototype.getStatus=function(){return new Promise(function(e,t){if(window.navigator){var n=window.navigator.onLine,r=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection,o=r?r.type||r.effectiveType:"wifi";e({connected:n,connectionType:n?o:"none"})}else t("Network info not available")})},e.prototype.addListener=function(e,t){var n=window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection,r=n?n.type||n.effectiveType:"wifi",o=t.bind(this,{connected:!0,connectionType:r}),s=t.bind(this,{connected:!1,connectionType:"none"});if(0===e.localeCompare("networkStatusChange"))return window.addEventListener("online",o),window.addEventListener("offline",s),{remove:function(){window.removeEventListener("online",o),window.removeEventListener("offline",s)}}},e}(w),Se=new le,de=function(e){function t(){return e.call(this,{name:"Permissions"})||this}return K(t,e),t.prototype.query=function(r){return x(this,void 0,void 0,function(){var t,n;return B(this,function(e){switch(e.label){case 0:return(t=window.navigator).permissions?(n=r.name===I.Photos?"camera":r.name,[4,t.permissions.query({name:n})]):[2,Promise.reject("This browser does not support the Permissions API")];case 1:return[2,{state:e.sent().state}]}})})},t}(w),Ce=new de,he=function(e){function t(){return e.call(this,{name:"SplashScreen",platforms:["web"]})||this}return K(t,e),t.prototype.show=function(e,t){return Promise.resolve()},t.prototype.hide=function(e,t){return Promise.resolve()},t}(w),Te=new he,ge=function(t){function e(){var e=t.call(this,{name:"Storage",platforms:["web"]})||this;return e.KEY_PREFIX="_cap_",e}return K(e,t),e.prototype.get=function(n){var r=this;return new Promise(function(e,t){e({value:window.localStorage.getItem(r.makeKey(n.key))})})},e.prototype.set=function(n){var r=this;return new Promise(function(e,t){window.localStorage.setItem(r.makeKey(n.key),n.value),e()})},e.prototype.remove=function(n){var r=this;return new Promise(function(e,t){window.localStorage.removeItem(r.makeKey(n.key)),e()})},e.prototype.keys=function(){var n=this;return new Promise(function(e,t){e({keys:Object.keys(localStorage).filter(function(e){return n.isKey(e)}).map(function(e){return n.getKey(e)})})})},e.prototype.clear=function(){var n=this;return new Promise(function(e,t){Object.keys(localStorage).filter(function(e){return n.isKey(e)}).forEach(function(e){return window.localStorage.removeItem(e)}),e()})},e.prototype.makeKey=function(e){return this.KEY_PREFIX+e},e.prototype.isKey=function(e){return 0===e.indexOf(this.KEY_PREFIX)},e.prototype.getKey=function(e){return e.substr(this.KEY_PREFIX.length)},e}(w),_e=new ge,fe=function(e){function t(){return e.call(this,{name:"Toast",platforms:["web"]})||this}return K(t,e),t.prototype.show=function(r){return x(this,void 0,void 0,function(){var t,n;return B(this,function(e){return t=2e3,r.duration&&(t="long"===r.duration?3500:2e3),(n=document.createElement("pwa-toast")).duration=t,n.message=r.text,document.body.appendChild(n),[2]})})},t}(w),Re=new fe;Y(M.b);var Ae=function(e){G(M.b,e)};n.d(t,"CameraSource",function(){return r}),n.d(t,"CameraDirection",function(){return c}),n.d(t,"CameraResultType",function(){return E}),n.d(t,"FilesystemDirectory",function(){return a}),n.d(t,"FilesystemEncoding",function(){return p}),n.d(t,"HapticsImpactStyle",function(){return S}),n.d(t,"HapticsNotificationType",function(){return C}),n.d(t,"KeyboardStyle",function(){return T}),n.d(t,"KeyboardResize",function(){return _}),n.d(t,"ActionSheetOptionStyle",function(){return R}),n.d(t,"PermissionType",function(){return I}),n.d(t,"PhotosAlbumType",function(){return N}),n.d(t,"StatusBarStyle",function(){return y}),n.d(t,"StatusBarAnimation",function(){return L}),n.d(t,"Capacitor",function(){return M.a}),n.d(t,"Plugins",function(){return M.b}),n.d(t,"registerWebPlugin",function(){return Ae}),n.d(t,"AccessibilityPluginWeb",function(){return F}),n.d(t,"Accessibility",function(){return V}),n.d(t,"AppPluginWeb",function(){return J}),n.d(t,"App",function(){return k}),n.d(t,"BrowserPluginWeb",function(){return H}),n.d(t,"Browser",function(){return W}),n.d(t,"CameraPluginWeb",function(){return j}),n.d(t,"Camera",function(){return q}),n.d(t,"ClipboardPluginWeb",function(){return X}),n.d(t,"Clipboard",function(){return Q}),n.d(t,"FilesystemPluginWeb",function(){return z}),n.d(t,"Filesystem",function(){return Z}),n.d(t,"GeolocationPluginWeb",function(){return ee}),n.d(t,"Geolocation",function(){return te}),n.d(t,"DevicePluginWeb",function(){return ne}),n.d(t,"Device",function(){return re}),n.d(t,"LocalNotificationsPluginWeb",function(){return oe}),n.d(t,"LocalNotifications",function(){return se}),n.d(t,"SharePluginWeb",function(){return ie}),n.d(t,"Share",function(){return ae}),n.d(t,"ModalsPluginWeb",function(){return ce}),n.d(t,"Modals",function(){return Ee}),n.d(t,"MotionPluginWeb",function(){return ue}),n.d(t,"Motion",function(){return pe}),n.d(t,"NetworkPluginWeb",function(){return le}),n.d(t,"Network",function(){return Se}),n.d(t,"PermissionsPluginWeb",function(){return de}),n.d(t,"Permissions",function(){return Ce}),n.d(t,"SplashScreenPluginWeb",function(){return he}),n.d(t,"SplashScreen",function(){return Te}),n.d(t,"StoragePluginWeb",function(){return ge}),n.d(t,"Storage",function(){return _e}),n.d(t,"ToastPluginWeb",function(){return fe}),n.d(t,"Toast",function(){return Re}),n.d(t,"WebPluginRegistry",function(){return D}),n.d(t,"WebPlugins",function(){return U}),n.d(t,"WebPlugin",function(){return w}),n.d(t,"mergeWebPlugins",function(){return Y}),n.d(t,"mergeWebPlugin",function(){return G})},function(e,t,n){"use strict";t.__esModule=!0,t.EndpointFactory=void 0;var i=n(0),a=n(1),c=n(16),E=n(3),u=n(2),r=function(){function s(){this.baseUrl="https://%s.apiclient-%s.cometchat.io/",this.apiVersion=a.APPINFO.apiVersion,this.adminApiUrl="https://%s.api-%s.cometchat.io/",this.adminApiVersion=a.APPINFO.apiVersion,this.extensionApi="https://%s-%s.cometchat.io/%s",this.prosodyApi="https://%s.%s/%s",this.wsApi="https://%s/%s",this.uriEndpoints={authToken:{endpoint:"users/{{uid}}/auth_tokens",method:"POST",data:{uid:"string|max:100"},isAdminApi:!0},appSettings:{endpoint:"settings",method:"GET"},login:{endpoint:"admin/users/auth",method:"POST",data:{uid:"string|max:100"}},logout:{endpoint:"admin/users/auth/{{authToken}}",method:"DELETE"},getMyDetails:{endpoint:"me",method:"GET"},updateMyDetails:{endpoint:"me",method:"PUT"},getJWT:{endpoint:"me/jwt",method:"POST"},users:{endpoint:"users",method:"GET"},user:{endpoint:"users/{{uid}}",method:"GET"},blockUsers:{endpoint:"blockedusers",method:"POST"},blockedUsersList:{endpoint:"blockedusers",method:"GET"},unblockUsers:{endpoint:"blockedusers",method:"DELETE"},userLogout:{endpoint:"me",method:"DELETE"},createUser:{endpoint:"users",method:"POST",isAdminApi:!0},updateUser:{endpoint:"users/{{uid}}",method:"PUT",isAdminApi:!0},sendFriendRequests:{endpoint:"user/friends",method:"POST",data:{uids:"array<string|max:100>"}},getFriends:{endpoint:"user/friends",method:"GET"},unfriend:{endpoint:"user/friends/{{uid}}/{{gid}}",method:"DELETE",data:{uids:"array<string|max:100>"}},acceptFriendRequest:{endpoint:"user/friends/{{uid}}/accept",method:"PUT",data:{uids:"array<string|max:100>"}},rejectFriendRequest:{endpoint:"user/friends/{{uid}}/reject",method:"DELETE",data:{uids:"array<string|max:100>"}},createGroup:{endpoint:"groups",method:"POST",data:{guid:"required|string|max:100",name:"required|string|max:100",type:"enum|public,protected,password",password:"filled|string|max:100"}},getGroups:{endpoint:"groups",method:"GET"},getGroup:{endpoint:"groups/{{guid}}",method:"GET"},updateGroup:{endpoint:"groups/{{guid}}",method:"PUT"},deleteGroup:{endpoint:"groups/{{guid}}",method:"DELETE"},addGroupMembers:{endpoint:"groups/{{guid}}/members",method:"POST",data:{uids:"array<string|max:100>"}},getGroupMembers:{endpoint:"groups/{{guid}}/members",method:"GET"},joinGroup:{endpoint:"groups/{{guid}}/members",method:"POST"},leaveGroup:{endpoint:"groups/{{guid}}/members",method:"DELETE"},kickGroupMembers:{endpoint:"groups/{{guid}}/members/{{uid}}",method:"DELETE",data:{uids:"array<string|max:100>"}},changeScopeOfMember:{endpoint:"groups/{{guid}}/members/{{uid}}",method:"PUT",data:{uids:"array<string|max:100>"}},banGroupMember:{endpoint:"groups/{{guid}}/bannedusers/{{uid}}",method:"POST",data:{uids:"array<string|max:100>"}},unbanGroupMember:{endpoint:"groups/{{guid}}/bannedusers/{{uid}}",method:"DELETE",data:{uids:"array<string|max:100>"}},addMemebersToGroup:{endpoint:"groups/{{guid}}/members",method:"PUT"},getBannedGroupMembers:{endpoint:"groups/{{guid}}/bannedusers",method:"GET"},promotemoteGroupMember:{endpoint:"groups/{{guid}}/promote",method:"PUT",data:{uids:"array<string|max:100>"}},demoteGroupMember:{endpoint:"groups/{{guid}}/demote",method:"DELETE",data:{uids:"array<string|max:100>"}},transferOwnership:{endpoint:"groups/{{guid}}/owner",method:"PATCH"},sendMessage:{endpoint:"messages",method:"POST",data:{sender:"array:string:max:100>",isGroupMember:"filled|boolean|bail",data:"required|json"}},sendMessageInThread:{endpoint:"messages/{{parentId}}/thread",method:"POST",data:{sender:"array:string:max:100>",isGroupMember:"filled|boolean|bail",data:"required|json"}},getMessages:{endpoint:"messages",method:"GET"},getMessageDetails:{endpoint:"messages/{{messageId}}",method:"GET"},getUserMessages:{endpoint:"users/{{listId}}/messages",method:"GET"},getGroupMessages:{endpoint:"groups/{{listId}}/messages",method:"GET"},getThreadMessages:{endpoint:"messages/{{listId}}/thread",method:"GET"},getMessage:{endpoint:"user/messages/{{muid}}",method:"GET"},updateMessage:{endpoint:"messages/{{messageId}}",method:"PUT"},deleteMessage:{endpoint:"messages/{{messageId}}",method:"DELETE"},createCallSession:{endpoint:"calls",method:"POST",data:{}},updateCallSession:{endpoint:"calls/{{sessionid}}",method:"put",data:{}},getConversations:{endpoint:"conversations",method:"GET"},getUserConversation:{endpoint:"users/{{uid}}/conversation",method:"GET"},getGroupConversation:{endpoint:"groups/{{guid}}/conversation",method:"GET"},deleteUserConversation:{endpoint:"users/{{uid}}/conversation",method:"DELETE"},deleteGroupConversation:{endpoint:"groups/{{guid}}/conversation",method:"DELETE"},updateUserConversation:{endpoint:"users/{{uid}}/conversation",method:"PUT"},updateGroupConversation:{endpoint:"groups/{{guid}}/conversation",method:"PUT"},updateCallType:{endpoint:"calls/{{sessionid}}/type",method:"PATCH"}}}return s.prototype.getEndpointData=function(o){return new Promise(function(r,t){try{c.LocalStorage.getInstance().get(a.LOCAL_STORE.KEY_APP_SETTINGS).then(function(e){if(i.isFalsy(e)){var t={};if((new s).uriEndpoints.hasOwnProperty(o))if((t=(new s).uriEndpoints[o]).hasOwnProperty("isAdminApi")){var n=i.format((new s).adminApiUrl,E.CometChat.getAppId(),E.CometChat.appSettings.getRegion())+(new s).adminApiVersion+"/"+t.endpoint;t.endpoint=n}else{n=i.format((new s).baseUrl,E.CometChat.getAppId(),E.CometChat.appSettings.getRegion())+(new s).apiVersion+"/"+t.endpoint;t.endpoint=n}r(t)}else{t={};if((new s).uriEndpoints.hasOwnProperty(o))if((t=(new s).uriEndpoints[o]).hasOwnProperty("isAdminApi"))t.endpoint="https://"+e[a.APP_SETTINGS.KEYS.ADMIN_API_HOST]+"/"+(new s).adminApiVersion+"/"+t.endpoint;else{n="https://"+e[a.APP_SETTINGS.KEYS.CLIENT_API_HOST]+"/"+(new s).apiVersion+"/"+t.endpoint;t.endpoint=n}r(t)}},function(e){var t;(new s).uriEndpoints.hasOwnProperty(o)&&((t=(new s).uriEndpoints[o]).hasOwnProperty(["isAdminApi"])?t.endpoint=i.format((new s).adminApiUrl,E.CometChat.getAppId(),E.CometChat.appSettings.getRegion())+(new s).adminApiVersion+"/"+t.endpoint:t.endpoint=i.format((new s).baseUrl,E.CometChat.getAppId(),E.CometChat.appSettings.getRegion())+(new s).apiVersion+"/"+t.endpoint),r(t)})}catch(e){t(new u.CometChatException(e))}})},s}();t.EndpointFactory=r},function(e,t,n){"use strict";t.__esModule=!0,t.getEndPoint=void 0;var r=n(31),i=n(2);t.getEndPoint=function(e,s){void 0===e&&(e=""),void 0===s&&(s={});var t=new r.EndpointFactory;return new Promise(function(r,o){try{t.getEndpointData(e).then(function(e){var t=e;if(t){for(var n in s)t.endpoint=t.endpoint.replace("{{"+n+"}}",s[n]);r(t)}else o({error:"Unknown endPoint name."})})}catch(e){o(new i.CometChatException(e))}})}},function(e,t,n){"use strict";t.__esModule=!0,t.KeyStore=void 0;var r=n(3),o=n(0),s=n(1),i=n(12),a=n(2),c=function(){function e(e){this.store=s.constants.DEFAULT_STORE,o.isFalsy(e)||(this.store=e),this.keyStore=i.createInstance({name:o.format(s.LOCAL_STORE.STORE_STRING,r.CometChat.getAppId(),s.LOCAL_STORE.KEYS_STORE)}),this.keyStore.setDriver([i.LOCALSTORAGE,i.INDEXEDDB,i.WEBSQL])}return e.getInstance=function(){return null==e.KeyStore&&(e.KeyStore=new e),e.KeyStore},e.prototype.set=function(e,t){return this.keyStore.setItem(e,t)},e.prototype.remove=function(e){this.keyStore.removeItem(e)},e.prototype.get=function(e){var r=this;return new Promise(function(n,t){try{r.keyStore.getItem(e).then(function(t){try{n(JSON.parse(t))}catch(e){n(t)}},function(e){t(e)})}catch(e){t(new a.CometChatException(e))}})},e.prototype.clearStore=function(){return this.keyStore.clear()},e}();t.KeyStore=c},function(e,t,n){"use strict";t.__esModule=!0,t.CallController=void 0;var o=n(1),s=n(0),r=n(3),i=n(2),a=n(25),c=n(30).Plugins.Calling,E=function(){function e(){this.TAG="calling Log",this.callListner=void 0,this.CALL_NO_ANSWER_INTERVAL=45e3}return e.prototype.getCallListner=function(){return this.callListner},e.prototype.setCallListner=function(e){this.callListner=new a.UserCallListener(e)},e.getInstance=function(){try{return null!=this.callController&&null!=this.callController||(this.callController=new e),this.callController}catch(e){s.Logger.error("CallController: getInstance",e)}},e.prototype.getActiveCall=function(){try{return s.isFalsy(this.call)?null:this.call}catch(e){s.Logger.error("CallController: getActiveCall",e)}},e.prototype.initiateCall=function(n){var r=this;return new Promise(function(e,t){try{s.isFalsy(r.call)?null!=n&&null!=n?(r.call=n,r.startCallTimer(),e(n)):t(new i.CometChatException(o.CALL_ERROR.ERROR_IN_CALLING)):t(new i.CometChatException(o.CALL_ERROR.CALL_ALREADY_INITIATED))}catch(e){t(new i.CometChatException(e))}})},e.prototype.endCall=function(e){try{this.endCallSession()}catch(e){s.Logger.error("CallController: endCall",e)}},e.prototype.onCallStarted=function(n){var r=this;return new Promise(function(e,t){try{s.isFalsy(r.call)?null!=n&&null!=n?e(r.call=n):t(new i.CometChatException(o.CALL_ERROR.ERROR_IN_CALLING)):t(new i.CometChatException(o.CALL_ERROR.CALL_ALREADY_INITIATED))}catch(e){t(new i.CometChatException(e))}})},e.prototype.endCallSession=function(){try{this.call=void 0,e.callController=void 0,this.timer&&this.stopCallTimer()}catch(e){s.Logger.error("CallController:EndCallSession",{e:e})}},e.prototype.startCallTimer=function(){var t=this;try{this.timer=setTimeout(function(){t.call?r.CometChat.sendUnansweredResponse(t.call.getSessionId()).then(function(e){t.endCallSession()},function(e){t.endCallSession()}):t.endCallSession()},this.CALL_NO_ANSWER_INTERVAL)}catch(e){s.Logger.error("CallController: startCallTimer",e)}},e.prototype.stopCallTimer=function(){try{clearTimeout(this.timer)}catch(e){s.Logger.error("CallController: stopCallTimer",e)}},e.prototype.callStarted=function(){this.timer&&this.stopCallTimer()},e.prototype.endSession=function(){c.endCallSession()},e.callController=void 0,e}();t.CallController=E},function(e,t,n){"use strict";t.__esModule=!0,t.GroupMembersController=void 0;var r=n(36),o=n(1),s=n(0),i=function(){function e(){}return e.trasformJSONGroupMember=function(t){var e;try{return t.status&&"offline"!==t.status?t.status="online":t.status="offline",e=new r.GroupMember(t[o.GroupMemersConstans.KEYS.UID]),Object.assign(e,t),e}catch(e){return s.Logger.error("GroupMembersController:trasformJSONGroupMember",{e:e,groupMember:t}),t}},e}();t.GroupMembersController=i},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0,t.GroupMember=void 0;var s=n(4),i=n(1),a=function(r){function e(e,t){var n=r.call(this,e)||this;return n.joinedAt=0,t&&(n.scope=t),n}return o(e,r),e.prototype.setScope=function(e){this.scope=e},e.prototype.setJoinedAt=function(e){this.joinedAt=e},e.prototype.setGuid=function(e){this.guid=e},e.prototype.getScope=function(){return this.scope},e.prototype.getJoinedAt=function(){return this.joinedAt},e.prototype.getGuid=function(){return this.guid},e.GroupMemberScope=i.GroupMemberScope,e}(s.User);t.GroupMember=a},function(e,t,n){"use strict";t.__esModule=!0,t.Conversation=void 0;var i=n(10),a=n(1),c=n(11),E=n(17),r=function(){function e(e,t,n,r,o,s){this.conversationId=e,this.conversationType=t,s&&0<s.length&&(this.tags=s),void 0!==n&&void 0!==(this.lastMessage=n).id&&(this.lastMessage=i.MessageController.trasformJSONMessge(n)),this.conversationType==a.MessageConstatnts.RECEIVER_TYPE.USER?this.conversationWith=c.UsersController.trasformJSONUser(r):this.conversationWith=E.GroupsController.trasformJSONGroup(r),this.unreadMessageCount=void 0!==o?o:0}return e.prototype.setConversationId=function(e){this.conversationId=e},e.prototype.setConversationType=function(e){this.conversationType=e},e.prototype.setLastMessage=function(e){this.lastMessage=e},e.prototype.setConversationWith=function(e){this.conversationWith=e},e.prototype.setUnreadMessageCount=function(e){this.unreadMessageCount=e},e.prototype.getConversationId=function(){return this.conversationId},e.prototype.getConversationType=function(){return this.conversationType},e.prototype.getLastMessage=function(){return this.lastMessage},e.prototype.getConversationWith=function(){return this.conversationWith},e.prototype.getUnreadMessageCount=function(){return this.unreadMessageCount},e.prototype.getTags=function(){return this.tags},e}();t.Conversation=r},function(e,t,n){"use strict";t.__esModule=!0,t.TypingNotificationController=void 0;var r=n(0),o=function(){function e(){}return e.addTypingStarted=function(e){this.TYPING_STARTED_MAP[e]=r.getCurrentTime()},e.removeTypingStarted=function(e){delete this.TYPING_STARTED_MAP[e]},e.getTypingStartedMap=function(e){if(e)return this.TYPING_STARTED_MAP[e]},e.addTypingEnded=function(e){this.TYPING_ENDED_MAP[e]=r.getCurrentTime()},e.removeTypingEnded=function(e){delete this.TYPING_ENDED_MAP[e]},e.getTypingEndedMap=function(e){if(e)return this.TYPING_ENDED_MAP[e]},e.addIncomingTypingStarted=function(e){this.INCOMING_TYPING_STARTED_MAP[e.getReceiverId()]={typingNotification:e,timestamp:r.getCurrentTime()}},e.removeIncomingTypingStarted=function(e){delete this.INCOMING_TYPING_STARTED_MAP[e.getReceiverId()]},e.TYPING_STARTED_MAP={},e.TYPING_ENDED_MAP={},e.INCOMING_TYPING_STARTED_MAP={},e}();t.TypingNotificationController=o},function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)r[o]=s[i];return r};t.__esModule=!0,t.ListenerHandlers=void 0;var o=n(0),s=n(25),i=function(){function e(){this.connectionHandlers=[],this.loginHandlers=[],this.messageHandlers=[],this.userHandlers=[],this.groupHandlers=[],this.callHandlers=[]}return e.getInstance=function(){return null!=this.listenerHandlers&&null!=this.listenerHandlers||(this.listenerHandlers=new e),this.listenerHandlers},e.prototype.addConnectionEventListener=function(t,e){try{this.connectionHandlers=this.connectionHandlers.filter(function(e){return e._name!=t}),this.connectionHandlers=r(this.connectionHandlers,[new s.WSConnectionListener(t,e)])}catch(e){o.Logger.error("ListenerHandlers: addWSConnectionEventListener",e)}},e.prototype.removeConnectionEventListener=function(t){try{this.connectionHandlers=this.connectionHandlers.filter(function(e){return e._name!==t})}catch(e){o.Logger.error("ListenerHandlers: removeWSConnectionEventListener",e)}},e.prototype.addLoginEventListener=function(t,e){try{this.loginHandlers=this.loginHandlers.filter(function(e){return e._name!=t}),this.loginHandlers=r(this.loginHandlers,[new s.UserLoginListener(t,e)])}catch(e){o.Logger.error("ListenerHandlers: addLoginEventListener",e)}},e.prototype.removeLoginEventListener=function(t){try{this.loginHandlers=this.loginHandlers.filter(function(e){return e._name!==t})}catch(e){o.Logger.error("ListenerHandlers: removeLoginEventListener",e)}},e.prototype.addMessageEventListener=function(t,e){try{this.messageHandlers=this.messageHandlers.filter(function(e){return e._name!=t}),this.messageHandlers=r(this.messageHandlers,[new s.MessagesListener(t,e)])}catch(e){o.Logger.error("ListenerHandlers: addMessageEventListener",e)}},e.prototype.removeMessageEventListener=function(t){try{this.messageHandlers=this.messageHandlers.filter(function(e){return e._name!==t})}catch(e){o.Logger.error("ListenerHandlers: removeMessageEventListener",e)}},e.prototype.addUserEventListener=function(t,e){try{this.userHandlers=this.userHandlers.filter(function(e){return e._name!=t}),this.userHandlers=r(this.userHandlers,[new s.UsersListener(t,e)])}catch(e){o.Logger.error("ListenerHandlers: addUserEventListener",e)}},e.prototype.removeUserEventListener=function(t){try{this.userHandlers=this.userHandlers.filter(function(e){return e._name!==t})}catch(e){o.Logger.error("ListenerHandlers: removeUserEventListener",e)}},e.prototype.addGroupEventListener=function(t,e){try{this.groupHandlers=this.groupHandlers.filter(function(e){return e._name!=t}),this.groupHandlers=r(this.groupHandlers,[new s.GroupsListener(t,e)])}catch(e){o.Logger.error("ListenerHandlers: addGroupEventListener",e)}},e.prototype.removeGroupEventListener=function(t){try{this.groupHandlers=this.groupHandlers.filter(function(e){return e._name!==t})}catch(e){o.Logger.error("ListenerHandlers: removeGroupEventListener",e)}},e.prototype.addCallEventListener=function(t,e){try{this.callHandlers=this.callHandlers.filter(function(e){return e._name!=t}),this.callHandlers=r(this.callHandlers,[new s.CallsListener(t,e)])}catch(e){o.Logger.error("ListenerHandlers: addCallEventListener",e)}},e.prototype.removeCallEventListener=function(t){try{this.callHandlers=this.callHandlers.filter(function(e){return e._name!==t})}catch(e){o.Logger.error("ListenerHandlers: removeCallEventListener",e)}},e.listenerHandlers=new e,e}();t.ListenerHandlers=i},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){var t=this;this.platform="web",this.isNative=!1,this.Plugins={},"undefined"!=typeof Proxy&&(this.Plugins=new Proxy(this.Plugins,{get:function(e,n){if(void 0!==e[n])return e[n];var r=t;return new Proxy({},{get:function(e,t){return void 0===e[t]?r.pluginMethodNoop.bind(r,e,t,n):e[t]}})}}))}return e.prototype.pluginMethodNoop=function(e,t,n){return Promise.reject(n+" does not have web implementation.")},e.prototype.getPlatform=function(){return this.platform},e.prototype.isPluginAvailable=function(e){return this.Plugins.hasOwnProperty(e)},e.prototype.convertFileSrc=function(e){return e},e.prototype.handleError=function(e){},e}()},function(e,t,n){"use strict";t.__esModule=!0,t.CometChat=t.init=void 0;var r=n(3);t.init=function(e){return r.CometChat.getInstance(e)},t.CometChat=r.CometChat},function(e,t,n){"use strict";t.__esModule=!0,t.GroupsRequestBuilder=t.GroupsRequest=void 0;var o=n(6),r=n(0),s=n(2),i=n(17),a=n(1),c=function(){function e(e){this.cursor=-1,this.total=-1,this.next_page=1,this.last_page=-1,this.current_page=1,this.total_pages=-1,this.hasJoined=0,this.withTags=!1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},r.isFalsy(e)||(r.isFalsy(e.limit)||(this.limit=e.limit),r.isFalsy(e.searchKeyword)||(this.searchKeyword=e.searchKeyword),r.isFalsy(e.hasJoined)||(this.hasJoined=1),r.isFalsy(e.tags)||(this.tags=e.tags),r.isFalsy(e.showTags)||(this.withTags=e.showTags))}return e.prototype.validateGroupBuilder=function(){if(void 0===this.limit)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.METHOD_COMPULSORY),"SET_LIMIT","SET_LIMIT","Set Limit")));if(isNaN(this.limit))return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(this.limit>a.DEFAULT_VALUES.GROUPS_MAX_LIMIT)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT",a.DEFAULT_VALUES.GROUPS_MAX_LIMIT)));if(this.limit<a.DEFAULT_VALUES.ZERO)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(void 0!==this.searchKeyword){if(typeof this.searchKeyword!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","setSearchKeyword()")));if(r.isFalsy(this.searchKeyword.trim()))return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword","search keyword")));this.searchKeyword=this.searchKeyword.trim()}if(void 0!==this.withTags){if(typeof this.withTags!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"WITH_TAGS","WITH_TAGS","withTags()")));1==this.withTags?this.withTags=!0:this.withTags=!1}return void 0===this.tags||Array.isArray(this.tags)?void 0:new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"TAGS","TAGS","setTags()")))},e.prototype.fetchNext=function(){var r=this;return new Promise(function(t,n){try{var e=r.validateGroupBuilder();if(e instanceof s.CometChatException)return void n(e);o.makeApiCall("getGroups",{},r.getNextData()).then(function(e){if(e.meta&&(r.total_pages=e.meta.pagination.total_pages),0<e.data.length){r.pagination=e.meta.pagination;var n=[];e.data.map(function(e,t){n.push(i.GroupsController.trasformJSONGroup(e))}),t(n)}t([])},function(e){n(new s.CometChatException(e.error))})}catch(e){n(new s.CometChatException(e))}})},e.prototype.getNextData=function(){var e={};if(e.per_page=this.limit,r.isFalsy(this.searchKeyword)||(e.searchKey=this.searchKeyword),r.isFalsy(this.hasJoined)||(e.hasJoined=1),r.isFalsy(this.tags)||(e.tags=this.tags),r.isFalsy(this.withTags)||(e.withTags=1),1==this.current_page)e.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return e.page=this.next_page,e;e.page=this.next_page++}return e},e.MAX_LIMIT=100,e.DEFAULT_LIMIT=30,e}();t.GroupsRequest=c;var E=function(){function e(){}return e.prototype.setLimit=function(e){return this.limit=e,this},e.prototype.setSearchKeyword=function(e){return this.searchKeyword=e,this},e.prototype.joinedOnly=function(e){return this.hasJoined=e,this},e.prototype.setTags=function(e){return this.tags=e,this},e.prototype.withTags=function(e){return this.showTags=e,this},e.prototype.build=function(){return new c(this)},e}();t.GroupsRequestBuilder=E},function(e,t,n){"use strict";t.__esModule=!0,t.GroupMembersRequestBuilder=t.GroupMembersRequest=void 0;var o=n(6),r=n(0),s=n(16),i=n(2),a=n(35),c=n(1),E=function(){function e(e){this.cursor=-1,this.total=-1,this.next_page=1,this.last_page=-1,this.current_page=1,this.total_pages=-1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},this.store=s.LocalStorage.getInstance(),r.isFalsy(e)||(this.limit=e.limit,this.guid=e.guid,r.isFalsy(e.searchKeyword)||(this.searchKeyword=e.searchKeyword),r.isFalsy(e.scopes)||(this.scopes=e.scopes))}return e.prototype.validateGroupMembersBuilder=function(){if(void 0===this.limit)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.METHOD_COMPULSORY),"SET_LIMIT","SET_LIMIT","Set Limit")));if(isNaN(this.limit))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(this.limit>c.DEFAULT_VALUES.USERS_MAX_LIMIT)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT",c.DEFAULT_VALUES.USERS_MAX_LIMIT)));if(this.limit<c.DEFAULT_VALUES.ZERO)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(void 0!==this.searchKeyword){if(typeof this.searchKeyword!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","setSearchKeyword()")));if(r.isFalsy(this.searchKeyword.trim()))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword","search keyword")));this.searchKeyword=this.searchKeyword.trim()}if(void 0!==this.guid){if(typeof this.guid!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"GUID","GUID","GroupMembersRequestBuilder()")));if(r.isFalsy(this.guid))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.INVALID),"GUID","GUID","GUID","GUID")))}return void 0===this.scopes||Array.isArray(this.scopes)?void 0:new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"SET_SCOPES","SET_SCOPES","setScopes()")))},e.prototype.fetchNext=function(){var r=this;return new Promise(function(n,t){try{var e=r.validateGroupMembersBuilder();if(e instanceof i.CometChatException)return void t(e);o.makeApiCall("getGroupMembers",{guid:r.guid},r.getNextData()).then(function(e){if(e.meta&&(r.total_pages=e.meta.pagination.total_pages),0<e.data.length){r.pagination=e.meta.pagination;var t=[];e.data.map(function(e){e.guid=r.guid,t.push(a.GroupMembersController.trasformJSONGroupMember(e))}),n(t)}else n([])},function(e){t(new i.CometChatException(e.error))})}catch(e){t(new i.CometChatException(e))}})},e.prototype.getNextData=function(){var e={};if(e.per_page=this.limit,r.isFalsy(this.searchKeyword)||(e.searchKey=this.searchKeyword),r.isFalsy(this.scopes)||(e.scopes=this.scopes),1==this.current_page)e.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return e.page=this.next_page,e;e.page=this.next_page++}return e},e.MAX_LIMIT=2,e.DEFAULT_LIMIT=1,e}();t.GroupMembersRequest=E;var u=function(){function e(e){this.guid=e}return e.prototype.setLimit=function(e){return this.limit=e,this},e.prototype.setSearchKeyword=function(e){return this.searchKeyword=e,this},e.prototype.setScopes=function(e){return this.scopes=e,this},e.prototype.build=function(){return new E(this)},e}();t.GroupMembersRequestBuilder=u},function(e,t,n){"use strict";t.__esModule=!0,t.BannedMembersRequestBuilder=t.BannedMembersRequest=void 0;var o=n(6),r=n(0),s=n(2),i=n(35),a=n(1),c=function(){function e(e){this.cursor=-1,this.total=-1,this.next_page=1,this.last_page=-1,this.current_page=1,this.total_pages=-1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},r.isFalsy(e)||(this.limit=e.limit,this.guid=e.guid,r.isFalsy(e.searchKeyword)||(this.searchKeyword=e.searchKeyword),r.isFalsy(e.scopes)||(this.scopes=e.scopes))}return e.prototype.validateBannedMembersBuilder=function(){if(void 0===this.limit)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.METHOD_COMPULSORY),"SET_LIMIT","SET_LIMIT","Set Limit")));if(isNaN(this.limit))return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(this.limit>a.DEFAULT_VALUES.USERS_MAX_LIMIT)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT",a.DEFAULT_VALUES.USERS_MAX_LIMIT)));if(this.limit<a.DEFAULT_VALUES.ZERO)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(void 0!==this.searchKeyword){if(typeof this.searchKeyword!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","setSearchKeyword()")));if(r.isFalsy(this.searchKeyword.trim()))return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword","search keyword")));this.searchKeyword=this.searchKeyword.trim()}if(void 0!==this.guid){if(typeof this.guid!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"GUID","GUID","GroupMembersRequestBuilder()")));if(r.isFalsy(this.guid))return new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.INVALID),"GUID","GUID","GUID","GUID")))}return void 0===this.scopes||Array.isArray(this.scopes)?void 0:new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"SET_SCOPES","SET_SCOPES","setScopes()")))},e.prototype.fetchNext=function(){var r=this;return new Promise(function(n,t){try{var e=r.validateBannedMembersBuilder();if(e instanceof s.CometChatException)return void t(e);o.makeApiCall("getBannedGroupMembers",{guid:r.guid},r.getNextData()).then(function(e){if(e.meta&&(r.total_pages=e.meta.pagination.total_pages),0<e.data.length){r.pagination=e.meta.pagination;var t=[];e.data.map(function(e){e.guid=r.guid,t.push(i.GroupMembersController.trasformJSONGroupMember(e))}),n(t)}else n([])},function(e){t(new s.CometChatException(e.error))})}catch(e){t(new s.CometChatException(e))}})},e.prototype.getNextData=function(){var e={};if(e.per_page=this.limit,r.isFalsy(this.searchKeyword)||(e.searchKey=this.searchKeyword),r.isFalsy(this.scopes)||(e.scopes=this.scopes),1==this.current_page)e.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return e.page=this.next_page,e;e.page=this.next_page++}return e},e.MAX_LIMIT=2,e.DEFAULT_LIMIT=1,e}();t.BannedMembersRequest=c;var E=function(){function e(e){this.guid=e}return e.prototype.setLimit=function(e){return this.limit=e,this},e.prototype.setSearchKeyword=function(e){return this.searchKeyword=e,this},e.prototype.setScopes=function(e){return this.scopes=e,this},e.prototype.build=function(){return new c(this)},e}();t.BannedMembersRequestBuilder=E},function(e,t,n){"use strict";t.__esModule=!0,t.UsersRequestBuilder=t.UsersRequest=void 0;var o=n(6),r=n(0),s=n(11),i=n(2),a=n(46),c=n(1),E=function(){function t(e){this.next_page=1,this.current_page=1,this.total_pages=-1,this.hideBlockedUsers=!1,this.friendsOnly=!1,this.fetchingInProgress=!1,this.withTags=!1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},t.userStore=a.UserStore.getInstance(),r.isFalsy(e)||(this.limit=e.limit,r.isFalsy(e.searchKeyword)||(this.searchKeyword=e.searchKeyword),r.isFalsy(e.status)||(e.status==t.USER_STATUS.ONLINE?this.status=c.PresenceConstatnts.STATUS.AVAILABLE:this.status=e.status),r.isFalsy(e.shouldHideBlockedUsers)||(this.hideBlockedUsers=e.shouldHideBlockedUsers),r.isFalsy(e.showFriendsOnly)||(this.friendsOnly=e.showFriendsOnly),r.isFalsy(e.showTags)||(this.withTags=e.showTags),r.isFalsy(e.role)||(this.role=e.role),r.isFalsy(e.roles)||(this.roles=e.roles),r.isFalsy(e.tags)||(this.tags=e.tags),r.isFalsy(e.UIDs)||(this.UIDs=e.UIDs),r.isFalsy(e.SortBy)||(this.sortBy=e.SortBy),r.isFalsy(e.SearchIn)||(this.searchIn=e.SearchIn),r.isFalsy(e.SortOrder)||(this.sortOrder=e.SortOrder))}return t.prototype.validateUserBuilder=function(){if(void 0===this.limit)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.METHOD_COMPULSORY),"SET_LIMIT","SET_LIMIT","Set Limit")));if(isNaN(this.limit))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(this.limit>c.DEFAULT_VALUES.USERS_MAX_LIMIT)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT",c.DEFAULT_VALUES.USERS_MAX_LIMIT)));if(this.limit<c.DEFAULT_VALUES.ZERO)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(void 0!==this.searchKeyword){if(typeof this.searchKeyword!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","setSearchKeyword()")));if(r.isFalsy(this.searchKeyword.trim()))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword","search keyword")));this.searchKeyword=this.searchKeyword.trim()}if(this.status){if(typeof this.status!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_STATUS","SET_STATUS","setStatus()")));if("available"!=this.status.toLowerCase()&&"offline"!=this.status.toLowerCase())return new i.CometChatException(c.UserErrors.INVALID_STATUS)}if(void 0!==this.hideBlockedUsers){if(typeof this.hideBlockedUsers!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"HIDE_BLOCKED_USERS","HIDE_BLOCKED_USERS","hideBlockedUsers()")));1==this.hideBlockedUsers?this.hideBlockedUsers=!0:this.hideBlockedUsers=!1}if(void 0!==this.friendsOnly){if(typeof this.friendsOnly!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"FRIENDS_ONLY","FRIENDS_ONLY","friendsOnly()")));1==this.friendsOnly?this.friendsOnly=!0:this.friendsOnly=!1}if(void 0!==this.withTags){if(typeof this.withTags!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.MUST_BE_A_BOOLEAN),"WITH_TAGS","WITH_TAGS","withTags()")));1==this.withTags?this.withTags=!0:this.withTags=!1}if(void 0!==this.roles&&!Array.isArray(this.roles))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"ROLES","ROLES","setRoles()")));if(void 0!==this.tags&&!Array.isArray(this.tags))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"TAGS","TAGS","setTags()")));if(void 0!==this.UIDs&&!Array.isArray(this.UIDs))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"UIDs","UIDs","setUIDs()")));if(this.sortBy){if(typeof this.sortBy!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SORT_BY","SORT_BY","sortBy()")));if(r.isFalsy(this.sortBy.trim()))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.INVALID),"SORT_BY","SORT_BY","sort by","sort by")));this.sortBy=this.sortBy.trim().toLowerCase()}if(this.sortOrder){if(typeof this.sortOrder!==c.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SORT_BY_ORDER","SORT_BY_ORDER","sortByOrder()")));if(r.isFalsy(this.sortOrder.trim()))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.INVALID),"SORT_BY_ORDER","SORT_BY_ORDER","sort order","sort order")));this.sortOrder=this.sortOrder.trim().toLowerCase()}return this.searchIn&&!Array.isArray(this.searchIn)?new i.CometChatException(JSON.parse(r.format(JSON.stringify(c.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"SEARCH_IN","SEARCH_IN","searchIn()"))):void 0},t.prototype.fetchNext=function(){var r=this;return new Promise(function(n,t){try{if(r.fetchingInProgress)r.fetchingInProgress=!1,n([]);else{r.fetchingInProgress=!0;var e=r.validateUserBuilder();if(e instanceof i.CometChatException)return void t(e);o.makeApiCall("users",{},r.getNextData()).then(function(e){if(e.meta&&(r.total_pages=e.meta.pagination.total_pages),0<e.data.length){r.pagination=e.meta.pagination;var t=[];e.data.map(function(e){t.push(s.UsersController.trasformJSONUser(e))}),n(t)}else n([]);r.fetchingInProgress=!1},function(e){r.fetchingInProgress=!1,t(new i.CometChatException(e.error))})}}catch(e){r.fetchingInProgress=!1,t(new i.CometChatException(e))}})},t.prototype.getNextData=function(){var e={};if(e.per_page=this.limit,r.isFalsy(this.searchKeyword)||(e.searchKey=this.searchKeyword),r.isFalsy(this.status)||(e.status=this.status),r.isFalsy(this.hideBlockedUsers)||(e.hideBlockedUsers=1),r.isFalsy(this.role)||(e.roles=this.role),r.isFalsy(this.roles)||(e.roles=this.roles),r.isFalsy(this.tags)||(e.tags=this.tags),r.isFalsy(this.friendsOnly)||(e.friendsOnly=1),r.isFalsy(this.withTags)||(e.withTags=1),r.isFalsy(this.UIDs)||(e.uids=this.UIDs),r.isFalsy(this.sortBy)||(e.sortBy=this.sortBy),r.isFalsy(this.sortOrder)||(e.sortOrder=this.sortOrder),r.isFalsy(this.searchIn)||(e.searchIn=this.searchIn),1==this.current_page)e.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return e.page=this.next_page,e;e.page=this.next_page++}return e},t.USER_STATUS={ONLINE:c.PresenceConstatnts.STATUS.ONLINE,OFFLINE:c.PresenceConstatnts.STATUS.OFFLINE},t}();t.UsersRequest=E;var u=function(){function e(){this.shouldHideBlockedUsers=!1}return e.prototype.setLimit=function(e){return this.limit=e,this},e.prototype.setStatus=function(e){return this.status=e,this},e.prototype.setSearchKeyword=function(e){return this.searchKeyword=e,this},e.prototype.hideBlockedUsers=function(e){return this.shouldHideBlockedUsers=e,this},e.prototype.setRole=function(e){return this.role=e,this},e.prototype.setRoles=function(e){return this.roles=e,this},e.prototype.friendsOnly=function(e){return this.showFriendsOnly=e,this},e.prototype.setTags=function(e){return this.tags=e,this},e.prototype.withTags=function(e){return this.showTags=e,this},e.prototype.setUIDs=function(e){return this.UIDs=e,this},e.prototype.sortBy=function(e){return this.SortBy=e,this},e.prototype.sortByOrder=function(e){return this.SortOrder=e,this},e.prototype.searchIn=function(e){return this.SearchIn=e,this},e.prototype.build=function(){return this.role&&this.roles&&this.roles.push(this.role),new E(this)},e}();t.UsersRequestBuilder=u},function(e,t,n){"use strict";t.__esModule=!0,t.UserStore=void 0;var r=n(3),o=n(0),s=n(1),i=n(12),a=function(){function e(e){this.store=s.constants.DEFAULT_STORE,o.isFalsy(e)||(this.store=e),this.userStore=i.createInstance({name:o.format(s.LOCAL_STORE.STORE_STRING,r.CometChat.getAppId(),s.LOCAL_STORE.USERS_STORE)}),this.userStore.setDriver([i.LOCALSTORAGE,i.INDEXEDDB,i.WEBSQL])}return e.getInstance=function(){return null==e.UserStore&&(e.UserStore=new e),e.UserStore},e.prototype.set=function(e,t){return this.userStore.setItem(e,t)},e.prototype.remove=function(e){this.userStore.removeItem(e)},e.prototype.get=function(e){return this.userStore.getItem(e)},e.prototype.clearStore=function(){var n=this;return new Promise(function(e,t){n.userStore.clear().then(function(){e(!0)}).catch(function(e){t(e)})})},e.prototype.clear=function(e){},e.prototype.selectStore=function(e){this.store=e},e.prototype.storeUsers=function(e){var t=this;return e.map(function(e){t.set(e.getUid(),e)}),!0},e.prototype.storeUser=function(e){return this.set(e.getUid(),e),!0},e}();t.UserStore=a},function(e,t,n){"use strict";t.__esModule=!0,t.ConversationsRequestBuilder=t.ConversationsRequest=void 0;var o=n(6),r=n(0),s=n(2),i=n(26),a=n(1),c=function(){function e(e){this.limit=100,this.next_page=1,this.current_page=1,this.total_pages=-1,this.fetchingInProgress=!1,this.getUserAndGroupTags=!1,this.withTags=!1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},r.isFalsy(e)||(this.limit=e.limit,r.isFalsy(e.conversationType)||(this.conversationType=e.conversationType),r.isFalsy(e.getUserAndGroupTags)||(this.getUserAndGroupTags=e.getUserAndGroupTags),e.tags&&(this.tags=e.tags),r.isFalsy(e.WithTags)||(this.withTags=e.WithTags),e.groupTags&&(this.groupTags=e.groupTags),e.userTags&&(this.userTags=e.userTags))}return e.prototype.validateConversationBuilder=function(){return void 0===this.limit?new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.METHOD_COMPULSORY),"SET_LIMIT","SET_LIMIT","Set Limit"))):isNaN(this.limit)?new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()"))):this.limit>a.DEFAULT_VALUES.CONVERSATION_MAX_LIMIT?new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT",a.DEFAULT_VALUES.CONVERSATION_MAX_LIMIT))):this.limit<a.DEFAULT_VALUES.ZERO?new s.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()"))):void 0},e.prototype.fetchNext=function(){var r=this;return new Promise(function(n,t){try{if(r.fetchingInProgress)r.fetchingInProgress=!1,n([]);else{r.fetchingInProgress=!0;var e=r.validateConversationBuilder();if(e instanceof s.CometChatException)return void t(e);o.makeApiCall("getConversations",{},r.getNextData()).then(function(e){if(e.meta&&(r.total_pages=e.meta.pagination.total_pages),0<e.data.length){r.pagination=e.meta.pagination;var t=[];e.data.map(function(e){t.push(i.ConversationController.trasformJSONConversation(e.conversationId,e.conversationType,e.lastMessage,e.conversationWith,parseInt(e.unreadMessageCount),e.tags?e.tags:[]))}),n(t)}else n([]);r.fetchingInProgress=!1},function(e){r.fetchingInProgress=!1,t(new s.CometChatException(e.error))})}}catch(e){r.fetchingInProgress=!1,t(new s.CometChatException(e))}})},e.prototype.getNextData=function(){var e={};if(e.per_page=this.limit,r.isFalsy(this.conversationType)||(e.conversationType=this.conversationType),r.isFalsy(this.getUserAndGroupTags)||(e.withUserAndGroupTags=this.getUserAndGroupTags),r.isFalsy(this.tags)||(e.tags=this.tags),r.isFalsy(this.withTags)||(e.withTags=this.withTags),r.isFalsy(this.userTags)||(e.userTags=this.userTags),r.isFalsy(this.groupTags)||(e.groupTags=this.groupTags),1==this.current_page)e.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return e.page=this.next_page,e;e.page=this.next_page++}return e},e}();t.ConversationsRequest=c;var E=function(){function e(){this.WithTags=!1}return e.prototype.setLimit=function(e){return this.limit=e,this},e.prototype.setConversationType=function(e){return this.conversationType=e,this},e.prototype.withUserAndGroupTags=function(e){return"boolean"==typeof e&&(this.getUserAndGroupTags=e),this},e.prototype.setTags=function(e){return this.tags=e,this},e.prototype.withTags=function(e){return this.WithTags=e,this},e.prototype.setGroupTags=function(e){return this.groupTags=e,this},e.prototype.setUserTags=function(e){return this.userTags=e,this},e.prototype.build=function(){return new c(this)},e}();t.ConversationsRequestBuilder=E},function(e,t,n){"use strict";var _=this&&this.__awaiter||function(e,i,a,c){return new(a||(a=Promise))(function(n,t){function r(e){try{s(c.next(e))}catch(e){t(e)}}function o(e){try{s(c.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a(function(e){e(t)})).then(r,o)}s((c=c.apply(e,i||[])).next())})},f=this&&this.__generator||function(n,r){var o,s,i,e,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(i=2&t[0]?s.return:t[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,t[1])).done)return i;switch(s=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,s=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){a.label=t[1];break}if(6===t[0]&&a.label<i[1]){a.label=i[1],i=t;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(t);break}i[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],s=0}finally{o=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)r[o]=s[i];return r};t.__esModule=!0,t.MessagesRequestBuilder=t.MessagesRequest=void 0;var R=n(2),A=n(6),I=n(10),O=n(0),s=n(49),N=n(1),i=n(13),m=n(27),r=function(){function e(e){this.limit=N.DEFAULT_VALUES.MSGS_LIMIT,this.timestamp=0,this.id=N.DEFAULT_VALUES.DEFAULT_MSG_ID,this.messageStore=s.MessagesStore.getInstance(),this.endpointName="getUserMessages",this.listId="",this.totalPages=0,this.unread=!1,this.inProgress=!1,this.hideMessagesFromBlockedUsers=!1,this.updatedAt=0,this.onlyUpdates=0,this.paginationMeta={},this.WithTags=!1,this.hideDeletedMessages=!1,this.limit=e.limit,this.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.PER_PAGE]=this.limit,this.uid=e.uid,this.guid=e.guid,this.parentMessageId=e.parentMessageId,this.timestamp=e.timestamp,this.timestamp&&(this.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.SENT_AT]=this.timestamp),this.id=e.id,this.id!=N.DEFAULT_VALUES.DEFAULT_MSG_ID&&(this.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.ID]=this.id),this.hideMessagesFromBlockedUsers=e.HideMessagesFromBlockedUsers,this.hideMessagesFromBlockedUsers&&(this.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.HIDE_MESSAGES_FROM_BLOCKED_USER]=this.hideMessagesFromBlockedUsers),this.unread=e.unread,this.unread&&(this.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.UNREAD]=this.unread),e.searchKey&&(this.searchKey=e.searchKey,this.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.SEARCH_KEY]=this.searchKey),e.onlyUpdate&&(this.onlyUpdates=e.onlyUpdate,this.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.ONLY_UPDATES]=this.onlyUpdates),e.updatedAt&&(this.updatedAt=e.updatedAt,this.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.UPDATED_AT]=this.updatedAt),e.category&&(this.category=e.category),e.categories&&(this.categories=e.categories),e.type&&(this.type=e.type),e.types&&(this.types=e.types),e.WithTags&&(this.WithTags=e.WithTags),e.tags&&(this.tags=e.tags),e.HideReplies&&(this.hideReplies=e.HideReplies,this.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.HIDE_REPLIES]=this.hideReplies),this.hideDeletedMessages=e.HideDeletedMessages,this.hideDeletedMessages&&(this.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.HIDE_DELETED_MESSAGES]=this.hideDeletedMessages)}return e.prototype.fetchNext=function(){var e=this;return new Promise(function(o,s){return _(e,void 0,void 0,function(){var t,n,r;return f(this,function(e){switch(e.label){case 0:if(e.trys.push([0,5,,6]),this.inProgress)return this.inProgress=!1,s(new R.CometChatException(i.MESSAGES_REQUEST_ERRORS.REQUEST_IN_PROGRESS_ERROR)),[2];if(this.inProgress=!0,this.onlyUpdates){if(0==this.updatedAt)return this.inProgress=!1,s(new R.CometChatException(i.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)),[2]}else if(0==this.timestamp&&0==this.id&&0==this.updatedAt)return this.inProgress=!1,s(new R.CometChatException(i.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)),[2];this.affix=N.MessageConstatnts.PAGINATION.AFFIX.APPEND,this.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.AFFIX]=this.affix,this.currentMethod=N.MessageConstatnts.PAGINATION.AFFIX.APPEND,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.makeAPICall()];case 2:return t=e.sent(),o(t),this.inProgress=!1,[3,4];case 3:return n=e.sent(),this.inProgress=!1,s(new R.CometChatException(n)),[3,4];case 4:return[3,6];case 5:return r=e.sent(),this.inProgress=!1,s(new R.CometChatException(r)),[3,6];case 6:return[2]}})})})},e.prototype.fetchPrevious=function(){var e=this;return new Promise(function(o,s){return _(e,void 0,void 0,function(){var t,n,r;return f(this,function(e){switch(e.label){case 0:if(e.trys.push([0,5,,6]),this.inProgress)return s(new R.CometChatException(i.MESSAGES_REQUEST_ERRORS.REQUEST_IN_PROGRESS_ERROR)),this.inProgress=!1,[2];if(this.inProgress=!0,this.onlyUpdates&&0==this.updatedAt)return this.inProgress=!1,s(new R.CometChatException(i.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)),[2];this.affix=N.MessageConstatnts.PAGINATION.AFFIX.PREPEND,this.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.AFFIX]=this.affix,this.currentMethod=N.MessageConstatnts.PAGINATION.AFFIX.PREPEND,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.makeAPICall()];case 2:return t=e.sent(),o(t),this.inProgress=!1,[3,4];case 3:return n=e.sent(),this.inProgress=!1,s(new R.CometChatException(n)),[3,4];case 4:return[3,6];case 5:return r=e.sent(),this.inProgress=!1,s(new R.CometChatException(r)),[3,6];case 6:return[2]}})})})},e.prototype.makeAPICall=function(){var g=this;return new Promise(function(o,t){try{var e=g.uid;if(void 0!==e){if(typeof e!==N.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"UID","UID","setUID()"))));if(O.isFalsy(e.trim()))return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.INVALID),"UID","UID","UID","UID"))));g.uid=e.trim()}var n=g.guid;if(void 0!==n){if(typeof n!==N.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"GUID","GUID","setGUID()"))));if(O.isFalsy(n.trim()))return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.INVALID),"GUID","GUID","GUID","GUID"))));g.guid=n.trim()}var r=g.parentMessageId;if(void 0!==r){if(isNaN(r))return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"PARENT_MESSAGE_ID","PARENT_MESSAGE_ID","setParentMessageId()"))));if(r<N.DEFAULT_VALUES.ZERO)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"PARENT_MESSAGE_ID","PARENT_MESSAGE_ID","setParentMessageId()"))))}var s=g.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.PER_PAGE];if(void 0===s)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.METHOD_COMPULSORY),"SET_LIMIT","SET_LIMIT","Set Limit"))));if(isNaN(s))return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()"))));if(s>N.DEFAULT_VALUES.MSGS_MAX_LIMIT)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT",N.DEFAULT_VALUES.MSGS_MAX_LIMIT))));if(s<N.DEFAULT_VALUES.ZERO)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()"))));var i=g.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.SEARCH_KEY];if(void 0!==i){if(typeof i!==N.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","setSearchKeyword()"))));if(O.isFalsy(i.trim()))return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword","search keyword"))));g.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.SEARCH_KEY]=i.trim()}var a=g.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.ID];if(void 0!==a){if(isNaN(a))return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"MESSAGE_ID","MESSAGE_ID","setMessageId()"))));if(a<N.DEFAULT_VALUES.ZERO)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"MESSAGE_ID","MESSAGE_ID","setMessageId()"))))}var c=g.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.SENT_AT];if(void 0!==c){if(isNaN(c))return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"TIMESTAMP","TIMESTAMP","setTimestamp()"))));if(c<N.DEFAULT_VALUES.ZERO)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"TIMESTAMP","TIMESTAMP","setTimestamp()"))))}var E=g.hideMessagesFromBlockedUsers;if(void 0!==E){if(typeof E!==N.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"HIDE_MESSAGES_FROM_BLOCKED_USERS","HIDE_MESSAGES_FROM_BLOCKED_USERS","hideMessagesFromBlockedUsers()"))));g.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.HIDE_MESSAGES_FROM_BLOCKED_USER]=1==E?1:0}var u=g.unread;if(void 0!==u){if(typeof u!==N.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"UNREAD","UNREAD","setUnread()"))));g.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.UNREAD]=1==u?1:0}var p=g.category;if(void 0!==p){if(typeof p!==N.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_CATEGORY","SET_CATEGORY","setCategory()"))));if(O.isFalsy(p.trim()))return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.INVALID),"SET_CATEGORY","SET_CATEGORY","category","category"))));g.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.CATEGORIES]=p.trim()}var l=g.categories;if(void 0!==l){if(!Array.isArray(l))return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"SET_CATEGORIES","SET_CATEGORIES","setCategories()"))));0<l.length&&(g.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.CATEGORIES]=l)}var S=g.type;if(void 0!==S){if(typeof S!==N.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_TYPE","SET_TYPE","setType()"))));if(O.isFalsy(S.trim()))return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.INVALID),"SET_TYPE","SET_TYPE","type","type"))));g.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.TYPES]=S.trim()}var d=g.types;if(void 0!==d){if(!Array.isArray(d))return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"SET_TYPES","SET_TYPES","setTypes()"))));0<d.length&&(g.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.TYPES]=d)}var C=g.tags;if(void 0!==C){if(!Array.isArray(C))return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY),"SET_TAGS","SET_TAGS","setTags()"))));0<C.length&&(g.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.TAGS]=C)}var h=g.WithTags;if(void 0!==h){if(typeof h!==N.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"WITH_TAGS","WITH_TAGS","withTags()"))));g.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.WITH_TAGS]=1==h?1:0}var T=g.hideDeletedMessages;if(void 0!==T){if(typeof T!==N.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)return void t(new R.CometChatException(JSON.parse(O.format(JSON.stringify(N.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN),"HIDE_DELETED_MESSAGES","HIDE_DELETED_MESSAGES","hideDeletedMessages()"))));g.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.HIDE_DELETED_MESSAGES]=1==T?1:0}if(g.createEndpoint(),g.totalPages)if(1!=g.totalPages);else if(g.lastAffix==g.affix)return void o([]);A.makeApiCall(g.endpointName,{listId:g.listId},g.paginationMeta).then(function(t){return _(g,void 0,void 0,function(){var n,r=this;return f(this,function(e){return n=[],t[N.ResponseConstants.RESPONSE_KEYS.KEY_META][N.ResponseConstants.RESPONSE_KEYS.KEY_CURSOR].hasOwnProperty(N.MessageConstatnts.PAGINATION.KEYS.ID)&&0==this.id&&(this.id=parseInt(t.meta.cursor[N.MessageConstatnts.PAGINATION.KEYS.ID])),t[N.ResponseConstants.RESPONSE_KEYS.KEY_META][N.ResponseConstants.RESPONSE_KEYS.KEY_CURSOR].hasOwnProperty(N.MessageConstatnts.PAGINATION.KEYS.SENT_AT)&&0==this.timestamp&&(this.timestamp=t.meta.cursor[N.MessageConstatnts.PAGINATION.KEYS.SENT_AT]),t.meta.pagination.hasOwnProperty("total_pages")&&(this.totalPages=t.meta.pagination.total_pages),t.meta.cursor.hasOwnProperty("affix")&&(this.lastAffix=t.meta.cursor.affix),t.data[0]?(0<this.id&&(this.id=parseInt(t.data[0].id)),0<this.timestamp&&(this.timestamp=t.data[0].sentAt),t.data.map(function(t){m.MessageListnerMaping.getInstance().get(N.LOCAL_STORE.KEY_MESSAGE_LISTENER_LIST).then(function(e){parseInt(t.id)>e&&m.MessageListnerMaping.getInstance().set(N.LOCAL_STORE.KEY_MESSAGE_LISTENER_LIST,parseInt(t.id))},function(e){m.MessageListnerMaping.getInstance().set(N.LOCAL_STORE.KEY_MESSAGE_LISTENER_LIST,parseInt(t.id))}),r.affix==N.MessageConstatnts.PAGINATION.AFFIX.APPEND?(r.id<parseInt(t.id)&&0<r.id&&(r.id=parseInt(t.id)),r.timestamp<t.sentAt&&0<r.timestamp&&(r.timestamp=t.sentAt),r.updatedAt<t.updatedAt&&0<r.updatedAt&&(r.updatedAt=t.updatedAt)):(r.id>parseInt(t.id)&&(r.id=parseInt(t.id)),r.timestamp>t.sentAt&&(r.timestamp=t.sentAt),r.updatedAt>t.updatedAt&&(r.updatedAt=t.updatedAt)),r.id&&(r.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.ID]=r.id),r.timestamp&&(r.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.SENT_AT]=r.timestamp),r.updatedAt&&(r.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.UPDATED_AT]=r.updatedAt),n.push(I.MessageController.trasformJSONMessge(t))})):n=[],o(n),[2]})})},function(e){t(new R.CometChatException(e.error))})}catch(e){t(new R.CometChatException(e))}})},e.prototype.createEndpoint=function(){this.parentMessageId?(this.endpointName="getThreadMessages",this.listId=this.parentMessageId.toString(),this.hideReplies&&(this.hideReplies=!1,delete this.paginationMeta[N.MessageConstatnts.PAGINATION.KEYS.HIDE_REPLIES])):(O.isFalsy(this.guid)||O.isFalsy(this.uid))&&O.isFalsy(this.guid)?(O.isFalsy(this.uid)?this.endpointName="getMessages":this.endpointName="getUserMessages",this.listId=this.uid):(this.endpointName="getGroupMessages",this.listId=this.guid)},e.prototype.makeData=function(){var e={};e[N.MessageConstatnts.PAGINATION.KEYS.PER_PAGE]=this.limit,e[N.MessageConstatnts.PAGINATION.KEYS.AFFIX]=this.affix,(O.isFalsy(this.guid)||O.isFalsy(this.uid))&&O.isFalsy(this.guid)&&O.isFalsy(this.uid)},e.prototype.getFilteredPreviousDataByReceiverId=function(t){return _(this,void 0,void 0,function(){var n,r=this;return f(this,function(e){switch(e.label){case 0:switch(n=[],t){case"user":return[3,1];case"group":return[3,3];case"both":return[3,5]}return[3,7];case 1:return[4,s.MessagesStore.getInstance().get(this.uid).then(function(t){Object.keys(t).filter(function(e){return parseInt(e)>r.id}).map(function(e){n=o(n,[t[e]])})})];case 2:return e.sent(),[3,9];case 3:return[4,s.MessagesStore.getInstance().get(this.guid).then(function(t){Object.keys(t).filter(function(e){return parseInt(e)>r.id}).map(function(e){n=o(n,[t[e]])})})];case 4:e.sent(),e.label=5;case 5:return[4,s.MessagesStore.getInstance().get(this.guid).then(function(t){Object.keys(t).filter(function(e){return parseInt(e)>r.id}).filter(function(e){return t[e].sender.uid==r.uid}).map(function(e){n=o(n,[t[e]])})})];case 6:return e.sent(),[3,9];case 7:return[4,s.MessagesStore.getInstance().getAllMessages().then(function(t){Object.keys(t).filter(function(e){return parseInt(e)>r.id}).map(function(e){n=o(n,[t[e]])})})];case 8:return e.sent(),[3,9];case 9:return[2,n]}})})},e.prototype.getFilteredNextDataByReceiverId=function(t){return _(this,void 0,void 0,function(){var n,r=this;return f(this,function(e){switch(e.label){case 0:switch(n=[],t){case"user":return[3,1];case"group":return[3,3];case"both":return[3,5]}return[3,7];case 1:return[4,s.MessagesStore.getInstance().get(this.uid).then(function(t){Object.keys(t).filter(function(e){return parseInt(e)>r.id}).map(function(e){n=o(n,[t[e]])})})];case 2:return e.sent(),[3,9];case 3:return[4,s.MessagesStore.getInstance().get(this.guid).then(function(t){Object.keys(t).filter(function(e){return parseInt(e)>r.id}).map(function(e){n=o(n,[t[e]])})})];case 4:e.sent(),e.label=5;case 5:return[4,s.MessagesStore.getInstance().get(this.guid).then(function(t){Object.keys(t).filter(function(e){return parseInt(e)>r.id}).filter(function(e){return t[e].sender.uid==r.uid}).map(function(e){n=o(n,[t[e]])})})];case 6:return e.sent(),[3,9];case 7:return[4,s.MessagesStore.getInstance().getAllMessages().then(function(t){Object.keys(t).filter(function(e){return parseInt(e)>r.id}).map(function(e){n=o(n,[t[e]])})})];case 8:return e.sent(),[3,9];case 9:return[2,n]}})})},e}();t.MessagesRequest=r;var a=function(){function e(){this.maxLimit=N.DEFAULT_VALUES.MSGS_MAX_LIMIT,this.timestamp=0,this.id=N.DEFAULT_VALUES.DEFAULT_MSG_ID,this.unread=!1,this.HideMessagesFromBlockedUsers=!1,this.onlyUpdate=0,this.HideDeletedMessages=!1,this.WithTags=!1}return e.prototype.setLimit=function(e){return this.limit=e,this},e.prototype.setGUID=function(e){return this.guid=e,this},e.prototype.setUID=function(e){return this.uid=e,this},e.prototype.setParentMessageId=function(e){return this.parentMessageId=e,this},e.prototype.setTimestamp=function(e){return void 0===e&&(e=O.getCurrentTime()),this.timestamp=e,this},e.prototype.setMessageId=function(e){return void 0===e&&(e=N.DEFAULT_VALUES.DEFAULT_MSG_ID),this.id=e,this},e.prototype.setUnread=function(e){return void 0===e&&(e=!1),this.unread=e,this},e.prototype.hideMessagesFromBlockedUsers=function(e){return void 0===e&&(e=!1),this.HideMessagesFromBlockedUsers=e,this},e.prototype.setSearchKeyword=function(e){return this.searchKey=e,this},e.prototype.setUpdatedAfter=function(e){return this.updatedAt=e,this},e.prototype.updatesOnly=function(e){return e&&(this.onlyUpdate=1),this},e.prototype.setCategory=function(e){return this.category=e,this},e.prototype.setCategories=function(e){return this.categories=e,this},e.prototype.setType=function(e){return this.type=e,this},e.prototype.setTypes=function(e){return this.types=e,this},e.prototype.hideReplies=function(e){return this.HideReplies=e,this},e.prototype.hideDeletedMessages=function(e){return this.HideDeletedMessages=e,this},e.prototype.setTags=function(e){return this.tags=e,this},e.prototype.withTags=function(e){return this.WithTags=e,this},e.prototype.build=function(){return this.category&&this.categories&&this.categories.push(this.category),this.type&&this.types&&this.types.push(this.type),new r(this)},e}();t.MessagesRequestBuilder=a},function(e,t,n){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.__esModule=!0,t.MessagesStore=void 0;var r=n(3),c=n(0),E=n(1),o=n(12),s=function(){function e(e){this.store=E.constants.DEFAULT_STORE,c.isFalsy(e)||(this.store=e),this.messagesStore=o.createInstance({name:c.format(E.LOCAL_STORE.STORE_STRING,r.CometChat.getAppId(),E.LOCAL_STORE.MESSAGES_STORE)}),this.messagesStore.setDriver([o.LOCALSTORAGE,o.INDEXEDDB,o.WEBSQL])}return e.getInstance=function(){return null==e.MessagesStore&&(e.MessagesStore=new e),e.MessagesStore},e.prototype.set=function(e,t){return this.messagesStore.setItem(e,t)},e.prototype.remove=function(e){this.messagesStore.removeItem(e)},e.prototype.get=function(e){return this.messagesStore.getItem(e)},e.prototype.clearStore=function(){var n=this;return new Promise(function(e,t){n.messagesStore.clear().then(function(){e(!0)}).catch(function(e){t(e)})})},e.prototype.getAllMessages=function(){var n=this,r={};return new Promise(function(e,t){n.messagesStore.iterate(function(e,t,n){t!=E.constants.MSG_VER_POST&&t!=E.constants.MSG_VER_POST&&(r=a(a({},r),e))}).then(function(){e(r)})})},e.prototype.clear=function(e){},e.prototype.selectStore=function(e){this.store=e},e.prototype.storeMessages=function(e){var n=this;if(r.CometChat.user.getUid()){var o=r.CometChat.user.getUid(),s={},i=0;return this.get(E.constants.MSG_VER_POST).then(function(r){e.map(function(e){var t;if(!c.isFalsy(e)){0==i&&(i=parseInt(e.getId().toString())),i>e.getId()&&(i=parseInt(e.getId().toString())),r<e.getId()&&(r=parseInt(e.getId().toString()));var n=void 0;n=e.getSender()instanceof Object?e.getSender().getUid():e.getSender(),e.getReceiverType()==E.MessageConstatnts.RECEIVER_TYPE.GROUP&&(n=e.getReceiver()),e.getSender()instanceof Object?e.getSender().getUid()==o&&(n=e.getReceiver()):e.getSender()==o&&(n=e.getReceiver()),s[n]||(s[n]={}),s[n]=a(a({},s[n]),((t={})[e.getId()]=e,t))}}),n.get(E.constants.MSG_VER_PRE).then(function(e){(0<i&&i<e||null==e)&&n.set(E.constants.MSG_VER_PRE,i)})&&0<r&&n.set(E.constants.MSG_VER_POST,r),Object.keys(s).map(function(t){n.get(t).then(function(e){null==e&&(e={}),n.set(t,a(a({},s[t]),e))})})}),!0}},e}();t.MessagesStore=s},function(e,t,n){"use strict";t.__esModule=!0,t.BlockedUsersRequestBuilder=t.BlockedUsersRequest=void 0;var o=n(6),r=n(0),s=n(11),i=n(2),a=n(1),c=function(){function e(e){this.next_page=1,this.current_page=1,this.total_pages=-1,this.fetchingInProgress=!1,this.pagination={total:0,count:0,per_page:0,current_page:0,total_pages:0,links:[]},r.isFalsy(e)||(this.limit=e.limit,r.isFalsy(e.searchKeyword)||(this.searchKeyword=e.searchKeyword),r.isFalsy(e.direction)||(this.direction=e.direction))}return e.prototype.validateBlockedUsersBuilder=function(){if(void 0===this.limit)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.METHOD_COMPULSORY),"SET_LIMIT","SET_LIMIT","Set Limit")));if(isNaN(this.limit))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(this.limit>a.DEFAULT_VALUES.USERS_MAX_LIMIT)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED),"SET_LIMIT","SET_LIMIT",a.DEFAULT_VALUES.USERS_MAX_LIMIT)));if(this.limit<a.DEFAULT_VALUES.ZERO)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER),"SET_LIMIT","SET_LIMIT","setLimit()")));if(void 0!==this.searchKeyword){if(typeof this.searchKeyword!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","setSearchKeyword()")));if(r.isFalsy(this.searchKeyword.trim()))return new i.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.INVALID),"SET_SEARCH_KEYWORD","SET_SEARCH_KEYWORD","search keyword","search keyword")));this.searchKeyword=this.searchKeyword.trim()}if(void 0!==this.direction){if(typeof this.direction!==a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)return new i.CometChatException(JSON.parse(r.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING),"SET_DIRECTION","SET_DIRECTION","setDirection()")));if(this.direction!=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BOTH&&this.direction!=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BLOCKED_BY_ME&&this.direction!=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.HAS_BLOCKED_ME)return new i.CometChatException(a.UserErrors.INVALID_DIRECTION)}},e.prototype.fetchNext=function(){var r=this;return new Promise(function(n,t){try{if(r.fetchingInProgress)r.fetchingInProgress=!1,n([]);else{r.fetchingInProgress=!0;var e=r.validateBlockedUsersBuilder();if(e instanceof i.CometChatException)return void t(e);o.makeApiCall("blockedUsersList",{},r.getNextData()).then(function(e){if(e.meta&&(r.total_pages=e.meta.pagination.total_pages),0<e.data.length){r.pagination=e.meta.pagination;var t=[];e.data.map(function(e){t.push(s.UsersController.trasformJSONUser(e))}),n(t)}else n([]);r.fetchingInProgress=!1},function(e){r.fetchingInProgress=!1,t(new i.CometChatException(e.error))})}}catch(e){r.fetchingInProgress=!1,t(new i.CometChatException(e))}})},e.prototype.getNextData=function(){var e={};if(e.per_page=this.limit,r.isFalsy(this.direction)||(e.direction=this.direction),r.isFalsy(this.searchKeyword)||(e.searchKey=this.searchKeyword),1==this.current_page)e.page=this.next_page,this.next_page++,this.current_page++;else{if(this.next_page>this.total_pages)return e.page=this.next_page,e;e.page=this.next_page++}return e},e.MAX_LIMIT=2,e.DEFAULT_LIMIT=1,e.directions=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS,e}();t.BlockedUsersRequest=c;var E=function(){function e(){}return e.prototype.setLimit=function(e){return this.limit=e,this},e.prototype.setSearchKeyword=function(e){return this.searchKeyword=e,this},e.prototype.setDirection=function(e){return this.direction=e,this},e.prototype.blockedByMe=function(){return this.direction=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BLOCKED_BY_ME,this},e.prototype.hasBlockedMe=function(){return this.direction=a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.HAS_BLOCKED_ME,this},e.prototype.build=function(){return new c(this)},e}();t.BlockedUsersRequestBuilder=E},function(e,t,n){"use strict";t.__esModule=!0,t.AppSettingsBuilder=t.AppSettings=void 0;var r=n(1),o=function(){function t(e){this.subscriptionType=t.SUBSCRIPTION_TYPE_NONE,this.roles=null,this.region=r.DEFAULT_VALUES.REGION_DEFAULT,this.autoJoinGroup=!0,this.establishSocketConnection=!0,this.subscriptionType=e.subscriptionType,this.roles=e.roles,this.region=e.region,this.autoJoinGroup=e.autoJoinGroup,this.establishSocketConnection=e.establishSocketConnection}return t.prototype.getSubscriptionType=function(){return this.subscriptionType},t.prototype.getRoles=function(){return this.roles},t.prototype.getRegion=function(){return this.region},t.prototype.getIsAutoJoinEnabled=function(){return this.autoJoinGroup},t.prototype.shouldAutoEstablishSocketConnection=function(){return this.establishSocketConnection},t.SUBSCRIPTION_TYPE_NONE="NONE",t.SUBSCRIPTION_TYPE_ALL_USERS="ALL_USERS",t.SUBSCRIPTION_TYPE_ROLES="ROLES",t.SUBSCRIPTION_TYPE_FRIENDS="FRIENDS",t.REGION_EU=r.DEFAULT_VALUES.REGION_DEFAULT_EU,t.REGION_US=r.DEFAULT_VALUES.REGION_DEFAULT_US,t.REGION_IN=r.DEFAULT_VALUES.REGION_DEFAULT_IN,t.REGION_PRIVATE=r.DEFAULT_VALUES.REGION_DEFAULT_PRIVATE,t}();t.AppSettings=o;var s=function(){function e(){this.subscriptionType=o.SUBSCRIPTION_TYPE_NONE,this.roles=null,this.region=r.DEFAULT_VALUES.REGION_DEFAULT,this.autoJoinGroup=!0,this.establishSocketConnection=!0}return e.prototype.subscribePresenceForAllUsers=function(){return this.subscriptionType=o.SUBSCRIPTION_TYPE_ALL_USERS,this},e.prototype.subscribePresenceForRoles=function(e){return this.subscriptionType=o.SUBSCRIPTION_TYPE_ROLES,this.roles=e,this},e.prototype.subscribePresenceForFriends=function(){return this.subscriptionType=o.SUBSCRIPTION_TYPE_FRIENDS,this},e.prototype.setRegion=function(e){return void 0===e&&(e=r.DEFAULT_VALUES.REGION_DEFAULT),this.region=e.toLowerCase(),this},e.prototype.enableAutoJoinForGroups=function(e){return void 0===e&&(e=!0),this.autoJoinGroup=e,this},e.prototype.autoEstablishSocketConnection=function(e){return void 0===e&&(e=!0),this.establishSocketConnection=e,this},e.prototype.build=function(){return new o(this)},e}();t.AppSettingsBuilder=s},function(e,t,n){"use strict";t.__esModule=!0,t.CometChatHelper=void 0;var p=n(10),l=n(1),S=n(11),d=n(17),C=n(26),r=n(3),o=n(2),s=n(0),i=function(){function e(){}return e.processMessage=function(e){try{return p.MessageController.trasformJSONMessge(e)}catch(e){s.Logger.error("CometChatHelper: processMessage",e)}},e.getConversationFromMessage=function(u){return new Promise(function(c,E){try{r.CometChat.getLoggedinUser().then(function(e){if(null!==e){var t=p.MessageController.trasformJSONMessge(u),n=t.receiverType,r=t.conversationId,o=void 0,s=p.MessageController.trasformJSONMessge(u);if(n==l.MessageConstatnts.RECEIVER_TYPE.USER){var i=S.UsersController.trasformJSONUser(t[l.MessageConstatnts.KEYS.SENDER]);o=i.getUid()==e.getUid()?S.UsersController.trasformJSONUser(t[l.MessageConstatnts.KEYS.RECEIVER]):i}else o=d.GroupsController.trasformJSONGroup(t[l.MessageConstatnts.KEYS.RECEIVER]);var a=C.ConversationController.trasformJSONConversation(r,n,s,o,0,[]);c(a)}else E(l.UserErrors.USER_NOT_LOGGED_IN)},function(e){E(new o.CometChatException(e.error))})}catch(e){E(new o.CometChatException(e))}})},e}();t.CometChatHelper=i},function(e,t,n){"use strict";t.__esModule=!0,t.CallSettingsBuilder=t.CallSettings=void 0;var r=n(1),o=function(){function e(e){this.sessionID=e.sessionID,this.defaultLayout=e.defaultLayout,this.isAudioOnly=e.isAudioOnly,this.region=e.region,this.domain=e.domain,this.user=e.user,this.listener=e.listener,this.mode=e.mode,this.ShowEndCallButton=e.ShowEndCallButton,this.ShowSwitchCameraButton=e.ShowSwitchCameraButton,this.ShowMuteAudioButton=e.ShowMuteAudioButton,this.ShowPauseVideoButton=e.ShowPauseVideoButton,this.ShowAudioModeButton=e.ShowAudioModeButton,this.StartAudioMuted=e.StartAudioMuted,this.StartVideoMuted=e.StartVideoMuted,this.analyticsSettings=e.analyticsSettings,this.appId=e.appId,this.defaultAudioMode=e.defaultAudioMode,this.ShowSwitchToVideoCallButton=e.ShowSwitchToVideoCallButton,this.AvatarMode=e.AvatarMode,this.ShowRecordingButton=e.ShowRecordingButton,this.StartRecordingOnCallStart=e.StartRecordingOnCallStart}return e.prototype.getSessionId=function(){return this.sessionID},e.prototype.isAudioOnlyCall=function(){return this.isAudioOnly},e.prototype.getUser=function(){return this.user},e.prototype.getRegion=function(){return this.region},e.prototype.getAppId=function(){return this.appId},e.prototype.getDomain=function(){return this.domain},e.prototype.isDefaultLayoutEnabled=function(){return this.defaultLayout},e.prototype.getCallEventListener=function(){return this.listener},e.prototype.getMode=function(){return this.mode},e.prototype.getStartWithAudioMuted=function(){return this.StartAudioMuted},e.prototype.getStartWithVideoMuted=function(){return this.StartVideoMuted},e.prototype.isEndCallButtonEnabled=function(){return this.ShowEndCallButton},e.prototype.isSwitchCameraButtonEnabled=function(){return this.ShowSwitchCameraButton},e.prototype.isMuteAudioButtonEnabled=function(){return this.ShowMuteAudioButton},e.prototype.isPauseVideoButtonEnabled=function(){return this.ShowPauseVideoButton},e.prototype.isAudioModeButtonEnabled=function(){return this.ShowAudioModeButton},e.prototype.getAnalyticsSettings=function(){return this.analyticsSettings},e.prototype.getDefaultAudioMode=function(){return this.defaultAudioMode},e.prototype.isAudioToVideoButtonEnabled=function(){return this.ShowSwitchToVideoCallButton},e.prototype.getAvatarMode=function(){return this.AvatarMode},e.prototype.isRecordingButtonEnabled=function(){return this.ShowRecordingButton},e.prototype.shouldStartRecordingOnCallStart=function(){return this.StartRecordingOnCallStart},e}();t.CallSettings=o;var s=function(){function e(){this.defaultLayout=!0,this.isAudioOnly=!1,this.mode=r.CallConstants.CALL_MODE.DEFAULT,this.ShowEndCallButton=!0,this.ShowSwitchCameraButton=!0,this.ShowMuteAudioButton=!0,this.ShowPauseVideoButton=!0,this.ShowAudioModeButton=!0,this.StartAudioMuted=!1,this.StartVideoMuted=!1,this.analyticsSettings={},this.ShowSwitchToVideoCallButton=!0,this.AvatarMode="circle",this.ShowRecordingButton=!1,this.StartRecordingOnCallStart=!1}return e.prototype.setSessionID=function(e){return this.sessionID=e,this},e.prototype.enableDefaultLayout=function(e){return this.defaultLayout=e,this},e.prototype.setIsAudioOnlyCall=function(e){return this.isAudioOnly=e,this},e.prototype.setRegion=function(e){return this.region=e,this},e.prototype.setDomain=function(e){return this.domain=e,this},e.prototype.setUser=function(e){return this.user=e,this},e.prototype.setCallEventListener=function(e){return this.listener=e,this},e.prototype.setMode=function(e){return this.mode=e,this},e.prototype.showEndCallButton=function(e){return this.ShowEndCallButton=e,this},e.prototype.showSwitchCameraButton=function(e){return this.ShowSwitchCameraButton=e,this},e.prototype.showMuteAudioButton=function(e){return this.ShowMuteAudioButton=e,this},e.prototype.showPauseVideoButton=function(e){return this.ShowPauseVideoButton=e,this},e.prototype.showAudioModeButton=function(e){return this.ShowAudioModeButton=e,this},e.prototype.startWithAudioMuted=function(e){return this.StartAudioMuted=e,this},e.prototype.startWithVideoMuted=function(e){return this.StartVideoMuted=e,this},e.prototype.setAnalyticsSettings=function(e){return this.analyticsSettings=e,this},e.prototype.setAppId=function(e){return this.appId=e,this},e.prototype.setDefaultAudioMode=function(e){return this.defaultAudioMode=e,this},e.prototype.showSwitchToVideoCallButton=function(e){return this.ShowSwitchToVideoCallButton=e,this},e.prototype.setAvatarMode=function(e){return this.AvatarMode=e,this},e.prototype.showRecordingButton=function(e){return this.ShowRecordingButton=e,this},e.prototype.startRecordingOnCallStart=function(e){return this.StartRecordingOnCallStart=e,this},e.prototype.build=function(){return new o(this)},e}();t.CallSettingsBuilder=s},function(e,t,n){"use strict";t.__esModule=!0,t.RTCUser=void 0;var r=n(0),o=function(){function e(e){this.avatar="",r.isFalsy(e)||(this.uid=e.toString())}return e.prototype.setUID=function(e){this.uid=e?e.toString():""},e.prototype.getUID=function(){return this.uid.toString()},e.prototype.setName=function(e){this.name=e?e.toString():""},e.prototype.getName=function(){return this.name.toString()},e.prototype.setAvatar=function(e){this.avatar=e?e.toString():""},e.prototype.getAvatar=function(){return this.avatar.toString()},e.prototype.setJWT=function(e){this.jwt=e?e.toString():""},e.prototype.getJWT=function(){return this.jwt.toString()},e.prototype.setResource=function(e){this.resource=e?e.toString():""},e.prototype.getResource=function(){return this.resource.toString()},e}();t.RTCUser=o},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,i,a,c){return new(a||(a=Promise))(function(n,t){function r(e){try{s(c.next(e))}catch(e){t(e)}}function o(e){try{s(c.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a(function(e){e(t)})).then(r,o)}s((c=c.apply(e,i||[])).next())})},o=this&&this.__generator||function(n,r){var o,s,i,e,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,s&&(i=2&t[0]?s.return:t[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,t[1])).done)return i;switch(s=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,s=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(i=0<(i=a.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){a.label=t[1];break}if(6===t[0]&&a.label<i[1]){a.label=i[1],i=t;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(t);break}i[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],s=0}finally{o=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};t.__esModule=!0,t.WSConnectionHelper=void 0;var p=n(3),l=n(1),s=n(34),i=n(38),S=n(0),a=n(39),d=n(33),c=n(27),E=n(22),u=n(23),C=n(56),h=n(57),T=n(58),g=n(59),_=n(60),f=n(61),R=n(62),A=n(24),I=n(29),O=n(28),N=n(5),m=n(63),y=a.ListenerHandlers.getInstance(),v=function(){function t(){}return t.getInstance=function(){try{return null!=this.wsConnectionHelper&&null!=this.wsConnectionHelper||(this.wsConnectionHelper=new t),this.wsConnectionHelper}catch(e){S.Logger.error("WSConnectionHelper: getInstance",e)}},t.prototype.WSLogin=function(t,n){var r=this;try{m.getWSURL().then(function(e){r.connection=new WebSocket(e),n&&r.connection&&r.connection.readyState==N.READY_STATE.CONNECTING&&n(r.connection.readyState),r.connection.onopen=function(e){r.onOpen(e,n),r.authenticateUser(t)},r.connection.onclose=function(e){r.onClose(e,n)},r.connection.onmessage=function(e){r.onMessage(e)}},function(e){S.Logger.error("WSConnectionHelper :: WSLogin",e)})}catch(e){S.Logger.error("WSConnectionHelper: WSLogin",e)}},t.prototype.onOpen=function(e,t){try{t&&this.connection&&t(this.connection.readyState)}catch(e){S.Logger.error("WSConnectionHelper: onOpen",e)}},t.prototype.onClose=function(e,t){try{t&&this.connection&&t(this.connection.readyState)}catch(e){S.Logger.error("WSConnectionHelper: onClose",e)}},t.prototype.onMessage=function(e){if(e.data&&"string"==typeof e.data)try{var t=JSON.parse(e.data);if(t&&t.action&&t.action===N.KEYS.PONG)return;var n=this.getCometChatEventFromMessage(JSON.parse(e.data));if(n.getDeviceId()===p.CometChat.getSessionId()&&n.getType()!==N.AUTH.TYPE)return;switch(n.getType()){case N.TYPING_INDICATOR.TYPE:this.publishTypingIndicator(n);break;case N.RECEIPTS.TYPE:this.publishReceipts(n);break;case N.PRESENCE.TYPE:this.publishPresence(n);break;case N.AUTH.TYPE:this.authResponseReceived(n);break;case N.MESSAGE.TYPE:this.publishMessages(n);break;case N.TRANSIENT_MESSAGE.TYPE:this.publishTransientMessage(n);break;default:S.Logger.log("WSHelper: onMessage :: unknown type",e.data)}}catch(e){S.Logger.error("WSHelper: onMessage",e)}else S.Logger.log("WSHelper: onMessage :: object data",e.data)},t.prototype.authenticateUser=function(E){var u=this;try{p.CometChat.getLoggedinUser().then(function(c){c?d.KeyStore.getInstance().get("deviceId").then(function(e){var t=null;window&&window.location&&window.location.origin&&(t=window.location.origin);var n="",r=e,o={version:l.SDKHeader.sdkVersion,apiVersion:l.APPINFO.apiVersion,origin:t,uts:(new Date).getTime()};S.isFalsy(p.CometChat.resource)||(o.resource=p.CometChat.resource),S.isFalsy(p.CometChat.platform)||(o.platform=p.CometChat.platform),S.isFalsy(p.CometChat.language)||(o.language=p.CometChat.language),navigator&&(n=navigator.userAgent);var s={appInfo:o,userAgent:n,deviceId:r,platform:l.SDKHeader.platform},i=new C.CometChatAuthEvent(p.CometChat.getAppId(),"","",c.getUid(),p.CometChat.getSessionId());if(i.setAuth(E),i.setPresenceSubscription(p.CometChat.appSettings.getSubscriptionType()),i.setDeviceId(p.CometChat.getSessionId()),i.setExtraParmaeters(s),m.checkConnection(u.connection)){var a=i.getAsString();u.connection.send(a)}}):S.Logger.log("no logged-in user","null")},function(e){S.Logger.log("error in fetching logged-in user",e)})}catch(e){S.Logger.error("WSConnectionHelper: startTypingIndicator",e)}},t.prototype.authResponseReceived=function(e){try{"200"===e.getCode()&&"OK"===e.getStatus()&&this.startPingingWS()}catch(e){S.Logger.error("WSConnectionHelper: authResponseReceived",e)}},t.prototype.WSLogout=function(){try{this.clearPingTimer(),m.checkConnection(this.connection)&&this.connection.close(N.LOGOUT_CODE,N.LOGOUT_REASON)}catch(e){S.Logger.error("WSConnectionHelper: WSLogout",e)}},t.prototype.startPingingWS=function(){var e=this;try{t.pingTimer||(t.pingTimer=setInterval(function(){return r(e,void 0,void 0,function(){var t,n;return o(this,function(e){switch(e.label){case 0:return m.checkConnection(this.connection)?(t=new T.CometChatPingEvent("","","","",""),n=t.getAsString(),this.connection.send(n),[4,this.listenForPong()]):[3,2];case 1:e.sent()?(S.Logger.log("WSConnectionHelper :: startPingingWS","pong success"),p.CometChat.getConnectionStatus()!=l.CONNECTION_STATUS.CONNECTED&&(this.WSLogout(),this.connection=null,p.CometChat.getInstance().makeWSConnection())):(S.Logger.log("WSConnectionHelper :: startPingingWS","pong failure"),this.WSLogout(),this.connection=null,p.CometChat.getInstance().setConnectionStatus(l.CONNECTION_STATUS.DISCONNECTED),y.connectionHandlers.map(function(e){try{e._eventListener&&(S.isFalsy(e._eventListener.onDisconnected)||e._eventListener.onDisconnected())}catch(e){S.Logger.error("WSConnectionHandlers: Disconnected Status",e)}}),p.CometChat.getInstance().accidentallyDisconnected()),e.label=2;case 2:return[2]}})})},15e3))}catch(e){S.Logger.error("WSConnectionHelper: startPingingWS",e)}},t.prototype.listenForPong=function(){var r=this;return new Promise(function(t,e){var n=setTimeout(function(){t(!1)},3e3);r.connection.addEventListener("message",function(e){e&&e.data&&"string"==typeof e.data&&(JSON.parse(e.data).action===N.KEYS.PONG&&(clearTimeout(n),t(!0)))})})},t.prototype.clearPingTimer=function(){t.pingTimer&&(clearInterval(t.pingTimer),t.pingTimer=void 0)},t.prototype.sendOnlineEvent=function(){var r=this;try{m.checkConnection(this.connection)&&p.CometChat.getLoggedinUser().then(function(e){if(e){var t={appId:p.CometChat.getAppId(),deviceId:p.CometChat.getSessionId(),type:N.PRESENCE.TYPE,body:{action:N.PRESENCE.ACTION.ONLINE,timestamp:Math.floor((new Date).getTime()/1e3),user:e}};if(m.checkConnection(r.connection)){var n=m.stringifyMessage(t);r.connection.send(n)}}else S.Logger.log("no logged-in user","null")},function(e){S.Logger.log("error in fetching logged-in user",e)})}catch(e){S.Logger.error("WSConnectionHelper: sendOnlineEvent",e)}},t.prototype.sendOfflineEvent=function(){var r=this;try{m.checkConnection(this.connection)&&p.CometChat.getLoggedinUser().then(function(e){if(e){var t={appId:p.CometChat.getAppId(),deviceId:p.CometChat.getSessionId(),type:N.PRESENCE.TYPE,body:{action:N.PRESENCE.ACTION.OFFLINE,timestamp:Math.floor((new Date).getTime()/1e3),user:e}};if(m.checkConnection(r.connection)){var n=m.stringifyMessage(t);r.connection.send(n)}}else S.Logger.log("no logged-in user","null")},function(e){S.Logger.log("error in fetching logged-in user",e)})}catch(e){S.Logger.error("WSConnectionHelper: sendOfflineEvent",e)}},t.prototype.startTypingIndicator=function(o,s,i){var a=this;try{p.CometChat.getLoggedinUser().then(function(e){if(e){var t=new O.TypingIndicator(o,s);t.setSender(e),i&&t.setMetadata(i);var n=new R.CometChatTypingEvent(p.CometChat.getAppId(),o,s,e.getUid(),p.CometChat.getSessionId());if(n.setAction(N.TYPING_INDICATOR.ACTION.STARTED),n.setTypingIndicator(t),m.checkConnection(a.connection)){var r=n.getAsString();a.connection.send(r)}}else S.Logger.log("no logged-in user","null")},function(e){S.Logger.log("error in fetching logged-in user",e)})}catch(e){S.Logger.error("WSConnectionHelper: startTypingIndicator",e)}},t.prototype.pauseTypingIndicator=function(o,s,i){var a=this;try{p.CometChat.getLoggedinUser().then(function(e){if(e){var t=new O.TypingIndicator(o,s);t.setSender(e),i&&t.setMetadata(i);var n=new R.CometChatTypingEvent(p.CometChat.getAppId(),o,s,e.getUid(),p.CometChat.getSessionId());if(n.setAction(N.TYPING_INDICATOR.ACTION.ENDED),n.setTypingIndicator(t),m.checkConnection(a.connection)){var r=n.getAsString();a.connection.send(r)}}else S.Logger.log("no logged-in user","null")},function(e){S.Logger.log("error in fetching logged-in user",e)})}catch(e){S.Logger.error("WSConnectionHelper: pauseTypingIndicator",e)}},t.prototype.markAsRead=function(o,s,i,a){var c=this;try{p.CometChat.getLoggedinUser().then(function(e){if(e){var t=new _.CometChatReceiptEvent(p.CometChat.getAppId(),o,s,e.getUid(),p.CometChat.getSessionId(),a);t.setAction(N.RECEIPTS.ACTION.READ);var n=new A.MessageReceipt;if(n.setSender(e),n.setReceiverType(s),n.setReceiver(o),n.setReceiptType(N.RECEIPTS.RECEIPT_TYPE.READ_RECEIPT),n.setMessageId(i),n.setTimestamp(Math.floor((new Date).getTime()/1e3).toString()),t.setMessageReceipt(n),m.checkConnection(c.connection)){var r=t.getAsString();c.connection.send(r)}}else S.Logger.log("no logged-in user","null")},function(e){S.Logger.log("error in fetching logged-in user",e)})}catch(e){S.Logger.error("WSConnectionHelper: markAsRead",e)}},t.prototype.markAsDelivered=function(o,s,i,a){var c=this;try{p.CometChat.getLoggedinUser().then(function(e){if(e){var t=new _.CometChatReceiptEvent(p.CometChat.getAppId(),o,s,e.getUid(),p.CometChat.getSessionId(),a);t.setAction(N.RECEIPTS.ACTION.DELIVERED);var n=new A.MessageReceipt;if(n.setSender(e),n.setReceiverType(s),n.setReceiver(o),n.setReceiptType(N.RECEIPTS.RECEIPT_TYPE.DELIVERY_RECEIPT),n.setMessageId(i),n.setTimestamp(Math.floor((new Date).getTime()/1e3).toString()),t.setMessageReceipt(n),m.checkConnection(c.connection)){var r=t.getAsString();c.connection.send(r)}}else S.Logger.log("no logged-in user","null")},function(e){S.Logger.log("error in fetching logged-in user",e)})}catch(e){S.Logger.error("WSConnectionHelper: markAsDelivered",e)}},t.prototype.sendTransientMessage=function(o,s,i){var a=this;try{p.CometChat.getLoggedinUser().then(function(e){if(e){var t=new I.TransientMessage(o,s,i);t.setSender(e);var n=new f.CometChatTransientEvent(p.CometChat.getAppId(),o,s,e.getUid(),p.CometChat.getSessionId());if(n.setTransientMessage(t),m.checkConnection(a.connection)){var r=n.getAsString();a.connection.send(r)}}else S.Logger.log("no logged-in user","null")},function(e){S.Logger.log("error in fetching logged-in user",e)})}catch(e){S.Logger.error("WSConnectionHelper: sendTransientMessage",e)}},t.prototype.publishTypingIndicator=function(e){try{var t=e.getTypingIndicator();switch(e.getAction()){case N.TYPING_INDICATOR.ACTION.STARTED:y.messageHandlers.map(function(e){e._eventListener.onTypingStarted&&e._eventListener.onTypingStarted(t)}),i.TypingNotificationController.addIncomingTypingStarted(t);break;case N.TYPING_INDICATOR.ACTION.ENDED:y.messageHandlers.map(function(e){e._eventListener.onTypingEnded&&e._eventListener.onTypingEnded(t)}),i.TypingNotificationController.removeIncomingTypingStarted(t)}}catch(e){S.Logger.error("WSHelper: publishTypingIndicator",e)}},t.prototype.publishReceipts=function(e){try{var t=e.getMessageReceipt();switch(e.getAction()){case N.RECEIPTS.ACTION.DELIVERED:y.messageHandlers.map(function(e){e._eventListener.onMessagesDelivered&&e._eventListener.onMessagesDelivered(t)});break;case N.RECEIPTS.ACTION.READ:y.messageHandlers.map(function(e){e._eventListener.onMessagesRead&&e._eventListener.onMessagesRead(t)})}}catch(e){S.Logger.error("WSHelper: publishReceipts",e)}},t.prototype.publishPresence=function(e){try{var t=e.getUser();switch(t.setLastActiveAt(e.getTimestamp()),e.getAction()){case N.PRESENCE.ACTION.ONLINE:case N.PRESENCE.ACTION.AVAILABLE:t.setStatus(l.PresenceConstatnts.STATUS.ONLINE),y.userHandlers.map(function(e){S.isFalsy(e._eventListener.onUserOnline)||e._eventListener.onUserOnline(t)});break;case N.PRESENCE.ACTION.OFFLINE:t.setStatus(l.PresenceConstatnts.STATUS.OFFLINE),y.userHandlers.map(function(e){S.isFalsy(e._eventListener.onUserOffline)||e._eventListener.onUserOffline(t)})}}catch(e){S.Logger.error("WSHelper: publishPresence",e)}},t.prototype.publishMessages=function(e){try{var t=e.getMessage();t&&t.getId()&&c.MessageListnerMaping.getInstance().set("all",t.getId()),t instanceof u.Call?this.publishCallMessage(t):t instanceof E.Action?this.publishActionMessage(t):this.publishMessage(t)}catch(e){S.Logger.error("WSHelper: publishMessages",e)}},t.prototype.publishMessage=function(n){try{y.messageHandlers.map(function(e){if(e._eventListener){var t=n;switch(t.getType()){case l.MessageConstatnts.TYPE.TEXT:S.isFalsy(e._eventListener.onTextMessageReceived)||e._eventListener.onTextMessageReceived(n);break;case l.MessageConstatnts.TYPE.CUSTOM:S.isFalsy(e._eventListener.onCustomMessageReceived)||e._eventListener.onCustomMessageReceived(n);break;default:t.getCategory()==l.MessageCategory.CUSTOM?S.isFalsy(e._eventListener.onCustomMessageReceived)||e._eventListener.onCustomMessageReceived(n):S.isFalsy(e._eventListener.onMediaMessageReceived)||e._eventListener.onMediaMessageReceived(n)}}})}catch(e){S.Logger.error("WSHelper: publishMessage",e)}},t.prototype.publishCallMessage=function(t){try{var n=s.CallController.getInstance().getActiveCall();switch(t.getStatus()){case l.CallConstants.CALL_STATUS.INITIATED:t.getReceiverType()==l.CallConstants.RECEIVER_TYPE_GROUP?y.callHandlers.map(function(e){t.getCallInitiator().getUid().toLocaleLowerCase()!=p.CometChat.user.getUid().toLocaleLowerCase()&&(S.isFalsy(e._eventListener.onIncomingCallReceived)||e._eventListener.onIncomingCallReceived(t))}):y.callHandlers.map(function(e){S.isFalsy(e._eventListener.onIncomingCallReceived)||e._eventListener.onIncomingCallReceived(t)});break;case l.CallConstants.CALL_STATUS.ONGOING:t.getReceiverType()==l.CallConstants.RECEIVER_TYPE_GROUP?t.getCallInitiator().getUid().toLocaleLowerCase()==p.CometChat.user.getUid().toLocaleLowerCase()&&y.callHandlers.map(function(e){S.isFalsy(e._eventListener.onOutgoingCallAccepted)||e._eventListener.onOutgoingCallAccepted(t)}):y.callHandlers.map(function(e){S.isFalsy(e._eventListener.onOutgoingCallAccepted)||e._eventListener.onOutgoingCallAccepted(t)});break;case l.CallConstants.CALL_STATUS.UNANSWERED:if(t.getCallInitiator().getUid().toLocaleLowerCase()==p.CometChat.user.getUid().toLocaleLowerCase())y.callHandlers.map(function(e){S.isFalsy(e._eventListener.onOutgoingCallRejected)||e._eventListener.onOutgoingCallRejected(t)});else{if(null!==n&&n.getSessionId()===t.getSessionId())try{s.CallController.getInstance().endCall()}catch(e){S.Logger.error("CallError",e)}y.callHandlers.map(function(e){S.isFalsy(e._eventListener.onIncomingCallCancelled)||e._eventListener.onIncomingCallCancelled(t)})}break;case l.CallConstants.CALL_STATUS.REJECTED:if(t.getReceiverType()==l.CallConstants.RECEIVER_TYPE_GROUP)t.getCallInitiator().getUid().toLocaleLowerCase()==p.CometChat.user.getUid().toLocaleLowerCase()&&y.callHandlers.map(function(e){S.isFalsy(e._eventListener.onOutgoingCallRejected)||e._eventListener.onOutgoingCallRejected(t)});else{if(null!==n&&n.getSessionId()===t.getSessionId())try{s.CallController.getInstance().endCall()}catch(e){S.Logger.error("CallError",e)}y.callHandlers.map(function(e){S.isFalsy(e._eventListener.onOutgoingCallRejected)||e._eventListener.onOutgoingCallRejected(t)})}break;case l.CallConstants.CALL_STATUS.BUSY:t.getReceiverType()==l.CallConstants.RECEIVER_TYPE_GROUP?t.getCallInitiator().getUid().toLocaleLowerCase()==p.CometChat.user.getUid().toLocaleLowerCase()&&y.callHandlers.map(function(e){S.isFalsy(e._eventListener.onOutgoingCallRejected)||e._eventListener.onOutgoingCallRejected(t)}):y.callHandlers.map(function(e){if(null!==n&&n.getSessionId()===t.getSessionId())try{s.CallController.getInstance().endCall()}catch(e){S.Logger.error("CallError",e)}S.isFalsy(e._eventListener.onOutgoingCallRejected)||e._eventListener.onOutgoingCallRejected(t)});break;case l.CallConstants.CALL_STATUS.CANCELLED:if(y.callHandlers.map(function(e){S.isFalsy(e._eventListener.onIncomingCallCancelled)||e._eventListener.onIncomingCallCancelled(t)}),null!==n&&n.getSessionId()===t.getSessionId())try{s.CallController.getInstance().endCall()}catch(e){S.Logger.error("CallError",e)}break;case l.CallConstants.CALL_STATUS.ENDED:if(s.CallController.getInstance().getCallListner()&&s.CallController.getInstance().getCallListner()._eventListener.onCallEnded(t),null!==n&&n.getSessionId()===t.getSessionId())try{s.CallController.getInstance().endCall()}catch(e){S.Logger.error("CallError",e)}break;default:S.Logger.log("WSHelper: publishCallMessage :: unknown status",t)}}catch(e){S.Logger.error("WSHelper: publishCallMessage",e)}},t.prototype.publishActionMessage=function(t){try{switch(t.getAction()){case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_JOINED:y.groupHandlers.map(function(e){S.isFalsy(e._eventListener.onGroupMemberJoined)||e._eventListener.onGroupMemberJoined(t,t.getActionBy(),t.getActionFor())});break;case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_INVITED:y.groupHandlers.map(function(e){S.isFalsy(e._eventListener.onGroupMemberJoined)||e._eventListener.onGroupMemberJoined(t,t.getActionBy(),t.getActionFor())});break;case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_LEFT:y.groupHandlers.map(function(e){S.isFalsy(e._eventListener.onGroupMemberLeft)||e._eventListener.onGroupMemberLeft(t,t.getActionBy(),t.getActionFor())});break;case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_BANNED:y.groupHandlers.map(function(e){S.isFalsy(e._eventListener.onGroupMemberBanned)||e._eventListener.onGroupMemberBanned(t,t.getActionOn(),t.getActionBy(),t.getActionFor())});break;case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_KICKED:y.groupHandlers.map(function(e){S.isFalsy(e._eventListener.onGroupMemberKicked)||e._eventListener.onGroupMemberKicked(t,t.getActionOn(),t.getActionBy(),t.getActionFor())});break;case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_UNBANNED:y.groupHandlers.map(function(e){S.isFalsy(e._eventListener.onGroupMemberUnbanned)||e._eventListener.onGroupMemberUnbanned(t,t.getActionOn(),t.getActionBy(),t.getActionFor())});break;case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_SCOPE_CHANGED:y.groupHandlers.map(function(e){S.isFalsy(e._eventListener.onGroupMemberScopeChanged)||e._eventListener.onGroupMemberScopeChanged(t,t.getActionOn(),t.getNewScope(),t.getOldScope(),t.getActionFor())});break;case l.ActionConstatnts.ACTION_TYPE.TYPE_MESSAGE_EDITED:y.messageHandlers.map(function(e){S.isFalsy(e._eventListener.onMessageEdited)||e._eventListener.onMessageEdited(t.getActionOn())});break;case l.ActionConstatnts.ACTION_TYPE.TYPE_MESSAGE_DELETED:y.messageHandlers.map(function(e){S.isFalsy(e._eventListener.onMessageDeleted)||e._eventListener.onMessageDeleted(t.getActionOn())});break;case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_ADDED:y.groupHandlers.map(function(e){S.isFalsy(e._eventListener.onGroupMemberAddedToGroup)||e._eventListener.onGroupMemberAddedToGroup(t,t.getActionOn(),t.getActionBy(),t.getActionFor())});break;default:S.Logger.log("WSHelper: publishActionMessage :: unknown action",t)}}catch(e){S.Logger.error("WSHelper: publishActionMessage",e)}},t.prototype.publishTransientMessage=function(e){try{var t=e.getTransientMessage();y.messageHandlers.map(function(e){e._eventListener.onTransientMessageReceived&&e._eventListener.onTransientMessageReceived(t)})}catch(e){S.Logger.error("WSHelper: publishTransientMessage",e)}},t.prototype.getCometChatEventFromMessage=function(e){try{if(e.hasOwnProperty(N.KEYS.TYPE))switch(e.type){case N.TYPING_INDICATOR.TYPE:return R.CometChatTypingEvent.getTypingEventFromJSON(e);case N.RECEIPTS.TYPE:return _.CometChatReceiptEvent.getReceiptEventFromJSON(e);case N.PRESENCE.TYPE:return g.CometChatPresenceEvent.getPresenceEventFromJSON(e);case N.MESSAGE.TYPE:return h.CometChatMessageEvent.getMessageEventFromJSON(e);case N.AUTH.TYPE:return C.CometChatAuthEvent.getAuthEventFromJSON(e);case N.TRANSIENT_MESSAGE.TYPE:return f.CometChatTransientEvent.getTransientEventFromJSON(e)}}catch(e){S.Logger.error("WSConnectionHelper: getCometChatEventFromMessage",e)}},t.wsConnectionHelper=new t,t}();t.WSConnectionHelper=v},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0,t.CometChatAuthEvent=void 0;var p=n(5),s=function(i){function u(e,t,n,r,o){var s=i.call(this,e,t,n,r,o)||this;return s.setType(p.AUTH.TYPE),s}return o(u,i),u.prototype.getStatus=function(){return this.status},u.prototype.setStatus=function(e){this.status=e},u.prototype.getCode=function(){return this.code},u.prototype.setCode=function(e){this.code=e},u.prototype.setAuth=function(e){this.auth=e},u.prototype.getAuth=function(){return this.auth},u.prototype.setPresenceSubscription=function(e){this.presenceSubscription=e},u.prototype.getPresenceSubscription=function(){return this.presenceSubscription},u.prototype.setDeviceId=function(e){this.deviceId=e},u.prototype.getdeviceId=function(){return this.deviceId},u.prototype.setExtraParmaeters=function(e){this.params=e},u.prototype.getExtraParameters=function(){return this.params},u.prototype.getAsString=function(){return JSON.stringify(this.getAsJSONObject())},u.prototype.getAsJSONObject=function(){var e=this.getCometChatEventJSON(),t={};return t[p.KEYS.AUTH]=this.auth,t[p.KEYS.DEVICE_ID]=this.deviceId,t[p.KEYS.PRESENCE_SUBSCRIPTION]=this.presenceSubscription,t[p.KEYS.PARAMS]=this.params,e[p.KEYS.BODY]=t,e},u.getAuthEventFromJSON=function(e){var t=e[p.KEYS.APP_ID],n=e[p.KEYS.RECEIVER],r=e[p.KEYS.RECEIVER_TYPE],o=e[p.KEYS.DEVICE_ID],s=e[p.KEYS.SENDER],i=e[p.KEYS.BODY],a=i[p.KEYS.STATUS],c=i[p.KEYS.CODE],E=new u(t,n,r,s,o);return E.setStatus(a),E.setCode(c),E},u}(n(9).CometChatEvent);t.CometChatAuthEvent=s},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0,t.CometChatMessageEvent=void 0;var u=n(10),p=n(5),s=function(i){function E(e,t,n,r,o){var s=i.call(this,e,t,n,r,o)||this;return s.setType(p.MESSAGE.TYPE),s}return o(E,i),E.prototype.getMessage=function(){return this.message},E.prototype.setMessage=function(e){this.message=e},E.getMessageEventFromJSON=function(e){var t=e[p.KEYS.APP_ID],n=e[p.KEYS.RECEIVER],r=e[p.KEYS.RECEIVER_TYPE],o=e[p.KEYS.DEVICE_ID],s=e[p.KEYS.SENDER],i=e[p.KEYS.BODY],a=new E(t,n,r,s,o),c=u.MessageController.trasformJSONMessge(i);return a.setMessage(c),a},E}(n(9).CometChatEvent);t.CometChatMessageEvent=s},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0,t.CometChatPingEvent=void 0;var i=n(5),s=function(s){function e(e,t,n,r,o){return s.call(this,e,t,n,r,o)||this}return o(e,s),e.prototype.getAsString=function(){return JSON.stringify(this.getAsJSONObject())},e.prototype.getAsJSONObject=function(){var e={};return e[i.KEYS.ACTION]=i.KEYS.PING,e[i.KEYS.ACK]="true",e},e}(n(9).CometChatEvent);t.CometChatPingEvent=s},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0,t.CometChatPresenceEvent=void 0;var u=n(5),s=n(9),p=n(4),i=function(i){function E(e,t,n,r,o){var s=i.call(this,e,t,n,r,o)||this;return s.setType(u.PRESENCE.TYPE),s}return o(E,i),E.prototype.getAction=function(){return this.action},E.prototype.setAction=function(e){this.action=e},E.prototype.getUser=function(){return this.user},E.prototype.setUser=function(e){this.user=e},E.prototype.getTimestamp=function(){return this.timestamp},E.prototype.setTimestamp=function(e){this.timestamp=e},E.getPresenceEventFromJSON=function(e){var t=e[u.KEYS.APP_ID],n=e[u.KEYS.DEVICE_ID],r=e[u.KEYS.SENDER],o=e[u.KEYS.BODY],s=o[u.KEYS.ACTION],i=o[u.KEYS.USER],a=o[u.KEYS.TIMESTAMP],c=new E(t,"","",r,n);return c.setAction(s),c.setUser(new p.User(i)),c.setTimestamp(a),c},E}(s.CometChatEvent);t.CometChatPresenceEvent=i},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0,t.CometChatReceiptEvent=void 0;var d=n(5),s=n(9),C=n(24),h=n(4),i=function(a){function S(e,t,n,r,o,s){var i=a.call(this,e,t,n,r,o,s)||this;return i.setType(d.RECEIPTS.TYPE),i}return o(S,a),S.prototype.getAction=function(){return this.action},S.prototype.setAction=function(e){this.action=e},S.prototype.getMessageReceipt=function(){return this.receipt},S.prototype.setMessageReceipt=function(e){this.receipt=e},S.prototype.getAsString=function(){return JSON.stringify(this.getAsJSONObject())},S.prototype.getAsJSONObject=function(){var e=this.getCometChatEventJSON(),t={};return t[d.KEYS.ACTION]=this.action,t[d.KEYS.MESSAGE_ID]=this.receipt.getMessageId(),t[d.KEYS.USER]=this.receipt.getSender(),e[d.KEYS.BODY]=t,e},S.getReceiptEventFromJSON=function(e){var t=e[d.KEYS.APP_ID],n=e[d.KEYS.RECEIVER],r=e[d.KEYS.RECEIVER_TYPE],o=e[d.KEYS.DEVICE_ID],s=e[d.KEYS.SENDER],i=e[d.KEYS.BODY],a=i[d.KEYS.ACTION],c=i[d.KEYS.USER],E=i[d.KEYS.MESSAGE_ID],u=i[d.KEYS.TIMESTAMP],p=new S(t,n,r,s,o);p.setAction(a);var l=new C.MessageReceipt;return l.setSender(new h.User(c)),l.setReceiverType(r),l.setReceiver(n),a===d.RECEIPTS.ACTION.DELIVERED&&(l.setReceiptType(d.RECEIPTS.RECEIPT_TYPE.DELIVERY_RECEIPT),l.setDeliveredAt(u)),a===d.RECEIPTS.ACTION.READ&&(l.setReceiptType(d.RECEIPTS.RECEIPT_TYPE.READ_RECEIPT),l.setReadAt(u)),l.setMessageId(E.toString()),l.setTimestamp(u),p.setMessageReceipt(l),p},S}(s.CometChatEvent);t.CometChatReceiptEvent=i},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0,t.CometChatTransientEvent=void 0;var l=n(5),s=n(9),S=n(29),d=n(4),i=function(i){function p(e,t,n,r,o){var s=i.call(this,e,t,n,r,o)||this;return s.setType(l.TRANSIENT_MESSAGE.TYPE),s}return o(p,i),p.prototype.getTransientMessage=function(){return this.transientMessage},p.prototype.setTransientMessage=function(e){this.transientMessage=e},p.prototype.getAsString=function(){return JSON.stringify(this.getAsJSONObject())},p.prototype.getAsJSONObject=function(){var e=this.getCometChatEventJSON(),t={};return t[l.KEYS.USER]=this.transientMessage.getSender(),this.transientMessage.getData()&&(t[l.KEYS.DATA]=this.transientMessage.getData()),e[l.KEYS.BODY]=t,e},p.getTransientEventFromJSON=function(e){var t=e[l.KEYS.APP_ID],n=e[l.KEYS.RECEIVER],r=e[l.KEYS.RECEIVER_TYPE],o=e[l.KEYS.DEVICE_ID],s=e[l.KEYS.SENDER],i=e[l.KEYS.BODY],a=i[l.KEYS.USER],c=i[l.KEYS.DATA],E=new p(t,n,r,s,o),u=new S.TransientMessage(n,r,c);return u.setSender(new d.User(a)),i.hasOwnProperty(l.KEYS.DATA)&&i[l.KEYS.DATA]&&u.setData(c),E.setTransientMessage(u),E},p}(s.CometChatEvent);t.CometChatTransientEvent=i},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});t.__esModule=!0,t.CometChatTypingEvent=void 0;var S=n(5),s=n(9),d=n(28),C=n(4),i=function(i){function l(e,t,n,r,o){var s=i.call(this,e,t,n,r,o)||this;return s.setType(S.TYPING_INDICATOR.TYPE),s}return o(l,i),l.prototype.getAction=function(){return this.action},l.prototype.setAction=function(e){this.action=e},l.prototype.getTypingIndicator=function(){return this.typingIndicator},l.prototype.setTypingIndicator=function(e){this.typingIndicator=e},l.prototype.getAsString=function(){return JSON.stringify(this.getAsJSONObject())},l.prototype.getAsJSONObject=function(){var e=this.getCometChatEventJSON(),t={};return t[S.KEYS.ACTION]=this.action,t[S.KEYS.USER]=this.typingIndicator.getSender(),this.typingIndicator.getMetadata()&&(t[S.KEYS.METADATA]=this.typingIndicator.getMetadata()),e[S.KEYS.BODY]=t,e},l.getTypingEventFromJSON=function(e){var t=e[S.KEYS.APP_ID],n=e[S.KEYS.RECEIVER],r=e[S.KEYS.RECEIVER_TYPE],o=e[S.KEYS.DEVICE_ID],s=e[S.KEYS.SENDER],i=e[S.KEYS.BODY],a=i[S.KEYS.ACTION],c=i[S.KEYS.USER],E=i[S.KEYS.METADATA],u=new l(t,n,r,s,o);u.setAction(a);var p=new d.TypingIndicator(n,r);return p.setSender(new C.User(c)),i.hasOwnProperty(S.KEYS.METADATA)&&i[S.KEYS.METADATA]&&p.setMetadata(E),u.setTypingIndicator(p),u},l}(s.CometChatEvent);t.CometChatTypingEvent=i},function(e,t,n){"use strict";t.__esModule=!0,t.getWSURL=t.stringifyMessage=t.checkConnection=void 0;var r=n(1),o=n(0),s=n(5);t.checkConnection=function(e){return e&&e.readyState===s.READY_STATE.OPEN},t.stringifyMessage=function(e){return JSON.stringify(e)},t.getWSURL=function(){return new Promise(function(n,e){o.getAppSettings().then(function(e){var t=s.WS.protocol+o.getChatHost(e)+":"+e[r.APP_SETTINGS.KEYS.CHAT_WSS_PORT];n(t)},function(e){o.Logger.error("WSHelper :: getWSURL",e)})})}},function(e,t,n){"use strict";t.__esModule=!0,t.CCExtension=void 0;var r=n(0),o=function(){function e(e){this.id="",this.name="",e&&(r.isFalsy(e.id)||(this.id=e.id),r.isFalsy(e.name)||(this.name=e.name))}return e.prototype.getId=function(){return this.id},e.prototype.getName=function(){return this.name},e}();t.CCExtension=o},function(e,t,n){"use strict";t.__esModule=!0,t.AudioMode=void 0;var r=n(0),o=function(){function e(e,t){this.isSelected=!1,this.mode="",r.isFalsy(e)||(this.mode=e.toString()),this.isSelected=t||!1}return e.prototype.setMode=function(e){this.mode=e?e.toString():""},e.prototype.getMode=function(){return this.mode.toString()},e.prototype.setIsSelected=function(e){this.isSelected=e||!1},e.prototype.getIsSelected=function(){return this.isSelected},e}();t.AudioMode=o},function(e,t,n){var i=n(67),a=n(68);e.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[r+s]=o[s];return t||a(o)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var o=[],n=0;n<256;++n)o[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,r=o;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}}])}),function(){try{require("@cometchat-pro/ionic-calls")&&(window.CometChatCalling={},window.CometChatCalling.isCallingComponentInstalled=!0,window.CometChatCalling.Calling=require("@cometchat-pro/ionic-calls").Calling)}catch(e){}}();